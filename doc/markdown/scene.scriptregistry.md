<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](doc/markdown/./index.md) &gt; [@zephyr3d/scene](doc/markdown/./scene.md) &gt; [ScriptRegistry](doc/markdown/./scene.scriptregistry.md)

## ScriptRegistry class

Resolves, builds, and serves runtime modules using a VFS.

Responsibilities: - Resolve logical module IDs to physical paths or URLs. - In editor mode, rewrite import specifiers and serve modules as data URLs after transpile. - Transpile TypeScript to JavaScript on the fly (requires `window.ts` TypeScript runtime). - Gather static and dynamic import dependencies for tooling.

Modes: - Editor mode (`editorMode === true`<!-- -->): modules are rewritten to data URLs after transpile/build. - Runtime mode (`editorMode === false`<!-- -->): returns .js URLs directly (with .ts -<!-- -->&gt; .js mapping).

Caching: - Built modules are memoized in `_built` map keyed by logical ID.

**Signature:**

```typescript
declare class ScriptRegistry 
```

## Constructors

<table><thead><tr><th>

Constructor


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[(constructor)(vfs, scriptsRoot, editorMode)](doc/markdown/./scene.scriptregistry._constructor_.md)


</td><td>


</td><td>

Constructs a new instance of the `ScriptRegistry` class


</td></tr>
</tbody></table>

## Properties

<table><thead><tr><th>

Property


</th><th>

Modifiers


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[editorMode](doc/markdown/./scene.scriptregistry.editormode.md)


</td><td>


</td><td>

boolean


</td><td>

Whether the registry operates in editor mode (rewrite/build to data URLs).


</td></tr>
<tr><td>

[scriptsRoot](doc/markdown/./scene.scriptregistry.scriptsroot.md)


</td><td>


</td><td>

string


</td><td>

The root path used by `#/` specifiers.


</td></tr>
<tr><td>

[VFS](doc/markdown/./scene.scriptregistry.vfs.md)


</td><td>


</td><td>

[VFS](doc/markdown/./base.vfs.md)


</td><td>

The active virtual file system.

Assigning a new VFS clears the build cache.


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[fetchSource(id)](doc/markdown/./scene.scriptregistry.fetchsource.md)


</td><td>

`protected`


</td><td>

Fetches raw source for a logical module id by probing known extensions.

Search order: - If `id` already ends with `.ts` or `.js` and is a file -<!-- -->&gt; return it. - Else try `.id.ts`<!-- -->, then `.id.js`<!-- -->.


</td></tr>
<tr><td>

[getDependencies(entryId, fromId, dependencies)](doc/markdown/./scene.scriptregistry.getdependencies.md)


</td><td>


</td><td>

Recursively gathers direct static and dynamic import dependencies for a module.

Only relative specifiers (`./` or `../`<!-- -->) are followed. Absolute, special, and bare module specifiers are ignored here.


</td></tr>
<tr><td>

[resolveLogicalId(spec, fromId)](doc/markdown/./scene.scriptregistry.resolvelogicalid.md)


</td><td>


</td><td>

Resolves a specifier to a logical id suitable for further processing.

Resolution rules: - `#/path`<!-- -->: resolved against `scriptsRoot` via VFS join/normalize. - `./` or `../`<!-- -->: resolved relative to `fromId` directory (requires `fromId`<!-- -->). - `/absolute`<!-- -->: treated as absolute from root (normalized). - Bare module in editor mode: if `/deps.lock.json` exists and contains an entry, map to the dependency's `entry` path; otherwise return as-is. - Else (non-editor bare module): return `spec` unchanged (external).


</td></tr>
<tr><td>

[resolveRuntimeUrl(entryId)](doc/markdown/./scene.scriptregistry.resolveruntimeurl.md)


</td><td>


</td><td>

Resolves a module entry to a URL suitable for dynamic import.

Behavior: - In editor mode, builds the module to a data URL. - Otherwise, returns `.js` URL directly: - If `id` ends with `.js`<!-- -->: return as-is. - If `id` ends with `.ts`<!-- -->: map to `.js` (assumes pre-built file exists). - Else: append `.js`<!-- -->.


</td></tr>
<tr><td>

[resolveSourcePath(logicalId)](doc/markdown/./scene.scriptregistry.resolvesourcepath.md)


</td><td>


</td><td>

Resolves a logical id to a concrete source path and type by probing extensions.

Rules: - If `logicalId` ends with `.ts` or `.js`<!-- -->/`.mjs` and is a file, return it. - Else probe `logicalId.ts`<!-- -->, `logicalId.js`<!-- -->, `logicalId.mjs` in that order. - Maps `.mjs` to type `'js'`<!-- -->.


</td></tr>
</tbody></table>

