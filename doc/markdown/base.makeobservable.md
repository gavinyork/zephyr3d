<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](doc/markdown/./index.md) &gt; [@zephyr3d/base](doc/markdown/./base.md) &gt; [makeObservable](doc/markdown/./base.makeobservable.md)

## makeObservable() function

Mixin that augments a class with [IEventTarget](doc/markdown/./base.ieventtarget.md) capabilities.

It returns a higher-order factory that, when instantiated with an event map `X`<!-- -->, produces a subclass adding `on/once/off/dispatchEvent` and the internal listener management.

Usage:

```ts
class Base {}
const Eventful = makeObservable(Base)<{ 'ready': []; 'data': [number] }>();
const obj = new Eventful();
obj.on('data', (n) => console.log(n));
obj.dispatchEvent('data', 42);
```

**Signature:**

```typescript
declare function makeObservable<C extends GenericConstructor | ObjectConstructor>(cls: C): <X extends EventMap>() => {
    new (...args: any[]): {
        _listeners: EventListenerMap<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X>;
        on<K extends keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)>(type: K, listener: EventListener<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X, K>, context?: unknown): void;
        once<K extends keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)>(type: K, listener: EventListener<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X, K>, context?: unknown): void;
        off<K extends keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)>(type: K, listener: EventListener<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X, K>, context?: unknown): void;
        dispatchEvent<K extends keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)>(type: K, ...args: (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)[K]): void;
        _internalAddEventListener<K extends keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)>(listenerMap: EventListenerMap<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X>, type: K, listener: EventListener<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X, K>, options: REventHandlerOptions): EventListenerMap<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X>;
        _internalRemoveEventListener<K extends keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)>(listenerMap: EventListenerMap<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X>, type: K, listener: EventListener<InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X, K>, context: unknown): void;
        _invokeLocalListeners<K extends keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)>(type: keyof (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X), ...args: (InstanceType<C> extends IEventTarget<infer U extends EventMap> ? X & U : X)[K]): void;
    };
} & C;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

cls


</td><td>

C


</td><td>

The base class to extend


</td></tr>
</tbody></table>

**Returns:**

&lt;X extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt;() =&gt; { new (...args: any\[\]): { \_listeners: EventListenerMap&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X&gt;; on&lt;K extends keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)&gt;(type: K, listener: [EventListener](doc/markdown/./base.eventlistener_2.md)<!-- -->&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X, K&gt;, context?: unknown): void; once&lt;K extends keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)&gt;(type: K, listener: [EventListener](doc/markdown/./base.eventlistener_2.md)<!-- -->&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X, K&gt;, context?: unknown): void; off&lt;K extends keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)&gt;(type: K, listener: [EventListener](doc/markdown/./base.eventlistener_2.md)<!-- -->&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X, K&gt;, context?: unknown): void; dispatchEvent&lt;K extends keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)&gt;(type: K, ...args: (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)\[K\]): void; \_internalAddEventListener&lt;K extends keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)&gt;(listenerMap: EventListenerMap&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X&gt;, type: K, listener: [EventListener](doc/markdown/./base.eventlistener_2.md)<!-- -->&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X, K&gt;, options: [REventHandlerOptions](doc/markdown/./base.reventhandleroptions.md)<!-- -->): EventListenerMap&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X&gt;; \_internalRemoveEventListener&lt;K extends keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)&gt;(listenerMap: EventListenerMap&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X&gt;, type: K, listener: [EventListener](doc/markdown/./base.eventlistener_2.md)<!-- -->&lt;InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X, K&gt;, context: unknown): void; \_invokeLocalListeners&lt;K extends keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)&gt;(type: keyof (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X), ...args: (InstanceType&lt;C&gt; extends [IEventTarget](doc/markdown/./base.ieventtarget.md)<!-- -->&lt;infer U extends [EventMap](doc/markdown/./base.eventmap.md)<!-- -->&gt; ? X &amp; U : X)\[K\]): void; }; } &amp; C

A generic factory that accepts an event map and returns an extended class

