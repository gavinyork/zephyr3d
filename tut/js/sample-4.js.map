{"version":3,"file":"sample-4.js","sources":["../../../../../../libs/base/dist/utils.js","../../../../../../libs/base/dist/event.js","../../../../../../libs/base/dist/math/types.js","../../../../../../libs/base/dist/math/vector.js","../../../../../../libs/base/dist/rectspacker.js","../../../../../../libs/base/dist/ref.js","../../../../../../libs/device/dist/base_types.js","../../../../../../libs/device/dist/builder/types.js","../../../../../../libs/device/dist/gpuobject.js","../../../../../../libs/device/dist/vertexdata.js","../../../../../../libs/device/dist/timer.js","../../../../../../libs/device/dist/pool.js","../../../../../../libs/device/dist/builder/reflection.js","../../../../../../libs/device/dist/builder/errors.js","../../../../../../libs/device/dist/builder/misc.js","../../../../../../libs/device/dist/builder/ast.js","../../../../../../libs/device/dist/builder/base.js","../../../../../../libs/device/dist/builder/builtinfunc.js","../../../../../../libs/device/dist/builder/constructors.js","../../../../../../libs/device/dist/builder/programbuilder.js","../../../../../../libs/device/dist/helpers/font.js","../../../../../../libs/device/dist/helpers/textureatlas.js","../../../../../../libs/device/dist/helpers/glyphmanager.js","../../../../../../libs/device/dist/helpers/drawtext.js","../../../../../../libs/device/dist/device.js","../../../../../../libs/device/dist/uniformdata.js","../../../../../../libs/backend-webgpu/dist/gpuobject_webgpu.js","../../../../../../libs/backend-webgpu/dist/gpuprogram_webgpu.js","../../../../../../libs/backend-webgpu/dist/uploadringbuffer.js","../../../../../../libs/backend-webgpu/dist/buffer_webgpu.js","../../../../../../libs/backend-webgpu/dist/structuredbuffer_webgpu.js","../../../../../../libs/backend-webgpu/dist/bindgroup_webgpu.js","../../../../../../libs/backend-webgpu/dist/constants_webgpu.js","../../../../../../libs/backend-webgpu/dist/utils_webgpu.js","../../../../../../libs/backend-webgpu/dist/basetexture_webgpu.js","../../../../../../libs/backend-webgpu/dist/texture2d_webgpu.js","../../../../../../libs/backend-webgpu/dist/texture2darray_webgpu.js","../../../../../../libs/backend-webgpu/dist/texture3d_webgpu.js","../../../../../../libs/backend-webgpu/dist/texturecube_webgpu.js","../../../../../../libs/backend-webgpu/dist/texturevideo_webgpu.js","../../../../../../libs/backend-webgpu/dist/capabilities_webgpu.js","../../../../../../libs/backend-webgpu/dist/vertexlayout_webgpu.js","../../../../../../libs/backend-webgpu/dist/renderstates_webgpu.js","../../../../../../libs/backend-webgpu/dist/pipeline_cache.js","../../../../../../libs/backend-webgpu/dist/framebuffer_webgpu.js","../../../../../../libs/backend-webgpu/dist/indexbuffer_webgpu.js","../../../../../../libs/backend-webgpu/dist/bindgroup_cache.js","../../../../../../libs/backend-webgpu/dist/vertexlayout_cache.js","../../../../../../libs/backend-webgpu/dist/sampler_webgpu.js","../../../../../../libs/backend-webgpu/dist/sampler_cache.js","../../../../../../libs/backend-webgpu/dist/renderpass_webgpu.js","../../../../../../libs/backend-webgpu/dist/computepass_webgpu.js","../../../../../../libs/backend-webgpu/dist/commandqueue.js","../../../../../../libs/backend-webgpu/dist/device.js","../../../../../../libs/backend-webgpu/dist/index.js","../../../../src/sample-4/main.js"],"sourcesContent":["const colorNames = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32',\n    transparent: 'rgba(0,0,0,0)'\n};\n/**\n * Wrapper of a http get request\n * @public\n */ class HttpRequest {\n    /** @internal */ static _tempElement = null;\n    /** @internal */ _urlResolver;\n    /** @internal */ _crossOrigin;\n    /** @internal */ _headers;\n    constructor(urlResolver){\n        this._urlResolver = urlResolver;\n        this._crossOrigin = '';\n        this._headers = {};\n    }\n    /** Get the custom URL resolver */ get urlResolver() {\n        return this._urlResolver;\n    }\n    set urlResolver(resolver) {\n        this._urlResolver = resolver;\n    }\n    /** Get the cross origin property */ get crossOrigin() {\n        return this._crossOrigin;\n    }\n    set crossOrigin(val) {\n        this._crossOrigin = val;\n    }\n    /** Get the request headers */ get headers() {\n        return this._headers;\n    }\n    set headers(val) {\n        this._headers = val;\n    }\n    /**\n   * Resolves a URL string.\n   * @param url - The input url string,\n   * @returns The resolved URL string.\n   */ resolveURL(url) {\n        if (!HttpRequest._tempElement) {\n            HttpRequest._tempElement = document.createElement('a');\n        }\n        HttpRequest._tempElement.href = url;\n        return HttpRequest._tempElement.href;\n    }\n    /**\n   * Send a GET request.\n   * @param url - The remote URL to fetch.\n   * @returns The fetch result.\n   */ async request(url) {\n        url = this._urlResolver ? this._urlResolver(url) : this.resolveURL(url);\n        return url ? fetch(url, {\n            credentials: this._crossOrigin === 'anonymous' ? 'same-origin' : 'include',\n            headers: this._headers || {}\n        }) : null;\n    }\n    /**\n   * Fetch a text string from remote.\n   * @param url - The remote URL to fetch.\n   * @returns The fetch result.\n   */ async requestText(url) {\n        const response = await this.request(url);\n        if (!response?.ok) {\n            throw new Error(`Asset download failed: ${url}`);\n        }\n        return response.text();\n    }\n    /**\n   * Fetch a json object from remote.\n   * @param url - The remote URL to fetch.\n   * @returns The fetch result.\n   */ async requestJson(url) {\n        const response = await this.request(url);\n        if (!response?.ok) {\n            throw new Error(`Asset download failed: ${url}`);\n        }\n        return response.json();\n    }\n    /**\n   * Fetch an array buffer from remote.\n   * @param url - The remote URL to fetch.\n   * @returns The fetch result.\n   */ async requestArrayBuffer(url) {\n        const response = await this.request(url);\n        if (!response?.ok) {\n            throw new Error(`Asset download failed: ${url}`);\n        }\n        return response.arrayBuffer();\n    }\n    /**\n   * Fetch a blob object from remote.\n   * @param url - The remote URL to fetch.\n   * @returns The fetch result.\n   */ async requestBlob(url) {\n        const arrayBuffer = await this.requestArrayBuffer(url);\n        return new Blob([\n            arrayBuffer\n        ]);\n    }\n}\n/**\n * Simple assertion which throws an error if the !!condition is false.\n * @param condition - The condition to check.\n * @public\n */ function ASSERT(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\n/**\n * Converts a Uint8Array to Base64 (Supports emoji character)\n * @param array - Uint8Array to convert\n * @returns Base64 string\n * @public\n */ function uint8ArrayToBase64(array) {\n    let binaryString = '';\n    for(let i = 0; i < array.length; i++){\n        binaryString += String.fromCharCode(array[i]);\n    }\n    return btoa(binaryString);\n}\n/**\n * Converts a string to Base64 (Supports emoji character)\n * @param text - String to convert\n * @returns Base64 string\n * @public\n */ function textToBase64(text) {\n    const encoder = new TextEncoder();\n    const uint8Array = encoder.encode(text);\n    return uint8ArrayToBase64(uint8Array);\n}\n/**\n * Converts a base64 string to text (Supports emoji character)\n * @param base64 - Base64 string to convert\n * @returns Original text\n * @public\n */ function base64ToText(base64) {\n    const bytes = base64ToUint8Array(base64);\n    return new TextDecoder('utf-8').decode(bytes);\n}\n/**\n * Converts a base64 string to Uint8Array (Supports emoji character)\n * @param base64 - Base64 string to convert\n * @returns Uint8Array\n * @public\n */ function base64ToUint8Array(base64) {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for(let i = 0; i < binaryString.length; i++){\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes;\n}\n/**\n * Generate 128bit random UUID\n * @returns random UUID\n * @public\n */ function randomUUID() {\n    if (crypto.randomUUID) {\n        return crypto.randomUUID();\n    } else {\n        const rnds = new Uint8Array(16);\n        crypto.getRandomValues(rnds);\n        // Per RFC 4122 v4\n        rnds[6] = rnds[6] & 0x0f | 0x40;\n        rnds[8] = rnds[8] & 0x3f | 0x80;\n        const hex = [\n            ...rnds\n        ].map((b)=>b.toString(16).padStart(2, '0'));\n        return [\n            hex.slice(0, 4).join(''),\n            hex.slice(4, 6).join(''),\n            hex.slice(6, 8).join(''),\n            hex.slice(8, 10).join(''),\n            hex.slice(10, 16).join('')\n        ].join('-');\n    }\n}\n/**\n * Check if a value is an instance of a specific constructor.\n * @param value - The value to check.\n * @param constructor - The constructor to check against.\n * @returns True if the value is an instance of the constructor, false otherwise.\n * @public\n */ function IS_INSTANCE_OF(value, constructor) {\n    return value instanceof constructor;\n}\n/**\n * parse a css color value to RGBA color type.\n * @param input - The css color value.\n * @returns The RGBA color value.\n * @public\n */ function parseColor(input) {\n    input = input.trim().toLowerCase();\n    input = colorNames[input] || input;\n    let v = null;\n    if (input[0] === '#') {\n        const collen = (input.length - 1) / 3;\n        const fact = [\n            17,\n            1,\n            0.062272\n        ][collen - 1];\n        v = {\n            r: parseInt(input.substring(1, 1 + collen), 16) * fact / 255,\n            g: parseInt(input.substring(1 + collen, 1 + 2 * collen), 16) * fact / 255,\n            b: parseInt(input.substring(1 + 2 * collen, 1 + 3 * collen), 16) * fact / 255,\n            a: 1\n        };\n    } else {\n        let m;\n        if (m = input.match(/^\\s*rgb\\s*\\(\\s*(\\d*\\.?\\d*)\\s*,\\s*(\\d*\\.?\\d*)\\s*,\\s*(\\d\\.?\\d*)\\s*\\)\\s*$/i)) {\n            v = {\n                r: Number(m[1]) / 255,\n                g: Number(m[2]) / 255,\n                b: Number(m[3]) / 255,\n                a: 1\n            };\n        } else if (m = input.match(/^\\s*rgba\\s*\\(\\s*(\\d*\\.?\\d*)\\s*,\\s*(\\d*\\.?\\d*)\\s*,\\s*([\\d*.?\\d*]+)\\s*,\\s*(\\d*\\.?\\d*)\\s*\\)\\s*$/i)) {\n            v = {\n                r: Number(m[1]) / 255,\n                g: Number(m[2]) / 255,\n                b: Number(m[3]) / 255,\n                a: Number(m[4])\n            };\n        }\n    }\n    if (!v || Number.isNaN(v.r) || Number.isNaN(v.g) || Number.isNaN(v.b) || Number.isNaN(v.a)) {\n        throw new Error(`parseColor(): invalid color '${input}'`);\n    }\n    // the RGB color values in CSS are in sRGB color space, convert them to linear color space\n    v.r = Math.pow(Math.min(1, v.r), 2.2);\n    v.g = Math.pow(Math.min(1, v.g), 2.2);\n    v.b = Math.pow(Math.min(1, v.b), 2.2);\n    v.a = Math.min(1, v.a);\n    return v;\n}\n/**\n * Applies mixins to a constructor function.\n *\n * @param target - The constructor function of the class that will receive the mixins.\n * @param mixins - mixins\n * @returns Mixed class\n *\n * @public\n */ function applyMixins(target, ...mixins) {\n    let r = target;\n    for (const m of mixins){\n        r = m(r);\n    }\n    return r;\n}\nconst formatRegex = /%(?:(\\d+)\\$)?([-+ 0#]*)(\\*|\\d+)?(?:\\.(\\*|\\d+))?([%sdifuoxXc])/g;\n/**\n * Simple sprintf implementation:\n *\n * @param format - The format string\n * @param args - The format arguments\n * @returns The formatted string\n *\n * Supported format:\n * %%\n * %s\n * %c\n * %d, %i, %u\n * %f\n * %x, %X, %o\n *\n * Supported flags:\n * - (left align)\n * + (always show sign for number)\n *   (space if no sign for number)\n * 0 (zero pad)\n * # (alternate form, for x/X/o adds 0x/0X/0o prefix if value is non-zero)\n * * (width or precision from argument)\n * n$ (explicit argument index, 1-based)\n * .precision for s (max length)\n * .precision for d/i/u/x/X/o (min digits)\n * .precision for f (number of digits after decimal point, default 6)\n *\n * @example\n * ```ts\n * formatString('Hello %s', 'World'); // 'Hello World'\n * formatString('Hex: %#x', 255); // 'Hex: 0xff'\n * formatString('Width: %*d', 5, 42); // 'Width:    42'\n * formatString('Pi: %.2f', Math.PI); // 'Pi: 3.14'\n * formatString('Index: %2$s %1$s', 'first', 'second'); // 'Index: second first'\n * ```\n *\n * @public\n */ function formatString(format, ...args) {\n    let out = '';\n    let lastIndex = 0;\n    let argIndex = 0;\n    const readArg = (explicit)=>{\n        if (explicit != null) {\n            const idx = explicit - 1;\n            if (idx < 0 || idx >= args.length) {\n                throw new Error(`Argument index ${explicit}$ out of range`);\n            }\n            return args[idx];\n        }\n        if (argIndex >= args.length) {\n            throw new Error('Too few arguments for format string');\n        }\n        return args[argIndex++];\n    };\n    const parseNumber = (val, name)=>{\n        const n = typeof val === 'string' ? parseInt(val, 10) : Number(val);\n        if (!Number.isFinite(n)) {\n            throw new Error(`Invalid ${name}: ${val}`);\n        }\n        return n;\n    };\n    format.replace(formatRegex, (match, i$, flagsStr, widthStr, precStr, type, offset)=>{\n        out += format.slice(lastIndex, offset);\n        lastIndex = offset + match.length;\n        const token = {\n            flags: {\n                leftAlign: false,\n                sign: false,\n                space: false,\n                zeroPad: false,\n                alt: false\n            },\n            type\n        };\n        if (i$) {\n            token.explicitIndex = parseInt(i$, 10);\n        }\n        // flags\n        for (const ch of flagsStr || ''){\n            switch(ch){\n                case '-':\n                    token.flags.leftAlign = true;\n                    break;\n                case '+':\n                    token.flags.sign = true;\n                    break;\n                case ' ':\n                    token.flags.space = true;\n                    break;\n                case '0':\n                    token.flags.zeroPad = true;\n                    break;\n                case '#':\n                    token.flags.alt = true;\n                    break;\n            }\n        }\n        // width\n        if (widthStr === '*') {\n            token.widthFromArg = true;\n        } else if (widthStr) {\n            token.width = parseInt(widthStr, 10);\n        }\n        // precision\n        if (precStr === '*') {\n            token.precisionFromArg = true;\n        } else if (precStr) {\n            token.precision = parseInt(precStr, 10);\n        }\n        const render = ()=>{\n            // read * parameter of width/precision\n            if (token.widthFromArg) {\n                const wArg = readArg(token.explicitIndex);\n                token.width = parseNumber(wArg, 'width');\n            }\n            if (token.precisionFromArg) {\n                const pArg = readArg(token.explicitIndex);\n                token.precision = parseNumber(pArg, 'precision');\n                if (token.precision < 0) {\n                    token.precision = undefined;\n                }\n            }\n            const t = token.type;\n            if (t === '%') {\n                // literal %\n                return '%';\n            }\n            const raw = readArg(token.explicitIndex);\n            let body = '';\n            let signStr = '';\n            const asNumber = (v)=>{\n                const n = typeof v === 'boolean' ? v ? 1 : 0 : v == null ? NaN : typeof v === 'string' && v.trim() === '' ? 0 : Number(v);\n                return n;\n            };\n            const pad = (s, width, leftAlign, padChar = ' ')=>{\n                if (!width || s.length >= width) {\n                    return s;\n                }\n                const fill = padChar.repeat(width - s.length);\n                return leftAlign ? s + fill : fill + s;\n            };\n            const prefixForAlt = (t)=>{\n                if (t === 'x') {\n                    return '0x';\n                }\n                if (t === 'X') {\n                    return '0X';\n                }\n                if (t === 'o') {\n                    return '0o';\n                }\n                return '';\n            };\n            switch(t){\n                case 's':\n                    {\n                        body = String(raw ?? '');\n                        if (token.precision != null) {\n                            // precision\n                            body = body.slice(0, token.precision);\n                        }\n                        break;\n                    }\n                case 'c':\n                    {\n                        if (typeof raw === 'number') {\n                            body = String.fromCharCode(raw);\n                        } else {\n                            const s = String(raw ?? '');\n                            body = s.length ? s[0] : '\\u0000';\n                        }\n                        break;\n                    }\n                case 'd':\n                case 'i':\n                case 'u':\n                    {\n                        let n = asNumber(raw);\n                        if (t === 'u') {\n                            n = Math.floor(Math.abs(n)) >>> 0; // unsigned 32bit\n                            body = n.toString(10);\n                        } else {\n                            const isNeg = n < 0 || Object.is(n, -0);\n                            const abs = Math.abs(n);\n                            body = Math.trunc(abs).toString(10);\n                            if (isNeg) {\n                                signStr = '-';\n                            } else if (token.flags.sign) {\n                                signStr = '+';\n                            } else if (token.flags.space) {\n                                signStr = ' ';\n                            }\n                        }\n                        if (token.precision != null) {\n                            body = '0'.repeat(Math.max(0, token.precision - body.length)) + body;\n                        }\n                        body = signStr + body;\n                        break;\n                    }\n                case 'f':\n                    {\n                        const n = asNumber(raw);\n                        const prec = token.precision ?? 6;\n                        if (!Number.isFinite(n)) {\n                            body = String(n);\n                        } else {\n                            body = n.toFixed(Math.max(0, Math.min(100, prec)));\n                        }\n                        if (n >= 0) {\n                            if (token.flags.sign) {\n                                body = '+' + body;\n                            } else if (token.flags.space) {\n                                body = ' ' + body;\n                            }\n                        }\n                        break;\n                    }\n                case 'x':\n                case 'X':\n                case 'o':\n                    {\n                        const n = asNumber(raw);\n                        const isUpper = t === 'X';\n                        const abs = Math.trunc(Math.abs(n));\n                        let str = t === 'o' ? abs.toString(8) : abs.toString(16);\n                        if (isUpper) {\n                            str = str.toUpperCase();\n                        }\n                        if (token.precision != null) {\n                            str = '0'.repeat(Math.max(0, token.precision - str.length)) + str;\n                        }\n                        const pre = token.flags.alt && abs !== 0 ? prefixForAlt(t) : '';\n                        body = pre + str;\n                        break;\n                    }\n                default:\n                    throw new Error(`Unsupported format type: ${t}`);\n            }\n            const useZeroPad = token.flags.zeroPad && !token.flags.leftAlign && token.type !== 's' && token.precision == null && token.type !== '%';\n            if (useZeroPad) {\n                const prefixMatch = body.match(/^([+\\- ]|0x|0X|0o)/);\n                const prefix = prefixMatch ? prefixMatch[0] : '';\n                const rest = body.slice(prefix.length);\n                body = prefix + pad(rest, token.width ? token.width - prefix.length : undefined, false, '0');\n            } else {\n                body = pad(body, token.width, token.flags.leftAlign, ' ');\n            }\n            return body;\n        };\n        out += render();\n        return match;\n    });\n    out += format.slice(lastIndex);\n    return out;\n}\n\nexport { ASSERT, HttpRequest, IS_INSTANCE_OF, applyMixins, base64ToText, base64ToUint8Array, formatString, parseColor, randomUUID, textToBase64, uint8ArrayToBase64 };\n//# sourceMappingURL=utils.js.map\n","/**\n * Observable event emitter implementation.\n *\n * Provides subscription, one-time subscription, unsubscription, and synchronous dispatch\n * for events defined by an {@link EventMap}.\n *\n * @typeParam X - The event map describing event names and payload tuples\n * @public\n */ class Observable {\n    /** @internal */ _listeners;\n    /**\n   * Creates an {@link Observable}.\n   */ constructor(){\n        this._listeners = null;\n    }\n    /**\n   * {@inheritDoc IEventTarget.on}\n   */ on(type, listener, context) {\n        if (listener) {\n            this._listeners = this._internalAddEventListener(this._listeners, type, listener, {\n                context: context ?? null,\n                once: false\n            });\n        } else {\n            console.error('Cannot set NULL listener');\n        }\n    }\n    /**\n   * {@inheritDoc IEventTarget.once}\n   */ once(type, listener, context) {\n        if (listener) {\n            this._listeners = this._internalAddEventListener(this._listeners, type, listener, {\n                context: context ?? null,\n                once: true\n            });\n        } else {\n            console.error('Cannot set NULL listener');\n        }\n    }\n    /**\n   * {@inheritDoc IEventTarget.off}\n   */ off(type, listener, context) {\n        this._internalRemoveEventListener(this._listeners, type, listener, context ?? null);\n    }\n    /**\n   * {@inheritDoc IEventTarget.dispatchEvent}\n   */ dispatchEvent(type, ...args) {\n        this._invokeLocalListeners(type, ...args);\n    }\n    /**\n   * Adds an event listener to the given map.\n   *\n   * If the map is `null`, a new one will be created.\n   *\n   * @typeParam K - The event key within the event map\n   * @param listenerMap - The current listener map\n   * @param type - The event type to listen for\n   * @param listener - The listener callback\n   * @param options - Additional listener options\n   * @returns The updated listener map\n   * @internal\n   */ _internalAddEventListener(listenerMap, type, listener, options) {\n        if (typeof type !== 'string') {\n            return;\n        }\n        if (!listenerMap) {\n            listenerMap = {};\n        }\n        const l = listener;\n        const o = {\n            ...options\n        };\n        let handlers = listenerMap[type];\n        if (!handlers) {\n            listenerMap[type] = handlers = [];\n        }\n        handlers.push({\n            handler: l,\n            options: o,\n            removed: false\n        });\n        return listenerMap;\n    }\n    /**\n   * Removes an event listener from the given map.\n   *\n   * A listener is removed only if both the function reference and the context match.\n   *\n   * @typeParam K - The event key within the event map\n   * @param listenerMap - The current listener map\n   * @param type - The event type to remove from\n   * @param listener - The listener callback to remove\n   * @param context - The context object that must match the one used when adding\n   * @internal\n   */ _internalRemoveEventListener(listenerMap, type, listener, context) {\n        if (typeof type !== 'string' || !listenerMap) {\n            return;\n        }\n        const l = listener;\n        const handlers = listenerMap[type];\n        if (handlers) {\n            for(let i = 0; i < handlers.length; i++){\n                const handler = handlers[i];\n                if (handler.handler === l && handler.options.context === context) {\n                    handlers.splice(i, 1);\n                    break;\n                }\n            }\n            if (handlers.length === 0) {\n                listenerMap[type] = undefined;\n            }\n        }\n    }\n    /**\n   * Invokes local listeners for a given event type with the provided arguments.\n   *\n   * Listeners added with `once: true` are marked and pruned after invocation.\n   *\n   * @typeParam K - The event key within the event map\n   * @param type - The event type to invoke\n   * @param args - The payload to pass to each listener\n   * @internal\n   */ _invokeLocalListeners(type, ...args) {\n        if (!this._listeners) {\n            return;\n        }\n        const handlers = this._listeners[type];\n        if (handlers && handlers.length > 0) {\n            const handlersCopy = handlers.slice();\n            for (const handler of handlersCopy){\n                handler.handler.call(handler.options?.context || this, ...args);\n                if (handler.options.once) {\n                    handler.removed = true;\n                }\n            }\n            for(let i = handlers.length - 1; i >= 0; i--){\n                if (handlers[i].removed) {\n                    handlers.splice(i, 1);\n                }\n            }\n        }\n    }\n}\n/**\n * Mixin that augments a class with {@link IEventTarget} capabilities.\n *\n * It returns a higher-order factory that, when instantiated with an event map `X`,\n * produces a subclass adding `on/once/off/dispatchEvent` and the internal listener management.\n *\n * Usage:\n * ```ts\n * class Base {}\n * const Eventful = makeObservable(Base)<{ 'ready': []; 'data': [number] }>();\n * const obj = new Eventful();\n * obj.on('data', (n) => console.log(n));\n * obj.dispatchEvent('data', 42);\n * ```\n *\n * @typeParam C - A constructor type to be extended (plain `ObjectConstructor` or a generic class)\n * @param cls - The base class to extend\n * @returns A generic factory that accepts an event map and returns an extended class\n * @public\n */ function makeObservable(cls) {\n    return function _() {\n        return class E extends cls {\n            /** @internal */ _listeners;\n            constructor(...args){\n                super(...args);\n                this._listeners = null;\n            }\n            /**\n       * {@inheritDoc IEventTarget.on}\n       */ on(type, listener, context) {\n                if (listener) {\n                    this._listeners = this._internalAddEventListener(this._listeners, type, listener, {\n                        context: context ?? null,\n                        once: false\n                    });\n                } else {\n                    console.error('Cannot set NULL listener');\n                }\n            }\n            /**\n       * {@inheritDoc IEventTarget.once}\n       */ once(type, listener, context) {\n                if (listener) {\n                    this._listeners = this._internalAddEventListener(this._listeners, type, listener, {\n                        context: context ?? null,\n                        once: true\n                    });\n                } else {\n                    console.error('Cannot set NULL listener');\n                }\n            }\n            /**\n       * {@inheritDoc IEventTarget.off}\n       */ off(type, listener, context) {\n                this._internalRemoveEventListener(this._listeners, type, listener, context ?? null);\n            }\n            /**\n       * {@inheritDoc IEventTarget.dispatchEvent}\n       */ dispatchEvent(type, ...args) {\n                this._invokeLocalListeners(type, ...args);\n            }\n            /**\n       * Adds an event listener to the given map.\n       *\n       * If the map is `null`, a new one will be created.\n       *\n       * @typeParam K - The event key within the event map\n       * @param listenerMap - The current listener map\n       * @param type - The event type to listen for\n       * @param listener - The listener callback\n       * @param options - Additional listener options\n       * @returns The updated listener map\n       * @internal\n       */ _internalAddEventListener(listenerMap, type, listener, options) {\n                if (typeof type !== 'string') {\n                    return;\n                }\n                if (!listenerMap) {\n                    listenerMap = {};\n                }\n                const l = listener;\n                const o = {\n                    ...options\n                };\n                let handlers = listenerMap[type];\n                if (!handlers) {\n                    listenerMap[type] = handlers = [];\n                }\n                handlers.push({\n                    handler: l,\n                    options: o,\n                    removed: false\n                });\n                return listenerMap;\n            }\n            /**\n       * Removes an event listener from the given map.\n       *\n       * A listener is removed only if both the function reference and the context match.\n       *\n       * @typeParam K - The event key within the event map\n       * @param listenerMap - The current listener map\n       * @param type - The event type to remove from\n       * @param listener - The listener callback to remove\n       * @param context - The context object that must match the one used when adding\n       * @internal\n       */ _internalRemoveEventListener(listenerMap, type, listener, context) {\n                if (typeof type !== 'string' || !listenerMap) {\n                    return;\n                }\n                const l = listener;\n                const handlers = listenerMap[type];\n                if (handlers) {\n                    for(let i = 0; i < handlers.length; i++){\n                        const handler = handlers[i];\n                        if (handler.handler === l && handler.options.context === context) {\n                            handlers.splice(i, 1);\n                            break;\n                        }\n                    }\n                    if (handlers.length === 0) {\n                        listenerMap[type] = undefined;\n                    }\n                }\n            }\n            /**\n       * Invokes local listeners for a given event type with the provided arguments.\n       *\n       * Listeners added with `once: true` are marked and pruned after invocation.\n       *\n       * @typeParam K - The event key within the event map\n       * @param type - The event type to invoke\n       * @param args - The payload to pass to each listener\n       * @internal\n       */ _invokeLocalListeners(type, ...args) {\n                if (!this._listeners) {\n                    return;\n                }\n                const handlers = this._listeners[type];\n                if (handlers && handlers.length > 0) {\n                    const handlersCopy = handlers.slice();\n                    for (const handler of handlersCopy){\n                        handler.handler.call(handler.options?.context || this, ...args);\n                        if (handler.options.once) {\n                            handler.removed = true;\n                        }\n                    }\n                    for(let i = handlers.length - 1; i >= 0; i--){\n                        if (handlers[i].removed) {\n                            handlers.splice(i, 1);\n                        }\n                    }\n                }\n            }\n        };\n    };\n}\n\nexport { Observable, makeObservable };\n//# sourceMappingURL=event.js.map\n","/**\n * Enumerator used to refer to a box side\n * @public\n */ var BoxSide = /*#__PURE__*/ function(BoxSide) {\n    /** Left side (-x) */ BoxSide[BoxSide[\"LEFT\"] = 0] = \"LEFT\";\n    /** Right side (+x) */ BoxSide[BoxSide[\"RIGHT\"] = 1] = \"RIGHT\";\n    /** Bottom side (-y) */ BoxSide[BoxSide[\"BOTTOM\"] = 2] = \"BOTTOM\";\n    /** Top side (+y) */ BoxSide[BoxSide[\"TOP\"] = 3] = \"TOP\";\n    /** Front side (+z) */ BoxSide[BoxSide[\"FRONT\"] = 4] = \"FRONT\";\n    /** Back side (-z) */ BoxSide[BoxSide[\"BACK\"] = 5] = \"BACK\";\n    return BoxSide;\n}({});\n/**\n * The intersection test result of two object A and B\n * @public\n */ var ClipState = /*#__PURE__*/ function(ClipState) {\n    /** A does not intersect with B */ ClipState[ClipState[\"NOT_CLIPPED\"] = 0] = \"NOT_CLIPPED\";\n    /** A is inside B */ ClipState[ClipState[\"A_INSIDE_B\"] = 1] = \"A_INSIDE_B\";\n    /** B is inside A */ ClipState[ClipState[\"B_INSIDE_A\"] = 2] = \"B_INSIDE_A\";\n    /** A and B partially overlap */ ClipState[ClipState[\"CLIPPED\"] = 3] = \"CLIPPED\";\n    return ClipState;\n}({});\n/**\n * Enumerator used to refer to the cube face\n * @public\n */ var CubeFace = /*#__PURE__*/ function(CubeFace) {\n    CubeFace[CubeFace[\"PX\"] = 0] = \"PX\";\n    CubeFace[CubeFace[\"NX\"] = 1] = \"NX\";\n    CubeFace[CubeFace[\"PY\"] = 2] = \"PY\";\n    CubeFace[CubeFace[\"NY\"] = 3] = \"NY\";\n    CubeFace[CubeFace[\"PZ\"] = 4] = \"PZ\";\n    CubeFace[CubeFace[\"NZ\"] = 5] = \"NZ\";\n    return CubeFace;\n}({});\n\nexport { BoxSide, ClipState, CubeFace };\n//# sourceMappingURL=types.js.map\n","import { toFloat } from './misc.js';\nimport { CubeFace } from './types.js';\n\nconst IDENT_MATRIX3x3 = new Float32Array([\n    1,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    1\n]);\nconst IDENT_MATRIX4x4 = new Float32Array([\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1\n]);\n/**\n * Base class for vector and matrix types.\n *\n * @public\n */ class VectorBase extends Float32Array {\n    /**\n   * Check if all data is close enough to another\n   * @param other - The data to be compared with.\n   * @param epsilon - The minimal error allowd.\n   * @returns true if close enough, otherwise false.\n   */ equalsTo(other, epsl) {\n        if (!other || this.length !== other.length) {\n            return false;\n        }\n        if (this === other) {\n            return true;\n        }\n        for(let i = 0; i < this.length; i++){\n            const a = this[i];\n            const b = other[i];\n            const e = epsl ?? 0.0001 * Math.max(1, Math.abs(a), Math.abs(b));\n            if (Math.abs(a - b) > e) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n   * Convert this to string object.\n   */ toString() {\n        const elements = [\n            ...this\n        ].map((val)=>val.toFixed(3));\n        return `${this.constructor.name}{${elements.join(',')}}`;\n    }\n    /**\n   * Check the data for the presence of NaN.\n   *\n   * @returns true if NaN is present, otherwise false.\n   */ isNaN() {\n        for(let i = 0; i < this.length; i++){\n            if (Number.isNaN(this[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n   * Generate random vector\n   *\n   * @param minValue - Minimum value of any component of the vector\n   * @param maxValue - Maximum value of any component of the vector\n   */ setRandom(minValue, maxValue) {\n        for(let i = 0; i < this.length; i++){\n            this[i] = minValue + (maxValue - minValue) * Math.random();\n        }\n    }\n}\n/**\n * 2 dimentional vector\n * @public\n */ class Vector2 extends VectorBase {\n    constructor(arg0, arg1){\n        if (arg0 instanceof ArrayBuffer && typeof arg1 === 'number') {\n            super(arg0, arg1, 2);\n        } else {\n            super(2);\n            if (typeof arg0 === 'number' && typeof arg1 === 'number') {\n                this[0] = arg0;\n                this[1] = arg1;\n            } else if ((arg0 instanceof Float32Array || Array.isArray(arg0)) && arg0.length >= 2) {\n                this[0] = arg0[0];\n                this[1] = arg0[1];\n            } else if (arg0 !== undefined) {\n                throw new Error(`Vector2.constructor(): invalid arguments`);\n            }\n        }\n    }\n    /**\n   * Creates a new Vector2 initialized with values from this vector.\n   * @returns The new Vector2.\n   */ clone() {\n        return new Vector2(this);\n    }\n    /** Get the x component value. */ get x() {\n        return this[0];\n    }\n    set x(v) {\n        this[0] = v;\n    }\n    /** Get the y component value. */ get y() {\n        return this[1];\n    }\n    set y(v) {\n        this[1] = v;\n    }\n    /** Get the length of the vector. */ get magnitude() {\n        return Math.hypot(this[0], this[1]);\n    }\n    /** Get the squared length of the vector. */ get magnitudeSq() {\n        return this[0] * this[0] + this[1] * this[1];\n    }\n    /**\n   * Set component values.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @returns self\n   */ setXY(x, y) {\n        this[0] = x;\n        this[1] = y;\n        return this;\n    }\n    /**\n   * Set component values and then normalize the vector.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @returns self\n   */ setAndNormalize(x, y) {\n        const mag = Math.hypot(x, y);\n        return this.setXY(x / mag, y / mag);\n    }\n    /**\n   * Subtract a vector from this vector.\n   * @param other - The vector that will be subtract.\n   * @returns self\n   */ subBy(other) {\n        Vector2.sub(this, other, this);\n        return this;\n    }\n    /**\n   * Add a vector to this vector.\n   * @param other - The vector that will be added.\n   * @returns self\n   */ addBy(other) {\n        Vector2.add(this, other, this);\n        return this;\n    }\n    /**\n   * Combine a vector to this vector.\n   * @param other - The vector that will be added.\n   * @param t0 - Scale factor for this vector\n   * @param t1 - Scale factor for other vector\n   * @returns self\n   */ combineBy(other, t0, t1) {\n        Vector2.combine(this, other, t0, t1, this);\n        return this;\n    }\n    /**\n   * Multiply this vector by a vector.\n   * @param other - The vector that will be multiplied by.\n   * @returns self\n   */ mulBy(other) {\n        Vector2.mul(this, other, this);\n        return this;\n    }\n    /**\n   * Divide this vector by a vector.\n   * @param other - The vector that will be divide by.\n   * @returns self\n   */ divBy(other) {\n        Vector2.div(this, other, this);\n        return this;\n    }\n    /**\n   * Scale this vector by a scalar number.\n   * @param f - amount to scale this vector by.\n   * @returns self\n   */ scaleBy(f) {\n        Vector2.scale(this, f, this);\n        return this;\n    }\n    /**\n   * Normalize this vector inplace.\n   * @returns self\n   */ inplaceNormalize() {\n        Vector2.normalize(this, this);\n        return this;\n    }\n    /**\n   * Inverse this vector inplace.\n   * @returns self\n   */ inplaceInverse() {\n        Vector2.inverse(this, this);\n        return this;\n    }\n    /**\n   * Set the component values to the minimum of this vector and another vector.\n   * @param other - The vector that to be compared with.\n   * @returns self\n   */ inplaceMin(other) {\n        Vector2.min(this, other, this);\n        return this;\n    }\n    /**\n   * Set the component values to the maximum of this vector and another vector.\n   * @param other - The vector that to be compared with.\n   * @returns self\n   */ inplaceMax(other) {\n        Vector2.max(this, other, this);\n        return this;\n    }\n    /**\n   * Creates a new Vector2 initialized with zero values.\n   * @returns The new vector\n   */ static zero() {\n        return new Vector2(0, 0);\n    }\n    /**\n   * Creates a new Vector2 initialized with one.\n   * @returns The new vector\n   */ static one() {\n        return new Vector2(1, 1);\n    }\n    /**\n   * Creates a new Vector2 pointing in the positive direction of the X axis, i.e. vec2(1, 0)\n   * @returns The new vector\n   */ static axisPX() {\n        return new Vector2(1, 0);\n    }\n    /**\n   * Creates a new Vector2 pointing in the negative direction of the X axis, i.e. vec2(-1, 0)\n   * @returns The new vector\n   */ static axisNX() {\n        return new Vector2(-1, 0);\n    }\n    /**\n   * Creates a new Vector2 pointing in the positive direction of the Y axis, i.e. vec2(0, 1)\n   * @returns The new vector\n   */ static axisPY() {\n        return new Vector2(0, 1);\n    }\n    /**\n   * Creates a new Vector2 pointing in the negative direction of the Y axis, i.e. vec2(0, -1)\n   * @returns The new vector\n   */ static axisNY() {\n        return new Vector2(0, -1);\n    }\n    /**\n   * Calculates the distance between two Vector2's.\n   * @param v1 - The first vector.\n   * @param v2 - The second vector.\n   * @returns distance between v1 and v2\n   */ static distance(v1, v2) {\n        return Math.hypot(v1.x - v2.x, v1.y - v2.y);\n    }\n    /**\n   * Calculates the squared distance between two Vector2's.\n   * @param v1 - The first vector.\n   * @param v2 - The second vector.\n   * @returns squared distance between v1 and v2\n   */ static distanceSq(v1, v2) {\n        const dx = v1.x - v2.x;\n        const dy = v1.y - v2.y;\n        return dx * dx + dy * dy;\n    }\n    /**\n   * Normalize a Vector2\n   * @param v - The input vector\n   * @param result - The output vector (can be the same vector as v). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static normalize(v, result) {\n        const len = v.magnitude;\n        const x = v.x / len;\n        const y = v.y / len;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Inverse a Vector2\n   * @param v - The input vector\n   * @param result - The output vector (can be the same vector as v). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static inverse(v, result) {\n        const x = 1 / v.x;\n        const y = 1 / v.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Subtract two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static sub(a, b, result) {\n        const x = a.x - b.x;\n        const y = a.y - b.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Add two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static add(a, b, result) {\n        const x = a.x + b.x;\n        const y = a.y + b.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Combine two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param t0 - Scale factor for the first operand\n   * @param t1 - Scale factor for the second operand\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static combine(a, b, t0, t1, result) {\n        const x = a.x * t0 + b.x * t1;\n        const y = a.y * t0 + b.y * t1;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Multiply two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static mul(a, b, result) {\n        const x = a.x * b.x;\n        const y = a.y * b.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Divide two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static div(a, b, result) {\n        const x = a.x / b.x;\n        const y = a.y / b.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Scale a Vector2 by a scalar number.\n   * @param a - The vector to be scaled.\n   * @param b - The scalar number.\n   * @param result - The output vector (can be the same vector as a). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static scale(a, b, result) {\n        const x = a.x * b;\n        const y = a.y * b;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Calculates the minimum of two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static min(a, b, result) {\n        const x = a.x < b.x ? a.x : b.x;\n        const y = a.y < b.y ? a.y : b.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Calculates the maximum of two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static max(a, b, result) {\n        const x = a.x > b.x ? a.x : b.x;\n        const y = a.y > b.y ? a.y : b.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Calculates the absolute values of a Vector2.\n   * @param a - The input vector.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static abs(a, result) {\n        const x = a.x < 0 ? -a.x : a.x;\n        const y = a.y < 0 ? -a.y : a.y;\n        return (result || new Vector2()).setXY(x, y);\n    }\n    /**\n   * Calculates the dot product of two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @returns dot product of a and b\n   */ static dot(a, b) {\n        return a.x * b.x + a.y * b.y;\n    }\n    /**\n   * Calculates the cross product of two Vector2's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @returns z component of the cross product of the two vectors.\n   */ static cross(a, b) {\n        return a.x * b.y - a.y * b.x;\n    }\n}\n/**\n * Observable 2 dimentional vector\n *\n * @public\n */ class ObservableVector2 extends Vector2 {\n    /** @internal */ _callback;\n    /** The callback function which will be executed when the value changed */ get callback() {\n        return this._callback;\n    }\n    set callback(cb) {\n        this._callback = cb;\n    }\n    /**\n   * {@inheritDoc Vector2.x}\n   */ get x() {\n        return super.x;\n    }\n    set x(val) {\n        val = toFloat(val);\n        if (val !== super.x) {\n            super.x = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector2.y}\n   */ get y() {\n        return super.y;\n    }\n    set y(val) {\n        val = toFloat(val);\n        if (val !== super.y) {\n            super.y = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector2.setXY}\n   */ setXY(x, y) {\n        x = toFloat(x);\n        y = toFloat(y);\n        if (x !== super.x || y !== super.y) {\n            super.setXY(x, y);\n            this._callback?.();\n        }\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.copyWithin\n   */ copyWithin(target, start, end) {\n        super.copyWithin(target, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.fill\n   */ fill(value, start, end) {\n        super.fill(value, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.reverse\n   */ reverse() {\n        super.reverse();\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.set\n   */ set(array, offset) {\n        super.set(array, offset);\n        this._callback?.();\n    }\n    /**\n   * Inherited from Float32Array.sort\n   */ sort(compareFn) {\n        super.sort(compareFn);\n        this._callback?.();\n        return this;\n    }\n}\n/**\n * 3 dimentional vector\n * @public\n */ class Vector3 extends VectorBase {\n    constructor(arg0, arg1, arg2){\n        if (arg0 instanceof ArrayBuffer && typeof arg1 === 'number') {\n            super(arg0, arg1, 3);\n        } else {\n            super(3);\n            if (typeof arg0 === 'number' && typeof arg1 === 'number' && typeof arg2 === 'number') {\n                this[0] = arg0;\n                this[1] = arg1;\n                this[2] = arg2;\n            } else if ((arg0 instanceof Float32Array || Array.isArray(arg0)) && arg0.length >= 3) {\n                this[0] = arg0[0];\n                this[1] = arg0[1];\n                this[2] = arg0[2];\n            } else if (arg0 !== undefined) {\n                throw new Error('Vector3.constructor(): invalid arguments');\n            }\n        }\n    }\n    /**\n   * Creates a new Vector3 initialized with values from this vector.\n   * @returns The new vector.\n   */ clone() {\n        return new Vector3(this);\n    }\n    /** Get the x component value. */ get x() {\n        return this[0];\n    }\n    set x(v) {\n        this[0] = v;\n    }\n    /** Get the y component value. */ get y() {\n        return this[1];\n    }\n    set y(v) {\n        this[1] = v;\n    }\n    /** Get the z component value. */ get z() {\n        return this[2];\n    }\n    set z(v) {\n        this[2] = v;\n    }\n    /** Get the length of the vector. */ get magnitude() {\n        return Math.hypot(this[0], this[1], this[2]);\n    }\n    /** Get the squared length of the vector. */ get magnitudeSq() {\n        return this[0] * this[0] + this[1] * this[1] + this[2] * this[2];\n    }\n    /**\n   * Creates a new Vector2 initialized with x, y component of this vector.\n   * @returns The new vector\n   */ xy() {\n        return new Vector2(this.x, this.y);\n    }\n    /**\n   * Set component values.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @param z - The z component value.\n   * @returns self\n   */ setXYZ(x, y, z) {\n        this[0] = x;\n        this[1] = y;\n        this[2] = z;\n        return this;\n    }\n    /**\n   * Set component values and then normalize the vector.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @param z - The z component value.\n   * @returns self\n   */ setAndNormalize(x, y, z) {\n        const mag = Math.hypot(x, y, z);\n        return this.setXYZ(x / mag, y / mag, z / mag);\n    }\n    /**\n   * Subtract a vector from this vector.\n   * @param other - The vector that will be subtract.\n   * @returns self\n   */ subBy(other) {\n        Vector3.sub(this, other, this);\n        return this;\n    }\n    /**\n   * Add a vector to this vector.\n   * @param other - The vector that will be added.\n   * @returns self\n   */ addBy(other) {\n        Vector3.add(this, other, this);\n        return this;\n    }\n    /**\n   * Combine a vector to this vector.\n   * @param other - The vector that will be added.\n   * @param t0 - Scale factor for this vector\n   * @param t1 - Scale factor for other vector\n   * @returns self\n   */ combineBy(other, t0, t1) {\n        Vector3.combine(this, other, t0, t1, this);\n        return this;\n    }\n    /**\n   * Multiply this vector by a vector.\n   * @param other - The vector that will be multiplied by.\n   * @returns self\n   */ mulBy(other) {\n        Vector3.mul(this, other, this);\n        return this;\n    }\n    /**\n   * Divide this vector by a vector.\n   * @param other - The vector that will be divide by.\n   * @returns self\n   */ divBy(other) {\n        Vector3.div(this, other, this);\n        return this;\n    }\n    /**\n   * Scale this vector by a scalar number.\n   * @param f - amount to scale this vector by.\n   * @returns self\n   */ scaleBy(f) {\n        Vector3.scale(this, f, this);\n        return this;\n    }\n    /**\n   * Normalize this vector inplace.\n   * @returns self\n   */ inplaceNormalize() {\n        Vector3.normalize(this, this);\n        return this;\n    }\n    /**\n   * Inverse this vector inplace.\n   * @returns self\n   */ inplaceInverse() {\n        Vector3.inverse(this, this);\n        return this;\n    }\n    /**\n   * Set the component values to the minimum of this vector and another vector.\n   * @param other - The vector that to be compared with.\n   * @returns self\n   */ inplaceMin(other) {\n        Vector3.min(this, other, this);\n        return this;\n    }\n    /**\n   * Set the component values to the maximum of this vector and another vector.\n   * @param other - The vector that to be compared with.\n   * @returns self\n   */ inplaceMax(other) {\n        Vector3.max(this, other, this);\n        return this;\n    }\n    /**\n   * Creates a new Vector3 initialized with zero values.\n   * @returns The new vector\n   */ static zero() {\n        return new Vector3(0, 0, 0);\n    }\n    /**\n   * Creates a new Vector3 initialized with one.\n   * @returns The new vector\n   */ static one() {\n        return new Vector3(1, 1, 1);\n    }\n    /**\n   * Creates a new Vector3 pointing in the positive direction of the X axis, i.e. vec3(1, 0, 0)\n   * @returns The new vector\n   */ static axisPX() {\n        return new Vector3(1, 0, 0);\n    }\n    /**\n   * Creates a new Vector3 pointing in the negative direction of the X axis, i.e. vec3(-1, 0, 0)\n   * @returns The new vector\n   */ static axisNX() {\n        return new Vector3(-1, 0, 0);\n    }\n    /**\n   * Creates a new Vector3 pointing in the positive direction of the Y axis, i.e. vec3(0, 1, 0)\n   * @returns The new vector\n   */ static axisPY() {\n        return new Vector3(0, 1, 0);\n    }\n    /**\n   * Creates a new Vector3 pointing in the negative direction of the Y axis, i.e. vec3(0, -1, 0)\n   * @returns The new vector\n   */ static axisNY() {\n        return new Vector3(0, -1, 0);\n    }\n    /**\n   * Creates a new Vector3 pointing in the positive direction of the Z axis, i.e. vec3(0, 0, 1)\n   * @returns The new vector\n   */ static axisPZ() {\n        return new Vector3(0, 0, 1);\n    }\n    /**\n   * Creates a new Vector2 pointing in the negative direction of the Z axis, i.e. vec3(0, 0, -1)\n   * @returns The new vector\n   */ static axisNZ() {\n        return new Vector3(0, 0, -1);\n    }\n    /**\n   * Calculates the distance between two Vector3's.\n   * @param v1 - The first vector.\n   * @param v2 - The second vector.\n   * @returns distance between v1 and v2\n   */ static distance(v1, v2) {\n        return Math.hypot(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);\n    }\n    /**\n   * Calculates the squared distance between two Vector3's.\n   * @param v1 - The first vector.\n   * @param v2 - The second vector.\n   * @returns squared distance between v1 and v2\n   */ static distanceSq(v1, v2) {\n        const dx = v1.x - v2.x;\n        const dy = v1.y - v2.y;\n        const dz = v1.z - v2.z;\n        return dx * dx + dy * dy + dz * dz;\n    }\n    /**\n   * Normalize a Vector3\n   * @param v - The input vector\n   * @param result - The output vector (can be the same vector as v). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static normalize(v, result) {\n        const len = v.magnitude;\n        const x = v.x / len;\n        const y = v.y / len;\n        const z = v.z / len;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Inverse a Vector3\n   * @param v - The input vector\n   * @param result - The output vector (can be the same vector as v). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static inverse(v, result) {\n        const x = 1 / v.x;\n        const y = 1 / v.y;\n        const z = 1 / v.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Subtract two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static sub(a, b, result) {\n        const x = a.x - b.x;\n        const y = a.y - b.y;\n        const z = a.z - b.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Add two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static add(a, b, result) {\n        const x = a.x + b.x;\n        const y = a.y + b.y;\n        const z = a.z + b.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Combine two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param t0 - Scale factor for the first operand\n   * @param t1 - Scale factor for the second operand\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static combine(a, b, t0, t1, result) {\n        const x = a.x * t0 + b.x * t1;\n        const y = a.y * t0 + b.y * t1;\n        const z = a.z * t0 + b.z * t1;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Multiply two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static mul(a, b, result) {\n        const x = a.x * b.x;\n        const y = a.y * b.y;\n        const z = a.z * b.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Divide two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static div(a, b, result) {\n        const x = a.x / b.x;\n        const y = a.y / b.y;\n        const z = a.z / b.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Scale a Vector3 by a scalar number.\n   * @param a - The vector to be scaled.\n   * @param b - The scalar number.\n   * @param result - The output vector (can be the same vector as a). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static scale(a, b, result) {\n        const x = a.x * b;\n        const y = a.y * b;\n        const z = a.z * b;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Calculates the minimum of two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static min(a, b, result) {\n        const x = a.x < b.x ? a.x : b.x;\n        const y = a.y < b.y ? a.y : b.y;\n        const z = a.z < b.z ? a.z : b.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Calculates the maximum of two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static max(a, b, result) {\n        const x = a.x > b.x ? a.x : b.x;\n        const y = a.y > b.y ? a.y : b.y;\n        const z = a.z > b.z ? a.z : b.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Calculates the absolute values of a Vector3.\n   * @param a - The input vector.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static abs(a, result) {\n        const x = a.x < 0 ? -a.x : a.x;\n        const y = a.y < 0 ? -a.y : a.y;\n        const z = a.z < 0 ? -a.z : a.z;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n    /**\n   * Calculates the dot product of two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @returns dot product of a and b\n   */ static dot(a, b) {\n        return a.x * b.x + a.y * b.y + a.z * b.z;\n    }\n    /**\n   * Calculates the cross product of two Vector3's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @returns the cross product of the two vectors.\n   */ static cross(a, b, result) {\n        const x = a.y * b.z - a.z * b.y;\n        const y = a.z * b.x - a.x * b.z;\n        const z = a.x * b.y - a.y * b.x;\n        return (result || new Vector3()).setXYZ(x, y, z);\n    }\n}\n/**\n * Observable 3 dimentional vector\n *\n * @public\n */ class ObservableVector3 extends Vector3 {\n    /** @internal */ _callback;\n    /** The callback function which will be executed when the value changed */ get callback() {\n        return this._callback;\n    }\n    set callback(cb) {\n        this._callback = cb;\n    }\n    /**\n   * {@inheritDoc Vector3.x}\n   */ get x() {\n        return super.x;\n    }\n    set x(val) {\n        val = toFloat(val);\n        if (val !== super.x) {\n            super.x = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector3.y}\n   */ get y() {\n        return super.y;\n    }\n    set y(val) {\n        val = toFloat(val);\n        if (val !== super.y) {\n            super.y = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector3.z}\n   */ get z() {\n        return super.z;\n    }\n    set z(val) {\n        val = toFloat(val);\n        if (val !== super.z) {\n            super.z = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector3.setXYZ}\n   */ setXYZ(x, y, z) {\n        x = toFloat(x);\n        y = toFloat(y);\n        z = toFloat(z);\n        if (x !== super.x || y !== super.y || z !== super.z) {\n            super.setXYZ(x, y, z);\n            this._callback?.();\n        }\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.copyWithin\n   */ copyWithin(target, start, end) {\n        super.copyWithin(target, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.fill\n   */ fill(value, start, end) {\n        super.fill(value, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.reverse\n   */ reverse() {\n        super.reverse();\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.set\n   */ set(array, offset) {\n        super.set(array, offset);\n        this._callback?.();\n    }\n    /**\n   * Inherited from Float32Array.sort\n   */ sort(compareFn) {\n        super.sort(compareFn);\n        this._callback?.();\n        return this;\n    }\n}\n/**\n * 4 dimentional vector\n * @public\n */ class Vector4 extends VectorBase {\n    constructor(arg0, arg1, arg2, arg3){\n        if (arg0 instanceof ArrayBuffer && typeof arg1 === 'number') {\n            super(arg0, arg1, 4);\n        } else {\n            super(4);\n            if (typeof arg0 === 'number' && typeof arg1 === 'number' && typeof arg2 === 'number' && typeof arg3 === 'number') {\n                this[0] = arg0;\n                this[1] = arg1;\n                this[2] = arg2;\n                this[3] = arg3;\n            } else if ((arg0 instanceof Float32Array || Array.isArray(arg0)) && arg0.length >= 4) {\n                this[0] = arg0[0];\n                this[1] = arg0[1];\n                this[2] = arg0[2];\n                this[3] = arg0[3];\n            } else if (arg0 !== undefined) {\n                throw new Error('Vector4.constructor(): invalid arguments');\n            }\n        }\n    }\n    /**\n   * Creates a new Vector4 initialized with values from this vector.\n   * @returns The new vector.\n   */ clone() {\n        return new Vector4(this);\n    }\n    /** Get the x component value. */ get x() {\n        return this[0];\n    }\n    set x(v) {\n        this[0] = v;\n    }\n    /** Get the y component value. */ get y() {\n        return this[1];\n    }\n    set y(v) {\n        this[1] = v;\n    }\n    /** Get the z component value. */ get z() {\n        return this[2];\n    }\n    set z(v) {\n        this[2] = v;\n    }\n    /** Get the w component value. */ get w() {\n        return this[3];\n    }\n    set w(v) {\n        this[3] = v;\n    }\n    /** Get the length of the vector. */ get magnitude() {\n        return Math.hypot(this[0], this[1], this[2], this[3]);\n    }\n    /** Get the squared length of the vector. */ get magnitudeSq() {\n        return this[0] * this[0] + this[1] * this[1] + this[2] * this[2] + this[3] * this[3];\n    }\n    /**\n   * Creates a new Vector2 initialized with x, y component of this vector.\n   * @returns The new vector\n   */ xy() {\n        return new Vector2(this.x, this.y);\n    }\n    /**\n   * Creates a new Vector3 initialized with x, y, z component of this vector.\n   * @returns The new vector\n   */ xyz() {\n        return new Vector3(this.x, this.y, this.z);\n    }\n    /**\n   * Set component values.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @param z - The z component value.\n   * @param w - The w component value.\n   * @returns self\n   */ setXYZW(x, y, z, w) {\n        this[0] = x;\n        this[1] = y;\n        this[2] = z;\n        this[3] = w;\n        return this;\n    }\n    /**\n   * Set component values and then normalize the vector.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @param z - The z component value.\n   * @param w - The w component value.\n   * @returns self\n   */ setAndNormalize(x, y, z, w) {\n        const mag = Math.hypot(x, y, z, w);\n        return this.setXYZW(x / mag, y / mag, z / mag, w / mag);\n    }\n    /**\n   * Subtract a vector from this vector.\n   * @param other - The vector that will be subtract.\n   * @returns self\n   */ subBy(other) {\n        Vector4.sub(this, other, this);\n        return this;\n    }\n    /**\n   * Add a vector to this vector.\n   * @param other - The vector that will be added.\n   * @returns self\n   */ addBy(other) {\n        Vector4.add(this, other, this);\n        return this;\n    }\n    /**\n   * Combine a vector to this vector.\n   * @param other - The vector that will be added.\n   * @param t0 - Scale factor for this vector\n   * @param t1 - Scale factor for other vector\n   * @returns self\n   */ combineBy(other, t0, t1) {\n        Vector4.combine(this, other, t0, t1, this);\n        return this;\n    }\n    /**\n   * Multiply this vector by a vector.\n   * @param other - The vector that will be multiplied by.\n   * @returns self\n   */ mulBy(other) {\n        Vector4.mul(this, other, this);\n        return this;\n    }\n    /**\n   * Divide this vector by a vector.\n   * @param other - The vector that will be divide by.\n   * @returns self\n   */ divBy(other) {\n        Vector4.div(this, other, this);\n        return this;\n    }\n    /**\n   * Scale this vector by a scalar number.\n   * @param f - amount to scale this vector by.\n   * @returns self\n   */ scaleBy(f) {\n        Vector4.scale(this, f, this);\n        return this;\n    }\n    /**\n   * Normalize this vector inplace.\n   * @returns self\n   */ inplaceNormalize() {\n        Vector4.normalize(this, this);\n        return this;\n    }\n    /**\n   * Inverse this vector inplace.\n   * @returns self\n   */ inplaceInverse() {\n        Vector4.inverse(this, this);\n        return this;\n    }\n    /**\n   * Set the component values to the minimum of this vector and another vector.\n   * @param other - The vector that to be compared with.\n   * @returns self\n   */ inplaceMin(other) {\n        Vector4.min(this, other, this);\n        return this;\n    }\n    /**\n   * Set the component values to the maximum of this vector and another vector.\n   * @param other - The vector that to be compared with.\n   * @returns self\n   */ inplaceMax(other) {\n        Vector4.max(this, other, this);\n        return this;\n    }\n    /**\n   * Creates a new Vector4 initialized with zero values.\n   * @returns The new vector\n   */ static zero() {\n        return new Vector4(0, 0, 0, 0);\n    }\n    /**\n   * Creates a new Vector4 initialized with one.\n   * @returns The new vector\n   */ static one() {\n        return new Vector4(1, 1, 1, 1);\n    }\n    /**\n   * Creates a new Vector4 pointing in the positive direction of the X axis, i.e. vec4(1, 0, 0, 0)\n   * @returns The new vector\n   */ static axisPX() {\n        return new Vector4(1, 0, 0, 0);\n    }\n    /**\n   * Creates a new Vector4 pointing in the negative direction of the X axis, i.e. vec4(-1, 0, 0, 0)\n   * @returns The new vector\n   */ static axisNX() {\n        return new Vector4(-1, 0, 0, 0);\n    }\n    /**\n   * Creates a new Vector4 pointing in the positive direction of the Y axis, i.e. vec4(0, 1, 0, 0)\n   * @returns The new vector\n   */ static axisPY() {\n        return new Vector4(0, 1, 0, 0);\n    }\n    /**\n   * Creates a new Vector4 pointing in the negative direction of the Y axis, i.e. vec4(0, -1, 0, 0)\n   * @returns The new vector\n   */ static axisNY() {\n        return new Vector4(0, -1, 0, 0);\n    }\n    /**\n   * Creates a new Vector4 pointing in the positive direction of the Z axis, i.e. vec4(0, 0, 1, 0)\n   * @returns The new vector\n   */ static axisPZ() {\n        return new Vector4(0, 0, 1, 0);\n    }\n    /**\n   * Creates a new Vector4 pointing in the negative direction of the Z axis, i.e. vec4(0, 0, -1, 0)\n   * @returns The new vector\n   */ static axisNZ() {\n        return new Vector4(0, 0, -1, 0);\n    }\n    /**\n   * Creates a new Vector4 pointing in the positive direction of the W axis, i.e. vec4(0, 0, 0, 1)\n   * @returns The new vector\n   */ static axisPW() {\n        return new Vector4(0, 0, 0, 1);\n    }\n    /**\n   * Creates a new Vector4 pointing in the negative direction of the W axis, i.e. vec4(0, 0, 0, -1)\n   * @returns The new vector\n   */ static axisNW() {\n        return new Vector4(0, 0, 0, -1);\n    }\n    /**\n   * Normalize a Vector4\n   * @param v - The input vector\n   * @param result - The output vector (can be the same as v). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static normalize(v, result) {\n        const len = v.magnitude;\n        const x = v.x / len;\n        const y = v.y / len;\n        const z = v.z / len;\n        const w = v.w / len;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Inverse a Vector4\n   * @param v - The input vector\n   * @param result - The output vector (can be the same vector as v). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static inverse(v, result) {\n        const x = 1 / v.x;\n        const y = 1 / v.y;\n        const z = 1 / v.z;\n        const w = 1 / v.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Subtract two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static sub(a, b, result) {\n        const x = a.x - b.x;\n        const y = a.y - b.y;\n        const z = a.z - b.z;\n        const w = a.w - b.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Add two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static add(a, b, result) {\n        const x = a.x + b.x;\n        const y = a.y + b.y;\n        const z = a.z + b.z;\n        const w = a.w + b.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Combine two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param t0 - Scale factor for the first operand\n   * @param t1 - Scale factor for the second operand\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static combine(a, b, t0, t1, result) {\n        const x = a.x * t0 + b.x * t1;\n        const y = a.y * t0 + b.y * t1;\n        const z = a.z * t0 + b.z * t1;\n        const w = a.w * t0 + b.w * t1;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Multiply two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static mul(a, b, result) {\n        const x = a.x * b.x;\n        const y = a.y * b.y;\n        const z = a.z * b.z;\n        const w = a.w * b.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Divide two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static div(a, b, result) {\n        const x = a.x / b.x;\n        const y = a.y / b.y;\n        const z = a.z / b.z;\n        const w = a.w / b.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Scale a Vector4 by a scalar number.\n   * @param a - The vector to be scaled.\n   * @param b - The scalar number.\n   * @param result - The output vector (can be the same vector as a). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static scale(a, b, result) {\n        const x = a.x * b;\n        const y = a.y * b;\n        const z = a.z * b;\n        const w = a.w * b;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Calculates the minimum of two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static min(a, b, result) {\n        const x = a.x < b.x ? a.x : b.x;\n        const y = a.y < b.y ? a.y : b.y;\n        const z = a.z < b.z ? a.z : b.z;\n        const w = a.w < b.w ? a.w : b.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Calculates the maximum of two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static max(a, b, result) {\n        const x = a.x > b.x ? a.x : b.x;\n        const y = a.y > b.y ? a.y : b.y;\n        const z = a.z > b.z ? a.z : b.z;\n        const w = a.w > b.w ? a.w : b.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Calculates the absolute values of a Vector4.\n   * @param a - The input vector.\n   * @param result - The output vector (can be the same vector as a or b). if not specified, a new vector will be created.\n   * @returns The output vector\n   */ static abs(a, result) {\n        const x = a.x < 0 ? -a.x : a.x;\n        const y = a.y < 0 ? -a.y : a.y;\n        const z = a.z < 0 ? -a.z : a.z;\n        const w = a.w < 0 ? -a.w : a.w;\n        return (result || new Vector4()).setXYZW(x, y, z, w);\n    }\n    /**\n   * Calculates the dot product of two Vector4's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @returns dot product of a and b\n   */ static dot(a, b) {\n        return a.x * b.x + a.y * b.y + a.z * b.z + a.w * b.w;\n    }\n}\n/**\n * Observable 4 dimentional vector\n *\n * @public\n */ class ObservableVector4 extends Vector4 {\n    /** @internal */ _callback;\n    /** The callback function which will be executed when the value changed */ get callback() {\n        return this._callback;\n    }\n    set callback(cb) {\n        this._callback = cb;\n    }\n    /**\n   * {@inheritDoc Vector4.x}\n   */ get x() {\n        return super.x;\n    }\n    set x(val) {\n        val = toFloat(val);\n        if (val !== super.x) {\n            super.x = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector4.y}\n   */ get y() {\n        return super.y;\n    }\n    set y(val) {\n        val = toFloat(val);\n        if (val !== super.y) {\n            super.y = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector4.z}\n   */ get z() {\n        return super.z;\n    }\n    set z(val) {\n        val = toFloat(val);\n        if (val !== super.z) {\n            super.z = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector4.w}\n   */ get w() {\n        return super.w;\n    }\n    set w(val) {\n        val = toFloat(val);\n        if (val !== super.w) {\n            super.w = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Vector4.setXYZW}\n   */ setXYZW(x, y, z, w) {\n        x = toFloat(x);\n        y = toFloat(y);\n        z = toFloat(z);\n        w = toFloat(w);\n        if (x !== super.x || y !== super.y || z !== super.z || w !== super.w) {\n            super.setXYZW(x, y, z, w);\n            this._callback?.();\n        }\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.copyWithin\n   */ copyWithin(target, start, end) {\n        super.copyWithin(target, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.fill\n   */ fill(value, start, end) {\n        super.fill(value, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.reverse\n   */ reverse() {\n        super.reverse();\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.set\n   */ set(array, offset) {\n        super.set(array, offset);\n        this._callback?.();\n    }\n    /**\n   * Inherited from Float32Array.sort\n   */ sort(compareFn) {\n        super.sort(compareFn);\n        this._callback?.();\n        return this;\n    }\n}\n/**\n * Quaternion\n * @public\n */ class Quaternion extends VectorBase {\n    constructor(arg0, arg1, arg2, arg3){\n        if (arg0 instanceof ArrayBuffer && typeof arg1 === 'number') {\n            super(arg0, arg1, 4);\n        } else {\n            super(4);\n            if (typeof arg0 === 'number' && typeof arg1 === 'number' && typeof arg2 === 'number' && typeof arg3 === 'number') {\n                this[0] = arg0;\n                this[1] = arg1;\n                this[2] = arg2;\n                this[3] = arg3;\n            } else if (arg0 instanceof Matrix3x3 || arg0 instanceof Matrix4x4) {\n                this.fromRotationMatrix(arg0);\n            } else if ((arg0 instanceof Float32Array || Array.isArray(arg0)) && arg0.length >= 4) {\n                this[0] = arg0[0];\n                this[1] = arg0[1];\n                this[2] = arg0[2];\n                this[3] = arg0[3];\n            } else if (arg0 === undefined) {\n                this[0] = 0;\n                this[1] = 0;\n                this[2] = 0;\n                this[3] = 1;\n            } else {\n                throw new Error('Quaternion.constructor(): invalid arguments');\n            }\n        }\n    }\n    /**\n   * Creates a new Quaternion initialized with values from this quaternion.\n   * @returns The new quaternion.\n   */ clone() {\n        return new Quaternion(this);\n    }\n    /** Get the x component value. */ get x() {\n        return this[0];\n    }\n    set x(v) {\n        this[0] = v;\n    }\n    /** Get the y component value. */ get y() {\n        return this[1];\n    }\n    set y(v) {\n        this[1] = v;\n    }\n    /** Get the z component value. */ get z() {\n        return this[2];\n    }\n    set z(v) {\n        this[2] = v;\n    }\n    /** Get the w component value. */ get w() {\n        return this[3];\n    }\n    set w(v) {\n        this[3] = v;\n    }\n    /**\n   * Set component values.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @param z - The z component value.\n   * @param w - The w component value.\n   * @returns self\n   */ setXYZW(x, y, z, w) {\n        this[0] = x;\n        this[1] = y;\n        this[2] = z;\n        this[3] = w;\n        return this;\n    }\n    /**\n   * Scale this quaternion by a scalar number.\n   * @param f - amount to scale this quaternion by.\n   * @returns self\n   */ scaleBy(f) {\n        Quaternion.scale(this, f, this);\n        return this;\n    }\n    /**\n   * Set component values and then normalize the quaternion.\n   * @param x - The x component value.\n   * @param y - The y component value.\n   * @param z - The z component value.\n   * @param w - The w component value.\n   * @returns self\n   */ setAndNormalize(x, y, z, w) {\n        const mag = Math.hypot(x, y, z, w);\n        return this.setXYZW(x / mag, y / mag, z / mag, w / mag);\n    }\n    /** Get the length of the quaternion. */ get magnitude() {\n        return Math.hypot(this[0], this[1], this[2], this[3]);\n    }\n    /** Get the squared length of the quaternion. */ get magnitudeSq() {\n        return this[0] * this[0] + this[1] * this[1] + this[2] * this[2] + this[3] * this[3];\n    }\n    /** Make this quaternion an identity quaternion */ identity() {\n        Quaternion.identity(this);\n        return this;\n    }\n    /**\n   * Normalize this quaternion inplace.\n   * @returns self\n   */ inplaceNormalize() {\n        Quaternion.normalize(this, this);\n        return this;\n    }\n    /**\n   * Calculates the conjugate of this quaternion inplace.\n   * @returns self\n   */ inplaceConjugate() {\n        Quaternion.conjugate(this, this);\n        return this;\n    }\n    /**\n   * Multiply this quaternion by another quaternion at the right side inplace.\n   * @param other - The quaternion that to be multiplied by.\n   * @returns self\n   */ multiplyRight(other) {\n        Quaternion.multiply(this, other, this);\n        return this;\n    }\n    /**\n   * Multiply this quaternion by another quaternion at the left side inplace.\n   * @param other - The quaternion that to be multiplied by.\n   * @returns self\n   */ multiplyLeft(other) {\n        Quaternion.multiply(other, this, this);\n        return this;\n    }\n    /**\n   * Make a quaternion used to rotate a unit vector to another inplace.\n   * @param from - The unit vector to be rotated.\n   * @param to - The destination unit vector.\n   * @returns self\n   */ unitVectorToUnitVector(from, to) {\n        Quaternion.unitVectorToUnitVector(from, to, this);\n        return this;\n    }\n    /**\n   * Calculates the quaternion from an euler angle in specific order inplace.\n   * @param x - Angle to rotate around X axis in radians.\n   * @param y - Angle to rotate around Y axis in radians.\n   * @param z - Angle to rotate around Z axis in radians.\n   * @param order - Intrinsic order for conversion.\n   * @returns self\n   */ fromEulerAngle(x, y, z, order = 'ZYX') {\n        Quaternion.fromEulerAngle(x, y, z, order, this);\n        return this;\n    }\n    /**\n   * Calculates the quaternion from the given angle and rotation axis inplace.\n   * @param axis - The rotation axis.\n   * @param angle - The rotate angle.\n   * @returns self\n   */ fromAxisAngle(axis, angle) {\n        Quaternion.fromAxisAngle(axis, angle, this);\n        return this;\n    }\n    /**\n   * Calculates the rotation axis and angle for this quaternion\n   * @param axis - A vector that receives the rotation axis.\n   * @returns - The rotation angle\n   */ toAxisAngle(axis) {\n        const rad = Math.acos(this[3]) * 2;\n        const s = Math.sin(rad / 2);\n        if (s > 0.000001) {\n            axis.setXYZ(this[0] / s, this[1] / 2, this[2] / s);\n        } else {\n            axis.setXYZ(1, 0, 0);\n        }\n        return rad;\n    }\n    /**\n   * Convert this rotation to euler angles in ZYX order\n   * @param angles - A vector that receives the euler angles. If not given, a new vector will be created.\n   * @returns The vector that holds the euler angles.\n   */ toEulerAngles(angles) {\n        angles = angles ?? new Vector3();\n        const t0 = 2 * (this.w * this.x + this.y * this.z);\n        const t1 = 1 - 2 * (this.x * this.x + this.y * this.y);\n        const pitch = Math.atan2(t0, t1);\n        const t2 = Math.max(-1, Math.min(1, 2 * (this.w * this.y - this.z * this.x)));\n        const yaw = Math.asin(t2);\n        const t3 = 2 * (this.w * this.z + this.x * this.y);\n        const t4 = 1 - 2 * (this.y * this.y + this.z * this.z);\n        const roll = Math.atan2(t3, t4);\n        return angles.setXYZ(pitch, yaw, roll);\n    }\n    /**\n   * Calculates the quaternion from a rotation matrix inplace.\n   * @param matrix - The rotation matrix.\n   * @returns self\n   */ fromRotationMatrix(matrix) {\n        Quaternion.fromRotationMatrix(matrix, this);\n        return this;\n    }\n    /**\n   * Convert this quaternion to a 3x3 rotation matrix.\n   * @param matrix - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix.\n   */ toMatrix3x3(matrix) {\n        const m = matrix || new Matrix3x3();\n        this.toMatrix(m);\n        return m;\n    }\n    /**\n   * Convert this quaternion to a 4x4 rotation matrix.\n   *\n   * @remarks\n   * Only left top 3x3 part of the matrix will be changed.\n   *\n   * @param matrix - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix.\n   */ toMatrix4x4(matrix) {\n        const m = matrix || Matrix4x4.identity();\n        this.toMatrix(m);\n        m.m03 = 0;\n        m.m13 = 0;\n        m.m23 = 0;\n        m.m30 = 0;\n        m.m31 = 0;\n        m.m32 = 0;\n        m.m33 = 1;\n        return m;\n    }\n    /**\n   * Get the direction of axis x\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The direction of axis x\n   */ getDirectionX(result) {\n        result = result ?? new Vector3();\n        return result.setXYZ(1 - 2 * (this.y * this.y + this.z * this.z), 2 * (this.x * this.y + this.z * this.w), 2 * (this.z * this.x - this.y * this.w));\n    }\n    /**\n   * Get the direction of axis y\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The direction of axis y\n   */ getDirectionY(result) {\n        result = result ?? new Vector3();\n        return result.setXYZ(2 * (this.x * this.y - this.z * this.w), 1 - 2 * (this.z * this.z + this.x * this.x), 2 * (this.y * this.z + this.x * this.w));\n    }\n    /**\n   * Get the direction of axis z\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The direction of axis z\n   */ getDirectionZ(result) {\n        result = result ?? new Vector3();\n        return result.setXYZ(2 * (this.z * this.x + this.y * this.w), 2 * (this.y * this.z - this.x * this.w), 1 - 2 * (this.y * this.y + this.x * this.x));\n    }\n    /**\n   * Get the rotate angle and the rotation axis for this quaternion.\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns An vector4 that the x, y, z component presents the axis and the w component presents the angle.\n   */ getAxisAngle(result) {\n        result = result ?? new Vector4();\n        const sign = this.w < 0 ? -1 : 1;\n        const x = this.x * sign;\n        const y = this.y * sign;\n        const z = this.z * sign;\n        const w = this.w * sign;\n        const halfAngle = Math.acos(w);\n        const sinHalf = Math.sin(halfAngle);\n        return result.setXYZW(x / sinHalf, y / sinHalf, z / sinHalf, 2 * halfAngle);\n    }\n    /**\n   * Rotate a vector\n   * @param v - The vector to be rotated.\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The rotation result.\n   */ transform(v, result) {\n        result = result || new Vector3();\n        const x = this.x * 2;\n        const y = this.y * 2;\n        const z = this.z * 2;\n        const xx = this.x * x;\n        const yy = this.y * y;\n        const zz = this.z * z;\n        const xy = this.x * y;\n        const xz = this.x * z;\n        const yz = this.y * z;\n        const wx = this.w * x;\n        const wy = this.w * y;\n        const wz = this.w * z;\n        return result.setXYZ((1 - yy - zz) * v.x + (xy - wz) * v.y + (xz + wy) * v.z, (xy + wz) * v.x + (1 - xx - zz) * v.y + (yz - wx) * v.z, (xz - wy) * v.x + (yz + wx) * v.y + (1 - xx - yy) * v.z);\n    }\n    /**\n   * Scale a Quaternion by a scalar number.\n   * @param a - The quaternion to be scaled.\n   * @param b - The scalar number.\n   * @param result - The output quaternion (can be the same quaternion as a). if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static scale(q, t, result) {\n        result = result || q;\n        return result.setXYZW(q.x * t, q.y * t, q.z * t, q.w * t);\n    }\n    /**\n   * Calculates the dot product of two Quaternion's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @returns dot product of a and b\n   */ static dot(a, b) {\n        return a.x * b.x + a.y * b.y + a.z * b.z + a.w * b.w;\n    }\n    /**\n   * Create an identity quaternion\n   * @param q - The output quaternion, if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static identity(q) {\n        return (q || new Quaternion()).setXYZW(0, 0, 0, 1);\n    }\n    /**\n   * Normalize a quaternion\n   * @param q - The input quaternion\n   * @param result - The output quaternion (can be the same as q), if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static normalize(q, result) {\n        const mag = q.magnitude;\n        return (result || new Quaternion()).setXYZW(q.x / mag, q.y / mag, q.z / mag, q.w / mag);\n    }\n    /**\n   * Gets the conjugate of a quaternion\n   * @param q - The input quaternion\n   * @param result - The output quaternion (can be the same as q), if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static conjugate(q, result) {\n        return (result || new Quaternion()).setXYZW(-q.x, -q.y, -q.z, q.w);\n    }\n    /**\n   * Multiply two Quaternion's.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output quaternion (can be the same as a or b). if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static multiply(a, b, result) {\n        result = result || new Quaternion();\n        const x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n        const y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n        const z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n        const w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n        return result.setXYZW(x, y, z, w);\n    }\n    /**\n   * Performs a spherical linear interpolation between two quat.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param t - The interpolation amount, in the range [0-1].\n   * @param result - The output quaternion (can be the same as a or b), if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static slerp(a, b, t, result) {\n        result = result || new Quaternion();\n        if (t <= 0) {\n            return result.setXYZW(a.x, a.y, a.z, a.w);\n        }\n        if (t >= 1) {\n            return result.setXYZW(b.x, b.y, b.z, b.w);\n        }\n        const halfCos1 = this.dot(a, b);\n        const inv = halfCos1 < 0 ? -1 : 1;\n        const ax = a.x;\n        const ay = a.y;\n        const az = a.z;\n        const aw = a.w;\n        const bx = b.x * inv;\n        const by = b.y * inv;\n        const bz = b.z * inv;\n        const bw = b.w * inv;\n        const halfCos = halfCos1 * inv;\n        if (halfCos >= 1) {\n            return result.setXYZW(ax, ay, az, aw);\n        }\n        const halfSinSqr = 1 - halfCos * halfCos;\n        if (halfSinSqr <= Number.EPSILON) {\n            const s = 1 - t;\n            return result.setAndNormalize(a.x * s + b.x * t, a.y * s + b.y * t, a.z * s + b.z * t, a.w * s + b.w * t);\n        }\n        const halfSin = Math.sqrt(halfSinSqr);\n        const halfTheta = Math.atan2(halfSin, halfCos);\n        const ratioA = Math.sin((1 - t) * halfTheta) / halfSin;\n        const ratioB = Math.sin(t * halfTheta) / halfSin;\n        return result.setXYZW(ax * ratioA + bx * ratioB, ay * ratioA + by * ratioB, az * ratioA + bz * ratioB, aw * ratioA + bw * ratioB);\n    }\n    /**\n   * Gets the angular distance between two unit quaternions.\n   * @param a - The origin quaternion\n   * @param b - The destination quaternion\n   * @returns - The angle in radians\n   */ static angleBetween(a, b) {\n        const x = this.dot(a, b);\n        const clamped = x < -1 ? -1 : x > 1 ? 1 : x;\n        return 2 * Math.acos(Math.abs(clamped));\n    }\n    /**\n   * Creates a quaternion used to rotate a unit vector to another.\n   * @param from - The unit vector to be rotated.\n   * @param to - The destination unit vector.\n   * @param result - The output quaternion, if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static unitVectorToUnitVector(from, to, result) {\n        // assume from and to are unit vectors\n        result = result || new Quaternion();\n        let r = Vector3.dot(from, to) + 1;\n        if (r < 0.000001) {\n            r = 0;\n            if (Math.abs(from.x) > Math.abs(from.z)) {\n                return result.setAndNormalize(-from.y, from.x, 0, r);\n            } else {\n                return result.setAndNormalize(0, -from.z, from.y, r);\n            }\n        } else {\n            return result.setAndNormalize(from.y * to.z - from.z * to.y, from.z * to.x - from.x * to.z, from.x * to.y - from.y * to.x, r);\n        }\n    }\n    /**\n   * Creates a quaternion from an euler angle in specific order.\n   * @param x - Angle to rotate around X axis in radians.\n   * @param y - Angle to rotate around Y axis in radians.\n   * @param z - Angle to rotate around Z axis in radians.\n   * @param order - Intrinsic order for conversion.\n   * @param result - The output quaternion, if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static fromEulerAngle(a, b, c, order = 'ZYX', result) {\n        result = result || new Quaternion();\n        const c1 = Math.cos(a / 2);\n        const c2 = Math.cos(b / 2);\n        const c3 = Math.cos(c / 2);\n        const s1 = Math.sin(a / 2);\n        const s2 = Math.sin(b / 2);\n        const s3 = Math.sin(c / 2);\n        switch(order){\n            case 'XYZ':\n                return result.setXYZW(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n            case 'YXZ':\n                return result.setXYZW(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n            case 'ZXY':\n                return result.setXYZW(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n            case 'ZYX':\n                return result.setXYZW(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n            case 'YZX':\n                return result.setXYZW(s1 * c2 * c3 + c1 * s2 * s3, c1 * s2 * c3 + s1 * c2 * s3, c1 * c2 * s3 - s1 * s2 * c3, c1 * c2 * c3 - s1 * s2 * s3);\n            case 'XZY':\n                return result.setXYZW(s1 * c2 * c3 - c1 * s2 * s3, c1 * s2 * c3 - s1 * c2 * s3, c1 * c2 * s3 + s1 * s2 * c3, c1 * c2 * c3 + s1 * s2 * s3);\n        }\n    }\n    /**\n   * Creates a quaternion from the given angle and rotation axis.\n   * @param axis - The rotation axis.\n   * @param angle - The rotate angle.\n   * @param result - The output quaternion, if not specified, a new quaternion will be created.\n   * @returns The output quaternion\n   */ static fromAxisAngle(axis, angle, result) {\n        // assume axis is normalized\n        result = result || new Quaternion();\n        const halfAngle = angle / 2;\n        const s = Math.sin(halfAngle);\n        return result.setXYZW(axis.x * s, axis.y * s, axis.z * s, Math.cos(halfAngle));\n    }\n    /**\n   * Creates a quaternion from a rotation matrix.\n   * @param matrix - The rotation matrix.\n   * @param result - The output quaternion, if not specified, a new quaternion will be created.\n   * @returns self\n   */ static fromRotationMatrix(matrix, result) {\n        // assume matrix contains rotation without scaling\n        result = result || new Quaternion();\n        const trace = matrix.m00 + matrix.m11 + matrix.m22;\n        let s;\n        if (trace > 0) {\n            s = 0.5 / Math.sqrt(trace + 1);\n            result.setXYZW((matrix.m21 - matrix.m12) * s, (matrix.m02 - matrix.m20) * s, (matrix.m10 - matrix.m01) * s, 0.25 / s);\n        } else if (matrix.m00 > matrix.m11 && matrix.m00 > matrix.m22) {\n            s = 2 * Math.sqrt(1 + matrix.m00 - matrix.m11 - matrix.m22);\n            result.setXYZW(0.25 * s, (matrix.m01 + matrix.m10) / s, (matrix.m02 + matrix.m20) / s, (matrix.m21 - matrix.m12) / s);\n        } else if (matrix.m11 > matrix.m22) {\n            s = 2 * Math.sqrt(1 - matrix.m00 + matrix.m11 - matrix.m22);\n            result.setXYZW((matrix.m10 + matrix.m01) / s, 0.25 * s, (matrix.m21 + matrix.m12) / s, (matrix.m02 - matrix.m20) / s);\n        } else {\n            s = 2 * Math.sqrt(1 - matrix.m00 - matrix.m11 + matrix.m22);\n            result.setXYZW((matrix.m02 + matrix.m20) / s, (matrix.m12 + matrix.m21) / s, 0.25 * s, (matrix.m10 - matrix.m01) / s);\n        }\n        return result;\n    }\n    /** @internal */ toMatrix(matrix) {\n        const xx = this.x * this.x;\n        const yy = this.y * this.y;\n        const zz = this.z * this.z;\n        const xy = this.x * this.y;\n        const zw = this.z * this.w;\n        const zx = this.z * this.x;\n        const yw = this.y * this.w;\n        const yz = this.y * this.z;\n        const xw = this.x * this.w;\n        matrix.m00 = 1 - 2 * (yy + zz);\n        matrix.m10 = 2 * (xy + zw);\n        matrix.m20 = 2 * (zx - yw);\n        matrix.m01 = 2 * (xy - zw);\n        matrix.m11 = 1 - 2 * (zz + xx);\n        matrix.m21 = 2 * (yz + xw);\n        matrix.m02 = 2 * (zx + yw);\n        matrix.m12 = 2 * (yz - xw);\n        matrix.m22 = 1 - 2 * (yy + xx);\n    }\n}\n/**\n * Observable 4 dimentional vector\n *\n * @public\n */ class ObservableQuaternion extends Quaternion {\n    /** @internal */ _callback;\n    /** The callback function which will be executed when the value changed */ get callback() {\n        return this._callback;\n    }\n    set callback(cb) {\n        this._callback = cb;\n    }\n    /**\n   * {@inheritDoc Quaternion.x}\n   */ get x() {\n        return super.x;\n    }\n    set x(val) {\n        val = toFloat(val);\n        if (val !== super.x) {\n            super.x = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Quaternion.y}\n   */ get y() {\n        return super.y;\n    }\n    set y(val) {\n        val = toFloat(val);\n        if (val !== super.y) {\n            super.y = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Quaternion.z}\n   */ get z() {\n        return super.z;\n    }\n    set z(val) {\n        val = toFloat(val);\n        if (val !== super.z) {\n            super.z = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Quaternion.w}\n   */ get w() {\n        return super.w;\n    }\n    set w(val) {\n        val = toFloat(val);\n        if (val !== super.w) {\n            super.w = val;\n            this._callback?.();\n        }\n    }\n    /**\n   * {@inheritDoc Quaternion.setXYZW}\n   */ setXYZW(x, y, z, w) {\n        x = toFloat(x);\n        y = toFloat(y);\n        z = toFloat(z);\n        w = toFloat(w);\n        if (x !== super.x || y !== super.y || z !== super.z || w !== super.w) {\n            super.setXYZW(x, y, z, w);\n            this._callback?.();\n        }\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.copyWithin\n   */ copyWithin(target, start, end) {\n        super.copyWithin(target, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.fill\n   */ fill(value, start, end) {\n        super.fill(value, start, end);\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.reverse\n   */ reverse() {\n        super.reverse();\n        this._callback?.();\n        return this;\n    }\n    /**\n   * Inherited from Float32Array.set\n   */ set(array, offset) {\n        super.set(array, offset);\n        this._callback?.();\n    }\n    /**\n   * Inherited from Float32Array.sort\n   */ sort(compareFn) {\n        super.sort(compareFn);\n        this._callback?.();\n        return this;\n    }\n}\n/**\n * 3x3 Matrix\n *\n * @remarks\n * The matrix is column-major:\n * | m00, m10, m20 |\n * | m01, m11, m21 |\n * | m02, m12, m22 |\n *\n * @public\n */ class Matrix3x3 extends VectorBase {\n    constructor(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8){\n        if (arg0 instanceof ArrayBuffer && typeof arg1 === 'number') {\n            super(arg0, arg1, 9);\n        } else {\n            super(9);\n            if (typeof arg0 === 'number') {\n                this[0] = arg0;\n                this[1] = arg1;\n                this[2] = arg2;\n                this[3] = arg3;\n                this[4] = arg4;\n                this[5] = arg5;\n                this[6] = arg6;\n                this[7] = arg7;\n                this[8] = arg8;\n            } else if (arg0 instanceof Quaternion) {\n                arg0.toMatrix3x3(this);\n            } else if (arg0 instanceof Matrix4x4) {\n                this[0] = arg0[0];\n                this[1] = arg0[1];\n                this[2] = arg0[2];\n                this[3] = arg0[4];\n                this[4] = arg0[5];\n                this[5] = arg0[6];\n                this[6] = arg0[8];\n                this[7] = arg0[9];\n                this[8] = arg0[10];\n            } else if ((arg0 instanceof Float32Array || Array.isArray(arg0)) && arg0.length >= 9) {\n                this.set(arg0);\n            } else if (arg0 === undefined) {\n                this.identity();\n            } else {\n                throw new Error('Matrix3x4.constructor(): invalid arguments');\n            }\n        }\n    }\n    /**\n   * Creates a new Matrix3x3 initialized with values from this matrix.\n   * @returns The new matrix.\n   */ clone() {\n        return new Matrix3x3(this);\n    }\n    /** Get the element at row 0, column 0 */ get m00() {\n        return this[0];\n    }\n    set m00(v) {\n        this[0] = v;\n    }\n    /** Get the element at row 0, column 1 */ get m10() {\n        return this[1];\n    }\n    set m10(v) {\n        this[1] = v;\n    }\n    /** Get the element at row 0, column 2 */ get m20() {\n        return this[2];\n    }\n    set m20(v) {\n        this[2] = v;\n    }\n    /** Get the element at row 1, column 0 */ get m01() {\n        return this[3];\n    }\n    set m01(v) {\n        this[3] = v;\n    }\n    /** Get the element at row 1, column 1 */ get m11() {\n        return this[4];\n    }\n    set m11(v) {\n        this[4] = v;\n    }\n    /** Get the element at row 1, column 2 */ get m21() {\n        return this[5];\n    }\n    set m21(v) {\n        this[5] = v;\n    }\n    /** Get the element at row 2, column 0 */ get m02() {\n        return this[6];\n    }\n    set m02(v) {\n        this[6] = v;\n    }\n    /** Get the element at row 2, column 1 */ get m12() {\n        return this[7];\n    }\n    set m12(v) {\n        this[7] = v;\n    }\n    /** Get the element at row 2, column 2 */ get m22() {\n        return this[8];\n    }\n    set m22(v) {\n        this[8] = v;\n    }\n    /**\n   * Get the values in a row as a Vector3\n   * @param row - The row index\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ getRow(row, result) {\n        return (result || new Vector3()).setXYZ(this[row * 3], this[row * 3 + 1], this[row * 3 + 2]);\n    }\n    /**\n   * Set values to a row in the matrix.\n   * @param row - The row index\n   * @param v - The values to be set\n   * @returns - self\n   */ setRow(row, v) {\n        this[row * 3] = v.x;\n        this[row * 3 + 1] = v.y;\n        this[row * 3 + 2] = v.z;\n        return this;\n    }\n    /**\n   * Set values to a row in the matrix.\n   * @param row - The row index\n   * @param x - The first value of the row to be set\n   * @param y - The second value of the row to be set\n   * @param z - The third value of the row to be set\n   * @returns - self\n   */ setRowXYZ(row, x, y, z) {\n        this[row * 3] = x;\n        this[row * 3 + 1] = y;\n        this[row * 3 + 2] = z;\n        return this;\n    }\n    /**\n   * Get the values in a column as a Vector3\n   * @param col - The column index\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ getCol(col, result) {\n        return (result || new Vector3()).setXYZ(this[col], this[3 + col], this[6 + col]);\n    }\n    /**\n   * Set values to a column in the matrix.\n   * @param col - The column index.\n   * @param v - The values to be set.\n   * @returns self\n   */ setCol(col, v) {\n        this[col] = v.x;\n        this[3 + col] = v.y;\n        this[6 + col] = v.z;\n        return this;\n    }\n    /**\n   * Set values to a column in the matrix.\n   * @param col - The column index.\n   * @param x - The first value of the column to be set.\n   * @param y - The second value of the column to be set.\n   * @param z - The third value of the column to be set.\n   * @returns self\n   */ setColXYZ(col, x, y, z) {\n        this[col] = x;\n        this[3 + col] = y;\n        this[6 + col] = z;\n        return this;\n    }\n    /**\n   * Adds two Matrix3x3's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns The result matrix\n   */ static add(a, b, result) {\n        result = result || new Matrix3x3();\n        for(let i = 0; i < 9; i++){\n            result[i] = a[i] + b[i];\n        }\n        return result;\n    }\n    /**\n   * Subtracts two Matrix3x3's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns The result matrix\n   */ static sub(a, b, result) {\n        result = result || new Matrix3x3();\n        for(let i = 0; i < 9; i++){\n            result[i] = a[i] - b[i];\n        }\n        return result;\n    }\n    /**\n   * Multiplys two Matrix3x3's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static mul(a, b, result) {\n        result = result || new Matrix3x3();\n        for(let i = 0; i < 9; i++){\n            result[i] = a[i] * b[i];\n        }\n        return result;\n    }\n    /**\n   * Divides two Matrix3x3's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns The result matrix\n   */ static div(a, b, result) {\n        result = result || new Matrix3x3();\n        for(let i = 0; i < 9; i++){\n            result[i] = a[i] / b[i];\n        }\n        return result;\n    }\n    /**\n   * Scales a Matrix3x3 by a scalar number component-wise.\n   * @param a - The matrix to be scaled.\n   * @param f - The scalar number.\n   * @param result - The output matrix (can be the same as a), if not specified, a new matrix will be created.\n   * @returns The result matrix\n   */ static scale(a, f, result) {\n        result = result || new Matrix3x3();\n        for(let i = 0; i < 9; i++){\n            result[i] = a[i] * f;\n        }\n        return result;\n    }\n    /**\n   * Creates an identity Matrix3x3.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static identity(result) {\n        result = result || new Matrix3x3();\n        result.set(IDENT_MATRIX3x3);\n        return result;\n    }\n    /**\n   * Transpose a Matrix3x3.\n   * @param matrix - The matrix to be transposed.\n   * @param result - The output matrix (can be the same as matrix), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static transpose(matrix, result) {\n        result = result || new Matrix3x3();\n        if (matrix === result) {\n            [result[1], result[3]] = [\n                result[3],\n                result[1]\n            ];\n            [result[2], result[6]] = [\n                result[6],\n                result[2]\n            ];\n            [result[5], result[7]] = [\n                result[7],\n                result[5]\n            ];\n        } else {\n            result[0] = matrix[0];\n            result[1] = matrix[3];\n            result[2] = matrix[6];\n            result[3] = matrix[1];\n            result[4] = matrix[4];\n            result[5] = matrix[7];\n            result[6] = matrix[2];\n            result[7] = matrix[5];\n            result[8] = matrix[8];\n        }\n        return result;\n    }\n    /**\n   * Inverts a Matrix3x3\n   * @param matrix - The matrix to be inverted.\n   * @param result - The output matrix (can be the same as matrix). if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static invert(matrix, result) {\n        result = result || new Matrix3x3();\n        const m00 = matrix[0];\n        const m01 = matrix[1];\n        const m02 = matrix[2];\n        const m10 = matrix[3];\n        const m11 = matrix[4];\n        const m12 = matrix[5];\n        const m20 = matrix[6];\n        const m21 = matrix[7];\n        const m22 = matrix[8];\n        const tmp_0 = m22 * m11 - m12 * m21;\n        const tmp_1 = m12 * m20 - m22 * m10;\n        const tmp_2 = m21 * m10 - m20 * m11;\n        const d = 1 / (m00 * tmp_0 + m01 * tmp_1 + m02 * tmp_2);\n        result[0] = tmp_0 * d;\n        result[1] = (m02 * m21 - m22 * m01) * d;\n        result[2] = (m12 * m01 - m02 * m11) * d;\n        result[3] = tmp_1 * d;\n        result[4] = (m22 * m00 - m02 * m20) * d;\n        result[5] = (m02 * m10 - m12 * m00) * d;\n        result[6] = tmp_2 * d;\n        result[7] = (m01 * m20 - m21 * m00) * d;\n        result[8] = (m11 * m00 - m01 * m10) * d;\n        return result;\n    }\n    /**\n   * Creates a Matrix3x3 that presents a rotation around x axis.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotationX(angle, result) {\n        result = result || new Matrix3x3();\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        result[0] = 1;\n        result[1] = 0;\n        result[2] = 0;\n        result[3] = 0;\n        result[4] = c;\n        result[5] = s;\n        result[6] = 0;\n        result[7] = -s;\n        result[8] = c;\n        return result;\n    }\n    /**\n   * Creates a Matrix3x3 that presents a rotation around y axis.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotationY(angle, result) {\n        result = result || new Matrix3x3();\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        result[0] = c;\n        result[1] = 0;\n        result[2] = -s;\n        result[3] = 0;\n        result[4] = 1;\n        result[5] = 0;\n        result[6] = s;\n        result[7] = 0;\n        result[8] = c;\n        return result;\n    }\n    /**\n   * Creates a Matrix3x3 that presents a rotation around z axis.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotationZ(angle, result) {\n        result = result || new Matrix3x3();\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        result[0] = c;\n        result[1] = s;\n        result[2] = 0;\n        result[3] = -s;\n        result[4] = c;\n        result[5] = 0;\n        result[6] = 0;\n        result[7] = 0;\n        result[8] = 1;\n        return result;\n    }\n    /**\n   * Creates a Matrix3x3 that presents a rotation around a given axis.\n   * @param axis - The rotation axis.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotation(axis, angle, result) {\n        result = result || new Matrix3x3();\n        let x = axis.x;\n        let y = axis.y;\n        let z = axis.z;\n        const n = Math.hypot(x, y, z);\n        x /= n;\n        y /= n;\n        z /= n;\n        const xx = x * x;\n        const yy = y * y;\n        const zz = z * z;\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        const oneMinusCosine = 1 - c;\n        result[0] = xx + (1 - xx) * c;\n        result[1] = x * y * oneMinusCosine + z * s;\n        result[2] = x * z * oneMinusCosine - y * s;\n        result[3] = x * y * oneMinusCosine - z * s;\n        result[4] = yy + (1 - yy) * c;\n        result[5] = y * z * oneMinusCosine + x * s;\n        result[6] = x * z * oneMinusCosine + y * s;\n        result[7] = y * z * oneMinusCosine - x * s;\n        result[8] = zz + (1 - zz) * c;\n        return result;\n    }\n    /**\n   * Multiplies two Matrix3x3's\n   * @param m1 - The first operand.\n   * @param m2 - The second operand.\n   * @param result - The output matrix (can be the same as m1 or m2), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static multiply(m1, m2, result) {\n        result = result || new Matrix3x3();\n        const a00 = m1[0];\n        const a01 = m1[1];\n        const a02 = m1[2];\n        const a10 = m1[3];\n        const a11 = m1[4];\n        const a12 = m1[5];\n        const a20 = m1[6];\n        const a21 = m1[7];\n        const a22 = m1[8];\n        const b00 = m2[0];\n        const b01 = m2[1];\n        const b02 = m2[2];\n        const b10 = m2[3];\n        const b11 = m2[4];\n        const b12 = m2[5];\n        const b20 = m2[6];\n        const b21 = m2[7];\n        const b22 = m2[8];\n        result[0] = a00 * b00 + a10 * b01 + a20 * b02;\n        result[1] = a01 * b00 + a11 * b01 + a21 * b02;\n        result[2] = a02 * b00 + a12 * b01 + a22 * b02;\n        result[3] = a00 * b10 + a10 * b11 + a20 * b12;\n        result[4] = a01 * b10 + a11 * b11 + a21 * b12;\n        result[5] = a02 * b10 + a12 * b11 + a22 * b12;\n        result[6] = a00 * b20 + a10 * b21 + a20 * b22;\n        result[7] = a01 * b20 + a11 * b21 + a21 * b22;\n        result[8] = a02 * b20 + a12 * b21 + a22 * b22;\n        return result;\n    }\n    /**\n   * Subtract a matrix from this matrix component-wise.\n   * @param other - The matrix that will be subtract.\n   * @returns self\n   */ subBy(other) {\n        Matrix3x3.sub(this, other, this);\n        return this;\n    }\n    /**\n   * Add a matrix to this matrix component-wise.\n   * @param other - The matrix that will be added.\n   * @returns self\n   */ addBy(other) {\n        Matrix3x3.add(this, other, this);\n        return this;\n    }\n    /**\n   * Multiplies this matrix by a matrix component-wise.\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ mulBy(other) {\n        Matrix3x3.mul(this, other, this);\n        return this;\n    }\n    /**\n   * Divide this matrix by a matrix component-wise.\n   * @param other - The matrix that will be divide by.\n   * @returns self\n   */ divBy(other) {\n        Matrix3x3.div(this, other, this);\n        return this;\n    }\n    /**\n   * Scale this matrix by a scalar number component-wise.\n   * @param f - amount to scale this matrix by.\n   * @returns self\n   */ scaleBy(f) {\n        Matrix3x3.scale(this, f, this);\n        return this;\n    }\n    /**\n   * Make this matrix identity.\n   * @returns self\n   */ identity() {\n        Matrix3x3.identity(this);\n        return this;\n    }\n    /**\n   * Calculate the inverse of this matrix inplace.\n   * @returns self\n   */ inplaceInvert() {\n        Matrix3x3.invert(this, this);\n        return this;\n    }\n    /**\n   * Calculate the transpose of this matrix inplace.\n   * @returns self\n   */ transpose() {\n        Matrix3x3.transpose(this, this);\n        return this;\n    }\n    /**\n   * Post-multiply by a matrix inplace.\n   *\n   * @remarks\n   * this = this * other\n   *\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ multiplyRight(other) {\n        Matrix3x3.multiply(this, other, this);\n        return this;\n    }\n    /**\n   * Pre-multiply by a matrix inplace.\n   *\n   * @remarks\n   * this = other * this\n   *\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ multiplyLeft(other) {\n        Matrix3x3.multiply(other, this, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around x axis inplace.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotationX(angle) {\n        Matrix3x3.rotationX(angle, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around y axis inplace.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotationY(angle) {\n        Matrix3x3.rotationY(angle, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around z axis inplace.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotationZ(angle) {\n        Matrix3x3.rotationZ(angle, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around a given axis.\n   * @param axis - The rotation axis.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotation(axis, angle) {\n        Matrix3x3.rotation(axis, angle, this);\n        return this;\n    }\n    /**\n   * Transform a vector by this matrix.\n   * @param vec - The vector to be transformed.\n   * @param result - The output vector (can be the same as vec), if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transform(vec, result) {\n        result = result || new Vector3();\n        return result.setXYZ(this[0] * vec[0] + this[3] * vec[1] + this[6] * vec[2], this[1] * vec[0] + this[4] * vec[1] + this[7] * vec[2], this[2] * vec[0] + this[5] * vec[1] + this[8] * vec[2]);\n    }\n    /**\n   * {@inheritDoc Matrix3x3.transform}\n   */ transformPoint(vec, result) {\n        return this.transform(vec, result);\n    }\n    /**\n   * {@inheritDoc Matrix3x3.transform}\n   */ transformVector(vec, result) {\n        return this.transform(vec, result);\n    }\n}\n/**\n * 4x4 Matrix\n *\n * @remarks\n * The matrix is column-major:\n * | m00, m10, m20, m30 |\n * | m01, m11, m21, m31 |\n * | m02, m12, m22, m32 |\n * | m03, m13, m23, m33 |\n *\n * @public\n */ class Matrix4x4 extends VectorBase {\n    constructor(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14, arg15){\n        if (arg0 instanceof ArrayBuffer && typeof arg1 === 'number') {\n            super(arg0, arg1, 16);\n        } else {\n            super(16);\n            if (typeof arg0 === 'number') {\n                this[0] = arg0;\n                this[1] = arg1;\n                this[2] = arg2;\n                this[3] = arg3;\n                this[4] = arg4;\n                this[5] = arg5;\n                this[6] = arg6;\n                this[7] = arg7;\n                this[8] = arg8;\n                this[9] = arg9;\n                this[10] = arg10;\n                this[11] = arg11;\n                this[12] = arg12;\n                this[13] = arg13;\n                this[14] = arg14;\n                this[15] = arg15;\n            } else if (arg0 instanceof Quaternion) {\n                arg0.toMatrix4x4(this);\n            } else if (arg0 instanceof Matrix3x3) {\n                this.m00 = arg0.m00;\n                this.m01 = arg0.m01;\n                this.m02 = arg0.m02;\n                this.m03 = 0;\n                this.m10 = arg0.m10;\n                this.m11 = arg0.m11;\n                this.m12 = arg0.m12;\n                this.m13 = 0;\n                this.m20 = arg0.m20;\n                this.m21 = arg0.m21;\n                this.m22 = arg0.m22;\n                this.m23 = 0;\n                this.m30 = 0;\n                this.m31 = 0;\n                this.m32 = 0;\n                this.m33 = 1;\n            } else if ((arg0 instanceof Float32Array || Array.isArray(arg0)) && arg0.length >= 16) {\n                this.set(arg0);\n            } else if (arg0 === undefined) {\n                this.identity();\n            } else {\n                throw new Error('Matrix4x4.constructor(): invalid arguments');\n            }\n        }\n    }\n    /**\n   * Creates a new Matrix4x4 initialized with values from this matrix.\n   * @returns The new matrix.\n   */ clone() {\n        return new Matrix4x4(this);\n    }\n    /** Get the element at row 0, column 0 */ get m00() {\n        return this[0];\n    }\n    set m00(v) {\n        this[0] = v;\n    }\n    /** Get the element at row 0, column 1 */ get m10() {\n        return this[1];\n    }\n    set m10(v) {\n        this[1] = v;\n    }\n    /** Get the element at row 0, column 2 */ get m20() {\n        return this[2];\n    }\n    set m20(v) {\n        this[2] = v;\n    }\n    /** Get the element at row 0, column 3 */ get m30() {\n        return this[3];\n    }\n    set m30(v) {\n        this[3] = v;\n    }\n    /** Get the element at row 1, column 0 */ get m01() {\n        return this[4];\n    }\n    set m01(v) {\n        this[4] = v;\n    }\n    /** Get the element at row 1, column 1 */ get m11() {\n        return this[5];\n    }\n    set m11(v) {\n        this[5] = v;\n    }\n    /** Get the element at row 1, column 2 */ get m21() {\n        return this[6];\n    }\n    set m21(v) {\n        this[6] = v;\n    }\n    /** Get the element at row 1, column 3 */ get m31() {\n        return this[7];\n    }\n    set m31(v) {\n        this[7] = v;\n    }\n    /** Get the element at row 2, column 0 */ get m02() {\n        return this[8];\n    }\n    set m02(v) {\n        this[8] = v;\n    }\n    /** Get the element at row 2, column 1 */ get m12() {\n        return this[9];\n    }\n    set m12(v) {\n        this[9] = v;\n    }\n    /** Get the element at row 2, column 2 */ get m22() {\n        return this[10];\n    }\n    set m22(v) {\n        this[10] = v;\n    }\n    /** Get the element at row 2, column 3 */ get m32() {\n        return this[11];\n    }\n    set m32(v) {\n        this[11] = v;\n    }\n    /** Get the element at row 3, column 0 */ get m03() {\n        return this[12];\n    }\n    set m03(v) {\n        this[12] = v;\n    }\n    /** Get the element at row 3, column 1 */ get m13() {\n        return this[13];\n    }\n    set m13(v) {\n        this[13] = v;\n    }\n    /** Get the element at row 3, column 2 */ get m23() {\n        return this[14];\n    }\n    set m23(v) {\n        this[14] = v;\n    }\n    /** Get the element at row 3, column 3 */ get m33() {\n        return this[15];\n    }\n    set m33(v) {\n        this[15] = v;\n    }\n    /**\n   * Get the values in a row as a Vector4\n   * @param row - The row index\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ getRow(row, result) {\n        return (result || new Vector4()).setXYZW(this[row * 4], this[row * 4 + 1], this[row * 4 + 2], this[row * 4 + 3]);\n    }\n    /**\n   * Set values to a row in the matrix.\n   * @param row - The row index\n   * @param v - The values to be set\n   * @returns - self\n   */ setRow(row, v) {\n        this[row * 4] = v.x;\n        this[row * 4 + 1] = v.y;\n        this[row * 4 + 2] = v.z;\n        this[row * 4 + 3] = v.w;\n        return this;\n    }\n    /**\n   * Set values to a row in the matrix.\n   * @param row - The row index\n   * @param x - The first value of the row to be set\n   * @param y - The second value of the row to be set\n   * @param z - The third value of the row to be set\n   * @param w - The fourth value of the row to be set\n   * @returns - self\n   */ setRowXYZW(row, x, y, z, w) {\n        this[row * 4] = x;\n        this[row * 4 + 1] = y;\n        this[row * 4 + 2] = z;\n        this[row * 4 + 3] = w;\n        return this;\n    }\n    /**\n   * Get the values in a column as a Vector4\n   * @param col - The column index\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ getCol(col, result) {\n        return (result || new Vector4()).setXYZW(this[col], this[4 + col], this[8 + col], this[12 + col]);\n    }\n    /**\n   * Set values to a column in the matrix.\n   * @param col - The column index.\n   * @param v - The values to be set.\n   * @returns self\n   */ setCol(col, v) {\n        this[col] = v.x;\n        this[4 + col] = v.y;\n        this[8 + col] = v.z;\n        this[12 + col] = v.w;\n        return this;\n    }\n    /**\n   * Set values to a column in the matrix.\n   * @param col - The column index.\n   * @param x - The first value of the column to be set.\n   * @param y - The second value of the column to be set.\n   * @param z - The third value of the column to be set.\n   * @param w - The fourth value of the column to be set.\n   * @returns self\n   */ setColXYZW(col, x, y, z, w) {\n        this[col] = x;\n        this[4 + col] = y;\n        this[8 + col] = z;\n        this[12 + col] = w;\n        return this;\n    }\n    /**\n   * Adds two Matrix4x4's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static add(a, b, result) {\n        result = result || new Matrix4x4();\n        for(let i = 0; i < 16; i++){\n            result[i] = a[i] + b[i];\n        }\n        return result;\n    }\n    /**\n   * Subtracts two Matrix4x4's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns\n   */ static sub(a, b, result) {\n        result = result || new Matrix4x4();\n        for(let i = 0; i < 16; i++){\n            result[i] = a[i] - b[i];\n        }\n        return result;\n    }\n    /**\n   * Multiplys two Matrix4x4's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static mul(a, b, result) {\n        result = result || new Matrix4x4();\n        for(let i = 0; i < 16; i++){\n            result[i] = a[i] * b[i];\n        }\n        return result;\n    }\n    /**\n   * Divides two Matrix4x4's component-wise.\n   * @param a - The first operand.\n   * @param b - The second operand.\n   * @param result - The output matrix (can be the same as a or b), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static div(a, b, result) {\n        result = result || new Matrix4x4();\n        for(let i = 0; i < 16; i++){\n            result[i] = a[i] / b[i];\n        }\n        return result;\n    }\n    /**\n   * Scales a Matrix4x4 by a scalar number component-wise.\n   * @param a - The matrix to be scaled.\n   * @param f - The scalar number.\n   * @param result - The output matrix (can be the same as a), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static scale(a, f, result) {\n        result = result || new Matrix4x4();\n        for(let i = 0; i < 16; i++){\n            result[i] = a[i] * f;\n        }\n        return result;\n    }\n    /**\n   * Creates an identity Matrix4x4.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static identity(result) {\n        result = result || new Matrix4x4();\n        result.set(IDENT_MATRIX4x4);\n        return result;\n    }\n    /**\n   * Creates an orthogonal projection matrix from a given frustum.\n   * @param left - Left bound of the frustum.\n   * @param right - Right bound of the frustum.\n   * @param bottom - Bottom bound of the frustum.\n   * @param top - Top bound of the frustum.\n   * @param near - Near bound of the frustum.\n   * @param far - Far bound of the frustum.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static ortho(left, right, bottom, top, near, far, result) {\n        result = result || new Matrix4x4();\n        result[0] = 2 / (right - left);\n        result[1] = 0;\n        result[2] = 0;\n        result[3] = 0;\n        result[4] = 0;\n        result[5] = 2 / (top - bottom);\n        result[6] = 0;\n        result[7] = 0;\n        result[8] = 0;\n        result[9] = 0;\n        result[10] = 2 / (near - far);\n        result[11] = 0;\n        result[12] = (left + right) / (left - right);\n        result[13] = (bottom + top) / (bottom - top);\n        result[14] = (near + far) / (near - far);\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a reflection matrix from a plane.\n   * @param nx - The x component of the plane normal.\n   * @param ny - The y component of the plane normal.\n   * @param nz - The z component of the plane normal.\n   * @param d - The plane distance.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static reflection(nx, ny, nz, d, result) {\n        result = result || new Matrix4x4();\n        result.m00 = 1 - 2 * nx * nx;\n        result.m01 = -2 * nx * ny;\n        result.m02 = -2 * nx * nz;\n        result.m03 = -2 * nx * d;\n        result.m10 = -2 * nx * ny;\n        result.m11 = 1 - 2 * ny * ny;\n        result.m12 = -2 * ny * nz;\n        result.m13 = -2 * ny * d;\n        result.m20 = -2 * nx * nz;\n        result.m21 = -2 * ny * nz;\n        result.m22 = 1 - 2 * nz * nz;\n        result.m23 = -2 * nz * d;\n        result.m30 = 0;\n        result.m31 = 0;\n        result.m32 = 0;\n        result.m33 = 1;\n        return result;\n    }\n    /**\n   * Creates a right-handed perspective projection matrix.\n   * @param fovY - The vertical field of view in radians.\n   * @param aspect - The aspect ratio.\n   * @param znear - The near clip plane.\n   * @param zfar - The far clip plane.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static perspective(fovY, aspect, znear, zfar, result) {\n        const h = znear * Math.tan(fovY * 0.5);\n        const w = h * aspect;\n        return this.frustum(-w, w, -h, h, znear, zfar, result);\n    }\n    static obliqueProjection(projectionMatrix, clipPlane) {\n        const result = new Matrix4x4(projectionMatrix);\n        const q = Matrix4x4.invert(projectionMatrix).transform(new Vector4(clipPlane.a > 0 ? 1 : -1, clipPlane.b > 0 ? 1 : -1, 1, 1));\n        const s = 2 / (q.x * clipPlane.a + q.y * clipPlane.b + q.z * clipPlane.c + q.w * clipPlane.d);\n        result[2] = clipPlane.a * s - result[3];\n        result[6] = clipPlane.b * s - result[7];\n        result[10] = clipPlane.c * s - result[11];\n        result[14] = clipPlane.d * s - result[15];\n        return result;\n    }\n    static obliquePerspective(perspectiveMatrix, nearPlane) {\n        const result = new Matrix4x4(perspectiveMatrix);\n        const q = new Vector4(((nearPlane.x > 0 ? 1 : nearPlane.x < 0 ? -1 : 0) + perspectiveMatrix.m02) / perspectiveMatrix.m00, ((nearPlane.y > 0 ? 1 : nearPlane.y < 0 ? -1 : 0) + perspectiveMatrix.m12) / perspectiveMatrix.m11, -1, (1 + perspectiveMatrix.m22) / perspectiveMatrix.m23);\n        const c = Vector4.scale(nearPlane, 2 / Vector4.dot(nearPlane, q));\n        result.m20 = c.x;\n        result.m21 = c.y;\n        result.m22 = c.z + 1;\n        result.m23 = c.w;\n        return result;\n    /*\n        float       matrix[16];\n        Vector4D    q;\n\n        // Grab the current projection matrix from OpenGL\n        glGetFloatv(GL_PROJECTION_MATRIX, matrix);\n\n        // Calculate the clip-space corner point opposite the clipping plane\n        // as (sgn(clipPlane.x), sgn(clipPlane.y), 1, 1) and\n        // transform it into camera space by multiplying it\n        // by the inverse of the projection matrix\n\n        q.x = (sgn(clipPlane.x) + matrix[8]) / matrix[0];\n        q.y = (sgn(clipPlane.y) + matrix[9]) / matrix[5];\n        q.z = -1.0F;\n        q.w = (1.0F + matrix[10]) / matrix[14];\n\n        // Calculate the scaled plane vector\n        Vector4D c = clipPlane * (2.0F / Dot(clipPlane, q));\n\n        // Replace the third row of the projection matrix\n        matrix[2] = c.x;\n        matrix[6] = c.y;\n        matrix[10] = c.z + 1.0F;\n        matrix[14] = c.w;\n\n        // Load it back into OpenGL\n        glMatrixMode(GL_PROJECTION);\n        glLoadMatrix(matrix);\n    }\n    */ }\n    /**\n   * Creates a perspective projection matrix from a frustum.\n   * @param left - Left bound of the frustum.\n   * @param right - Right bound of the frustum.\n   * @param bottom - Bottom bound of the frustum.\n   * @param top - Top bound of the frustum.\n   * @param znear - Near bound of the frustum.\n   * @param zfar - Far bound of the frustum.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static frustum(left, right, bottom, top, znear, zfar, result) {\n        result = result || new Matrix4x4();\n        const dx = right - left;\n        const dy = top - bottom;\n        const dz = znear - zfar;\n        result[0] = 2 * znear / dx;\n        result[1] = 0;\n        result[2] = 0;\n        result[3] = 0;\n        result[4] = 0;\n        result[5] = 2 * znear / dy;\n        result[6] = 0;\n        result[7] = 0;\n        result[8] = (left + right) / dx;\n        result[9] = (top + bottom) / dy;\n        result[10] = (znear + zfar) / dz;\n        result[11] = -1;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 2 * znear * zfar / dz;\n        result[15] = 0;\n        return result;\n    }\n    /**\n   * Transpose a Matrix4x4.\n   * @param matrix - The matrix to be transposed.\n   * @param result - The output matrix (can be the same as matrix), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static transpose(matrix, result) {\n        result = result || new Matrix4x4();\n        if (matrix === result) {\n            [result[1], result[4]] = [\n                result[4],\n                result[1]\n            ];\n            [result[2], result[8]] = [\n                result[8],\n                result[2]\n            ];\n            [result[3], result[12]] = [\n                result[12],\n                result[3]\n            ];\n            [result[6], result[9]] = [\n                result[9],\n                result[6]\n            ];\n            [result[7], result[13]] = [\n                result[13],\n                result[7]\n            ];\n            [result[11], result[14]] = [\n                result[14],\n                result[11]\n            ];\n        } else {\n            result[0] = matrix[0];\n            result[1] = matrix[4];\n            result[2] = matrix[8];\n            result[3] = matrix[12];\n            result[4] = matrix[1];\n            result[5] = matrix[5];\n            result[6] = matrix[9];\n            result[7] = matrix[13];\n            result[8] = matrix[2];\n            result[9] = matrix[6];\n            result[10] = matrix[10];\n            result[11] = matrix[14];\n            result[12] = matrix[3];\n            result[13] = matrix[7];\n            result[14] = matrix[11];\n            result[15] = matrix[15];\n        }\n        return result;\n    }\n    /**\n   * Inverts a Matrix4x4\n   * @param matrix - The matrix to be inverted.\n   * @param result - The output matrix (can be the same as matrix). if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static invert(matrix, result) {\n        result = result || new Matrix4x4();\n        const m00 = matrix[0 * 4 + 0];\n        const m01 = matrix[0 * 4 + 1];\n        const m02 = matrix[0 * 4 + 2];\n        const m03 = matrix[0 * 4 + 3];\n        const m10 = matrix[1 * 4 + 0];\n        const m11 = matrix[1 * 4 + 1];\n        const m12 = matrix[1 * 4 + 2];\n        const m13 = matrix[1 * 4 + 3];\n        const m20 = matrix[2 * 4 + 0];\n        const m21 = matrix[2 * 4 + 1];\n        const m22 = matrix[2 * 4 + 2];\n        const m23 = matrix[2 * 4 + 3];\n        const m30 = matrix[3 * 4 + 0];\n        const m31 = matrix[3 * 4 + 1];\n        const m32 = matrix[3 * 4 + 2];\n        const m33 = matrix[3 * 4 + 3];\n        const tmp_0 = m22 * m33;\n        const tmp_1 = m32 * m23;\n        const tmp_2 = m12 * m33;\n        const tmp_3 = m32 * m13;\n        const tmp_4 = m12 * m23;\n        const tmp_5 = m22 * m13;\n        const tmp_6 = m02 * m33;\n        const tmp_7 = m32 * m03;\n        const tmp_8 = m02 * m23;\n        const tmp_9 = m22 * m03;\n        const tmp_10 = m02 * m13;\n        const tmp_11 = m12 * m03;\n        const tmp_12 = m20 * m31;\n        const tmp_13 = m30 * m21;\n        const tmp_14 = m10 * m31;\n        const tmp_15 = m30 * m11;\n        const tmp_16 = m10 * m21;\n        const tmp_17 = m20 * m11;\n        const tmp_18 = m00 * m31;\n        const tmp_19 = m30 * m01;\n        const tmp_20 = m00 * m21;\n        const tmp_21 = m20 * m01;\n        const tmp_22 = m00 * m11;\n        const tmp_23 = m10 * m01;\n        const t0 = tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31 - (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n        const t1 = tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31 - (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n        const t2 = tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31 - (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n        const t3 = tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21 - (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n        const d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n        result[0] = d * t0;\n        result[1] = d * t1;\n        result[2] = d * t2;\n        result[3] = d * t3;\n        result[4] = d * (tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30 - (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\n        result[5] = d * (tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30 - (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\n        result[6] = d * (tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30 - (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\n        result[7] = d * (tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20 - (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\n        result[8] = d * (tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33 - (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\n        result[9] = d * (tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33 - (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\n        result[10] = d * (tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33 - (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\n        result[11] = d * (tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23 - (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\n        result[12] = d * (tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12 - (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\n        result[13] = d * (tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22 - (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\n        result[14] = d * (tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02 - (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\n        result[15] = d * (tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12 - (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\n        return result;\n    }\n    /**\n   * Inverts a Matrix4x4 which presents an affine transformation.\n   * @param matrix - The matrix to be inverted.\n   * @param result - The output matrix (can be the same as matrix). if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static invertAffine(matrix, result) {\n        result = result || new Matrix4x4();\n        const m00 = matrix[0 * 4 + 0];\n        const m01 = matrix[0 * 4 + 1];\n        const m02 = matrix[0 * 4 + 2];\n        const m10 = matrix[1 * 4 + 0];\n        const m11 = matrix[1 * 4 + 1];\n        const m12 = matrix[1 * 4 + 2];\n        const m20 = matrix[2 * 4 + 0];\n        const m21 = matrix[2 * 4 + 1];\n        const m22 = matrix[2 * 4 + 2];\n        const m30 = matrix[3 * 4 + 0];\n        const m31 = matrix[3 * 4 + 1];\n        const m32 = matrix[3 * 4 + 2];\n        const t0 = m22 * m11 - m12 * m21;\n        const t1 = m02 * m21 - m22 * m01;\n        const t2 = m12 * m01 - m02 * m11;\n        const d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2);\n        result[0] = d * t0;\n        result[1] = d * t1;\n        result[2] = d * t2;\n        result[3] = 0;\n        result[4] = d * (m12 * m20 - m22 * m10);\n        result[5] = d * (m22 * m00 - m02 * m20);\n        result[6] = d * (m02 * m10 - m12 * m00);\n        result[7] = 0;\n        result[8] = d * (m10 * m21 - m20 * m11);\n        result[9] = d * (m20 * m01 - m00 * m21);\n        result[10] = d * (m00 * m11 - m10 * m01);\n        result[11] = 0;\n        result[12] = d * (m10 * m31 * m22 + m20 * m11 * m32 + m30 * m21 * m12 - (m10 * m21 * m32 + m20 * m31 * m12 + m30 * m11 * m22));\n        result[13] = d * (m00 * m21 * m32 + m20 * m31 * m02 + m30 * m01 * m22 - (m00 * m31 * m22 + m20 * m01 * m32 + m30 * m21 * m02));\n        result[14] = d * (m00 * m31 * m12 + m10 * m01 * m32 + m30 * m11 * m02 - (m00 * m11 * m32 + m10 * m31 * m02 + m30 * m01 * m12));\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a Matrix4x4 which presents a translation.\n   * @param t - The translate vector.\n   * @param result - The output matrix. if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static translation(t, result) {\n        result = result || new Matrix4x4();\n        result[0] = 1;\n        result[1] = 0;\n        result[2] = 0;\n        result[3] = 0;\n        result[4] = 0;\n        result[5] = 1;\n        result[6] = 0;\n        result[7] = 0;\n        result[8] = 0;\n        result[9] = 0;\n        result[10] = 1;\n        result[11] = 0;\n        result[12] = t.x;\n        result[13] = t.y;\n        result[14] = t.z;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a Matrix4x4 which presents a scaling.\n   * @param s - The scale vector.\n   * @param result - The output matrix. if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static scaling(s, result) {\n        result = result || new Matrix4x4();\n        result[0] = s.x;\n        result[1] = 0;\n        result[2] = 0;\n        result[3] = 0;\n        result[4] = 0;\n        result[5] = s.y;\n        result[6] = 0;\n        result[7] = 0;\n        result[8] = 0;\n        result[9] = 0;\n        result[10] = s.z;\n        result[11] = 0;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 0;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a Matrix4x4 which presents a rotation around the x axis.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix. if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotationX(angle, result) {\n        result = result || new Matrix4x4();\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        result[0] = 1;\n        result[1] = 0;\n        result[2] = 0;\n        result[3] = 0;\n        result[4] = 0;\n        result[5] = c;\n        result[6] = s;\n        result[7] = 0;\n        result[8] = 0;\n        result[9] = -s;\n        result[10] = c;\n        result[11] = 0;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 0;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a Matrix4x4 which presents a rotation around the y axis.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix. if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotationY(angle, result) {\n        result = result || new Matrix4x4();\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        result[0] = c;\n        result[1] = 0;\n        result[2] = -s;\n        result[3] = 0;\n        result[4] = 0;\n        result[5] = 1;\n        result[6] = 0;\n        result[7] = 0;\n        result[8] = s;\n        result[9] = 0;\n        result[10] = c;\n        result[11] = 0;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 0;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a Matrix4x4 which presents a rotation around the z axis.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix. if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotationZ(angle, result) {\n        result = result || new Matrix4x4();\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        result[0] = c;\n        result[1] = s;\n        result[2] = 0;\n        result[3] = 0;\n        result[4] = -s;\n        result[5] = c;\n        result[6] = 0;\n        result[7] = 0;\n        result[8] = 0;\n        result[9] = 0;\n        result[10] = 1;\n        result[11] = 0;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 0;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a Matrix4x4 which presents a rotation around a given axis.\n   * @param axis - The axis vector.\n   * @param angle - The rotate angle in radians.\n   * @param result - The output matrix. if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotation(axis, angle, result) {\n        result = result || new Matrix4x4();\n        let x = axis.x;\n        let y = axis.y;\n        let z = axis.z;\n        const n = Math.hypot(x, y, z);\n        x /= n;\n        y /= n;\n        z /= n;\n        const xx = x * x;\n        const yy = y * y;\n        const zz = z * z;\n        const c = Math.cos(angle);\n        const s = Math.sin(angle);\n        const oneMinusCosine = 1 - c;\n        result[0] = xx + (1 - xx) * c;\n        result[1] = x * y * oneMinusCosine + z * s;\n        result[2] = x * z * oneMinusCosine - y * s;\n        result[3] = 0;\n        result[4] = x * y * oneMinusCosine - z * s;\n        result[5] = yy + (1 - yy) * c;\n        result[6] = y * z * oneMinusCosine + x * s;\n        result[7] = 0;\n        result[8] = x * z * oneMinusCosine + y * s;\n        result[9] = y * z * oneMinusCosine - x * s;\n        result[10] = zz + (1 - zz) * c;\n        result[11] = 0;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 0;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Compose matrix from rotation, translation and scale components.\n   * @param scale - The input scale vector.\n   * @param rotation - The input rotation matrix or quaternion.\n   * @param translation - The input translation vector.\n   * @returns The composed matrix\n   */ static compose(scale, rotation, translation, result) {\n        result = result ?? new Matrix4x4();\n        return result.scaling(scale).rotateLeft(rotation).translateLeft(translation);\n    }\n    /**\n   * Creates a look-at matrix.\n   * @param eye - Position of the eye.\n   * @param target - The point that the eye is looking at.\n   * @param up - The up vector.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static lookAt(eye, target, up, result) {\n        result = result || new Matrix4x4();\n        const zAxis = Vector3.normalize(Vector3.sub(eye, target));\n        const xAxis = Vector3.normalize(Vector3.cross(up, zAxis));\n        const yAxis = Vector3.normalize(Vector3.cross(zAxis, xAxis));\n        result[0] = xAxis.x;\n        result[1] = xAxis.y;\n        result[2] = xAxis.z;\n        result[3] = 0;\n        result[4] = yAxis.x;\n        result[5] = yAxis.y;\n        result[6] = yAxis.z;\n        result[7] = 0;\n        result[8] = zAxis.x;\n        result[9] = zAxis.y;\n        result[10] = zAxis.z;\n        result[11] = 0;\n        result[12] = eye.x;\n        result[13] = eye.y;\n        result[14] = eye.z;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Creates a matrix, which presents a transform of looking at given cube face.\n   * @param face - The cube face to be looked at.\n   * @param result - The output matrix, if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static lookAtCubeFace(face, pos, result) {\n        switch(face){\n            case CubeFace.PX:\n                return this.lookAt(pos, new Vector3(pos.x + 1, pos.y, pos.z), new Vector3(0, -1, 0), result);\n            case CubeFace.NX:\n                return this.lookAt(pos, new Vector3(pos.x - 1, pos.y, pos.z), new Vector3(0, -1, 0), result);\n            case CubeFace.PY:\n                return this.lookAt(pos, new Vector3(pos.x, pos.y + 1, pos.z), new Vector3(0, 0, 1), result);\n            case CubeFace.NY:\n                return this.lookAt(pos, new Vector3(pos.x, pos.y - 1, pos.z), new Vector3(0, 0, -1), result);\n            case CubeFace.PZ:\n                return this.lookAt(pos, new Vector3(pos.x, pos.y, pos.z + 1), new Vector3(0, -1, 0), result);\n            case CubeFace.NZ:\n                return this.lookAt(pos, new Vector3(pos.x, pos.y, pos.z - 1), new Vector3(0, -1, 0), result);\n            default:\n                return null;\n        }\n    }\n    /**\n   * Multiplies two Matrix4x4's\n   * @param m1 - The first operand.\n   * @param m2 - The second operand.\n   * @param result - The output matrix (can be the same as m1 or m2), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static multiply(m1, m2, result) {\n        result = result || new Matrix4x4();\n        const a00 = m1[0];\n        const a01 = m1[1];\n        const a02 = m1[2];\n        const a03 = m1[3];\n        const a10 = m1[4];\n        const a11 = m1[5];\n        const a12 = m1[6];\n        const a13 = m1[7];\n        const a20 = m1[8];\n        const a21 = m1[9];\n        const a22 = m1[10];\n        const a23 = m1[11];\n        const a30 = m1[12];\n        const a31 = m1[13];\n        const a32 = m1[14];\n        const a33 = m1[15];\n        const b00 = m2[0];\n        const b01 = m2[1];\n        const b02 = m2[2];\n        const b03 = m2[3];\n        const b10 = m2[4];\n        const b11 = m2[5];\n        const b12 = m2[6];\n        const b13 = m2[7];\n        const b20 = m2[8];\n        const b21 = m2[9];\n        const b22 = m2[10];\n        const b23 = m2[11];\n        const b30 = m2[12];\n        const b31 = m2[13];\n        const b32 = m2[14];\n        const b33 = m2[15];\n        result[0] = a00 * b00 + a10 * b01 + a20 * b02 + a30 * b03;\n        result[1] = a01 * b00 + a11 * b01 + a21 * b02 + a31 * b03;\n        result[2] = a02 * b00 + a12 * b01 + a22 * b02 + a32 * b03;\n        result[3] = a03 * b00 + a13 * b01 + a23 * b02 + a33 * b03;\n        result[4] = a00 * b10 + a10 * b11 + a20 * b12 + a30 * b13;\n        result[5] = a01 * b10 + a11 * b11 + a21 * b12 + a31 * b13;\n        result[6] = a02 * b10 + a12 * b11 + a22 * b12 + a32 * b13;\n        result[7] = a03 * b10 + a13 * b11 + a23 * b12 + a33 * b13;\n        result[8] = a00 * b20 + a10 * b21 + a20 * b22 + a30 * b23;\n        result[9] = a01 * b20 + a11 * b21 + a21 * b22 + a31 * b23;\n        result[10] = a02 * b20 + a12 * b21 + a22 * b22 + a32 * b23;\n        result[11] = a03 * b20 + a13 * b21 + a23 * b22 + a33 * b23;\n        result[12] = a00 * b30 + a10 * b31 + a20 * b32 + a30 * b33;\n        result[13] = a01 * b30 + a11 * b31 + a21 * b32 + a31 * b33;\n        result[14] = a02 * b30 + a12 * b31 + a22 * b32 + a32 * b33;\n        result[15] = a03 * b30 + a13 * b31 + a23 * b32 + a33 * b33;\n        return result;\n    }\n    /**\n   * Multiplies two Matrix4x4's which present affine transformations.\n   * @param m1 - The first operand.\n   * @param m2 - The second operand.\n   * @param result - The output matrix (can be the same as m1 or m2), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static multiplyAffine(m1, m2, result) {\n        result = result || new Matrix4x4();\n        const a00 = m1[0];\n        const a01 = m1[1];\n        const a02 = m1[2];\n        const a10 = m1[4];\n        const a11 = m1[5];\n        const a12 = m1[6];\n        const a20 = m1[8];\n        const a21 = m1[9];\n        const a22 = m1[10];\n        const a30 = m1[12];\n        const a31 = m1[13];\n        const a32 = m1[14];\n        const b00 = m2[0];\n        const b01 = m2[1];\n        const b02 = m2[2];\n        const b10 = m2[4];\n        const b11 = m2[5];\n        const b12 = m2[6];\n        const b20 = m2[8];\n        const b21 = m2[9];\n        const b22 = m2[10];\n        const b30 = m2[12];\n        const b31 = m2[13];\n        const b32 = m2[14];\n        result[0] = a00 * b00 + a10 * b01 + a20 * b02;\n        result[1] = a01 * b00 + a11 * b01 + a21 * b02;\n        result[2] = a02 * b00 + a12 * b01 + a22 * b02;\n        result[3] = 0;\n        result[4] = a00 * b10 + a10 * b11 + a20 * b12;\n        result[5] = a01 * b10 + a11 * b11 + a21 * b12;\n        result[6] = a02 * b10 + a12 * b11 + a22 * b12;\n        result[7] = 0;\n        result[8] = a00 * b20 + a10 * b21 + a20 * b22;\n        result[9] = a01 * b20 + a11 * b21 + a21 * b22;\n        result[10] = a02 * b20 + a12 * b21 + a22 * b22;\n        result[11] = 0;\n        result[12] = a00 * b30 + a10 * b31 + a20 * b32 + a30;\n        result[13] = a01 * b30 + a11 * b31 + a21 * b32 + a31;\n        result[14] = a02 * b30 + a12 * b31 + a22 * b32 + a32;\n        result[15] = 1;\n        return result;\n    }\n    /**\n   * Post-translate a Matrix4x4 by a vector.\n   *\n   * @remarks\n   * result = m * (translate matrix for t)\n   *\n   * @param m - The matrix that will be translated.\n   * @param t - The translate vector.\n   * @param result - The output matrix (can be the same as m), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static translateRight(m, t, result) {\n        result = result || new Matrix4x4();\n        if (result !== m) {\n            result[0] = m[0];\n            result[1] = m[1];\n            result[2] = m[2];\n            result[3] = m[3];\n            result[4] = m[4];\n            result[5] = m[5];\n            result[6] = m[6];\n            result[7] = m[7];\n            result[8] = m[8];\n            result[9] = m[9];\n            result[10] = m[10];\n            result[11] = m[11];\n            result[12] = m[0] * t.x + m[4] * t.y + m[8] * t.z + m[12];\n            result[13] = m[1] * t.x + m[5] * t.y + m[9] * t.z + m[13];\n            result[14] = m[2] * t.x + m[6] * t.y + m[10] * t.z + m[14];\n            result[15] = m[15];\n        } else {\n            const x = m[0] * t.x + m[4] * t.y + m[8] * t.z + m[12];\n            const y = m[1] * t.x + m[5] * t.y + m[9] * t.z + m[13];\n            const z = m[2] * t.x + m[6] * t.y + m[10] * t.z + m[14];\n            result[12] = x;\n            result[13] = y;\n            result[14] = z;\n        }\n        return result;\n    }\n    /**\n   * Pre-translate a Matrix4x4 by a vector.\n   *\n   * @remarks\n   * result = (translate matrix for t) * m\n   *\n   * @param m - The matrix that will be translated.\n   * @param t - The translate vector.\n   * @param result - The output matrix (can be the same as m), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static translateLeft(m, t, result) {\n        result = result || new Matrix4x4();\n        if (result !== m) {\n            result[0] = m[0];\n            result[1] = m[1];\n            result[2] = m[2];\n            result[3] = m[3];\n            result[4] = m[4];\n            result[5] = m[5];\n            result[6] = m[6];\n            result[7] = m[7];\n            result[8] = m[8];\n            result[9] = m[9];\n            result[10] = m[10];\n            result[11] = m[11];\n            result[12] = m[12] + t.x;\n            result[13] = m[13] + t.y;\n            result[14] = m[14] + t.z;\n            result[15] = m[15];\n        } else {\n            result[12] += t.x;\n            result[13] += t.y;\n            result[14] += t.z;\n        }\n        return result;\n    }\n    /**\n   * Post-scale a Matrix4x4 by a vector.\n   *\n   * @remarks\n   * result = m * (scale matrix for s)\n   *\n   * @param m - The matrix that will be scaled.\n   * @param s - The scale vector.\n   * @param result - The output matrix (can be the same as m), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static scaleRight(m, s, result) {\n        result = result || new Matrix4x4();\n        if (result !== m) {\n            result[0] = m[0] * s.x;\n            result[1] = m[1] * s.x;\n            result[2] = m[2] * s.x;\n            result[3] = m[3] * s.x;\n            result[4] = m[4] * s.y;\n            result[5] = m[5] * s.y;\n            result[6] = m[6] * s.y;\n            result[7] = m[7] * s.y;\n            result[8] = m[8] * s.z;\n            result[9] = m[9] * s.z;\n            result[10] = m[10] * s.z;\n            result[11] = m[11] * s.z;\n            result[12] = m[12];\n            result[13] = m[13];\n            result[14] = m[14];\n            result[15] = m[15];\n        } else {\n            result[0] *= s.x;\n            result[1] *= s.x;\n            result[2] *= s.x;\n            result[3] *= s.x;\n            result[4] *= s.y;\n            result[5] *= s.y;\n            result[6] *= s.y;\n            result[7] *= s.y;\n            result[8] *= s.z;\n            result[9] *= s.z;\n            result[10] *= s.z;\n            result[11] *= s.z;\n        }\n        return result;\n    }\n    /**\n   * Pre-scale a Matrix4x4 by a vector.\n   *\n   * @remarks\n   * result = (scale matrix for s) * m\n   *\n   * @param m - The matrix that will be translated.\n   * @param s - The scale vector.\n   * @param result - The output matrix (can be the same as m), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static scaleLeft(m, s, result) {\n        result = result || new Matrix4x4();\n        result[0] = m[0] * s.x;\n        result[1] = m[1] * s.y;\n        result[2] = m[2] * s.z;\n        result[3] = m[3];\n        result[4] = m[4] * s.x;\n        result[5] = m[5] * s.y;\n        result[6] = m[6] * s.z;\n        result[7] = m[7];\n        result[8] = m[8] * s.x;\n        result[9] = m[9] * s.y;\n        result[10] = m[10] * s.z;\n        result[11] = m[11];\n        result[12] = m[12] * s.x;\n        result[13] = m[13] * s.y;\n        result[14] = m[14] * s.z;\n        result[15] = m[15];\n        return result;\n    }\n    /**\n   * Post-rotate a Matrix4x4 by a rotation matrix or quaternion.\n   *\n   * @remarks\n   * result = m * r\n   *\n   * @param m - The matrix that will be translated.\n   * @param r - The rotate matrix or quaternion.\n   * @param result - The output matrix (can be the same as m), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotateRight(m, r, result) {\n        result = result || new Matrix4x4();\n        const b = r instanceof Quaternion ? new Matrix3x3(r) : r;\n        const a00 = m[0];\n        const a01 = m[1];\n        const a02 = m[2];\n        const a03 = m[3];\n        const a10 = m[4];\n        const a11 = m[5];\n        const a12 = m[6];\n        const a13 = m[7];\n        const a20 = m[8];\n        const a21 = m[9];\n        const a22 = m[10];\n        const a23 = m[11];\n        const a30 = m[12];\n        const a31 = m[13];\n        const a32 = m[14];\n        const a33 = m[15];\n        const b00 = b.m00;\n        const b01 = b.m10;\n        const b02 = b.m20;\n        const b10 = b.m01;\n        const b11 = b.m11;\n        const b12 = b.m21;\n        const b20 = b.m02;\n        const b21 = b.m12;\n        const b22 = b.m22;\n        result[0] = a00 * b00 + a10 * b01 + a20 * b02;\n        result[1] = a01 * b00 + a11 * b01 + a21 * b02;\n        result[2] = a02 * b00 + a12 * b01 + a22 * b02;\n        result[3] = a03 * b00 + a13 * b01 + a23 * b02;\n        result[4] = a00 * b10 + a10 * b11 + a20 * b12;\n        result[5] = a01 * b10 + a11 * b11 + a21 * b12;\n        result[6] = a02 * b10 + a12 * b11 + a22 * b12;\n        result[7] = a03 * b10 + a13 * b11 + a23 * b12;\n        result[8] = a00 * b20 + a10 * b21 + a20 * b22;\n        result[9] = a01 * b20 + a11 * b21 + a21 * b22;\n        result[10] = a02 * b20 + a12 * b21 + a22 * b22;\n        result[11] = a03 * b20 + a13 * b21 + a23 * b22;\n        result[12] = a30;\n        result[13] = a31;\n        result[14] = a32;\n        result[15] = a33;\n        return result;\n    }\n    /**\n   * Pre-rotate a Matrix4x4 by a rotation matrix or quaternion.\n   *\n   * @remarks\n   * result = r * m\n   *\n   * @param m - The matrix that will be translated.\n   * @param r - The rotate matrix or quaternion.\n   * @param result - The output matrix (can be the same as m), if not specified, a new matrix will be created.\n   * @returns The output matrix\n   */ static rotateLeft(m, r, result) {\n        result = result || new Matrix4x4();\n        const a = r instanceof Quaternion ? new Matrix3x3(r) : r;\n        const a00 = a.m00;\n        const a01 = a.m10;\n        const a02 = a.m20;\n        const a10 = a.m01;\n        const a11 = a.m11;\n        const a12 = a.m21;\n        const a20 = a.m02;\n        const a21 = a.m12;\n        const a22 = a.m22;\n        const b00 = m[0];\n        const b01 = m[1];\n        const b02 = m[2];\n        const b03 = m[3];\n        const b10 = m[4];\n        const b11 = m[5];\n        const b12 = m[6];\n        const b13 = m[7];\n        const b20 = m[8];\n        const b21 = m[9];\n        const b22 = m[10];\n        const b23 = m[11];\n        const b30 = m[12];\n        const b31 = m[13];\n        const b32 = m[14];\n        const b33 = m[15];\n        result[0] = a00 * b00 + a10 * b01 + a20 * b02;\n        result[1] = a01 * b00 + a11 * b01 + a21 * b02;\n        result[2] = a02 * b00 + a12 * b01 + a22 * b02;\n        result[3] = b03;\n        result[4] = a00 * b10 + a10 * b11 + a20 * b12;\n        result[5] = a01 * b10 + a11 * b11 + a21 * b12;\n        result[6] = a02 * b10 + a12 * b11 + a22 * b12;\n        result[7] = b13;\n        result[8] = a00 * b20 + a10 * b21 + a20 * b22;\n        result[9] = a01 * b20 + a11 * b21 + a21 * b22;\n        result[10] = a02 * b20 + a12 * b21 + a22 * b22;\n        result[11] = b23;\n        result[12] = a00 * b30 + a10 * b31 + a20 * b32;\n        result[13] = a01 * b30 + a11 * b31 + a21 * b32;\n        result[14] = a02 * b30 + a12 * b31 + a22 * b32;\n        result[15] = b33;\n        return result;\n    }\n    /**\n   * Subtract a matrix from this matrix component-wise.\n   * @param other - The matrix that will be subtract.\n   * @returns self\n   */ subBy(other) {\n        Matrix4x4.sub(this, other, this);\n        return this;\n    }\n    /**\n   * Add a matrix to this matrix component-wise.\n   * @param other - The matrix that will be added.\n   * @returns self\n   */ addBy(other) {\n        Matrix4x4.add(this, other, this);\n        return this;\n    }\n    /**\n   * Multiplies this matrix by a matrix component-wise.\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ mulBy(other) {\n        Matrix4x4.mul(this, other, this);\n        return this;\n    }\n    /**\n   * Divide this matrix by a matrix component-wise.\n   * @param other - The matrix that will be divide by.\n   * @returns self\n   */ divBy(other) {\n        Matrix4x4.div(this, other, this);\n        return this;\n    }\n    /**\n   * Scale this matrix by a scalar number component-wise.\n   * @param f - amount to scale this matrix by.\n   * @returns self\n   */ scaleBy(f) {\n        Matrix4x4.scale(this, f, this);\n        return this;\n    }\n    /**\n   * Make this matrix identity.\n   * @returns self\n   */ identity() {\n        Matrix4x4.identity(this);\n        return this;\n    }\n    /**\n   * Calculates a right-handed perspective projection matrix inplace.\n   * @param fovY - The vertical field of view in radians.\n   * @param aspect - The aspect ratio.\n   * @param znear - The near clip plane.\n   * @param zfar - The far clip plane.\n   * @returns self\n   */ perspective(fovY, aspect, znear, zfar) {\n        Matrix4x4.perspective(fovY, aspect, znear, zfar, this);\n        return this;\n    }\n    /**\n   * Calculates a perspective projection matrix from a frustum inplace.\n   * @param left - Left bound of the frustum.\n   * @param right - Right bound of the frustum.\n   * @param bottom - Bottom bound of the frustum.\n   * @param top - Top bound of the frustum.\n   * @param znear - Near bound of the frustum.\n   * @param zfar - Far bound of the frustum.\n   * @returns self\n   */ frustum(left, right, bottom, top, znear, zfar) {\n        Matrix4x4.frustum(left, right, bottom, top, znear, zfar, this);\n        return this;\n    }\n    /**\n   * Calculates an orthogonal projection matrix inplace.\n   * @param left - Left bound of the frustum.\n   * @param right - Right bound of the frustum.\n   * @param bottom - Bottom bound of the frustum.\n   * @param top - Top bound of the frustum.\n   * @param near - Near bound of the frustum.\n   * @param far - Far bound of the frustum.\n   * @returns self\n   */ ortho(left, right, bottom, top, near, far) {\n        Matrix4x4.ortho(left, right, bottom, top, near, far, this);\n        return this;\n    }\n    /**\n   * Check if this matrix is orthogonal projection matrix.\n   *\n   * @remarks\n   * This method assumes that this is an affine transform matrix or a projection matrix (perspective or orthogonal).\n   *\n   * @returns true if this is an orthogonal projection matrix, otherwise false\n   */ isOrtho() {\n        // assum this is a projection matrix\n        return this[15] === 1;\n    }\n    /**\n   * Check if this matrix is perspective projection matrix.\n   *\n   * @remarks\n   * This method assumes that this is an affine transform matrix or a projection matrix (perspective or orthogonal).\n   *\n   * @returns true if this is a perspective projection matrix, otherwise false\n   */ isPerspective() {\n        // assum this is a projection matrix\n        return this[15] === 0;\n    }\n    /**\n   * Get width of the near clip plane.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   *\n   * @returns Width of the near clip plane\n   */ getNearPlaneWidth() {\n        if (this.isPerspective()) {\n            return 2 * this.getNearPlane() / this[0];\n        } else {\n            return 2 / this[0];\n        }\n    }\n    /**\n   * Get height of the near clip plane.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   *\n   * @returns Height of the near clip plane\n   */ getNearPlaneHeight() {\n        if (this.isPerspective()) {\n            return 2 * this.getNearPlane() / this[5];\n        } else {\n            return 2 / this[5];\n        }\n    }\n    /**\n   * Get near clip plane.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   *\n   * @returns The near clip plane\n   */ getNearPlane() {\n        if (this.isPerspective()) {\n            return this[14] / (this[10] - 1);\n        } else {\n            return (this[14] + 1) / this[10];\n        }\n    }\n    /**\n   * Get width of the far clip plane.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   *\n   * @returns Width of the far clip plane\n   */ getFarPlaneWidth() {\n        if (this.isPerspective()) {\n            return this.getNearPlaneWidth() * this.getFarPlane() / this.getNearPlane();\n        } else {\n            return this.getNearPlaneWidth();\n        }\n    }\n    /**\n   * Get height of the far clip plane.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   *\n   * @returns Height of the far clip plane\n   */ getFarPlaneHeight() {\n        if (this.isPerspective()) {\n            return this.getNearPlaneHeight() * this.getFarPlane() / this.getNearPlane();\n        } else {\n            return this.getNearPlaneHeight();\n        }\n    }\n    /**\n   * Get far clip plane.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   *\n   * @returns The far clip plane\n   */ getFarPlane() {\n        if (this.isPerspective()) {\n            return this[14] / (this[10] + 1);\n        } else {\n            return (this[14] - 1) / this[10];\n        }\n    }\n    /**\n   * Get the vertical field of view in radians.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   *\n   * @returns 0 if this is an orthogonal projection matrix, otherwise the vertical field of view\n   */ getFov() {\n        // assum this is a projection matrix\n        return this.isOrtho() ? 0 : Math.atan(1 / this[5]) * 2;\n    }\n    /**\n   * Get tangent value of half of the vertical field of view.\n   *\n   * @remarks\n   * This method assumes that this is a projection matrix (perspective or orthogonal).\n   * If the matrix is orthogonal, 0 is returned.\n   *\n   * @returns 0 if this is an orthogonal projection matrix, otherwise the tangent value of half of the vertical field of view\n   */ getTanHalfFov() {\n        // assum this is a projection matrix\n        return this.isOrtho() ? 0 : 1 / this[5];\n    }\n    /**\n   * Get the aspect ratio.\n   *\n   * @remarks\n   * This method assumes that the matrix is a perspective projection matrix.\n   *\n   * @returns The aspect ratio\n   */ getAspect() {\n        // assum this is a projection matrix\n        return this[5] / this[0];\n    }\n    /**\n   * Get the left clip plane.\n   *\n   * @remarks\n   * This method assumes that the matrix is an orthogonal projection matrix.\n   *\n   * @returns The left clip plane\n   */ getLeftPlane() {\n        if (this.isPerspective()) {\n            return (this[8] - 1) * this.getNearPlane() / this[0];\n        } else {\n            return (-1 - this[12]) / this[0];\n        }\n    }\n    /**\n   * Get the right clip plane.\n   *\n   * @remarks\n   * This method assumes that the matrix is an orthogonal projection matrix.\n   *\n   * @returns The right clip plane\n   */ getRightPlane() {\n        if (this.isPerspective()) {\n            return (this[8] + 1) * this.getNearPlane() / this[0];\n        } else {\n            return (1 - this[12]) / this[0];\n        }\n    }\n    /**\n   * Get the top clip plane.\n   *\n   * @remarks\n   * This method assumes that the matrix is an orthogonal projection matrix.\n   *\n   * @returns The top clip plane\n   */ getTopPlane() {\n        if (this.isPerspective()) {\n            return (this[9] + 1) * this.getNearPlane() / this[5];\n        } else {\n            return (1 - this[13]) / this[5];\n        }\n    }\n    /**\n   * Get the bottom clip plane.\n   *\n   * @remarks\n   * This method assumes that the matrix is an orthogonal projection matrix.\n   *\n   * @returns The bottom clip plane\n   */ getBottomPlane() {\n        if (this.isPerspective()) {\n            return (this[9] - 1) * this.getNearPlane() / this[5];\n        } else {\n            return (-1 - this[13]) / this[5];\n        }\n    }\n    /**\n   * Set the near clip plane and far clip plane.\n   *\n   * @remarks\n   * This method assumes that the matrix is a projection matrix (perspective or orthogonal).\n   *\n   * @param znear - The near clip plane.\n   * @param zfar - The far clip plane.\n   * @returns self\n   */ setNearFar(znear, zfar) {\n        if (this.isPerspective()) {\n            this.perspective(this.getFov(), this.getAspect(), znear, zfar);\n        } else {\n            this[10] = 2 / (znear - zfar);\n            this[14] = (znear + zfar) / (znear - zfar);\n        }\n        return this;\n    }\n    /**\n   * Calculate a translation matrix inplace.\n   * @param t - The translate vector.\n   * @returns self\n   */ translation(t) {\n        Matrix4x4.translation(t, this);\n        return this;\n    }\n    /**\n   * Calculates a scale matrix inplace.\n   * @param s - The scale vector.\n   * @returns self\n   */ scaling(s) {\n        Matrix4x4.scaling(s, this);\n        return this;\n    }\n    /**\n   * Invert this matrix inplace.\n   * @returns self\n   */ inplaceInvert() {\n        Matrix4x4.invert(this, this);\n        return this;\n    }\n    /**\n   * Invert this matrix inplace, assuming this matrix presents an affine transformation.\n   * @returns self\n   */ inplaceInvertAffine() {\n        Matrix4x4.invertAffine(this, this);\n        return this;\n    }\n    /**\n   * Calculates the transpose of this matrix inplace.\n   * @returns self\n   */ transpose() {\n        Matrix4x4.transpose(this, this);\n        return this;\n    }\n    /**\n   * Post-multiply by a matrix inplace.\n   *\n   * @remarks\n   * this = this * other\n   *\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ multiplyRight(other) {\n        Matrix4x4.multiply(this, other, this);\n        return this;\n    }\n    /**\n   * Post-multiply by a matrix inplace, assuming both matrices present affine transformations.\n   *\n   * @remarks\n   * this = this * other\n   *\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ multiplyRightAffine(other) {\n        Matrix4x4.multiplyAffine(this, other, this);\n        return this;\n    }\n    /**\n   * Pre-multiply by a matrix inplace.\n   *\n   * @remarks\n   * this = other * this\n   *\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ multiplyLeft(other) {\n        Matrix4x4.multiply(other, this, this);\n        return this;\n    }\n    /**\n   * Pre-multiply by a matrix inplace, assuming both matrices present affine transformations.\n   *\n   * @remarks\n   * this = other * this\n   *\n   * @param other - The matrix that will be multiplied by.\n   * @returns self\n   */ multiplyLeftAffine(other) {\n        Matrix4x4.multiplyAffine(other, this, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around x axis inplace.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotationX(angle) {\n        Matrix4x4.rotationX(angle, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around y axis inplace.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotationY(angle) {\n        Matrix4x4.rotationY(angle, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around z axis inplace.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotationZ(angle) {\n        Matrix4x4.rotationZ(angle, this);\n        return this;\n    }\n    /**\n   * Calculates a rotation around a given axis inplace.\n   * @param axis - The rotation axis.\n   * @param angle - The rotate angle in radians.\n   * @returns self\n   */ rotation(axis, angle) {\n        Matrix4x4.rotation(axis, angle, this);\n        return this;\n    }\n    /**\n   * Post-translate by a vector inplace.\n   *\n   * @remarks\n   * this = this * (translate matrix for t)\n   *\n   * @param t - The translate vector.\n   * @returns self\n   */ translateRight(t) {\n        Matrix4x4.translateRight(this, t, this);\n        return this;\n    }\n    /**\n   * Pre-translate by a vector inplace.\n   *\n   * @remarks\n   * this = (translate matrix for t) * this\n   *\n   * @param t - The translate vector.\n   * @returns self\n   */ translateLeft(t) {\n        Matrix4x4.translateLeft(this, t, this);\n        return this;\n    }\n    /**\n   * Post-scale by a vector inplace.\n   *\n   * @remarks\n   * this = this * (scale matrix for s)\n   *\n   * @param s - The scale vector.\n   * @returns self\n   */ scaleRight(s) {\n        Matrix4x4.scaleRight(this, s, this);\n        return this;\n    }\n    /**\n   * Pre-scale by a vector inplace.\n   *\n   * @remarks\n   * this = (scale matrix for s) * this\n   *\n   * @param s - The scale vector.\n   * @returns self\n   */ scaleLeft(s) {\n        Matrix4x4.scaleLeft(this, s, this);\n        return this;\n    }\n    /**\n   * Post-rotate by a rotation matrix or quaternion inplace.\n   *\n   * @remarks\n   * this = this * r\n   *\n   * @param r - The rotation matrix or quaternion.\n   * @returns self\n   */ rotateRight(r) {\n        Matrix4x4.rotateRight(this, r, this);\n        return this;\n    }\n    /**\n   * Pre-rotate by a rotation matrix or quaternion inplace.\n   *\n   * @remarks\n   * this = r * this\n   *\n   * @param r - The rotation matrix or quaternion.\n   * @returns self\n   */ rotateLeft(r) {\n        Matrix4x4.rotateLeft(this, r, this);\n        return this;\n    }\n    /**\n   * Calculates a look-at matrix inplace.\n   * @param eye - Position of the eye.\n   * @param target - The point that the eye is looking at.\n   * @param up - The up vector.\n   * @returns self\n   */ lookAt(eye, target, up) {\n        Matrix4x4.lookAt(eye, target, up, this);\n        return this;\n    }\n    /**\n   * Transform a point by this matrix.\n   * @param point - The point to be transformed.\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transformPoint(point, result) {\n        result = result || new Vector4();\n        return result.setXYZW(this[0] * point[0] + this[4] * point[1] + this[8] * point[2] + this[12], this[1] * point[0] + this[5] * point[1] + this[9] * point[2] + this[13], this[2] * point[0] + this[6] * point[1] + this[10] * point[2] + this[14], this[3] * point[0] + this[7] * point[1] + this[11] * point[2] + this[15]);\n    }\n    /**\n   * Transform a point by this matrix to homogeneous space.\n   * @param point - The point to be transformed.\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transformPointH(point, result) {\n        result = result || new Vector3();\n        const w = this[3] * point[0] + this[7] * point[1] + this[11] * point[2] + this[15];\n        return result.setXYZ((this[0] * point[0] + this[4] * point[1] + this[8] * point[2] + this[12]) / w, (this[1] * point[0] + this[5] * point[1] + this[9] * point[2] + this[13]) / w, (this[2] * point[0] + this[6] * point[1] + this[10] * point[2] + this[14]) / w);\n    }\n    /**\n   * Transform a point by this matrix and then do a perspective divide.\n   * @param point - The point to be transformed.\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transformPointP(point, result) {\n        result = result || new Vector3();\n        const x = this[0] * point[0] + this[4] * point[1] + this[8] * point[2] + this[12];\n        const y = this[1] * point[0] + this[5] * point[1] + this[9] * point[2] + this[13];\n        const z = this[2] * point[0] + this[6] * point[1] + this[10] * point[2] + this[14];\n        const w = this[3] * point[0] + this[7] * point[1] + this[11] * point[2] + this[15];\n        return result.setXYZ(x / w, y / w, z / w);\n    }\n    /**\n   * Transform a point by this matrix, assuming this matrix presents an affine transformation.\n   * @param point - The point to be transformed.\n   * @param result - The output vector (can be the same as point), if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transformPointAffine(point, result) {\n        result = result || new Vector3();\n        return result.setXYZ(this[0] * point[0] + this[4] * point[1] + this[8] * point[2] + this[12], this[1] * point[0] + this[5] * point[1] + this[9] * point[2] + this[13], this[2] * point[0] + this[6] * point[1] + this[10] * point[2] + this[14]);\n    }\n    /**\n   * Transform a vector by this matrix.\n   * @param vec - The vector to be transformed.\n   * @param result - The output vector, if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transformVector(vec, result) {\n        result = result || new Vector4();\n        return result.setXYZW(this[0] * vec[0] + this[4] * vec[1] + this[8] * vec[2], this[1] * vec[0] + this[5] * vec[1] + this[9] * vec[2], this[2] * vec[0] + this[6] * vec[1] + this[10] * vec[2], this[3] * vec[0] + this[7] * vec[1] + this[11] * vec[2]);\n    }\n    /**\n   * Transform a vector by this matrix assuming this matrix presents an affine transformation.\n   * @param vec - The vector to be transformed.\n   * @param result - The output vector (can be the same as vec), if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transformVectorAffine(vec, result) {\n        result = result || new Vector3();\n        return result.setXYZ(this[0] * vec[0] + this[4] * vec[1] + this[8] * vec[2], this[1] * vec[0] + this[5] * vec[1] + this[9] * vec[2], this[2] * vec[0] + this[6] * vec[1] + this[10] * vec[2]);\n    }\n    /**\n   * Transform a vector by this matrix.\n   * @param vec - The vector to be transformed.\n   * @param result - The output vector (can be the same as vec), if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transform(vec, result) {\n        result = result || new Vector4();\n        return result.setXYZW(this[0] * vec[0] + this[4] * vec[1] + this[8] * vec[2] + this[12] * vec[3], this[1] * vec[0] + this[5] * vec[1] + this[9] * vec[2] + this[13] * vec[3], this[2] * vec[0] + this[6] * vec[1] + this[10] * vec[2] + this[14] * vec[3], this[3] * vec[0] + this[7] * vec[1] + this[11] * vec[2] + this[15] * vec[3]);\n    }\n    /**\n   * Transform a vector by this matrix, assuming this matrix presents an affine transformation.\n   * @param vec - The vector to be transformed.\n   * @param result - The output vector (can be the same as vec), if not specified, a new vector will be created.\n   * @returns The output vector\n   */ transformAffine(vec, result) {\n        result = result || new Vector4();\n        return result.setXYZW(this[0] * vec[0] + this[4] * vec[1] + this[8] * vec[2] + this[12] * vec[3], this[1] * vec[0] + this[5] * vec[1] + this[9] * vec[2] + this[13] * vec[3], this[2] * vec[0] + this[6] * vec[1] + this[10] * vec[2] + this[14] * vec[3], vec.w);\n    }\n    /**\n   * Calculates the determinant of this matrix.\n   * @returns The determinant\n   */ det() {\n        const m00 = this[0], m01 = this[1], m02 = this[2], m03 = this[3];\n        const m10 = this[4], m11 = this[5], m12 = this[6], m13 = this[7];\n        const m20 = this[8], m21 = this[9], m22 = this[10], m23 = this[11];\n        const m30 = this[12], m31 = this[13], m32 = this[14], m33 = this[15];\n        const det_22_33 = m22 * m33 - m32 * m23;\n        const det_21_33 = m21 * m33 - m31 * m23;\n        const det_21_32 = m21 * m32 - m31 * m22;\n        const det_20_33 = m20 * m33 - m30 * m23;\n        const det_20_32 = m20 * m32 - m22 * m30;\n        const det_20_31 = m20 * m31 - m30 * m21;\n        const cofact_00 = +(m11 * det_22_33 - m12 * det_21_33 + m13 * det_21_32);\n        const cofact_01 = -(m10 * det_22_33 - m12 * det_20_33 + m13 * det_20_32);\n        const cofact_02 = +(m10 * det_21_33 - m11 * det_20_33 + m13 * det_20_31);\n        const cofact_03 = -(m10 * det_21_32 - m11 * det_20_32 + m12 * det_20_31);\n        return m00 * cofact_00 + m01 * cofact_01 + m02 * cofact_02 + m03 * cofact_03;\n    }\n    /**\n   * Compose matrix from rotation, translation and scale components.\n   * @param scale - The input scale vector.\n   * @param rotation - The input rotation matrix or quaternion.\n   * @param translation - The input translation vector.\n   * @returns self\n   */ compose(scale, rotation, translation) {\n        Matrix4x4.compose(scale, rotation, translation, this);\n        return this;\n    }\n    /**\n   * Decompose this matrix into its rotation, translation and scale components.\n   * @param scale - The output scale vector.\n   * @param rotation - The output rotation matrix or quaternion.\n   * @param translation - The output translation vector.\n   * @returns self\n   */ decompose(scale, rotation, translation) {\n        if (translation) {\n            translation.setXYZ(this[12], this[13], this[14]);\n        }\n        const sign = this.det() <= 0 ? -1 : 1;\n        const sx = Math.hypot(this[0], this[1], this[2]);\n        const sy = Math.hypot(this[4], this[5], this[6]) * sign;\n        const sz = Math.hypot(this[8], this[9], this[10]);\n        if (scale) {\n            scale.setXYZ(sx, sy, sz);\n        }\n        if (rotation instanceof Quaternion) {\n            const rotationMatrix = new Matrix3x3(this);\n            rotationMatrix[0] /= sx;\n            rotationMatrix[1] /= sx;\n            rotationMatrix[2] /= sx;\n            rotationMatrix[3] /= sy;\n            rotationMatrix[4] /= sy;\n            rotationMatrix[5] /= sy;\n            rotationMatrix[6] /= sz;\n            rotationMatrix[7] /= sz;\n            rotationMatrix[8] /= sz;\n            rotation.fromRotationMatrix(rotationMatrix);\n        } else if (rotation instanceof Matrix3x3) {\n            rotation[0] = this[0] / sx;\n            rotation[1] = this[1] / sx;\n            rotation[2] = this[2] / sx;\n            rotation[3] = this[4] / sy;\n            rotation[4] = this[5] / sy;\n            rotation[5] = this[6] / sy;\n            rotation[6] = this[8] / sz;\n            rotation[7] = this[9] / sz;\n            rotation[8] = this[10] / sz;\n        } else if (rotation instanceof Matrix4x4) {\n            rotation[0] = this[0] / sx;\n            rotation[1] = this[1] / sx;\n            rotation[2] = this[2] / sx;\n            rotation[3] = 0;\n            rotation[4] = this[4] / sy;\n            rotation[5] = this[5] / sy;\n            rotation[6] = this[6] / sy;\n            rotation[7] = 0;\n            rotation[8] = this[8] / sz;\n            rotation[9] = this[9] / sz;\n            rotation[10] = this[10] / sz;\n            rotation[11] = 0;\n            rotation[12] = 0;\n            rotation[13] = 0;\n            rotation[14] = 0;\n            rotation[15] = 1;\n        }\n        return this;\n    }\n    /**\n   * Decompose this matrix into a look-at form.\n   * @param eye - The output eye vector.\n   * @param target - The output target vector.\n   * @param up - The output up vector.\n   * @returns self\n   */ decomposeLookAt(eye, target, up) {\n        eye?.setXYZ(this[12], this[13], this[14]);\n        up?.setXYZ(this[4], this[5], this[6]);\n        target?.setXYZ(this[12] - this[8], this[13] - this[9], this[14] - this[10]);\n        return this;\n    }\n    /** @internal */ toDualQuaternion() {\n        const t = new Vector3();\n        const r = new Quaternion();\n        const s = new Vector3();\n        this.decompose(s, r, t);\n        const translation = new Quaternion(this.m03 * 0.5, this.m13 * 0.5, this.m23 * 0.5, 0);\n        const dual = Quaternion.multiply(translation, r);\n        return {\n            real: r,\n            dual: dual,\n            scale: s\n        };\n    }\n}\n\nexport { Matrix3x3, Matrix4x4, ObservableQuaternion, ObservableVector2, ObservableVector3, ObservableVector4, Quaternion, Vector2, Vector3, Vector4, VectorBase };\n//# sourceMappingURL=vector.js.map\n","/**\n * The rectangle packer class\n * @public\n */ class RectsPacker {\n    /** @internal */ _bins;\n    /** @internal */ _maxBins;\n    /** @internal */ _width;\n    /** @internal */ _height;\n    /**\n   * @param width - width of image bin\n   * @param height - height of image bin\n   * @param maxBins - max count of image bins\n   */ constructor(width, height, maxBins = 0){\n        this._width = width;\n        this._height = height;\n        this._maxBins = maxBins;\n        this._bins = [\n            new Bin(this._width, this._height)\n        ];\n    }\n    /** Clear all image bins of the packer */ clear() {\n        this._bins = [\n            new Bin(this._width, this._height)\n        ];\n    }\n    /**\n   * Inserts a new rectangle\n   * @param width - Width of the rectangle.\n   * @param height - Height of the rectangle.\n   * @returns The pack result.\n   */ insert(width, height) {\n        if (width > this._width || height > this._height) {\n            return null;\n        }\n        const rect = this._bins[this._bins.length - 1].insert(width, height);\n        if (rect) {\n            return {\n                x: rect.x,\n                y: rect.y,\n                width: rect.width,\n                height: rect.height,\n                binIndex: this._bins.length - 1\n            };\n        }\n        if (this._maxBins === 0 || this._bins.length < this._maxBins) {\n            this._bins.push(new Bin(this._width, this._height));\n            const rect = this._bins[this._bins.length - 1].insert(width, height);\n            return {\n                x: rect.x,\n                y: rect.y,\n                width: rect.width,\n                height: rect.height,\n                binIndex: this._bins.length - 1\n            };\n        }\n        return null;\n    }\n}\nclass Bin {\n    freeRects;\n    constructor(width, height){\n        this.freeRects = [\n            {\n                x: 0,\n                y: 0,\n                width,\n                height\n            }\n        ];\n    }\n    insert(width, height) {\n        const newRect = this.findBestFit(width, height);\n        if (!newRect) {\n            return null;\n        }\n        let numRectsToProcess = this.freeRects.length;\n        let i = 0;\n        while(i < numRectsToProcess){\n            if (this.splitFreeRect(this.freeRects[i], newRect)) {\n                this.freeRects.splice(i, 1);\n                --numRectsToProcess;\n                --i;\n            }\n            ++i;\n        }\n        this.pruneFreeRects();\n        return newRect;\n    }\n    findBestFit(width, height) {\n        let score = Number.MAX_VALUE;\n        let rect = null;\n        for (const freeRect of this.freeRects){\n            if (freeRect.width >= width && freeRect.height >= height) {\n                const areaFit = freeRect.width * freeRect.height - width * height;\n                if (areaFit < score) {\n                    if (!rect) {\n                        rect = {\n                            width,\n                            height\n                        };\n                    }\n                    rect.x = freeRect.x;\n                    rect.y = freeRect.y;\n                    score = areaFit;\n                }\n            }\n        }\n        return rect;\n    }\n    splitFreeRect(free, used) {\n        if (used.x >= free.x + free.width || used.x + used.width <= free.x || used.y >= free.y + free.height || used.y + used.height <= free.y) {\n            return false;\n        }\n        if (used.x < free.x + free.width && used.x + used.width > free.x) {\n            if (used.y > free.y && used.y < free.y + free.height) {\n                this.freeRects.push({\n                    x: free.x,\n                    y: free.y,\n                    width: free.width,\n                    height: used.y - free.y\n                });\n            }\n            if (used.y + used.height < free.y + free.height) {\n                this.freeRects.push({\n                    x: free.x,\n                    y: used.y + used.height,\n                    width: free.width,\n                    height: free.y + free.height - used.y - used.height\n                });\n            }\n        }\n        if (used.y < free.y + free.height && used.y + used.height > free.y) {\n            if (used.x > free.x && used.x < free.x + free.width) {\n                this.freeRects.push({\n                    x: free.x,\n                    y: free.y,\n                    width: used.x - free.x,\n                    height: free.height\n                });\n            }\n            if (used.x + used.width < free.x + free.width) {\n                this.freeRects.push({\n                    x: used.x + used.width,\n                    y: free.y,\n                    width: free.x + free.width - used.x - used.width,\n                    height: free.height\n                });\n            }\n        }\n        return true;\n    }\n    pruneFreeRects() {\n        let i = 0;\n        let j = 0;\n        let len = this.freeRects.length;\n        while(i < len){\n            j = i + 1;\n            const rect1 = this.freeRects[i];\n            while(j < len){\n                const rect2 = this.freeRects[j];\n                if (this.isRectInRect(rect1, rect2)) {\n                    this.freeRects.splice(i, 1);\n                    --i;\n                    --len;\n                    break;\n                }\n                if (this.isRectInRect(rect2, rect1)) {\n                    this.freeRects.splice(j, 1);\n                    --j;\n                    --len;\n                }\n                j++;\n            }\n            i++;\n        }\n    }\n    isRectInRect(test, container) {\n        return test.x >= container.x && test.y >= container.y && test.x + test.width <= container.x + container.width && test.y + test.height <= container.y + container.height;\n    }\n}\n\nexport { RectsPacker };\n//# sourceMappingURL=rectspacker.js.map\n","import { Observable } from './event.js';\n\n/**\n * Base class for any Disposable class\n * @public\n */ class Disposable extends Observable {\n    _disposed;\n    constructor(){\n        super();\n        this._disposed = false;\n    }\n    get disposed() {\n        return this._disposed;\n    }\n    dispose() {\n        if (!this._disposed) {\n            this.dispatchEvent('dispose');\n            this.onDispose();\n            this._disposed = true;\n        }\n    }\n    onDispose() {}\n}\n/**\n * Maps disposable objects to their reference counts.\n * @internal\n */ const objectReferenceMap = new WeakMap();\n/**\n * Maps disposable objects to their weak references.\n * @internal\n */ const weakRefMap = new WeakMap();\n/**\n * Holds objects that are pending disposal.\n * @internal\n */ const disposalQueue = new Set();\n/**\n * Processes all pending disposals from the previous frame.\n * This should be called at the beginning of each frame\n * @public\n */ function flushPendingDisposals() {\n    for (const obj of disposalQueue){\n        obj.dispose();\n        weakRefMap.get(obj)?.forEach((weakRef)=>{\n            weakRef.dispose();\n        });\n    }\n    disposalQueue.clear();\n}\n/**\n * Retains a disposable object\n * @param obj - Object to retain\n * @public\n *\n * @remarks\n * Retains an object will increase the reference counter for this object\n */ function retainObject(obj) {\n    if (obj) {\n        const ref = objectReferenceMap.get(obj) ?? 0;\n        objectReferenceMap.set(obj, ref + 1);\n        if (ref === 0) {\n            disposalQueue.delete(obj);\n        }\n    }\n}\n/**\n * Releases a disposable object\n * @param obj - Object to release\n * @public\n *\n * @remarks\n * Releases an object will decrease the reference counter for this object.\n * If reference counter become zero, the object will be disposed at next frame.\n */ function releaseObject(obj) {\n    if (obj) {\n        let refcount = objectReferenceMap.get(obj) ?? 0;\n        if (refcount > 0) {\n            refcount--;\n            if (refcount > 0) {\n                objectReferenceMap.set(obj, refcount);\n            } else {\n                objectReferenceMap.delete(obj);\n                disposalQueue.add(obj);\n            }\n        }\n    }\n}\n/**\n * A reference-counting wrapper for disposable objects.\n *\n * @public\n */ class DRef {\n    /** @internal */ _object;\n    /**\n   * Creates a new reference to a disposable object.\n   * @param obj - The disposable object to reference\n   */ constructor(obj){\n        this._object = obj ?? null;\n        retainObject(this._object);\n    }\n    /**\n   * Gets the currently referenced object.\n   * @returns The referenced object, or null if none is set\n   */ get() {\n        return this._object;\n    }\n    /**\n   * Sets a new object reference, releasing the previous one if it exists.\n   * @param obj - The new object to reference\n   */ set(obj) {\n        if (obj !== this._object) {\n            releaseObject(this._object);\n            this._object = obj ?? null;\n            retainObject(this._object);\n        }\n    }\n    /**\n   * Releases the reference and cleans up resources.\n   */ dispose() {\n        releaseObject(this._object);\n        this._object = null;\n    }\n}\n/**\n * A weak-reference-counting wrapper for disposable objects.\n *\n * @public\n */ class DWeakRef {\n    /** @internal */ _object;\n    /**\n   * Creates a new reference to a disposable object.\n   * @param obj - The disposable object to reference\n   */ constructor(obj){\n        this._object = obj ?? null;\n        this.retain();\n    }\n    /**\n   * Gets the currently referenced object.\n   * @returns The referenced object, or null if none is set\n   */ get() {\n        if (this._object?.disposed) {\n            this.dispose();\n        }\n        return this._object;\n    }\n    /**\n   * Sets a new object reference, releasing the previous one if it exists.\n   * @param obj - The new object to reference\n   */ set(obj) {\n        if (obj !== this._object) {\n            this.release();\n            this._object = obj ?? null;\n            this.retain();\n        }\n    }\n    /**\n   * Releases the reference and cleans up resources.\n   */ dispose() {\n        this.release();\n    }\n    /** @internal */ retain() {\n        if (this._object) {\n            const weakRefList = weakRefMap.get(this._object);\n            if (weakRefList) {\n                weakRefList.add(this);\n            } else {\n                weakRefMap.set(this._object, new Set([\n                    this\n                ]));\n            }\n        }\n    }\n    /** @internal */ release() {\n        if (this._object) {\n            weakRefMap.get(this._object)?.delete(this);\n            this._object = null;\n        }\n    }\n}\n\nexport { DRef, DWeakRef, Disposable, flushPendingDisposals, releaseObject, retainObject };\n//# sourceMappingURL=ref.js.map\n","import { floatToHalf } from '@zephyr3d/base';\n\nconst RED_SHIFT = 0;\nconst GREEN_SHIFT = 1;\nconst BLUE_SHIFT = 2;\nconst ALPHA_SHIFT = 3;\nconst DEPTH_SHIFT = 4;\nconst STENCIL_SHIFT = 5;\nconst FLOAT_SHIFT = 6;\nconst INTEGER_SHIFT = 7;\nconst SIGNED_SHIFT = 8;\nconst SRGB_SHIFT = 9;\nconst BGR_SHIFT = 10;\nconst BLOCK_SIZE_SHIFT = 11;\nconst BLOCK_SIZE_MASK = 0x1f << BLOCK_SIZE_SHIFT;\nconst BLOCK_WIDTH_SHIFT = 16;\nconst BLOCK_WIDTH_MASK = 0xf << BLOCK_WIDTH_SHIFT;\nconst BLOCK_HEIGHT_SHIFT = 20;\nconst BLOCK_HEIGHT_MASK = 0xf << BLOCK_HEIGHT_SHIFT;\nconst COMPRESSED_FORMAT_SHIFT = 24;\nconst COMPRESSION_FORMAT_BC1 = 1 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_BC2 = 2 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_BC3 = 3 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_BC4 = 4 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_BC5 = 5 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_BC6H = 6 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_BC7 = 7 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC = 8 << COMPRESSED_FORMAT_SHIFT;\n/*\nconst COMPRESSION_FORMAT_ETC2_RGB8 = 8 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ETC2_RGB8_A1 = 9 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ETC2_RGBA8 = 10 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_4x4 = 11 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_5x4 = 12 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_5x5 = 13 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_6x5 = 14 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_6x6 = 15 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_8x5 = 16 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_8x6 = 17 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_8x8 = 18 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_10x5 = 19 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_10x6 = 20 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_10x8 = 21 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_10x10 = 22 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_12x10 = 23 << COMPRESSED_FORMAT_SHIFT;\nconst COMPRESSION_FORMAT_ASTC_12x12 = 24 << COMPRESSED_FORMAT_SHIFT;\n*/ const COMPRESSION_FORMAT_BITMASK = 0x1f << COMPRESSED_FORMAT_SHIFT;\nconst RED_BITMASK = 1 << RED_SHIFT;\nconst GREEN_BITMASK = 1 << GREEN_SHIFT;\nconst BLUE_BITMASK = 1 << BLUE_SHIFT;\nconst ALPHA_BITMASK = 1 << ALPHA_SHIFT;\nconst DEPTH_BITMASK = 1 << DEPTH_SHIFT;\nconst STENCIL_BITMASK = 1 << STENCIL_SHIFT;\nconst FLOAT_BITMASK = 1 << FLOAT_SHIFT;\nconst INTEGER_BITMASK = 1 << INTEGER_SHIFT;\nconst SIGNED_BITMASK = 1 << SIGNED_SHIFT;\nconst SRGB_BITMASK = 1 << SRGB_SHIFT;\nconst BGR_BITMASK = 1 << BGR_SHIFT;\nfunction makeTextureFormat(compression, r, g, b, a, depth, stencil, float, integer, signed, srgb, bgr, blockWidth, blockHeight, blockSize) {\n    const compressionBits = compression;\n    const colorBits = (r ? RED_BITMASK : 0) | (g ? GREEN_BITMASK : 0) | (b ? BLUE_BITMASK : 0) | (a ? ALPHA_BITMASK : 0);\n    const depthStencilBits = (depth ? DEPTH_BITMASK : 0) | (stencil ? STENCIL_BITMASK : 0);\n    const floatBits = float ? FLOAT_BITMASK : 0;\n    const integerBits = integer ? INTEGER_BITMASK : 0;\n    const signedBits = signed ? SIGNED_BITMASK : 0;\n    const srgbBits = srgb ? SRGB_BITMASK : 0;\n    const bgrBits = bgr ? BGR_BITMASK : 0;\n    const blockBits = blockWidth << BLOCK_WIDTH_SHIFT | blockHeight << BLOCK_HEIGHT_SHIFT | blockSize << BLOCK_SIZE_SHIFT;\n    return compressionBits | colorBits | depthStencilBits | floatBits | integerBits | signedBits | srgbBits | bgrBits | blockBits;\n}\nconst textureFormatMap = {\n    unknown: 0,\n    r8unorm: makeTextureFormat(0, true, false, false, false, false, false, false, false, false, false, false, 1, 1, 1),\n    r8snorm: makeTextureFormat(0, true, false, false, false, false, false, false, false, true, false, false, 1, 1, 1),\n    r16f: makeTextureFormat(0, true, false, false, false, false, false, true, false, true, false, false, 1, 1, 2),\n    r32f: makeTextureFormat(0, true, false, false, false, false, false, true, false, true, false, false, 1, 1, 4),\n    r8ui: makeTextureFormat(0, true, false, false, false, false, false, false, true, false, false, false, 1, 1, 1),\n    r8i: makeTextureFormat(0, true, false, false, false, false, false, false, true, true, false, false, 1, 1, 1),\n    r16ui: makeTextureFormat(0, true, false, false, false, false, false, false, true, false, false, false, 1, 1, 2),\n    r16i: makeTextureFormat(0, true, false, false, false, false, false, false, true, true, false, false, 1, 1, 2),\n    r32ui: makeTextureFormat(0, true, false, false, false, false, false, false, true, false, false, false, 1, 1, 4),\n    r32i: makeTextureFormat(0, true, false, false, false, false, false, false, true, true, false, false, 1, 1, 4),\n    rg8unorm: makeTextureFormat(0, true, true, false, false, false, false, false, false, false, false, false, 1, 1, 2),\n    rg8snorm: makeTextureFormat(0, true, true, false, false, false, false, false, false, true, false, false, 1, 1, 2),\n    rg16f: makeTextureFormat(0, true, true, false, false, false, false, true, false, true, false, false, 1, 1, 4),\n    rg32f: makeTextureFormat(0, true, true, false, false, false, false, true, false, true, false, false, 1, 1, 8),\n    rg8ui: makeTextureFormat(0, true, true, false, false, false, false, false, true, false, false, false, 1, 1, 2),\n    rg8i: makeTextureFormat(0, true, true, false, false, false, false, false, true, true, false, false, 1, 1, 2),\n    rg16ui: makeTextureFormat(0, true, true, false, false, false, false, false, true, false, false, false, 1, 1, 4),\n    rg16i: makeTextureFormat(0, true, true, false, false, false, false, false, true, true, false, false, 1, 1, 4),\n    rg32ui: makeTextureFormat(0, true, true, false, false, false, false, false, true, false, false, false, 1, 1, 8),\n    rg32i: makeTextureFormat(0, true, true, false, false, false, false, false, true, true, false, false, 1, 1, 8),\n    rgba8unorm: makeTextureFormat(0, true, true, true, true, false, false, false, false, false, false, false, 1, 1, 4),\n    'rgba8unorm-srgb': makeTextureFormat(0, true, true, true, true, false, false, false, false, false, true, false, 1, 1, 4),\n    rgba8snorm: makeTextureFormat(0, true, true, true, true, false, false, false, false, true, false, false, 1, 1, 4),\n    bgra8unorm: makeTextureFormat(0, true, true, true, true, false, false, false, false, false, false, true, 1, 1, 4),\n    'bgra8unorm-srgb': makeTextureFormat(0, true, true, true, true, false, false, false, false, false, true, true, 1, 1, 4),\n    rgba16f: makeTextureFormat(0, true, true, true, true, false, false, true, false, true, false, false, 1, 1, 8),\n    rgba32f: makeTextureFormat(0, true, true, true, true, false, false, true, false, true, false, false, 1, 1, 16),\n    rgba8ui: makeTextureFormat(0, true, true, true, true, false, false, false, true, false, false, false, 1, 1, 4),\n    rgba8i: makeTextureFormat(0, true, true, true, true, false, false, false, true, true, false, false, 1, 1, 4),\n    rgba16ui: makeTextureFormat(0, true, true, true, true, false, false, false, true, false, false, false, 1, 1, 8),\n    rgba16i: makeTextureFormat(0, true, true, true, true, false, false, false, true, true, false, false, 1, 1, 8),\n    rgba32ui: makeTextureFormat(0, true, true, true, true, false, false, false, true, false, false, false, 1, 1, 16),\n    rgba32i: makeTextureFormat(0, true, true, true, true, false, false, false, true, true, false, false, 1, 1, 16),\n    rg11b10uf: makeTextureFormat(0, true, true, true, false, false, false, true, false, false, false, false, 1, 1, 4),\n    d16: makeTextureFormat(0, false, false, false, false, true, false, false, false, false, false, false, 1, 1, 2),\n    d24: makeTextureFormat(0, false, false, false, false, true, false, false, false, false, false, false, 0, 0, 0),\n    d32f: makeTextureFormat(0, false, false, false, false, true, false, true, false, true, false, false, 1, 1, 4),\n    d24s8: makeTextureFormat(0, false, false, false, false, true, true, false, false, false, false, false, 1, 1, 4),\n    d32fs8: makeTextureFormat(0, false, false, false, false, true, true, true, false, true, false, false, 1, 1, 5),\n    // compressed texture formats\n    dxt1: makeTextureFormat(COMPRESSION_FORMAT_BC1, true, true, true, true, false, false, false, false, false, false, false, 4, 4, 8),\n    'dxt1-srgb': makeTextureFormat(COMPRESSION_FORMAT_BC1, true, true, true, true, false, false, false, false, false, true, false, 4, 4, 8),\n    dxt3: makeTextureFormat(COMPRESSION_FORMAT_BC2, true, true, true, true, false, false, false, false, false, false, false, 4, 4, 16),\n    'dxt3-srgb': makeTextureFormat(COMPRESSION_FORMAT_BC2, true, true, true, true, false, false, false, false, false, true, false, 4, 4, 16),\n    dxt5: makeTextureFormat(COMPRESSION_FORMAT_BC3, true, true, true, true, false, false, false, false, false, false, false, 4, 4, 16),\n    'dxt5-srgb': makeTextureFormat(COMPRESSION_FORMAT_BC3, true, true, true, true, false, false, false, false, false, true, false, 4, 4, 16),\n    bc4: makeTextureFormat(COMPRESSION_FORMAT_BC4, true, false, false, false, false, false, false, false, false, false, false, 4, 4, 8),\n    'bc4-signed': makeTextureFormat(COMPRESSION_FORMAT_BC4, true, false, false, false, false, false, false, false, true, false, false, 4, 4, 8),\n    bc5: makeTextureFormat(COMPRESSION_FORMAT_BC5, true, true, false, false, false, false, false, false, false, false, false, 4, 4, 16),\n    'bc5-signed': makeTextureFormat(COMPRESSION_FORMAT_BC5, true, true, false, false, false, false, false, false, true, false, false, 4, 4, 16),\n    bc6h: makeTextureFormat(COMPRESSION_FORMAT_BC6H, true, true, true, false, false, false, true, false, false, false, false, 4, 4, 16),\n    'bc6h-signed': makeTextureFormat(COMPRESSION_FORMAT_BC6H, true, true, true, false, false, false, true, false, true, false, false, 4, 4, 16),\n    bc7: makeTextureFormat(COMPRESSION_FORMAT_BC7, true, true, true, true, false, false, false, false, false, false, false, 4, 4, 16),\n    'bc7-srgb': makeTextureFormat(COMPRESSION_FORMAT_BC7, true, true, true, true, false, false, false, false, false, true, false, 4, 4, 16),\n    'astc-4x4': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 4, 4, 16),\n    'astc-4x4-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 4, 4, 16),\n    'astc-5x4': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 5, 4, 16),\n    'astc-5x4-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 5, 4, 16),\n    'astc-5x5': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 5, 5, 16),\n    'astc-5x5-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 5, 5, 16),\n    'astc-6x5': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 6, 5, 16),\n    'astc-6x5-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 6, 5, 16),\n    'astc-6x6': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 6, 6, 16),\n    'astc-6x6-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 6, 6, 16),\n    'astc-8x5': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 8, 5, 16),\n    'astc-8x5-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 8, 5, 16),\n    'astc-8x6': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 8, 6, 16),\n    'astc-8x6-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 8, 6, 16),\n    'astc-8x8': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 8, 8, 16),\n    'astc-8x8-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 8, 8, 16),\n    'astc-10x5': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 10, 5, 16),\n    'astc-10x5-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 10, 5, 16),\n    'astc-10x6': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 10, 6, 16),\n    'astc-10x6-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 10, 6, 16),\n    'astc-10x8': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 10, 8, 16),\n    'astc-10x8-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 10, 8, 16),\n    'astc-10x10': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 10, 10, 16),\n    'astc-10x10-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 10, 10, 16),\n    'astc-12x10': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 12, 10, 16),\n    'astc-12x10-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 12, 10, 16),\n    'astc-12x12': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, false, false, 12, 12, 16),\n    'astc-12x12-srgb': makeTextureFormat(COMPRESSION_FORMAT_ASTC, true, true, true, true, false, false, false, false, false, true, false, 12, 12, 16)\n};\n/**\n * Converts a non-sRGB texture format to the corresponding sRGB texture format\n * @param format - The texture format to be converted\n * @returns The sRGB texture format\n * @public\n */ function linearTextureFormatToSRGB(format) {\n    switch(format){\n        case 'rgba8unorm':\n            return 'rgba8unorm-srgb';\n        case 'bgra8unorm':\n            return 'bgra8unorm-srgb';\n        case 'dxt1':\n            return 'dxt1-srgb';\n        case 'dxt3':\n            return 'dxt3-srgb';\n        case 'dxt5':\n            return 'dxt5-srgb';\n        case 'bc7':\n            return 'bc7-srgb';\n        case 'astc-4x4':\n            return 'astc-4x4-srgb';\n        case 'astc-5x4':\n            return 'astc-5x4-srgb';\n        case 'astc-5x5':\n            return 'astc-5x5-srgb';\n        case 'astc-6x5':\n            return 'astc-6x5-srgb';\n        case 'astc-6x6':\n            return 'astc-6x6-srgb';\n        case 'astc-8x5':\n            return 'astc-8x5-srgb';\n        case 'astc-8x6':\n            return 'astc-8x6-srgb';\n        case 'astc-8x8':\n            return 'astc-8x8-srgb';\n        case 'astc-10x5':\n            return 'astc-10x5-srgb';\n        case 'astc-10x6':\n            return 'astc-10x6-srgb';\n        case 'astc-10x8':\n            return 'astc-10x8-srgb';\n        case 'astc-10x10':\n            return 'astc-10x10-srgb';\n        case 'astc-12x10':\n            return 'astc-12x10-srgb';\n        case 'astc-12x12':\n            return 'astc-12x12-srgb';\n        default:\n            return format;\n    }\n}\n/**\n * Check if a given texture format contains an alpha channel.\n * @param format - The texture format to be checked.\n * @returns true if the texture format contains an alpha channel, otherwise false\n * @public\n */ function hasAlphaChannel(format) {\n    return !!(textureFormatMap[format] & ALPHA_BITMASK);\n}\n/**\n * Check if a given texture format contains a red channel.\n * @param format - The texture format to be checked.\n * @returns true if the texture format contains a red channel, otherwise false\n * @public\n */ function hasRedChannel(format) {\n    return !!(textureFormatMap[format] & RED_BITMASK);\n}\n/**\n * Check if a given texture format contains a green channel.\n * @param format - The texture format to be checked.\n * @returns true if the texture format contains a green channel, otherwise false\n * @public\n */ function hasGreenChannel(format) {\n    return !!(textureFormatMap[format] & GREEN_BITMASK);\n}\n/**\n * Check if a given texture format contains a blue channel.\n * @param format - The texture format to be checked.\n * @returns true if the texture format contains a blue channel, otherwise false\n * @public\n */ function hasBlueChannel(format) {\n    return !!(textureFormatMap[format] & BLUE_BITMASK);\n}\n/**\n * Check if a given texture format contains a depth channel.\n * @param format - The texture format to be checked.\n * @returns true if the texture format contains a depth channel, otherwise false\n * @public\n */ function hasDepthChannel(format) {\n    return !!(textureFormatMap[format] & DEPTH_BITMASK);\n}\n/**\n * Check if a given texture format contains a stencil channel.\n * @param format - The texture format to be checked.\n * @returns true if the texture format contains a stencil channel, otherwise false\n * @public\n */ function hasStencilChannel(format) {\n    return !!(textureFormatMap[format] & STENCIL_BITMASK);\n}\n/**\n * Check whether a given texture format is floating-point.\n * @param format - The texture format to be checked.\n * @returns true if the texture format is floating-point, otherwise false\n * @public\n */ function isFloatTextureFormat(format) {\n    return !!(textureFormatMap[format] & FLOAT_BITMASK);\n}\n/**\n * Check whether a given texture format is integer.\n * @param format - The texture format to be checked.\n * @returns true if the texture format is integer, otherwise false\n * @public\n */ function isIntegerTextureFormat(format) {\n    return !!(textureFormatMap[format] & INTEGER_BITMASK);\n}\n/**\n * Check whether a given texture format is signed.\n * @param format - The texture format to be checked.\n * @returns true if the texture format is signed, otherwise false\n * @public\n */ function isSignedTextureFormat(format) {\n    return !!(textureFormatMap[format] & SIGNED_BITMASK);\n}\n/**\n * Check whether a given texture format is a compressed format.\n * @param format - The texture format to be checked.\n * @returns true if the texture format is a compressed format, otherwise false\n * @public\n */ function isCompressedTextureFormat(format) {\n    return !!(textureFormatMap[format] & COMPRESSION_FORMAT_BITMASK);\n}\n/**\n * Check whether a given texture format is sRGB format.\n * @param format - The texture format to be checked.\n * @returns true if the texture format is sRGB format, otherwise false\n * @public\n */ function isSRGBTextureFormat(format) {\n    return !!(textureFormatMap[format] & SRGB_BITMASK);\n}\n/**\n * Get block size of given texture format\n * @param format - The texture format\n * @returns The block size\n * @public\n */ function getTextureFormatBlockSize(format) {\n    return (textureFormatMap[format] & BLOCK_SIZE_MASK) >> BLOCK_SIZE_SHIFT;\n}\n/**\n * Get block width of given texture format\n * @param format - The texture format\n * @returns The block width\n * @public\n */ function getTextureFormatBlockWidth(format) {\n    return (textureFormatMap[format] & BLOCK_WIDTH_MASK) >> BLOCK_WIDTH_SHIFT;\n}\n/**\n * Get block height of given texture format\n * @param format - The texture format\n * @returns The block height\n * @public\n */ function getTextureFormatBlockHeight(format) {\n    return (textureFormatMap[format] & BLOCK_HEIGHT_MASK) >> BLOCK_HEIGHT_SHIFT;\n}\nfunction normalizeColorComponent(val, maxval) {\n    return Math.min(maxval, Math.max(Math.floor(val * maxval), 0));\n}\nfunction normalizeColorComponentSigned(val, maxval) {\n    return normalizeColorComponent(val * 0.5 + 0.5, maxval) - (maxval + 1) / 2;\n}\n/** @internal */ function encodePixel(format, r, g, b, a) {\n    switch(format){\n        case 'r8unorm':\n            return new Uint8Array([\n                normalizeColorComponent(r, 255)\n            ]);\n        case 'r8snorm':\n            return new Int8Array([\n                normalizeColorComponentSigned(r, 255)\n            ]);\n        case 'r16f':\n            return new Uint16Array([\n                floatToHalf(r)\n            ]);\n        case 'r32f':\n            return new Float32Array([\n                r\n            ]);\n        case 'r8ui':\n            return new Uint8Array([\n                r | 0\n            ]);\n        case 'r8i':\n            return new Int8Array([\n                r | 0\n            ]);\n        case 'r16ui':\n            return new Uint16Array([\n                r | 0\n            ]);\n        case 'r16i':\n            return new Int16Array([\n                r | 0\n            ]);\n        case 'r32ui':\n            return new Uint32Array([\n                r | 0\n            ]);\n        case 'r32i':\n            return new Int32Array([\n                r | 0\n            ]);\n        case 'rg8unorm':\n            return new Uint8Array([\n                normalizeColorComponent(r, 255),\n                normalizeColorComponent(g, 255)\n            ]);\n        case 'rg8snorm':\n            return new Int8Array([\n                normalizeColorComponentSigned(r, 255),\n                normalizeColorComponentSigned(g, 255)\n            ]);\n        case 'rg16f':\n            return new Uint16Array([\n                floatToHalf(r),\n                floatToHalf(g)\n            ]);\n        case 'rg32f':\n            return new Float32Array([\n                r,\n                g\n            ]);\n        case 'rg8ui':\n            return new Uint8Array([\n                r | 0,\n                g | 0\n            ]);\n        case 'rg8i':\n            return new Int8Array([\n                r | 0,\n                g | 0\n            ]);\n        case 'rg16ui':\n            return new Uint16Array([\n                r | 0,\n                g | 0\n            ]);\n        case 'rg16i':\n            return new Int16Array([\n                r | 0,\n                g | 0\n            ]);\n        case 'rg32ui':\n            return new Uint32Array([\n                r | 0,\n                g | 0\n            ]);\n        case 'rg32i':\n            return new Int32Array([\n                r | 0,\n                g | 0\n            ]);\n        case 'rgba8unorm':\n        case 'rgba8unorm-srgb':\n            return new Uint8Array([\n                normalizeColorComponent(r, 255),\n                normalizeColorComponent(g, 255),\n                normalizeColorComponent(b, 255),\n                normalizeColorComponent(a, 255)\n            ]);\n        case 'bgra8unorm':\n        case 'bgra8unorm-srgb':\n            return new Uint8Array([\n                normalizeColorComponent(b, 255),\n                normalizeColorComponent(g, 255),\n                normalizeColorComponent(r, 255),\n                normalizeColorComponent(a, 255)\n            ]);\n        case 'rgba8snorm':\n            return new Int8Array([\n                normalizeColorComponentSigned(r, 255),\n                normalizeColorComponentSigned(g, 255),\n                normalizeColorComponentSigned(b, 255),\n                normalizeColorComponentSigned(a, 255)\n            ]);\n        case 'rgba16f':\n            return new Uint16Array([\n                floatToHalf(r),\n                floatToHalf(g),\n                floatToHalf(b),\n                floatToHalf(a)\n            ]);\n        case 'rgba32f':\n            return new Float32Array([\n                r,\n                g,\n                b,\n                a\n            ]);\n        case 'rgba8ui':\n            return new Uint8Array([\n                r | 0,\n                g | 0,\n                b | 0,\n                a | 0\n            ]);\n        case 'rgba8i':\n            return new Int8Array([\n                r | 0,\n                g | 0,\n                b | 0,\n                a | 0\n            ]);\n        case 'rgba16ui':\n            return new Uint16Array([\n                r | 0,\n                g | 0,\n                b | 0,\n                a | 0\n            ]);\n        case 'rgba16i':\n            return new Int16Array([\n                r | 0,\n                g | 0,\n                b | 0,\n                a | 0\n            ]);\n        case 'rgba32ui':\n            return new Uint32Array([\n                r | 0,\n                g | 0,\n                b | 0,\n                a | 0\n            ]);\n        case 'rgba32i':\n            return new Int32Array([\n                r | 0,\n                g | 0,\n                b | 0,\n                a | 0\n            ]);\n        default:\n            return null;\n    }\n}\n/** @internal */ function encodePixelToArray(format, r, g, b, a, arr) {\n    switch(format){\n        case 'r8unorm':\n            arr.push(normalizeColorComponent(r, 255));\n            break;\n        case 'r8snorm':\n            arr.push(normalizeColorComponentSigned(r, 255));\n            break;\n        case 'r16f':\n            arr.push(floatToHalf(r));\n            break;\n        case 'r32f':\n            arr.push(r);\n            break;\n        case 'r8ui':\n            arr.push(r | 0);\n            break;\n        case 'r8i':\n            arr.push(r | 0);\n            break;\n        case 'r16ui':\n            arr.push(r | 0);\n            break;\n        case 'r16i':\n            arr.push(r | 0);\n            break;\n        case 'r32ui':\n            arr.push(r | 0);\n            break;\n        case 'r32i':\n            arr.push(r | 0);\n            break;\n        case 'rg8unorm':\n            arr.push(normalizeColorComponent(r, 255), normalizeColorComponent(g, 255));\n            break;\n        case 'rg8snorm':\n            arr.push(normalizeColorComponentSigned(r, 255), normalizeColorComponentSigned(g, 255));\n            break;\n        case 'rg16f':\n            arr.push(floatToHalf(r), floatToHalf(g));\n            break;\n        case 'rg32f':\n            arr.push(r, g);\n            break;\n        case 'rg8ui':\n            arr.push(r | 0, g | 0);\n            break;\n        case 'rg8i':\n            arr.push(r | 0, g | 0);\n            break;\n        case 'rg16ui':\n            arr.push(r | 0, g | 0);\n            break;\n        case 'rg16i':\n            arr.push(r | 0, g | 0);\n            break;\n        case 'rg32ui':\n            arr.push(r | 0, g | 0);\n            break;\n        case 'rg32i':\n            arr.push(r | 0, g | 0);\n            break;\n        case 'rgba8unorm':\n        case 'rgba8unorm-srgb':\n            arr.push(normalizeColorComponent(r, 255), normalizeColorComponent(g, 255), normalizeColorComponent(b, 255), normalizeColorComponent(a, 255));\n            break;\n        case 'bgra8unorm':\n        case 'bgra8unorm-srgb':\n            arr.push(normalizeColorComponent(b, 255), normalizeColorComponent(g, 255), normalizeColorComponent(r, 255), normalizeColorComponent(a, 255));\n            break;\n        case 'rgba8snorm':\n            arr.push(normalizeColorComponentSigned(r, 255), normalizeColorComponentSigned(g, 255), normalizeColorComponentSigned(b, 255), normalizeColorComponentSigned(a, 255));\n            break;\n        case 'rgba16f':\n            arr.push(floatToHalf(r), floatToHalf(g), floatToHalf(b), floatToHalf(a));\n            break;\n        case 'rgba32f':\n            arr.push(r, g, b, a);\n            break;\n        case 'rgba8ui':\n            arr.push(r | 0, g | 0, b | 0, a | 0);\n            break;\n        case 'rgba8i':\n            arr.push(r | 0, g | 0, b | 0, a | 0);\n            break;\n        case 'rgba16ui':\n            arr.push(r | 0, g | 0, b | 0, a | 0);\n            break;\n        case 'rgba16i':\n            arr.push(r | 0, g | 0, b | 0, a | 0);\n            break;\n        case 'rgba32ui':\n            arr.push(r | 0, g | 0, b | 0, a | 0);\n            break;\n        case 'rgba32i':\n            arr.push(r | 0, g | 0, b | 0, a | 0);\n            break;\n    }\n}\n/**\n * Shader type\n * @public\n */ var ShaderType = /*#__PURE__*/ function(ShaderType) {\n    ShaderType[ShaderType[\"Vertex\"] = 1] = \"Vertex\";\n    ShaderType[ShaderType[\"Fragment\"] = 2] = \"Fragment\";\n    ShaderType[ShaderType[\"Compute\"] = 4] = \"Compute\";\n    return ShaderType;\n}({});\n\nexport { ShaderType, encodePixel, encodePixelToArray, getTextureFormatBlockHeight, getTextureFormatBlockSize, getTextureFormatBlockWidth, hasAlphaChannel, hasBlueChannel, hasDepthChannel, hasGreenChannel, hasRedChannel, hasStencilChannel, isCompressedTextureFormat, isFloatTextureFormat, isIntegerTextureFormat, isSRGBTextureFormat, isSignedTextureFormat, linearTextureFormatToSRGB };\n//# sourceMappingURL=base_types.js.map\n","import { ASSERT } from '@zephyr3d/base';\n\nconst F16_BITMASK = 1;\nconst F32_BITMASK = 2;\nconst BOOL_BITMASK = 3;\nconst I8_BITMASK = 4;\nconst I16_BITMASK = 5;\nconst I32_BITMASK = 6;\nconst U8_BITMASK = 7;\nconst U16_BITMASK = 8;\nconst U32_BITMASK = 9;\nconst SCALAR_TYPE_BITMASK = 15;\nconst ROWS_BITMASK = 7;\nconst ROWS_BITSHIFT = 4;\nconst COLS_BITMASK = 7;\nconst COLS_BITSHIFT = 7;\nconst NORM_BITMASK = 1;\nconst NORM_BITSHIFT = 10;\nfunction align(n, alignment) {\n    return n + alignment - 1 & ~(alignment - 1);\n}\nfunction getAlignment(type) {\n    if (type.isPrimitiveType()) {\n        return type.isScalarType() ? 4 : 1 << Math.min(4, type.cols + 1);\n    } else if (type.isAtomicI32() || type.isAtomicU32()) {\n        return 4;\n    } else if (type.isArrayType()) {\n        return type.elementType.isAnyType() ? 1 : getAlignment(type.elementType);\n    } else {\n        let alignment = 0;\n        for (const member of type.structMembers){\n            alignment = Math.max(alignment, getAlignment(member.type));\n        }\n        return Math.max(alignment, 16);\n    }\n}\nfunction getAlignmentPacked(_type) {\n    return 1;\n}\nfunction getSize(type) {\n    if (type.isPrimitiveType()) {\n        return type.isMatrixType() ? type.rows * getAlignment(PBPrimitiveTypeInfo.getCachedTypeInfo(type.resizeType(1, type.cols))) : 4 * type.cols;\n    } else if (type.isArrayType()) {\n        return type.elementType.isAnyType() ? 0 : type.dimension * align(getSize(type.elementType), getAlignment(type.elementType));\n    } else if (type.isAtomicI32() || type.isAtomicU32()) {\n        return 4;\n    } else {\n        let size = 0;\n        let structAlignment = 0;\n        for (const member of type.structMembers){\n            const memberAlignment = getAlignment(member.type);\n            size = align(size, memberAlignment);\n            size += getSize(member.type);\n            structAlignment = Math.max(structAlignment, memberAlignment);\n        }\n        return align(size, structAlignment);\n    }\n}\nfunction getSizePacked(type) {\n    if (type.isPrimitiveType()) {\n        let scalarSize;\n        switch(type.scalarType){\n            case PBPrimitiveType.U8:\n            case PBPrimitiveType.U8_NORM:\n            case PBPrimitiveType.I8:\n            case PBPrimitiveType.I8_NORM:\n                scalarSize = 1;\n                break;\n            case PBPrimitiveType.F16:\n            case PBPrimitiveType.I16:\n            case PBPrimitiveType.I16_NORM:\n            case PBPrimitiveType.U16:\n            case PBPrimitiveType.U16_NORM:\n                scalarSize = 2;\n                break;\n            default:\n                scalarSize = 4;\n                break;\n        }\n        return type.rows * type.cols * scalarSize;\n    } else if (type.isArrayType()) {\n        return type.elementType.isAnyType() ? 0 : type.dimension * getSizePacked(type.elementType);\n    } else if (type.isAtomicI32() || type.isAtomicU32()) {\n        return 4;\n    } else {\n        let size = 0;\n        for (const member of type.structMembers){\n            size += getSizePacked(member.type);\n        }\n        return size;\n    }\n}\nfunction makePrimitiveType(scalarTypeMask, rows, cols, norm) {\n    return scalarTypeMask | rows << ROWS_BITSHIFT | cols << COLS_BITSHIFT | norm << NORM_BITSHIFT;\n}\nfunction typeToTypedArray(type) {\n    if (type.isPrimitiveType()) {\n        return type.scalarType;\n    } else if (type.isArrayType()) {\n        return type.elementType.isAnyType() ? null : typeToTypedArray(type.elementType);\n    } else {\n        return PBPrimitiveType.U8;\n    }\n}\n/**\n * Primitive types\n * @public\n */ var PBPrimitiveType = /*#__PURE__*/ function(PBPrimitiveType) {\n    PBPrimitiveType[PBPrimitiveType[\"NONE\"] = 0] = \"NONE\";\n    PBPrimitiveType[PBPrimitiveType[\"F16\"] = makePrimitiveType(F16_BITMASK, 1, 1, 0)] = \"F16\";\n    PBPrimitiveType[PBPrimitiveType[\"F16VEC2\"] = makePrimitiveType(F16_BITMASK, 1, 2, 0)] = \"F16VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"F16VEC3\"] = makePrimitiveType(F16_BITMASK, 1, 3, 0)] = \"F16VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"F16VEC4\"] = makePrimitiveType(F16_BITMASK, 1, 4, 0)] = \"F16VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"F32\"] = makePrimitiveType(F32_BITMASK, 1, 1, 0)] = \"F32\";\n    PBPrimitiveType[PBPrimitiveType[\"F32VEC2\"] = makePrimitiveType(F32_BITMASK, 1, 2, 0)] = \"F32VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"F32VEC3\"] = makePrimitiveType(F32_BITMASK, 1, 3, 0)] = \"F32VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"F32VEC4\"] = makePrimitiveType(F32_BITMASK, 1, 4, 0)] = \"F32VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"BOOL\"] = makePrimitiveType(BOOL_BITMASK, 1, 1, 0)] = \"BOOL\";\n    PBPrimitiveType[PBPrimitiveType[\"BVEC2\"] = makePrimitiveType(BOOL_BITMASK, 1, 2, 0)] = \"BVEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"BVEC3\"] = makePrimitiveType(BOOL_BITMASK, 1, 3, 0)] = \"BVEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"BVEC4\"] = makePrimitiveType(BOOL_BITMASK, 1, 4, 0)] = \"BVEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"I8\"] = makePrimitiveType(I8_BITMASK, 1, 1, 0)] = \"I8\";\n    PBPrimitiveType[PBPrimitiveType[\"I8VEC2\"] = makePrimitiveType(I8_BITMASK, 1, 2, 0)] = \"I8VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"I8VEC3\"] = makePrimitiveType(I8_BITMASK, 1, 3, 0)] = \"I8VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"I8VEC4\"] = makePrimitiveType(I8_BITMASK, 1, 4, 0)] = \"I8VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"I8_NORM\"] = makePrimitiveType(I8_BITMASK, 1, 1, 1)] = \"I8_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I8VEC2_NORM\"] = makePrimitiveType(I8_BITMASK, 1, 2, 1)] = \"I8VEC2_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I8VEC3_NORM\"] = makePrimitiveType(I8_BITMASK, 1, 3, 1)] = \"I8VEC3_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I8VEC4_NORM\"] = makePrimitiveType(I8_BITMASK, 1, 4, 1)] = \"I8VEC4_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I16\"] = makePrimitiveType(I16_BITMASK, 1, 1, 0)] = \"I16\";\n    PBPrimitiveType[PBPrimitiveType[\"I16VEC2\"] = makePrimitiveType(I16_BITMASK, 1, 2, 0)] = \"I16VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"I16VEC3\"] = makePrimitiveType(I16_BITMASK, 1, 3, 0)] = \"I16VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"I16VEC4\"] = makePrimitiveType(I16_BITMASK, 1, 4, 0)] = \"I16VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"I16_NORM\"] = makePrimitiveType(I16_BITMASK, 1, 1, 1)] = \"I16_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I16VEC2_NORM\"] = makePrimitiveType(I16_BITMASK, 1, 2, 1)] = \"I16VEC2_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I16VEC3_NORM\"] = makePrimitiveType(I16_BITMASK, 1, 3, 1)] = \"I16VEC3_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I16VEC4_NORM\"] = makePrimitiveType(I16_BITMASK, 1, 4, 1)] = \"I16VEC4_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I32\"] = makePrimitiveType(I32_BITMASK, 1, 1, 0)] = \"I32\";\n    PBPrimitiveType[PBPrimitiveType[\"I32VEC2\"] = makePrimitiveType(I32_BITMASK, 1, 2, 0)] = \"I32VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"I32VEC3\"] = makePrimitiveType(I32_BITMASK, 1, 3, 0)] = \"I32VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"I32VEC4\"] = makePrimitiveType(I32_BITMASK, 1, 4, 0)] = \"I32VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"I32_NORM\"] = makePrimitiveType(I32_BITMASK, 1, 1, 1)] = \"I32_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I32VEC2_NORM\"] = makePrimitiveType(I32_BITMASK, 1, 2, 1)] = \"I32VEC2_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I32VEC3_NORM\"] = makePrimitiveType(I32_BITMASK, 1, 3, 1)] = \"I32VEC3_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"I32VEC4_NORM\"] = makePrimitiveType(I32_BITMASK, 1, 4, 1)] = \"I32VEC4_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U8\"] = makePrimitiveType(U8_BITMASK, 1, 1, 0)] = \"U8\";\n    PBPrimitiveType[PBPrimitiveType[\"U8VEC2\"] = makePrimitiveType(U8_BITMASK, 1, 2, 0)] = \"U8VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"U8VEC3\"] = makePrimitiveType(U8_BITMASK, 1, 3, 0)] = \"U8VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"U8VEC4\"] = makePrimitiveType(U8_BITMASK, 1, 4, 0)] = \"U8VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"U8_NORM\"] = makePrimitiveType(U8_BITMASK, 1, 1, 1)] = \"U8_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U8VEC2_NORM\"] = makePrimitiveType(U8_BITMASK, 1, 2, 1)] = \"U8VEC2_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U8VEC3_NORM\"] = makePrimitiveType(U8_BITMASK, 1, 3, 1)] = \"U8VEC3_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U8VEC4_NORM\"] = makePrimitiveType(U8_BITMASK, 1, 4, 1)] = \"U8VEC4_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U16\"] = makePrimitiveType(U16_BITMASK, 1, 1, 0)] = \"U16\";\n    PBPrimitiveType[PBPrimitiveType[\"U16VEC2\"] = makePrimitiveType(U16_BITMASK, 1, 2, 0)] = \"U16VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"U16VEC3\"] = makePrimitiveType(U16_BITMASK, 1, 3, 0)] = \"U16VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"U16VEC4\"] = makePrimitiveType(U16_BITMASK, 1, 4, 0)] = \"U16VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"U16_NORM\"] = makePrimitiveType(U16_BITMASK, 1, 1, 1)] = \"U16_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U16VEC2_NORM\"] = makePrimitiveType(U16_BITMASK, 1, 2, 1)] = \"U16VEC2_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U16VEC3_NORM\"] = makePrimitiveType(U16_BITMASK, 1, 3, 1)] = \"U16VEC3_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U16VEC4_NORM\"] = makePrimitiveType(U16_BITMASK, 1, 4, 1)] = \"U16VEC4_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U32\"] = makePrimitiveType(U32_BITMASK, 1, 1, 0)] = \"U32\";\n    PBPrimitiveType[PBPrimitiveType[\"U32VEC2\"] = makePrimitiveType(U32_BITMASK, 1, 2, 0)] = \"U32VEC2\";\n    PBPrimitiveType[PBPrimitiveType[\"U32VEC3\"] = makePrimitiveType(U32_BITMASK, 1, 3, 0)] = \"U32VEC3\";\n    PBPrimitiveType[PBPrimitiveType[\"U32VEC4\"] = makePrimitiveType(U32_BITMASK, 1, 4, 0)] = \"U32VEC4\";\n    PBPrimitiveType[PBPrimitiveType[\"U32_NORM\"] = makePrimitiveType(U32_BITMASK, 1, 1, 1)] = \"U32_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U32VEC2_NORM\"] = makePrimitiveType(U32_BITMASK, 1, 2, 1)] = \"U32VEC2_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U32VEC3_NORM\"] = makePrimitiveType(U32_BITMASK, 1, 3, 1)] = \"U32VEC3_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"U32VEC4_NORM\"] = makePrimitiveType(U32_BITMASK, 1, 4, 1)] = \"U32VEC4_NORM\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT2\"] = makePrimitiveType(F32_BITMASK, 2, 2, 0)] = \"MAT2\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT2x3\"] = makePrimitiveType(F32_BITMASK, 2, 3, 0)] = \"MAT2x3\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT2x4\"] = makePrimitiveType(F32_BITMASK, 2, 4, 0)] = \"MAT2x4\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT3x2\"] = makePrimitiveType(F32_BITMASK, 3, 2, 0)] = \"MAT3x2\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT3\"] = makePrimitiveType(F32_BITMASK, 3, 3, 0)] = \"MAT3\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT3x4\"] = makePrimitiveType(F32_BITMASK, 3, 4, 0)] = \"MAT3x4\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT4x2\"] = makePrimitiveType(F32_BITMASK, 4, 2, 0)] = \"MAT4x2\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT4x3\"] = makePrimitiveType(F32_BITMASK, 4, 3, 0)] = \"MAT4x3\";\n    PBPrimitiveType[PBPrimitiveType[\"MAT4\"] = makePrimitiveType(F32_BITMASK, 4, 4, 0)] = \"MAT4\";\n    return PBPrimitiveType;\n}({});\nconst primitiveTypeMapWebGL = {\n    [PBPrimitiveType.F32]: 'float',\n    [PBPrimitiveType.F32VEC2]: 'vec2',\n    [PBPrimitiveType.F32VEC3]: 'vec3',\n    [PBPrimitiveType.F32VEC4]: 'vec4',\n    [PBPrimitiveType.BOOL]: 'bool',\n    [PBPrimitiveType.BVEC2]: 'bvec2',\n    [PBPrimitiveType.BVEC3]: 'bvec3',\n    [PBPrimitiveType.BVEC4]: 'bvec4',\n    [PBPrimitiveType.I32]: 'int',\n    [PBPrimitiveType.I32VEC2]: 'ivec2',\n    [PBPrimitiveType.I32VEC3]: 'ivec3',\n    [PBPrimitiveType.I32VEC4]: 'ivec4',\n    [PBPrimitiveType.U32]: 'uint',\n    [PBPrimitiveType.U32VEC2]: 'uvec2',\n    [PBPrimitiveType.U32VEC3]: 'uvec3',\n    [PBPrimitiveType.U32VEC4]: 'uvec4',\n    [PBPrimitiveType.MAT2]: 'mat2',\n    [PBPrimitiveType.MAT2x3]: 'mat2x3',\n    [PBPrimitiveType.MAT2x4]: 'mat2x4',\n    [PBPrimitiveType.MAT3x2]: 'mat3x2',\n    [PBPrimitiveType.MAT3]: 'mat3',\n    [PBPrimitiveType.MAT3x4]: 'mat3x4',\n    [PBPrimitiveType.MAT4x2]: 'mat4x2',\n    [PBPrimitiveType.MAT4x3]: 'mat4x3',\n    [PBPrimitiveType.MAT4]: 'mat4'\n};\nconst primitiveTypeMapWGSL = {\n    [PBPrimitiveType.F32]: 'f32',\n    [PBPrimitiveType.F32VEC2]: 'vec2<f32>',\n    [PBPrimitiveType.F32VEC3]: 'vec3<f32>',\n    [PBPrimitiveType.F32VEC4]: 'vec4<f32>',\n    [PBPrimitiveType.BOOL]: 'bool',\n    [PBPrimitiveType.BVEC2]: 'vec2<bool>',\n    [PBPrimitiveType.BVEC3]: 'vec3<bool>',\n    [PBPrimitiveType.BVEC4]: 'vec4<bool>',\n    [PBPrimitiveType.I32]: 'i32',\n    [PBPrimitiveType.I32VEC2]: 'vec2<i32>',\n    [PBPrimitiveType.I32VEC3]: 'vec3<i32>',\n    [PBPrimitiveType.I32VEC4]: 'vec4<i32>',\n    [PBPrimitiveType.U32]: 'u32',\n    [PBPrimitiveType.U32VEC2]: 'vec2<u32>',\n    [PBPrimitiveType.U32VEC3]: 'vec3<u32>',\n    [PBPrimitiveType.U32VEC4]: 'vec4<u32>',\n    [PBPrimitiveType.MAT2]: 'mat2x2<f32>',\n    [PBPrimitiveType.MAT2x3]: 'mat2x3<f32>',\n    [PBPrimitiveType.MAT2x4]: 'mat2x4<f32>',\n    [PBPrimitiveType.MAT3x2]: 'mat3x2<f32>',\n    [PBPrimitiveType.MAT3]: 'mat3x3<f32>',\n    [PBPrimitiveType.MAT3x4]: 'mat3x4<f32>',\n    [PBPrimitiveType.MAT4x2]: 'mat4x2<f32>',\n    [PBPrimitiveType.MAT4x3]: 'mat4x3<f32>',\n    [PBPrimitiveType.MAT4]: 'mat4x4<f32>'\n};\nconst BITFLAG_1D = 1 << 0;\nconst BITFLAG_2D = 1 << 1;\nconst BITFLAG_3D = 1 << 2;\nconst BITFLAG_CUBE = 1 << 3;\nconst BITFLAG_ARRAY = 1 << 4;\nconst BITFLAG_MULTISAMPLED = 1 << 5;\nconst BITFLAG_STORAGE = 1 << 6;\nconst BITFLAG_DEPTH = 1 << 7;\nconst BITFLAG_FLOAT = 1 << 8;\nconst BITFLAG_INT = 1 << 9;\nconst BITFLAG_UINT = 1 << 10;\nconst BITFLAG_EXTERNAL = 1 << 11;\n/**\n * Texture types\n * @public\n */ var PBTextureType = /*#__PURE__*/ function(PBTextureType) {\n    PBTextureType[PBTextureType[\"TEX_1D\"] = BITFLAG_1D | BITFLAG_FLOAT] = \"TEX_1D\";\n    PBTextureType[PBTextureType[\"ITEX_1D\"] = BITFLAG_1D | BITFLAG_INT] = \"ITEX_1D\";\n    PBTextureType[PBTextureType[\"UTEX_1D\"] = BITFLAG_1D | BITFLAG_UINT] = \"UTEX_1D\";\n    PBTextureType[PBTextureType[\"TEX_2D\"] = BITFLAG_2D | BITFLAG_FLOAT] = \"TEX_2D\";\n    PBTextureType[PBTextureType[\"ITEX_2D\"] = BITFLAG_2D | BITFLAG_INT] = \"ITEX_2D\";\n    PBTextureType[PBTextureType[\"UTEX_2D\"] = BITFLAG_2D | BITFLAG_UINT] = \"UTEX_2D\";\n    PBTextureType[PBTextureType[\"TEX_2D_ARRAY\"] = BITFLAG_2D | BITFLAG_FLOAT | BITFLAG_ARRAY] = \"TEX_2D_ARRAY\";\n    PBTextureType[PBTextureType[\"ITEX_2D_ARRAY\"] = BITFLAG_2D | BITFLAG_INT | BITFLAG_ARRAY] = \"ITEX_2D_ARRAY\";\n    PBTextureType[PBTextureType[\"UTEX_2D_ARRAY\"] = BITFLAG_2D | BITFLAG_UINT | BITFLAG_ARRAY] = \"UTEX_2D_ARRAY\";\n    PBTextureType[PBTextureType[\"TEX_3D\"] = BITFLAG_3D | BITFLAG_FLOAT] = \"TEX_3D\";\n    PBTextureType[PBTextureType[\"ITEX_3D\"] = BITFLAG_3D | BITFLAG_INT] = \"ITEX_3D\";\n    PBTextureType[PBTextureType[\"UTEX_3D\"] = BITFLAG_3D | BITFLAG_UINT] = \"UTEX_3D\";\n    PBTextureType[PBTextureType[\"TEX_CUBE\"] = BITFLAG_CUBE | BITFLAG_FLOAT] = \"TEX_CUBE\";\n    PBTextureType[PBTextureType[\"ITEX_CUBE\"] = BITFLAG_CUBE | BITFLAG_INT] = \"ITEX_CUBE\";\n    PBTextureType[PBTextureType[\"UTEX_CUBE\"] = BITFLAG_CUBE | BITFLAG_UINT] = \"UTEX_CUBE\";\n    PBTextureType[PBTextureType[\"TEX_CUBE_ARRAY\"] = BITFLAG_CUBE | BITFLAG_FLOAT | BITFLAG_ARRAY] = \"TEX_CUBE_ARRAY\";\n    PBTextureType[PBTextureType[\"ITEX_CUBE_ARRAY\"] = BITFLAG_CUBE | BITFLAG_INT | BITFLAG_ARRAY] = \"ITEX_CUBE_ARRAY\";\n    PBTextureType[PBTextureType[\"UTEX_CUBE_ARRAY\"] = BITFLAG_CUBE | BITFLAG_UINT | BITFLAG_ARRAY] = \"UTEX_CUBE_ARRAY\";\n    PBTextureType[PBTextureType[\"TEX_MULTISAMPLED_2D\"] = BITFLAG_2D | BITFLAG_FLOAT | BITFLAG_MULTISAMPLED] = \"TEX_MULTISAMPLED_2D\";\n    PBTextureType[PBTextureType[\"ITEX_MULTISAMPLED_2D\"] = BITFLAG_2D | BITFLAG_INT | BITFLAG_MULTISAMPLED] = \"ITEX_MULTISAMPLED_2D\";\n    PBTextureType[PBTextureType[\"UTEX_MULTISAMPLED_2D\"] = BITFLAG_2D | BITFLAG_UINT | BITFLAG_MULTISAMPLED] = \"UTEX_MULTISAMPLED_2D\";\n    PBTextureType[PBTextureType[\"TEX_STORAGE_1D\"] = BITFLAG_1D | BITFLAG_STORAGE] = \"TEX_STORAGE_1D\";\n    PBTextureType[PBTextureType[\"TEX_STORAGE_2D\"] = BITFLAG_2D | BITFLAG_STORAGE] = \"TEX_STORAGE_2D\";\n    PBTextureType[PBTextureType[\"TEX_STORAGE_2D_ARRAY\"] = BITFLAG_2D | BITFLAG_ARRAY | BITFLAG_STORAGE] = \"TEX_STORAGE_2D_ARRAY\";\n    PBTextureType[PBTextureType[\"TEX_STORAGE_3D\"] = BITFLAG_3D | BITFLAG_STORAGE] = \"TEX_STORAGE_3D\";\n    PBTextureType[PBTextureType[\"TEX_DEPTH_2D\"] = BITFLAG_2D | BITFLAG_DEPTH] = \"TEX_DEPTH_2D\";\n    PBTextureType[PBTextureType[\"TEX_DEPTH_2D_ARRAY\"] = BITFLAG_2D | BITFLAG_ARRAY | BITFLAG_DEPTH] = \"TEX_DEPTH_2D_ARRAY\";\n    PBTextureType[PBTextureType[\"TEX_DEPTH_CUBE\"] = BITFLAG_CUBE | BITFLAG_DEPTH] = \"TEX_DEPTH_CUBE\";\n    PBTextureType[PBTextureType[\"TEX_DEPTH_CUBE_ARRAY\"] = BITFLAG_CUBE | BITFLAG_ARRAY | BITFLAG_DEPTH] = \"TEX_DEPTH_CUBE_ARRAY\";\n    PBTextureType[PBTextureType[\"TEX_DEPTH_MULTISAMPLED_2D\"] = BITFLAG_2D | BITFLAG_MULTISAMPLED | BITFLAG_DEPTH] = \"TEX_DEPTH_MULTISAMPLED_2D\";\n    PBTextureType[PBTextureType[\"TEX_EXTERNAL\"] = BITFLAG_EXTERNAL] = \"TEX_EXTERNAL\";\n    return PBTextureType;\n}({});\nconst textureTypeMapWebGL = {\n    [PBTextureType.TEX_1D]: 'highp sampler2D',\n    [PBTextureType.TEX_2D]: 'highp sampler2D',\n    [PBTextureType.TEX_CUBE]: 'highp samplerCube',\n    [PBTextureType.TEX_EXTERNAL]: 'highp sampler2D'\n};\nconst textureTypeMapWebGL2 = {\n    [PBTextureType.TEX_1D]: 'highp sampler2D',\n    [PBTextureType.TEX_2D]: 'highp sampler2D',\n    [PBTextureType.ITEX_1D]: 'highp isampler2D',\n    [PBTextureType.ITEX_2D]: 'highp isampler2D',\n    [PBTextureType.UTEX_1D]: 'highp usampler2D',\n    [PBTextureType.UTEX_2D]: 'highp usampler2D',\n    [PBTextureType.TEX_2D_ARRAY]: 'highp sampler2DArray',\n    [PBTextureType.ITEX_2D_ARRAY]: 'highp isampler2DArray',\n    [PBTextureType.UTEX_2D_ARRAY]: 'highp usampler2DArray',\n    [PBTextureType.TEX_3D]: 'highp sampler3D',\n    [PBTextureType.ITEX_3D]: 'highp isampler3D',\n    [PBTextureType.UTEX_3D]: 'highp usampler3D',\n    [PBTextureType.TEX_CUBE]: 'highp samplerCube',\n    [PBTextureType.ITEX_CUBE]: 'highp isamplerCube',\n    [PBTextureType.UTEX_CUBE]: 'highp usamplerCube',\n    [PBTextureType.TEX_DEPTH_2D]: 'highp sampler2DShadow',\n    [PBTextureType.TEX_DEPTH_2D_ARRAY]: 'highp sampler2DArrayShadow',\n    [PBTextureType.TEX_DEPTH_CUBE]: 'highp samplerCubeShadow',\n    [PBTextureType.TEX_EXTERNAL]: 'highp sampler2D'\n};\nconst textureTypeMapWGSL = {\n    [PBTextureType.TEX_1D]: 'texture_1d<f32>',\n    [PBTextureType.ITEX_1D]: 'texture_1d<i32>',\n    [PBTextureType.UTEX_1D]: 'texture_1d<u32>',\n    [PBTextureType.TEX_2D]: 'texture_2d<f32>',\n    [PBTextureType.ITEX_2D]: 'texture_2d<i32>',\n    [PBTextureType.UTEX_2D]: 'texture_2d<u32>',\n    [PBTextureType.TEX_2D_ARRAY]: 'texture_2d_array<f32>',\n    [PBTextureType.ITEX_2D_ARRAY]: 'texture_2d_array<i32>',\n    [PBTextureType.UTEX_2D_ARRAY]: 'texture_2d_array<u32>',\n    [PBTextureType.TEX_3D]: 'texture_3d<f32>',\n    [PBTextureType.ITEX_3D]: 'texture_3d<i32>',\n    [PBTextureType.UTEX_3D]: 'texture_3d<u32>',\n    [PBTextureType.TEX_CUBE]: 'texture_cube<f32>',\n    [PBTextureType.ITEX_CUBE]: 'texture_cube<i32>',\n    [PBTextureType.UTEX_CUBE]: 'texture_cube<u32>',\n    [PBTextureType.TEX_CUBE_ARRAY]: 'texture_cube_array<f32>',\n    [PBTextureType.ITEX_CUBE_ARRAY]: 'texture_cube_array<i32>',\n    [PBTextureType.UTEX_CUBE_ARRAY]: 'texture_cube_array<u32>',\n    [PBTextureType.TEX_MULTISAMPLED_2D]: 'texture_multisampled_2d<f32>',\n    [PBTextureType.ITEX_MULTISAMPLED_2D]: 'texture_multisampled_2d<i32>',\n    [PBTextureType.UTEX_MULTISAMPLED_2D]: 'texture_multisampled_2d<u32>',\n    [PBTextureType.TEX_STORAGE_1D]: 'texture_storage_1d',\n    [PBTextureType.TEX_STORAGE_2D]: 'texture_storage_2d',\n    [PBTextureType.TEX_STORAGE_2D_ARRAY]: 'texture_storage_2d_array',\n    [PBTextureType.TEX_STORAGE_3D]: 'texture_storage_3d',\n    [PBTextureType.TEX_DEPTH_2D]: 'texture_depth_2d',\n    [PBTextureType.TEX_DEPTH_2D_ARRAY]: 'texture_depth_2d_array',\n    [PBTextureType.TEX_DEPTH_CUBE]: 'texture_depth_cube',\n    [PBTextureType.TEX_DEPTH_CUBE_ARRAY]: 'texture_depth_cube_array',\n    [PBTextureType.TEX_DEPTH_MULTISAMPLED_2D]: 'texture_depth_multisampled_2d',\n    [PBTextureType.TEX_EXTERNAL]: 'texture_external'\n};\nconst storageTexelFormatMap = {\n    rgba8unorm: 'rgba8unorm',\n    rgba8snorm: 'rgba8snorm',\n    bgra8unorm: 'bgra8unorm',\n    rgba8ui: 'rgba8uint',\n    rgba8i: 'rgba8sint',\n    rgba16ui: 'rgba16uint',\n    rgba16i: 'rgba16sint',\n    rgba16f: 'rgba16float',\n    r32f: 'r32float',\n    r32ui: 'r32uint',\n    r32i: 'r32sint',\n    rg32f: 'rg32float',\n    rg32ui: 'rg32uint',\n    rg32i: 'rg32sint',\n    rgba32f: 'rgba32float',\n    rgba32ui: 'rgba32uint',\n    rgba32i: 'rgba32sint'\n};\n/**\n * Sampler access mode\n * @public\n */ var PBSamplerAccessMode = /*#__PURE__*/ function(PBSamplerAccessMode) {\n    PBSamplerAccessMode[PBSamplerAccessMode[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    PBSamplerAccessMode[PBSamplerAccessMode[\"SAMPLE\"] = 1] = \"SAMPLE\";\n    PBSamplerAccessMode[PBSamplerAccessMode[\"COMPARISON\"] = 2] = \"COMPARISON\";\n    return PBSamplerAccessMode;\n}({});\n/**\n * Shader variable address space\n * @public\n */ var PBAddressSpace = /*#__PURE__*/ function(PBAddressSpace) {\n    PBAddressSpace[\"UNKNOWN\"] = \"unknown\";\n    PBAddressSpace[\"FUNCTION\"] = \"function\";\n    PBAddressSpace[\"PRIVATE\"] = \"private\";\n    PBAddressSpace[\"WORKGROUP\"] = \"workgroup\";\n    PBAddressSpace[\"UNIFORM\"] = \"uniform\";\n    PBAddressSpace[\"STORAGE\"] = \"storage\";\n    return PBAddressSpace;\n}({});\n/**\n * Abstract base class for any type\n * @public\n */ class PBTypeInfo {\n    /** @internal */ cls;\n    /** @internal */ detail;\n    /** @internal */ id;\n    /** @internal */ constructor(cls, detail){\n        this.cls = cls;\n        this.detail = detail;\n        this.id = null;\n    }\n    /** Get unique id for this type */ get typeId() {\n        if (!this.id) {\n            this.id = this.genTypeId();\n        }\n        return this.id;\n    }\n    /** returns true if this is a void type */ isVoidType() {\n        return false;\n    }\n    /** returns true if this is an any type */ isAnyType() {\n        return false;\n    }\n    /** returns true if this is a primitive type */ isPrimitiveType() {\n        return false;\n    }\n    /** Wether this type have atomic members */ haveAtomicMembers() {\n        return false;\n    }\n    /** returns true if this is a struct type */ isStructType() {\n        return false;\n    }\n    /** returns true if this is an array type */ isArrayType() {\n        return false;\n    }\n    /** returns true if this is a pointer type */ isPointerType() {\n        return false;\n    }\n    /** returns true if this is an atomic int type */ isAtomicI32() {\n        return false;\n    }\n    /** returns true if this is an atomic uint type */ isAtomicU32() {\n        return false;\n    }\n    /** returns true if this is a sampler type */ isSamplerType() {\n        return false;\n    }\n    /** returns true if this is a texture type */ isTextureType() {\n        return false;\n    }\n    /** @internal */ isHostSharable() {\n        return false;\n    }\n    /** @internal */ isConstructible() {\n        return false;\n    }\n    /** @internal */ isStorable() {\n        return false;\n    }\n    /** @internal */ getConstructorOverloads(_deviceType) {\n        return [];\n    }\n    /**\n   * Check whether a given type is compatible with this type\n   * @param other - The type to be checked\n   * @returns true if the given type is compatible with this type, othewise false\n   */ isCompatibleType(other) {\n        return other.typeId === this.typeId;\n    }\n}\n/**\n * The void type info\n * @public\n */ class PBVoidTypeInfo extends PBTypeInfo {\n    constructor(){\n        super(9, null);\n    }\n    /** {@inheritDoc PBTypeInfo.isVoidType} */ isVoidType() {\n        return true;\n    }\n    /** @internal */ toTypeName() {\n        return 'void';\n    }\n    /** @internal */ genTypeId() {\n        return 'void';\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n}\n/**\n * The void type info\n * @public\n */ class PBAnyTypeInfo extends PBTypeInfo {\n    constructor(){\n        super(10, null);\n    }\n    /** {@inheritDoc PBTypeInfo.isAnyType} */ isAnyType() {\n        return true;\n    }\n    /** @internal */ toTypeName() {\n        return 'any';\n    }\n    /** @internal */ genTypeId() {\n        return 'any';\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** {@inheritDoc PBTypeInfo.isCompatibleType} */ isCompatibleType(_other) {\n        return true;\n    }\n}\n/**\n * The primitive type info\n * @public\n */ class PBPrimitiveTypeInfo extends PBTypeInfo {\n    /** @internal */ static cachedTypes = {};\n    /** @internal */ static cachedCtorOverloads = {};\n    constructor(type){\n        super(1, {\n            primitiveType: type\n        });\n    }\n    /** Get or create a PBPrimitiveTypeInfo instance for a given prmitive type */ static getCachedTypeInfo(primitiveType) {\n        let typeinfo = this.cachedTypes[primitiveType];\n        if (!typeinfo) {\n            typeinfo = new PBPrimitiveTypeInfo(primitiveType);\n            this.cachedTypes[primitiveType] = typeinfo;\n        }\n        return typeinfo;\n    }\n    /** @internal */ static getCachedOverloads(deviceType, primitiveType) {\n        let deviceOverloads = this.cachedCtorOverloads[deviceType];\n        if (!deviceOverloads) {\n            deviceOverloads = {};\n            this.cachedCtorOverloads[deviceType] = deviceOverloads;\n        }\n        let result = deviceOverloads[primitiveType];\n        if (!result) {\n            const typeinfo = this.getCachedTypeInfo(primitiveType);\n            const name = typeinfo.toTypeName(deviceType);\n            result = [\n                new PBFunctionTypeInfo(name, typeinfo, [])\n            ];\n            if (typeinfo.isScalarType()) {\n                result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                    {\n                        type: this.getCachedTypeInfo(PBPrimitiveType.F32)\n                    }\n                ]));\n                result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                    {\n                        type: this.getCachedTypeInfo(PBPrimitiveType.I32)\n                    }\n                ]));\n                result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                    {\n                        type: this.getCachedTypeInfo(PBPrimitiveType.U32)\n                    }\n                ]));\n                result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                    {\n                        type: this.getCachedTypeInfo(PBPrimitiveType.BOOL)\n                    }\n                ]));\n            } else if (typeinfo.isVectorType()) {\n                const scalarTypeInfo = {\n                    type: this.getCachedTypeInfo(typeinfo.scalarType)\n                };\n                const vec2TypeInfo = {\n                    type: this.getCachedTypeInfo(typeinfo.resizeType(1, 2))\n                };\n                const vec3TypeInfo = {\n                    type: this.getCachedTypeInfo(typeinfo.resizeType(1, 3))\n                };\n                result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                    scalarTypeInfo\n                ]));\n                switch(typeinfo.cols){\n                    case 2:\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            scalarTypeInfo,\n                            scalarTypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeF32Vec2\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeI32Vec2\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeU32Vec2\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeBVec2\n                            }\n                        ]));\n                        break;\n                    case 3:\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            scalarTypeInfo,\n                            scalarTypeInfo,\n                            scalarTypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            scalarTypeInfo,\n                            vec2TypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            vec2TypeInfo,\n                            scalarTypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeF32Vec3\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeI32Vec3\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeU32Vec3\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeBVec3\n                            }\n                        ]));\n                        break;\n                    case 4:\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            scalarTypeInfo,\n                            scalarTypeInfo,\n                            scalarTypeInfo,\n                            scalarTypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            scalarTypeInfo,\n                            scalarTypeInfo,\n                            vec2TypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            scalarTypeInfo,\n                            vec2TypeInfo,\n                            scalarTypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            vec2TypeInfo,\n                            scalarTypeInfo,\n                            scalarTypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            vec2TypeInfo,\n                            vec2TypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            scalarTypeInfo,\n                            vec3TypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            vec3TypeInfo,\n                            scalarTypeInfo\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeF32Vec4\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeI32Vec4\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeU32Vec4\n                            }\n                        ]));\n                        result.push(new PBFunctionTypeInfo(name, typeinfo, [\n                            {\n                                type: typeBVec4\n                            }\n                        ]));\n                }\n            } else if (typeinfo.isMatrixType()) {\n                const colType = this.getCachedTypeInfo(typeinfo.resizeType(1, typeinfo.cols));\n                result.push(new PBFunctionTypeInfo(name, typeinfo, Array.from({\n                    length: typeinfo.rows\n                }).map(()=>({\n                        type: colType\n                    }))));\n                result.push(new PBFunctionTypeInfo(name, typeinfo, Array.from({\n                    length: typeinfo.rows * typeinfo.cols\n                }).map(()=>({\n                        type: typeF32\n                    }))));\n            }\n            deviceOverloads[primitiveType] = result;\n        }\n        return result;\n    }\n    /** Get the primitive type */ get primitiveType() {\n        return this.detail.primitiveType;\n    }\n    /** Whether the type is signed or unsigned integer scalar or vector */ isInteger() {\n        const st = this.primitiveType & SCALAR_TYPE_BITMASK;\n        return st === I8_BITMASK || st === U8_BITMASK || st === I16_BITMASK || st === U16_BITMASK || st === I32_BITMASK || st === U32_BITMASK;\n    }\n    /** Get the scalar type */ get scalarType() {\n        return this.resizeType(1, 1);\n    }\n    /** Get number of rows */ get rows() {\n        return this.primitiveType >> ROWS_BITSHIFT & ROWS_BITMASK;\n    }\n    /** Get number of columns */ get cols() {\n        return this.primitiveType >> COLS_BITSHIFT & COLS_BITMASK;\n    }\n    /** Get if this is a normalized primitive type */ get normalized() {\n        return !!(this.primitiveType >> NORM_BITSHIFT & NORM_BITMASK);\n    }\n    /** @internal */ getLayoutAlignment(layout) {\n        return layout === 'packed' ? 1 : this.isScalarType() ? 4 : 1 << Math.min(4, this.cols + 1);\n    }\n    /** @internal */ getLayoutSize() {\n        return this.getSize();\n    }\n    /** @internal */ getSize() {\n        let scalarSize;\n        switch(this.scalarType){\n            case PBPrimitiveType.BOOL:\n            case PBPrimitiveType.I32:\n            case PBPrimitiveType.I32_NORM:\n            case PBPrimitiveType.U32:\n            case PBPrimitiveType.U32_NORM:\n            case PBPrimitiveType.F32:\n                scalarSize = 4;\n                break;\n            case PBPrimitiveType.F16:\n            case PBPrimitiveType.I16:\n            case PBPrimitiveType.I16_NORM:\n            case PBPrimitiveType.U16:\n            case PBPrimitiveType.U16_NORM:\n                scalarSize = 2;\n                break;\n            default:\n                scalarSize = 1;\n                break;\n        }\n        return scalarSize * this.cols * this.rows;\n    }\n    /**\n   * Creates a new primitive type info by changing row and column of this type\n   * @param rows - The new value of row\n   * @param cols - The new value of column\n   * @returns The new primitive type\n   */ resizeType(rows, cols) {\n        return makePrimitiveType(this.primitiveType & SCALAR_TYPE_BITMASK, rows, cols, this.normalized ? 1 : 0);\n    }\n    /** Returns true if this is a scalar type */ isScalarType() {\n        return this.rows === 1 && this.cols === 1;\n    }\n    /** Returns true if this is a vector type */ isVectorType() {\n        return this.rows === 1 && this.cols > 1;\n    }\n    /** Returns true if this is a matrix type */ isMatrixType() {\n        return this.rows > 1 && this.cols > 1;\n    }\n    /** {@inheritDoc PBTypeInfo.isPrimitiveType} */ isPrimitiveType() {\n        return true;\n    }\n    /** @internal */ isHostSharable() {\n        return this.scalarType !== PBPrimitiveType.BOOL;\n    }\n    /** @internal */ isConstructible() {\n        return true;\n    }\n    /** @internal */ isStorable() {\n        return true;\n    }\n    /** @internal */ getConstructorOverloads(deviceType) {\n        return PBPrimitiveTypeInfo.getCachedOverloads(deviceType, this.primitiveType);\n    }\n    /** @internal */ toTypeName(deviceType, varName) {\n        if (deviceType === 'webgpu') {\n            const typename = primitiveTypeMapWGSL[this.primitiveType];\n            return varName ? `${varName}: ${typename}` : typename;\n        } else {\n            const typename = primitiveTypeMapWebGL[this.primitiveType];\n            return varName ? `${typename} ${varName}` : typename;\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** @internal */ genTypeId() {\n        return `PRIM:${this.primitiveType}`;\n    }\n}\n/**\n * The struct type info\n * @public\n */ class PBStructTypeInfo extends PBTypeInfo {\n    constructor(name, layout, members){\n        super(1, {\n            layout: layout || 'default',\n            structName: name,\n            structMembers: members.map((val)=>{\n                const defaultAlignment = getAlignment(val.type);\n                const defaultSize = getSize(val.type);\n                return {\n                    name: val.name,\n                    type: val.type,\n                    alignment: defaultAlignment,\n                    size: defaultSize,\n                    defaultAlignment: defaultAlignment,\n                    defaultSize: defaultSize\n                };\n            })\n        });\n        if (this.layout === 'std140') {\n            this.calcAlignmentAndSizeSTD140();\n        } else if (this.layout === 'std430') {\n            this.calcAlignmentAndSizePacked();\n        }\n    }\n    /** Get the layout type */ get layout() {\n        return this.detail.layout;\n    }\n    /** Get name of the struct type */ get structName() {\n        return this.detail.structName;\n    }\n    set structName(val) {\n        this.detail.structName = val;\n    }\n    /** Get member types of the struct type */ get structMembers() {\n        return this.detail.structMembers;\n    }\n    /** Whether this struct has atomic members */ haveAtomicMembers() {\n        for (const member of this.structMembers){\n            if (member.type.isStructType() && member.type.haveAtomicMembers()) {\n                return true;\n            } else if (member.type.isArrayType() && member.type.haveAtomicMembers()) {\n                return true;\n            } else {\n                return member.type.isAtomicI32() || member.type.isAtomicU32();\n            }\n        }\n    }\n    /**\n   * Creates a new struct type by extending this type\n   * @param name - Name of the new struct type\n   * @param members - additional struct members\n   * @returns The new struct type\n   */ extends(name, members) {\n        const oldMembers = this.structMembers.map((member)=>({\n                name: member.name,\n                type: member.type\n            }));\n        return new PBStructTypeInfo(name, this.layout, [\n            ...oldMembers,\n            ...members\n        ]);\n    }\n    /** {@inheritDoc PBTypeInfo.isStructType} */ isStructType() {\n        return true;\n    }\n    /** @internal */ isHostSharable() {\n        return this.detail.structMembers.every((val)=>val.type.isHostSharable());\n    }\n    /** @internal */ isConstructible() {\n        return this.detail.structMembers.every((val)=>val.type.isConstructible());\n    }\n    /** @internal */ isStorable() {\n        return true;\n    }\n    /** @internal */ getConstructorOverloads() {\n        const result = [\n            new PBFunctionTypeInfo(this.structName, this, [])\n        ];\n        if (this.isConstructible()) {\n            result.push(new PBFunctionTypeInfo(this.structName, this, this.structMembers.map((val)=>({\n                    type: val.type\n                }))));\n        }\n        return result;\n    }\n    /** @internal */ toTypeName(deviceType, varName) {\n        if (deviceType === 'webgpu') {\n            return varName ? `${varName}: ${this.structName}` : this.structName;\n        } else {\n            return varName ? `${this.structName} ${varName}` : this.structName;\n        }\n    }\n    /** @internal */ getLayoutAlignment(layout) {\n        if (layout === 'packed') {\n            return 1;\n        }\n        let alignment = 0;\n        for (const member of this.structMembers){\n            alignment = Math.max(alignment, member.type.getLayoutAlignment(layout));\n        }\n        if (layout === 'std140') {\n            alignment = align(alignment, 16);\n        }\n        return alignment;\n    }\n    /** @internal */ getLayoutSize(layout) {\n        let size = 0;\n        let structAlignment = 0;\n        for (const member of this.structMembers){\n            const memberAlignment = member.type.getLayoutAlignment(layout);\n            size = align(size, memberAlignment);\n            size += member.type.getLayoutSize(layout);\n            structAlignment = Math.max(structAlignment, memberAlignment);\n        }\n        return align(size, structAlignment);\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(offset, layout) {\n        const bufferLayout = {\n            byteSize: 0,\n            entries: []\n        };\n        const start = offset;\n        for (const member of this.structMembers){\n            offset = align(offset, member.type.getLayoutAlignment(layout));\n            const size = member.type.getLayoutSize(layout);\n            bufferLayout.entries.push({\n                name: member.name,\n                offset: offset,\n                byteSize: size,\n                type: typeToTypedArray(member.type),\n                subLayout: member.type.isStructType() ? member.type.toBufferLayout(offset, layout) : null,\n                arraySize: member.type.isArrayType() ? member.type.dimension : 0\n            });\n            offset += size;\n        }\n        bufferLayout.byteSize = layout === 'std140' ? align(offset - start, 16) : offset - start;\n        return bufferLayout;\n    }\n    /** @internal */ clone(newName) {\n        return new PBStructTypeInfo(newName || this.structName, this.layout, this.structMembers);\n    }\n    /** @internal */ reset(name, layout, members) {\n        this.detail = {\n            layout: layout || 'default',\n            structName: name,\n            structMembers: members.map((val)=>{\n                const defaultAlignment = getAlignment(val.type);\n                const defaultSize = getSize(val.type);\n                return {\n                    name: val.name,\n                    type: val.type,\n                    alignment: defaultAlignment,\n                    size: defaultSize,\n                    defaultAlignment: defaultAlignment,\n                    defaultSize: defaultSize\n                };\n            })\n        };\n        if (this.layout === 'std140') {\n            this.calcAlignmentAndSizeSTD140();\n        } else if (this.layout === 'std430') {\n            this.calcAlignmentAndSizePacked();\n        }\n        this.id = null;\n    }\n    /** @internal */ genTypeId() {\n        return `STRUCT:${this.structName}:${this.layout}:${this.structMembers.map((val)=>`${val.name}(${val.type.typeId})`).join(':')}`;\n    }\n    /** @internal */ calcAlignmentAndSizeSTD140() {\n        for (const member of this.structMembers){\n            if (member.type.isPrimitiveType()) {\n                if (member.type.isMatrixType() && member.type.cols === 2) {\n                    throw new Error(`matrix${member.type.rows}x${member.type.cols} can not be used in std140 layout`);\n                }\n            } else if (member.type.isArrayType() && (member.type.elementType.isAnyType() || getAlignment(member.type.elementType) !== 16)) {\n                throw new Error('array element must be 16 bytes aligned in std140 layout');\n            } else if (member.type.isStructType()) {\n                member.alignment = 16;\n                member.size = align(member.defaultSize, 16);\n            }\n        }\n    }\n    /** @internal */ calcAlignmentAndSizePacked() {\n        for (const member of this.structMembers){\n            member.alignment = getAlignmentPacked();\n            member.size = getSizePacked(member.type);\n        }\n    }\n}\n/**\n * The array type info\n * @public\n */ class PBArrayTypeInfo extends PBTypeInfo {\n    constructor(elementType, dimension){\n        super(2, {\n            elementType: elementType,\n            dimension: Number(dimension) || 0\n        });\n    }\n    /** Get the element type */ get elementType() {\n        return this.detail.elementType;\n    }\n    /** Get dimension of the array type */ get dimension() {\n        return this.detail.dimension;\n    }\n    /** Wether array have atomic members */ haveAtomicMembers() {\n        if (this.elementType.isStructType() || this.elementType.isArrayType()) {\n            return this.elementType.haveAtomicMembers();\n        } else {\n            return this.elementType.isAtomicI32() || this.elementType.isAtomicU32();\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.isArrayType} */ isArrayType() {\n        return true;\n    }\n    /** @internal */ isHostSharable() {\n        return this.detail.elementType.isHostSharable();\n    }\n    /** @internal */ isConstructible() {\n        return this.dimension && this.detail.elementType.isConstructible();\n    }\n    /** @internal */ isStorable() {\n        return true;\n    }\n    /** @internal */ getConstructorOverloads(deviceType) {\n        const name = this.toTypeName(deviceType);\n        const result = [\n            new PBFunctionTypeInfo(name, this, [])\n        ];\n        if (deviceType !== 'webgl' && this.isConstructible()) {\n            result.push(new PBFunctionTypeInfo(name, this, Array.from({\n                length: this.dimension\n            }).map(()=>({\n                    type: this.elementType\n                }))));\n        }\n        return result;\n    }\n    /** @internal */ toTypeName(deviceType, varName) {\n        if (deviceType === 'webgpu') {\n            const elementTypeName = this.elementType.toTypeName(deviceType);\n            const typename = `array<${elementTypeName}${this.dimension ? ', ' + this.dimension : ''}>`;\n            return varName ? `${varName}: ${typename}` : typename;\n        } else {\n            ASSERT(!!this.dimension, 'runtime-sized array not supported for webgl');\n            ASSERT(!this.elementType.isArrayType(), 'multi-dimensional arrays not supported for webgl');\n            const elementTypeName = this.elementType.toTypeName(deviceType, varName);\n            return `${elementTypeName}[${this.dimension}]`;\n        }\n    }\n    /** @internal */ getLayoutAlignment(layout) {\n        return layout === 'packed' || this.elementType.isAnyType() ? 1 : layout === 'std430' ? this.elementType.getLayoutAlignment(layout) : align(this.elementType.getLayoutAlignment(layout), 16);\n    }\n    /** @internal */ getLayoutSize(layout) {\n        const elementAlignment = this.elementType.isAnyType() ? 1 : this.elementType.getLayoutAlignment(layout);\n        if (layout === 'std140' && !!(elementAlignment & 15)) {\n            // array element stride of std140 layout must be multiple of 16\n            throw new Error('Error: array element stride of std140 must be multiple of 16');\n        }\n        return this.elementType.isAnyType() ? 0 : this.dimension * align(this.elementType.getLayoutSize(layout), elementAlignment);\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    isCompatibleType(other) {\n        if (!other.isArrayType()) {\n            return false;\n        }\n        if (this.dimension !== 0 && other.dimension !== this.dimension) {\n            return false;\n        }\n        return this.elementType.isCompatibleType(other.elementType);\n    }\n    /** @internal */ genTypeId() {\n        return `ARRAY:(${this.elementType.typeId})[${this.dimension}]`;\n    }\n}\n/**\n * The pointer type info\n * @public\n */ class PBPointerTypeInfo extends PBTypeInfo {\n    /** @internal */ writable;\n    constructor(pointerType, addressSpace){\n        super(3, {\n            pointerType,\n            addressSpace\n        });\n        ASSERT(pointerType.isStorable(), 'the pointee type must be storable');\n        this.writable = false;\n    }\n    /** Get type of the pointer */ get pointerType() {\n        return this.detail.pointerType;\n    }\n    /** Get address space of the pointer */ get addressSpace() {\n        return this.detail.addressSpace;\n    }\n    set addressSpace(val) {\n        if (this.detail.addressSpace !== val) {\n            this.detail.addressSpace = val;\n            this.id = null;\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.haveAtomicMembers} */ haveAtomicMembers() {\n        return this.pointerType.haveAtomicMembers();\n    }\n    /** {@inheritDoc PBTypeInfo.isPointerType} */ isPointerType() {\n        return true;\n    }\n    /** @internal */ toTypeName(device, varName) {\n        if (device === 'webgpu') {\n            const addressSpace = this.addressSpace === \"unknown\" ? \"function\" : this.addressSpace;\n            /*\n      const mode = addressSpace === PBAddressSpace.UNIFORM || (addressSpace === PBAddressSpace.STORAGE && !this.writable) ? 'read' : 'read_write'\n      const typename = `ptr<${addressSpace}, ${this.pointerType.toTypeName(device)}, ${mode}>`;\n      */ /* WGSL spec:\n        When writing a variable declaration or a pointer type in WGSL source:\n        For the storage address space, the access mode is optional, and defaults to read.\n        For other address spaces, the access mode must not be written.\n      */ const mode = addressSpace === \"storage\" && this.writable ? ', read_write' : '';\n            const typename = `ptr<${addressSpace}, ${this.pointerType.toTypeName(device)} ${mode}>`;\n            return varName ? `${varName}: ${typename}` : typename;\n        } else {\n            throw new Error('pointer type not supported for webgl');\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** @internal */ genTypeId() {\n        return `PTR:(${this.pointerType.typeId})`;\n    }\n}\n/**\n * The atomic int type info\n * @public\n */ class PBAtomicI32TypeInfo extends PBTypeInfo {\n    constructor(){\n        super(4, null);\n    }\n    /** {@inheritDoc PBTypeInfo.isPointerType} */ haveAtomicMembers() {\n        return true;\n    }\n    /** @internal */ isAtomicI32() {\n        return true;\n    }\n    /** @internal */ isHostSharable() {\n        return true;\n    }\n    /** @internal */ isStorable() {\n        return true;\n    }\n    /** @internal */ toTypeName(deviceType, varName) {\n        if (deviceType === 'webgpu') {\n            const typename = 'atomic<i32>';\n            return varName ? `${varName}: ${typename}` : typename;\n        } else {\n            throw new Error('atomic type not supported for webgl');\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** @internal */ getLayoutAlignment(_layout) {\n        return 4;\n    }\n    /** @internal */ getLayoutSize() {\n        return this.getSize();\n    }\n    /** @internal */ getSize() {\n        return 4;\n    }\n    /** @internal */ genTypeId() {\n        return `ATOMICI32`;\n    }\n}\n/**\n * The atomic int type info\n * @public\n */ class PBAtomicU32TypeInfo extends PBTypeInfo {\n    constructor(){\n        super(5, null);\n    }\n    /** {@inheritDoc PBTypeInfo.isPointerType} */ haveAtomicMembers() {\n        return true;\n    }\n    /** @internal */ isAtomicU32() {\n        return true;\n    }\n    /** @internal */ isHostSharable() {\n        return true;\n    }\n    /** @internal */ isStorable() {\n        return true;\n    }\n    /** @internal */ toTypeName(deviceType, varName) {\n        if (deviceType === 'webgpu') {\n            const typename = 'atomic<u32>';\n            return varName ? `${varName}: ${typename}` : typename;\n        } else {\n            throw new Error('atomic type not supported for webgl');\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** @internal */ getLayoutAlignment(_layout) {\n        return 4;\n    }\n    /** @internal */ getLayoutSize() {\n        return this.getSize();\n    }\n    /** @internal */ getSize() {\n        return 4;\n    }\n    /** @internal */ genTypeId() {\n        return `ATOMICU32`;\n    }\n}\n/**\n * The sampler type info\n * @public\n */ class PBSamplerTypeInfo extends PBTypeInfo {\n    constructor(accessMode){\n        super(7, {\n            accessMode: accessMode\n        });\n    }\n    /** Get the access mode */ get accessMode() {\n        return this.detail.accessMode;\n    }\n    /** @internal */ isSamplerType() {\n        return true;\n    }\n    /** @internal */ isStorable() {\n        return true;\n    }\n    /** @internal */ toTypeName(deviceType, varName) {\n        if (deviceType === 'webgpu') {\n            const typename = this.accessMode === 1 ? 'sampler' : 'sampler_comparison';\n            return varName ? `${varName}: ${typename}` : typename;\n        } else {\n            throw new Error('sampler type not supported for webgl');\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** @internal */ genTypeId() {\n        return `SAMPLER:${this.accessMode}`;\n    }\n}\n/**\n * The texture type info\n * @public\n */ class PBTextureTypeInfo extends PBTypeInfo {\n    constructor(textureType, texelFormat, readable, writable){\n        super(6, {\n            textureType: textureType,\n            readable,\n            writable,\n            storageTexelFormat: texelFormat || null\n        });\n        ASSERT(!!textureTypeMapWGSL[textureType], 'unsupported texture type');\n        ASSERT(!(textureType & BITFLAG_STORAGE) || !!storageTexelFormatMap[texelFormat], 'invalid texel format for storage texture');\n    }\n    /** Get the texture type */ get textureType() {\n        return this.detail.textureType;\n    }\n    /** Get texture format if this is a storage texture */ get storageTexelFormat() {\n        return this.detail.storageTexelFormat;\n    }\n    /** Returns true if this is a readable storage texture type */ get readable() {\n        return this.detail.readable;\n    }\n    set readable(val) {\n        this.detail.readable = !!val;\n    }\n    /** Returns true if this is a writable storage texture type */ get writable() {\n        return this.detail.writable;\n    }\n    set writable(val) {\n        this.detail.writable = !!val;\n    }\n    /** @internal */ isStorable() {\n        return true;\n    }\n    /** @internal */ is1DTexture() {\n        return !!(this.detail.textureType & BITFLAG_1D);\n    }\n    /** Returns true if this is a 2D texture type */ is2DTexture() {\n        return !!(this.detail.textureType & BITFLAG_2D);\n    }\n    /** Returns true if this is a 3D texture type */ is3DTexture() {\n        return !!(this.detail.textureType & BITFLAG_3D);\n    }\n    /** Returns true if this is a cube texture type */ isCubeTexture() {\n        return !!(this.detail.textureType & BITFLAG_CUBE);\n    }\n    /** Returns true if this is an array texture type */ isArrayTexture() {\n        return !!(this.detail.textureType & BITFLAG_ARRAY);\n    }\n    /** Returns true if this is a storage texture type */ isStorageTexture() {\n        return !!(this.detail.textureType & BITFLAG_STORAGE);\n    }\n    /** Return s true if this is a depth texture type */ isDepthTexture() {\n        return !!(this.detail.textureType & BITFLAG_DEPTH);\n    }\n    /** Returns true if this is a multisampled texture type */ isMultisampledTexture() {\n        return !!(this.detail.textureType & BITFLAG_MULTISAMPLED);\n    }\n    /** Returns true if this is an external texture type */ isExternalTexture() {\n        return !!(this.detail.textureType & BITFLAG_EXTERNAL);\n    }\n    /** Returns true if the texture format is of type integer  */ isIntTexture() {\n        return !!(this.detail.textureType & BITFLAG_INT);\n    }\n    /** Returns true if the texture format is of type unsigned integer  */ isUIntTexture() {\n        return !!(this.detail.textureType & BITFLAG_UINT);\n    }\n    /** @internal */ isTextureType() {\n        return true;\n    }\n    /** @internal */ toTypeName(deviceType, varName) {\n        if (deviceType === 'webgpu') {\n            let typename = textureTypeMapWGSL[this.textureType];\n            if (this.isStorageTexture()) {\n                const storageTexelFormat = storageTexelFormatMap[this.storageTexelFormat];\n                // storage textures currently only support 'write' access control\n                const accessMode = this.writable ? this.readable ? 'read_write' : 'write' : 'read'; // this.readable ? (this.writable ? 'read_write' : 'read') : 'write';\n                typename = `${typename}<${storageTexelFormat}, ${accessMode}>`;\n            }\n            return varName ? `${varName}: ${typename}` : typename;\n        } else {\n            const typename = (deviceType === 'webgl' ? textureTypeMapWebGL : textureTypeMapWebGL2)[this.textureType];\n            ASSERT(!!typename, 'unsupported texture type');\n            return varName ? `${typename} ${varName}` : typename;\n        }\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** @internal */ genTypeId() {\n        return `TEXTURE:${this.textureType}:${this.textureType & BITFLAG_STORAGE ? this.storageTexelFormat : ''}`;\n    }\n}\n/**\n * The function type info\n * @public\n */ class PBFunctionTypeInfo extends PBTypeInfo {\n    constructor(name, returnType, argTypes){\n        super(8, {\n            name,\n            returnType,\n            argTypes\n        });\n    }\n    /** Get name of the function */ get name() {\n        return this.detail.name;\n    }\n    /** Get return type of the function */ get returnType() {\n        return this.detail.returnType;\n    }\n    /** Get all the argument types for this function */ get argTypes() {\n        return this.detail.argTypes;\n    }\n    /** Get hash for parameter types */ get argHash() {\n        return this.argTypes.map((val)=>val.type.typeId).join(',');\n    }\n    /** @internal */ genTypeId() {\n        return `fn(${this.argHash}):${this.returnType.typeId}`;\n    }\n    /** {@inheritDoc PBTypeInfo.toBufferLayout} */ toBufferLayout(_offset) {\n        return null;\n    }\n    /** @internal */ toTypeName() {\n        throw new Error('not supported');\n    }\n}\n/** @internal */ const typeF16 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F16);\n/** @internal */ const typeF16Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F16VEC2);\n/** @internal */ const typeF16Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F16VEC3);\n/** @internal */ const typeF16Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F16VEC4);\n/** @internal */ const typeF32 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32);\n/** @internal */ const typeF32Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32VEC2);\n/** @internal */ const typeF32Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32VEC3);\n/** @internal */ const typeF32Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32VEC4);\n/** @internal */ const typeI8 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8);\n/** @internal */ const typeI8Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC2);\n/** @internal */ const typeI8Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC3);\n/** @internal */ const typeI8Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC4);\n/** @internal */ const typeI8_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8_NORM);\n/** @internal */ const typeI8Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC2_NORM);\n/** @internal */ const typeI8Vec3_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC3_NORM);\n/** @internal */ const typeI8Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC4_NORM);\n/** @internal */ const typeI16 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16);\n/** @internal */ const typeI16Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC2);\n/** @internal */ const typeI16Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC3);\n/** @internal */ const typeI16Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC4);\n/** @internal */ const typeI16_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16_NORM);\n/** @internal */ const typeI16Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC2_NORM);\n/** @internal */ const typeI16Vec3_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC3_NORM);\n/** @internal */ const typeI16Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC4_NORM);\n/** @internal */ const typeAtomicI32 = new PBAtomicI32TypeInfo();\n/** @internal */ const typeAtomicU32 = new PBAtomicU32TypeInfo();\n/** @internal */ const typeI32 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32);\n/** @internal */ const typeI32Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC2);\n/** @internal */ const typeI32Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC3);\n/** @internal */ const typeI32Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC4);\n/** @internal */ const typeI32_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32);\n/** @internal */ const typeI32Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC2_NORM);\n/** @internal */ const typeI32Vec3_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC3_NORM);\n/** @internal */ const typeI32Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC4_NORM);\n/** @internal */ const typeU8 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8);\n/** @internal */ const typeU8Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC2);\n/** @internal */ const typeU8Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC3);\n/** @internal */ const typeU8Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC4);\n/** @internal */ const typeU8_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8_NORM);\n/** @internal */ const typeU8Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC2_NORM);\n/** @internal */ const typeU8Vec3_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC3_NORM);\n/** @internal */ const typeU8Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC4_NORM);\n/** @internal */ const typeU16 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16);\n/** @internal */ const typeU16Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC2);\n/** @internal */ const typeU16Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC3);\n/** @internal */ const typeU16Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC4);\n/** @internal */ const typeU16_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16_NORM);\n/** @internal */ const typeU16Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC2_NORM);\n/** @internal */ const typeU16Vec3_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC3_NORM);\n/** @internal */ const typeU16Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC4_NORM);\n/** @internal */ const typeU32 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32);\n/** @internal */ const typeU32Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC2);\n/** @internal */ const typeU32Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC3);\n/** @internal */ const typeU32Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC4);\n/** @internal */ const typeU32_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32_NORM);\n/** @internal */ const typeU32Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC2_NORM);\n/** @internal */ const typeU32Vec3_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC3_NORM);\n/** @internal */ const typeU32Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC4_NORM);\n/** @internal */ const typeBool = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.BOOL);\n/** @internal */ const typeBVec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.BVEC2);\n/** @internal */ const typeBVec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.BVEC3);\n/** @internal */ const typeBVec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.BVEC4);\n/** @internal */ const typeMat2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT2);\n/** @internal */ const typeMat2x3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT2x3);\n/** @internal */ const typeMat2x4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT2x4);\n/** @internal */ const typeMat3x2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT3x2);\n/** @internal */ const typeMat3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT3);\n/** @internal */ const typeMat3x4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT3x4);\n/** @internal */ const typeMat4x2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT4x2);\n/** @internal */ const typeMat4x3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT4x3);\n/** @internal */ const typeMat4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.MAT4);\n/** @internal */ const typeTex1D = new PBTextureTypeInfo(PBTextureType.TEX_1D);\n/** @internal */ const typeITex1D = new PBTextureTypeInfo(PBTextureType.ITEX_1D);\n/** @internal */ const typeUTex1D = new PBTextureTypeInfo(PBTextureType.UTEX_1D);\n/** @internal */ const typeTex2D = new PBTextureTypeInfo(PBTextureType.TEX_2D);\n/** @internal */ const typeITex2D = new PBTextureTypeInfo(PBTextureType.ITEX_2D);\n/** @internal */ const typeUTex2D = new PBTextureTypeInfo(PBTextureType.UTEX_2D);\n/** @internal */ const typeTex2DArray = new PBTextureTypeInfo(PBTextureType.TEX_2D_ARRAY);\n/** @internal */ const typeITex2DArray = new PBTextureTypeInfo(PBTextureType.ITEX_2D_ARRAY);\n/** @internal */ const typeUTex2DArray = new PBTextureTypeInfo(PBTextureType.UTEX_2D_ARRAY);\n/** @internal */ const typeTex3D = new PBTextureTypeInfo(PBTextureType.TEX_3D);\n/** @internal */ const typeITex3D = new PBTextureTypeInfo(PBTextureType.ITEX_3D);\n/** @internal */ const typeUTex3D = new PBTextureTypeInfo(PBTextureType.UTEX_3D);\n/** @internal */ const typeTexCube = new PBTextureTypeInfo(PBTextureType.TEX_CUBE);\n/** @internal */ const typeITexCube = new PBTextureTypeInfo(PBTextureType.ITEX_CUBE);\n/** @internal */ const typeUTexCube = new PBTextureTypeInfo(PBTextureType.UTEX_CUBE);\n/** @internal */ const typeTexExternal = new PBTextureTypeInfo(PBTextureType.TEX_EXTERNAL);\n/** @internal */ const typeTexCubeArray = new PBTextureTypeInfo(PBTextureType.TEX_CUBE_ARRAY);\n/** @internal */ const typeITexCubeArray = new PBTextureTypeInfo(PBTextureType.ITEX_CUBE_ARRAY);\n/** @internal */ const typeUTexCubeArray = new PBTextureTypeInfo(PBTextureType.UTEX_CUBE_ARRAY);\n/** @internal */ const typeTexMultisampled2D = new PBTextureTypeInfo(PBTextureType.TEX_MULTISAMPLED_2D);\n/** @internal */ const typeITexMultisampled2D = new PBTextureTypeInfo(PBTextureType.ITEX_MULTISAMPLED_2D);\n/** @internal */ const typeUTexMultisampled2D = new PBTextureTypeInfo(PBTextureType.UTEX_MULTISAMPLED_2D);\n/** @internal */ const typeTexStorage1D_rgba8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba8unorm');\n/** @internal */ const typeTexStorage1D_rgba8snorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba8snorm');\n/** @internal */ const typeTexStorage1D_bgra8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba8unorm');\n/** @internal */ const typeTexStorage1D_rgba8uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba8ui');\n/** @internal */ const typeTexStorage1D_rgba8sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba8i');\n/** @internal */ const typeTexStorage1D_rgba16uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba16ui');\n/** @internal */ const typeTexStorage1D_rgba16sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba16i');\n/** @internal */ const typeTexStorage1D_rgba16float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba16f');\n/** @internal */ const typeTexStorage1D_rgba32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba32ui');\n/** @internal */ const typeTexStorage1D_rgba32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba32i');\n/** @internal */ const typeTexStorage1D_rgba32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rgba32f');\n/** @internal */ const typeTexStorage1D_rg32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rg32ui');\n/** @internal */ const typeTexStorage1D_rg32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rg32i');\n/** @internal */ const typeTexStorage1D_rg32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'rg32f');\n/** @internal */ const typeTexStorage1D_r32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'r32ui');\n/** @internal */ const typeTexStorage1D_r32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'r32i');\n/** @internal */ const typeTexStorage1D_r32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_1D, 'r32f');\n/** @internal */ const typeTexStorage2D_rgba8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba8unorm');\n/** @internal */ const typeTexStorage2D_rgba8snorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba8snorm');\n/** @internal */ const typeTexStorage2D_bgra8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'bgra8unorm');\n/** @internal */ const typeTexStorage2D_rgba8uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba8ui');\n/** @internal */ const typeTexStorage2D_rgba8sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba8i');\n/** @internal */ const typeTexStorage2D_rgba16uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba16ui');\n/** @internal */ const typeTexStorage2D_rgba16sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba16i');\n/** @internal */ const typeTexStorage2D_rgba16float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba16f');\n/** @internal */ const typeTexStorage2D_rgba32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba32ui');\n/** @internal */ const typeTexStorage2D_rgba32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba32i');\n/** @internal */ const typeTexStorage2D_rgba32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rgba32f');\n/** @internal */ const typeTexStorage2D_rg32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rg32ui');\n/** @internal */ const typeTexStorage2D_rg32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rg32i');\n/** @internal */ const typeTexStorage2D_rg32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'rg32f');\n/** @internal */ const typeTexStorage2D_r32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'r32ui');\n/** @internal */ const typeTexStorage2D_r32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'r32i');\n/** @internal */ const typeTexStorage2D_r32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D, 'r32f');\n/** @internal */ const typeTexStorage2DArray_rgba8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba8unorm');\n/** @internal */ const typeTexStorage2DArray_rgba8snorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba8snorm');\n/** @internal */ const typeTexStorage2DArray_bgra8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'bgra8unorm');\n/** @internal */ const typeTexStorage2DArray_rgba8uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba8ui');\n/** @internal */ const typeTexStorage2DArray_rgba8sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba8i');\n/** @internal */ const typeTexStorage2DArray_rgba16uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba16ui');\n/** @internal */ const typeTexStorage2DArray_rgba16sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba16i');\n/** @internal */ const typeTexStorage2DArray_rgba16float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba16f');\n/** @internal */ const typeTexStorage2DArray_rgba32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba32ui');\n/** @internal */ const typeTexStorage2DArray_rgba32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba32i');\n/** @internal */ const typeTexStorage2DArray_rgba32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rgba32f');\n/** @internal */ const typeTexStorage2DArray_rg32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rg32ui');\n/** @internal */ const typeTexStorage2DArray_rg32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rg32i');\n/** @internal */ const typeTexStorage2DArray_rg32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'rg32f');\n/** @internal */ const typeTexStorage2DArray_r32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'r32ui');\n/** @internal */ const typeTexStorage2DArray_r32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'r32i');\n/** @internal */ const typeTexStorage2DArray_r32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_2D_ARRAY, 'r32f');\n/** @internal */ const typeTexStorage3D_rgba8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba8unorm');\n/** @internal */ const typeTexStorage3D_rgba8snorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba8snorm');\n/** @internal */ const typeTexStorage3D_bgra8unorm = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'bgra8unorm');\n/** @internal */ const typeTexStorage3D_rgba8uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba8ui');\n/** @internal */ const typeTexStorage3D_rgba8sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba8i');\n/** @internal */ const typeTexStorage3D_rgba16uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba16ui');\n/** @internal */ const typeTexStorage3D_rgba16sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba16i');\n/** @internal */ const typeTexStorage3D_rgba16float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba16f');\n/** @internal */ const typeTexStorage3D_rgba32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba32ui');\n/** @internal */ const typeTexStorage3D_rgba32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba32i');\n/** @internal */ const typeTexStorage3D_rgba32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rgba32f');\n/** @internal */ const typeTexStorage3D_rg32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rg32ui');\n/** @internal */ const typeTexStorage3D_rg32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rg32i');\n/** @internal */ const typeTexStorage3D_rg32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'rg32f');\n/** @internal */ const typeTexStorage3D_r32uint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'r32ui');\n/** @internal */ const typeTexStorage3D_r32sint = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'r32i');\n/** @internal */ const typeTexStorage3D_r32float = new PBTextureTypeInfo(PBTextureType.TEX_STORAGE_3D, 'r32f');\n/** @internal */ const typeTexDepth2D = new PBTextureTypeInfo(PBTextureType.TEX_DEPTH_2D);\n/** @internal */ const typeTexDepth2DArray = new PBTextureTypeInfo(PBTextureType.TEX_DEPTH_2D_ARRAY);\n/** @internal */ const typeTexDepthCube = new PBTextureTypeInfo(PBTextureType.TEX_DEPTH_CUBE);\n/** @internal */ const typeTexDepthCubeArray = new PBTextureTypeInfo(PBTextureType.TEX_DEPTH_CUBE_ARRAY);\n/** @internal */ const typeTexDepthMultisampled2D = new PBTextureTypeInfo(PBTextureType.TEX_DEPTH_MULTISAMPLED_2D);\n/** @internal */ const typeSampler = new PBSamplerTypeInfo(1);\n/** @internal */ const typeSamplerComparison = new PBSamplerTypeInfo(2);\n/** @internal */ const typeVoid = new PBVoidTypeInfo();\n/** @internal */ const typeAny = new PBAnyTypeInfo();\n/** @internal */ const typeFrexpResult = new PBStructTypeInfo('FrexpResult', 'default', [\n    {\n        name: 'sig',\n        type: typeF32\n    },\n    {\n        name: 'exp',\n        type: typeI32\n    }\n]);\n/** @internal */ const typeFrexpResultVec2 = new PBStructTypeInfo('FrexpResultVec2', 'default', [\n    {\n        name: 'sig',\n        type: typeF32Vec2\n    },\n    {\n        name: 'exp',\n        type: typeI32Vec2\n    }\n]);\n/** @internal */ const typeFrexpResultVec3 = new PBStructTypeInfo('FrexpResultVec3', 'default', [\n    {\n        name: 'sig',\n        type: typeF32Vec3\n    },\n    {\n        name: 'exp',\n        type: typeI32Vec3\n    }\n]);\n/** @internal */ const typeFrexpResultVec4 = new PBStructTypeInfo('FrexpResultVec4', 'default', [\n    {\n        name: 'sig',\n        type: typeF32Vec4\n    },\n    {\n        name: 'exp',\n        type: typeI32Vec4\n    }\n]);\n\nexport { PBAddressSpace, PBAnyTypeInfo, PBArrayTypeInfo, PBAtomicI32TypeInfo, PBAtomicU32TypeInfo, PBFunctionTypeInfo, PBPointerTypeInfo, PBPrimitiveType, PBPrimitiveTypeInfo, PBSamplerAccessMode, PBSamplerTypeInfo, PBStructTypeInfo, PBTextureType, PBTextureTypeInfo, PBTypeInfo, PBVoidTypeInfo, typeAny, typeAtomicI32, typeAtomicU32, typeBVec2, typeBVec3, typeBVec4, typeBool, typeF16, typeF16Vec2, typeF16Vec3, typeF16Vec4, typeF32, typeF32Vec2, typeF32Vec3, typeF32Vec4, typeFrexpResult, typeFrexpResultVec2, typeFrexpResultVec3, typeFrexpResultVec4, typeI16, typeI16Vec2, typeI16Vec2_Norm, typeI16Vec3, typeI16Vec3_Norm, typeI16Vec4, typeI16Vec4_Norm, typeI16_Norm, typeI32, typeI32Vec2, typeI32Vec2_Norm, typeI32Vec3, typeI32Vec3_Norm, typeI32Vec4, typeI32Vec4_Norm, typeI32_Norm, typeI8, typeI8Vec2, typeI8Vec2_Norm, typeI8Vec3, typeI8Vec3_Norm, typeI8Vec4, typeI8Vec4_Norm, typeI8_Norm, typeITex1D, typeITex2D, typeITex2DArray, typeITex3D, typeITexCube, typeITexCubeArray, typeITexMultisampled2D, typeMat2, typeMat2x3, typeMat2x4, typeMat3, typeMat3x2, typeMat3x4, typeMat4, typeMat4x2, typeMat4x3, typeSampler, typeSamplerComparison, typeTex1D, typeTex2D, typeTex2DArray, typeTex3D, typeTexCube, typeTexCubeArray, typeTexDepth2D, typeTexDepth2DArray, typeTexDepthCube, typeTexDepthCubeArray, typeTexDepthMultisampled2D, typeTexExternal, typeTexMultisampled2D, typeTexStorage1D_bgra8unorm, typeTexStorage1D_r32float, typeTexStorage1D_r32sint, typeTexStorage1D_r32uint, typeTexStorage1D_rg32float, typeTexStorage1D_rg32sint, typeTexStorage1D_rg32uint, typeTexStorage1D_rgba16float, typeTexStorage1D_rgba16sint, typeTexStorage1D_rgba16uint, typeTexStorage1D_rgba32float, typeTexStorage1D_rgba32sint, typeTexStorage1D_rgba32uint, typeTexStorage1D_rgba8sint, typeTexStorage1D_rgba8snorm, typeTexStorage1D_rgba8uint, typeTexStorage1D_rgba8unorm, typeTexStorage2DArray_bgra8unorm, typeTexStorage2DArray_r32float, typeTexStorage2DArray_r32sint, typeTexStorage2DArray_r32uint, typeTexStorage2DArray_rg32float, typeTexStorage2DArray_rg32sint, typeTexStorage2DArray_rg32uint, typeTexStorage2DArray_rgba16float, typeTexStorage2DArray_rgba16sint, typeTexStorage2DArray_rgba16uint, typeTexStorage2DArray_rgba32float, typeTexStorage2DArray_rgba32sint, typeTexStorage2DArray_rgba32uint, typeTexStorage2DArray_rgba8sint, typeTexStorage2DArray_rgba8snorm, typeTexStorage2DArray_rgba8uint, typeTexStorage2DArray_rgba8unorm, typeTexStorage2D_bgra8unorm, typeTexStorage2D_r32float, typeTexStorage2D_r32sint, typeTexStorage2D_r32uint, typeTexStorage2D_rg32float, typeTexStorage2D_rg32sint, typeTexStorage2D_rg32uint, typeTexStorage2D_rgba16float, typeTexStorage2D_rgba16sint, typeTexStorage2D_rgba16uint, typeTexStorage2D_rgba32float, typeTexStorage2D_rgba32sint, typeTexStorage2D_rgba32uint, typeTexStorage2D_rgba8sint, typeTexStorage2D_rgba8snorm, typeTexStorage2D_rgba8uint, typeTexStorage2D_rgba8unorm, typeTexStorage3D_bgra8unorm, typeTexStorage3D_r32float, typeTexStorage3D_r32sint, typeTexStorage3D_r32uint, typeTexStorage3D_rg32float, typeTexStorage3D_rg32sint, typeTexStorage3D_rg32uint, typeTexStorage3D_rgba16float, typeTexStorage3D_rgba16sint, typeTexStorage3D_rgba16uint, typeTexStorage3D_rgba32float, typeTexStorage3D_rgba32sint, typeTexStorage3D_rgba32uint, typeTexStorage3D_rgba8sint, typeTexStorage3D_rgba8snorm, typeTexStorage3D_rgba8uint, typeTexStorage3D_rgba8unorm, typeU16, typeU16Vec2, typeU16Vec2_Norm, typeU16Vec3, typeU16Vec3_Norm, typeU16Vec4, typeU16Vec4_Norm, typeU16_Norm, typeU32, typeU32Vec2, typeU32Vec2_Norm, typeU32Vec3, typeU32Vec3_Norm, typeU32Vec4, typeU32Vec4_Norm, typeU32_Norm, typeU8, typeU8Vec2, typeU8Vec2_Norm, typeU8Vec3, typeU8Vec3_Norm, typeU8Vec4, typeU8Vec4_Norm, typeU8_Norm, typeUTex1D, typeUTex2D, typeUTex2DArray, typeUTex3D, typeUTexCube, typeUTexCubeArray, typeUTexMultisampled2D, typeVoid };\n//# sourceMappingURL=types.js.map\n","import { PBStructTypeInfo, PBArrayTypeInfo, PBPrimitiveTypeInfo, PBPrimitiveType } from './builder/types.js';\n\n/** @public */ const MAX_VERTEX_ATTRIBUTES = 16;\n/** @public */ const MAX_BINDING_GROUPS = 4;\n/** @public */ const MAX_TEXCOORD_INDEX_COUNT = 8;\n/** @public */ const VERTEX_ATTRIB_POSITION = 0;\n/** @public */ const VERTEX_ATTRIB_NORMAL = 1;\n/** @public */ const VERTEX_ATTRIB_DIFFUSE = 2;\n/** @public */ const VERTEX_ATTRIB_TANGENT = 3;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD0 = 4;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD1 = 5;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD2 = 6;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD3 = 7;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD4 = 8;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD5 = 9;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD6 = 10;\n/** @public */ const VERTEX_ATTRIB_TEXCOORD7 = 11;\n/** @public */ const VERTEX_ATTRIB_BLEND_WEIGHT = 12;\n/** @public */ const VERTEX_ATTRIB_BLEND_INDICES = 13;\nconst vertexAttribFormatMap = {\n    position_u8normx2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    position_u8normx4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    position_i8normx2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    position_i8normx4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    position_u16x2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    position_u16x4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    position_i16x2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    position_i16x4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    position_u16normx2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    position_u16normx4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    position_i16normx2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    position_i16normx4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    position_f16x2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    position_f16x4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    position_f32: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    position_f32x2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    position_f32x3: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    position_f32x4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    position_i32: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    position_i32x2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    position_i32x3: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    position_i32x4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    position_u32: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    position_u32x2: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    position_u32x3: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    position_u32x4: [\n        VERTEX_ATTRIB_POSITION,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    normal_f16x4: [\n        VERTEX_ATTRIB_NORMAL,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    normal_f32x3: [\n        VERTEX_ATTRIB_NORMAL,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    normal_f32x4: [\n        VERTEX_ATTRIB_NORMAL,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    diffuse_u8normx4: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    diffuse_u16x4: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    diffuse_u16normx4: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    diffuse_f16x4: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    diffuse_f32x3: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    diffuse_f32x4: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    diffuse_u32x3: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    diffuse_u32x4: [\n        VERTEX_ATTRIB_DIFFUSE,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tangent_f16x4: [\n        VERTEX_ATTRIB_TANGENT,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tangent_f32x3: [\n        VERTEX_ATTRIB_TANGENT,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tangent_f32x4: [\n        VERTEX_ATTRIB_TANGENT,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex0_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex0_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex0_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex0_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex0_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex0_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex0_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex0_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex0_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex0_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex0_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex0_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex0_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex0_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex0_f32: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex0_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex0_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex0_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex0_i32: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex0_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex0_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex0_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex0_u32: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex0_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex0_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex0_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD0,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tex1_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex1_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex1_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex1_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex1_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex1_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex1_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex1_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex1_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex1_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex1_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex1_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex1_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex1_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex1_f32: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex1_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex1_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex1_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex1_i32: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex1_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex1_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex1_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex1_u32: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex1_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex1_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex1_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD1,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tex2_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex2_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex2_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex2_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex2_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex2_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex2_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex2_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex2_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex2_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex2_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex2_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex2_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex2_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex2_f32: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex2_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex2_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex2_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex2_i32: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex2_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex2_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex2_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex2_u32: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex2_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex2_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex2_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD2,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tex3_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex3_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex3_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex3_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex3_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex3_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex3_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex3_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex3_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex3_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex3_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex3_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex3_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex3_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex3_f32: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex3_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex3_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex3_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex3_i32: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex3_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex3_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex3_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex3_u32: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex3_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex3_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex3_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD3,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tex4_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex4_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex4_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex4_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex4_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex4_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex4_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex4_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex4_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex4_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex4_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex4_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex4_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex4_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex4_f32: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex4_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex4_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex4_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex4_i32: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex4_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex4_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex4_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex4_u32: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex4_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex4_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex4_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD4,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tex5_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex5_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex5_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex5_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex5_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex5_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex5_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex5_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex5_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex5_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex5_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex5_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex5_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex5_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex5_f32: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex5_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex5_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex5_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex5_i32: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex5_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex5_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex5_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex5_u32: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex5_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex5_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex5_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD5,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tex6_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex6_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex6_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex6_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex6_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex6_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex6_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex6_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex6_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex6_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex6_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex6_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex6_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex6_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex6_f32: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex6_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex6_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex6_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex6_i32: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex6_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex6_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex6_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex6_u32: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex6_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex6_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex6_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD6,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    tex7_u8normx2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U8VEC2_NORM,\n        2,\n        'u8norm',\n        2\n    ],\n    tex7_u8normx4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U8VEC4_NORM,\n        4,\n        'u8norm',\n        4\n    ],\n    tex7_i8normx2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I8VEC2_NORM,\n        2,\n        'i8norm',\n        2\n    ],\n    tex7_i8normx4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I8VEC4_NORM,\n        4,\n        'i8norm',\n        4\n    ],\n    tex7_u16x2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    tex7_u16x4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    tex7_i16x2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I16VEC2,\n        4,\n        'i16',\n        2\n    ],\n    tex7_i16x4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I16VEC4,\n        8,\n        'i16',\n        4\n    ],\n    tex7_u16normx2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U16VEC2_NORM,\n        4,\n        'u16norm',\n        2\n    ],\n    tex7_u16normx4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U16VEC4_NORM,\n        8,\n        'u16norm',\n        4\n    ],\n    tex7_i16normx2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I16VEC2_NORM,\n        4,\n        'i16norm',\n        2\n    ],\n    tex7_i16normx4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I16VEC4_NORM,\n        8,\n        'i16norm',\n        4\n    ],\n    tex7_f16x2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    tex7_f16x4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    tex7_f32: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    tex7_f32x2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    tex7_f32x3: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    tex7_f32x4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    tex7_i32: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I32,\n        4,\n        'i32',\n        1\n    ],\n    tex7_i32x2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I32VEC2,\n        8,\n        'i32',\n        2\n    ],\n    tex7_i32x3: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I32VEC3,\n        12,\n        'i32',\n        3\n    ],\n    tex7_i32x4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.I32VEC4,\n        16,\n        'i32',\n        4\n    ],\n    tex7_u32: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    tex7_u32x2: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    tex7_u32x3: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    tex7_u32x4: [\n        VERTEX_ATTRIB_TEXCOORD7,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ],\n    blendweights_f16x1: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F16,\n        2,\n        'f16',\n        1\n    ],\n    blendweights_f32x1: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    blendweights_f16x2: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    blendweights_f32x2: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    blendweights_f16x3: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F16VEC3,\n        6,\n        'f16',\n        3\n    ],\n    blendweights_f32x3: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    blendweights_f16x4: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    blendweights_f32x4: [\n        VERTEX_ATTRIB_BLEND_WEIGHT,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    blendindices_u16x1: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U16,\n        2,\n        'u16',\n        1\n    ],\n    blendindices_f16x1: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F16,\n        2,\n        'f16',\n        1\n    ],\n    blendindices_f32x1: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F32,\n        4,\n        'f32',\n        1\n    ],\n    blendindices_u32x1: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U32,\n        4,\n        'u32',\n        1\n    ],\n    blendindices_u16x2: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U16VEC2,\n        4,\n        'u16',\n        2\n    ],\n    blendindices_f16x2: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F16VEC2,\n        4,\n        'f16',\n        2\n    ],\n    blendindices_f32x2: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F32VEC2,\n        8,\n        'f32',\n        2\n    ],\n    blendindices_u32x2: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U32VEC2,\n        8,\n        'u32',\n        2\n    ],\n    blendindices_u16x3: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U16VEC3,\n        6,\n        'u16',\n        3\n    ],\n    blendindices_f16x3: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F16VEC3,\n        6,\n        'f16',\n        3\n    ],\n    blendindices_f32x3: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F32VEC3,\n        12,\n        'f32',\n        3\n    ],\n    blendindices_u32x3: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U32VEC3,\n        12,\n        'u32',\n        3\n    ],\n    blendindices_u16x4: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U16VEC4,\n        8,\n        'u16',\n        4\n    ],\n    blendindices_f16x4: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F16VEC4,\n        8,\n        'f16',\n        4\n    ],\n    blendindices_f32x4: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.F32VEC4,\n        16,\n        'f32',\n        4\n    ],\n    blendindices_u32x4: [\n        VERTEX_ATTRIB_BLEND_INDICES,\n        PBPrimitiveType.U32VEC4,\n        16,\n        'u32',\n        4\n    ]\n};\nconst vertexAttribNameMap = {\n    position: VERTEX_ATTRIB_POSITION,\n    normal: VERTEX_ATTRIB_NORMAL,\n    diffuse: VERTEX_ATTRIB_DIFFUSE,\n    tangent: VERTEX_ATTRIB_TANGENT,\n    blendIndices: VERTEX_ATTRIB_BLEND_INDICES,\n    blendWeights: VERTEX_ATTRIB_BLEND_WEIGHT,\n    texCoord0: VERTEX_ATTRIB_TEXCOORD0,\n    texCoord1: VERTEX_ATTRIB_TEXCOORD1,\n    texCoord2: VERTEX_ATTRIB_TEXCOORD2,\n    texCoord3: VERTEX_ATTRIB_TEXCOORD3,\n    texCoord4: VERTEX_ATTRIB_TEXCOORD4,\n    texCoord5: VERTEX_ATTRIB_TEXCOORD5,\n    texCoord6: VERTEX_ATTRIB_TEXCOORD6,\n    texCoord7: VERTEX_ATTRIB_TEXCOORD7\n};\nconst vertexAttribNameRevMap = {\n    [VERTEX_ATTRIB_POSITION]: 'position',\n    [VERTEX_ATTRIB_NORMAL]: 'normal',\n    [VERTEX_ATTRIB_DIFFUSE]: 'diffuse',\n    [VERTEX_ATTRIB_TANGENT]: 'tangent',\n    [VERTEX_ATTRIB_BLEND_INDICES]: 'blendIndices',\n    [VERTEX_ATTRIB_BLEND_WEIGHT]: 'blendWeights',\n    [VERTEX_ATTRIB_TEXCOORD0]: 'texCoord0',\n    [VERTEX_ATTRIB_TEXCOORD1]: 'texCoord1',\n    [VERTEX_ATTRIB_TEXCOORD2]: 'texCoord2',\n    [VERTEX_ATTRIB_TEXCOORD3]: 'texCoord3',\n    [VERTEX_ATTRIB_TEXCOORD4]: 'texCoord4',\n    [VERTEX_ATTRIB_TEXCOORD5]: 'texCoord5',\n    [VERTEX_ATTRIB_TEXCOORD6]: 'texCoord6',\n    [VERTEX_ATTRIB_TEXCOORD7]: 'texCoord7'\n};\n/**\n * The gpu resource usage flags\n * @public\n */ var GPUResourceUsageFlags = /*#__PURE__*/ function(GPUResourceUsageFlags) {\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"TF_LINEAR_COLOR_SPACE\"] = 2] = \"TF_LINEAR_COLOR_SPACE\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"TF_NO_MIPMAP\"] = 4] = \"TF_NO_MIPMAP\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"TF_WRITABLE\"] = 8] = \"TF_WRITABLE\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"TF_NO_GC\"] = 16] = \"TF_NO_GC\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_VERTEX\"] = 32] = \"BF_VERTEX\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_INDEX\"] = 64] = \"BF_INDEX\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_READ\"] = 128] = \"BF_READ\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_WRITE\"] = 256] = \"BF_WRITE\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_UNIFORM\"] = 512] = \"BF_UNIFORM\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_STORAGE\"] = 1024] = \"BF_STORAGE\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_PACK_PIXEL\"] = 2048] = \"BF_PACK_PIXEL\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"BF_UNPACK_PIXEL\"] = 4096] = \"BF_UNPACK_PIXEL\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"DYNAMIC\"] = 8192] = \"DYNAMIC\";\n    GPUResourceUsageFlags[GPUResourceUsageFlags[\"MANAGED\"] = 16384] = \"MANAGED\";\n    return GPUResourceUsageFlags;\n}({});\n/**\n * Get vertex attribute index by semantic\n * @public\n */ function getVertexAttribByName(name) {\n    return vertexAttribNameMap[name];\n}\n/**\n * Get vertex semantic by attribute index\n * @public\n */ function getVertexAttribName(attrib) {\n    return vertexAttribNameRevMap[attrib];\n}\n/**\n * Test whether a vertex buffer matches given semantic\n * @param buffer - Vertex buffer\n * @param name - Semantic to test\n * @returns true if the vertex buffer matches given semantic, otherwise false\n *\n * @public\n */ function matchVertexBuffer(buffer, name) {\n    if (!buffer) {\n        return false;\n    }\n    const bufferType = buffer.structure.structMembers[0].type;\n    if (!bufferType.isArrayType()) {\n        return false;\n    }\n    const vertexType = bufferType.elementType;\n    if (vertexType.isStructType()) {\n        for (const attrib of vertexType.structMembers){\n            if (attrib.name === name) {\n                return true;\n            }\n        }\n    } else {\n        return buffer.structure.structMembers[0].name === name;\n    }\n}\n/**\n * Get vertex attribute type of specified vertex format\n * @param fmt - The vertex format\n * @returns Vertex attribute type, possible values are 'f32', 'f16', 'i32', 'u32', 'i16', 'u16', 'i8norm', 'u8norm', 'i16norm', 'u16norm'\n *\n * @public\n */ function getVertexAttributeFormat(fmt) {\n    return vertexAttribFormatMap[fmt][3];\n}\n/**\n * Get vertex attribute index of specified vertex format\n * @param fmt - The vertex format\n * @returns Vertex attribute index\n *\n * @public\n */ function getVertexAttributeIndex(fmt) {\n    return vertexAttribFormatMap[fmt][0];\n}\n/**\n * Get byte size of specified vertex format\n *\n * @public\n */ function getVertexFormatSize(fmt) {\n    return vertexAttribFormatMap[fmt][2];\n}\n/**\n * Get number of components of specified vertex format\n *\n * @public\n */ function getVertexFormatComponentCount(fmt) {\n    return vertexAttribFormatMap[fmt][4];\n}\n/**\n * Get vertex format by semantic and component type and component count\n * @param semantic - The vertex semantic\n * @param type - Data type of vertex component\n * @param count - The count of vertex components\n * @returns Vertex format\n *\n * @public\n */ function getVertexAttribFormat(semantic, type, count) {\n    const loc = getVertexAttribByName(semantic);\n    for(const k in vertexAttribFormatMap){\n        const v = vertexAttribFormatMap[k];\n        if (v[0] === loc && v[3] === type && v[4] === count) {\n            return k;\n        }\n    }\n    return null;\n}\n/**\n * Get the length of a vertex buffer by specified structure type of the vertex buffer\n * @param vertexBufferType - The structure type of the vertex buffer\n * @returns The length of the vertex buffer\n *\n * @public\n */ function getVertexBufferLength(vertexBufferType) {\n    return vertexBufferType.structMembers[0].type.dimension;\n}\n/**\n * Get byte stride of a vertex buffer by specified structure type of the vertex buffer\n * @param vertexBufferType - The structure type of the vertex buffer\n * @returns The byte stride of the vertex buffer\n *\n * @public\n */ function getVertexBufferStride(vertexBufferType) {\n    const vertexType = vertexBufferType.structMembers[0].type.elementType;\n    if (vertexType.isStructType()) {\n        let stride = 0;\n        for (const member of vertexType.structMembers){\n            stride += member.type.getSize();\n        }\n        return stride;\n    } else {\n        return vertexType.getSize();\n    }\n}\n/**\n * Get primitive type of a vertex attribute by specified vertex semantic\n * @param vertexBufferType - The structure type of the vertex buffer\n * @param semantic - The vertex semantic\n * @returns - The primitive type of the vertex attribute\n *\n * @public\n */ function getVertexBufferAttribTypeBySemantic(vertexBufferType, semantic) {\n    const k = vertexBufferType.structMembers[0];\n    const vertexType = k.type.elementType;\n    if (vertexType.isStructType()) {\n        for (const member of vertexType.structMembers){\n            if (member.name === semantic) {\n                return member.type;\n            }\n        }\n        return null;\n    } else {\n        return k.name === semantic ? vertexType : null;\n    }\n}\n/**\n * Get primitive type of a vertex attribute by specified vertex attribute index\n * @param vertexBufferType - The structure type of the vertex buffer\n * @param semantic - The vertex attribute index\n * @returns - The primitive type of the vertex attribute\n *\n * @public\n */ function getVertexBufferAttribType(vertexBufferType, attrib) {\n    const attribName = getVertexAttribName(attrib);\n    if (!attribName) {\n        return null;\n    }\n    return getVertexBufferAttribTypeBySemantic(vertexBufferType, attribName);\n}\n/**\n * Get the structure type of a vertex buffer by specified vertex attribute formats and the length of the vertex buffer\n * @param length - The length of the vertex buffer\n * @param attributes - The vertex attributes\n * @returns The structure type of the vertex buffer\n *\n * @public\n */ function makeVertexBufferType(length, ...attributes) {\n    if (attributes.length === 0) {\n        return null;\n    }\n    if (attributes.length === 1) {\n        const format = vertexAttribFormatMap[attributes[0]];\n        return new PBStructTypeInfo(null, 'packed', [\n            {\n                name: getVertexAttribName(format[0]),\n                type: new PBArrayTypeInfo(PBPrimitiveTypeInfo.getCachedTypeInfo(format[1]), length)\n            }\n        ]);\n    } else {\n        const vertexType = new PBStructTypeInfo(null, 'packed', attributes.map((attrib)=>({\n                name: getVertexAttribName(vertexAttribFormatMap[attrib][0]),\n                type: PBPrimitiveTypeInfo.getCachedTypeInfo(vertexAttribFormatMap[attrib][1])\n            })));\n        return new PBStructTypeInfo(null, 'packed', [\n            {\n                name: 'value',\n                type: new PBArrayTypeInfo(vertexType, length)\n            }\n        ]);\n    }\n}\n/**\n * Vertex semantic list\n *\n * @public\n */ const semanticList = function() {\n    const list = [];\n    for(let i = 0; i < MAX_VERTEX_ATTRIBUTES; i++){\n        list.push(semanticToAttrib(i));\n    }\n    return list;\n}();\n/** @internal */ function semanticToAttrib(semantic) {\n    switch(semantic){\n        case VERTEX_ATTRIB_POSITION:\n            return 'a_position';\n        case VERTEX_ATTRIB_NORMAL:\n            return 'a_normal';\n        case VERTEX_ATTRIB_DIFFUSE:\n            return 'a_diffuse';\n        case VERTEX_ATTRIB_TANGENT:\n            return 'a_tangent';\n        case VERTEX_ATTRIB_TEXCOORD0:\n            return 'a_texcoord0';\n        case VERTEX_ATTRIB_TEXCOORD1:\n            return 'a_texcoord1';\n        case VERTEX_ATTRIB_TEXCOORD2:\n            return 'a_texcoord2';\n        case VERTEX_ATTRIB_TEXCOORD3:\n            return 'a_texcoord3';\n        case VERTEX_ATTRIB_TEXCOORD4:\n            return 'a_texcoord4';\n        case VERTEX_ATTRIB_TEXCOORD5:\n            return 'a_texcoord5';\n        case VERTEX_ATTRIB_TEXCOORD6:\n            return 'a_texcoord6';\n        case VERTEX_ATTRIB_TEXCOORD7:\n            return 'a_texcoord7';\n        case VERTEX_ATTRIB_BLEND_INDICES:\n            return 'a_indices';\n        case VERTEX_ATTRIB_BLEND_WEIGHT:\n            return 'a_weight';\n        default:\n            return null;\n    }\n}\n/**\n * Creates the default name for the type of given gpu object\n * @param obj - The gpu object\n * @returns The default name\n * @public\n */ function genDefaultName(obj) {\n    if (obj.isTexture2D()) {\n        return 'texture_2d';\n    } else if (obj.isTexture2DArray()) {\n        return 'texture_2darray';\n    } else if (obj.isTexture3D()) {\n        return 'texture_3d';\n    } else if (obj.isTextureCube()) {\n        return 'texture_cube';\n    } else if (obj.isTextureVideo()) {\n        return 'texture_video';\n    } else if (obj.isBuffer()) {\n        return 'buffer';\n    } else if (obj.isFramebuffer()) {\n        return 'framebuffer';\n    } else if (obj.isProgram()) {\n        return 'program';\n    } else if (obj.isSampler()) {\n        return 'sampler';\n    } else if (obj.isVertexLayout()) {\n        return 'vbo';\n    } else {\n        return 'unknown';\n    }\n}\n\nexport { GPUResourceUsageFlags, MAX_BINDING_GROUPS, MAX_TEXCOORD_INDEX_COUNT, MAX_VERTEX_ATTRIBUTES, VERTEX_ATTRIB_BLEND_INDICES, VERTEX_ATTRIB_BLEND_WEIGHT, VERTEX_ATTRIB_DIFFUSE, VERTEX_ATTRIB_NORMAL, VERTEX_ATTRIB_POSITION, VERTEX_ATTRIB_TANGENT, VERTEX_ATTRIB_TEXCOORD0, VERTEX_ATTRIB_TEXCOORD1, VERTEX_ATTRIB_TEXCOORD2, VERTEX_ATTRIB_TEXCOORD3, VERTEX_ATTRIB_TEXCOORD4, VERTEX_ATTRIB_TEXCOORD5, VERTEX_ATTRIB_TEXCOORD6, VERTEX_ATTRIB_TEXCOORD7, genDefaultName, getVertexAttribByName, getVertexAttribFormat, getVertexAttribName, getVertexAttributeFormat, getVertexAttributeIndex, getVertexBufferAttribType, getVertexBufferAttribTypeBySemantic, getVertexBufferLength, getVertexBufferStride, getVertexFormatComponentCount, getVertexFormatSize, makeVertexBufferType, matchVertexBuffer, semanticList, semanticToAttrib };\n//# sourceMappingURL=gpuobject.js.map\n","import { MAX_VERTEX_ATTRIBUTES, getVertexAttribByName, GPUResourceUsageFlags, getVertexBufferAttribType, getVertexBufferStride } from './gpuobject.js';\n\n/**\n * The vertex data class\n * @public\n */ class VertexData {\n    /** @internal */ _vertexBuffers;\n    /** @internal */ _indexBuffer;\n    /** @internal */ _drawOffset;\n    /** @internal */ _numVertices;\n    constructor(){\n        this._vertexBuffers = [];\n        for(let i = 0; i < MAX_VERTEX_ATTRIBUTES; i++){\n            this._vertexBuffers.push(null);\n        }\n        this._indexBuffer = null;\n        this._drawOffset = 0;\n        this._numVertices = 0;\n    }\n    /**\n   * Creates a new instance of VertexData by copying from this object\n   * @returns New instance of VertexData\n   */ clone() {\n        const newVertexData = new VertexData();\n        newVertexData._vertexBuffers = this._vertexBuffers.slice();\n        newVertexData._indexBuffer = this._indexBuffer;\n        newVertexData._drawOffset = this._drawOffset;\n        newVertexData.calcNumVertices();\n        return newVertexData;\n    }\n    /** Vertex buffer information list */ get vertexBuffers() {\n        return this._vertexBuffers;\n    }\n    /** Index buffer */ get indexBuffer() {\n        return this._indexBuffer;\n    }\n    /** Number of vertices */ get numVertices() {\n        return this._numVertices;\n    }\n    /** Draw offset */ getDrawOffset() {\n        return this._drawOffset;\n    }\n    setDrawOffset(offset) {\n        if (offset !== this._drawOffset) {\n            this._drawOffset = offset;\n            this.calcNumVertices();\n        }\n    }\n    /**\n   * Gets the vertex buffer by specific vertex semantic\n   * @param semantic - The vertex semantic\n   * @returns Vertex buffer of the given semantic\n   */ getVertexBuffer(semantic) {\n        return this._vertexBuffers[getVertexAttribByName(semantic)]?.buffer ?? null;\n    }\n    /**\n   * Gets the vertex buffer information by specific vertex semantic\n   * @param semantic - The vertex semantic\n   * @returns Vertex buffer information of the given semantic\n   */ getVertexBufferInfo(semantic) {\n        return this._vertexBuffers[getVertexAttribByName(semantic)] ?? null;\n    }\n    /**\n   * Gets the index buffer\n   * @returns The index buffer\n   */ getIndexBuffer() {\n        return this._indexBuffer || null;\n    }\n    /**\n   * Sets a vertex buffer\n   * @param buffer - The vertex buffer object\n   * @param stepMode - Step mode of the buffer\n   * @returns The buffer that was set\n   */ setVertexBuffer(buffer, stepMode) {\n        if (!buffer) {\n            return null;\n        }\n        if (!(buffer.usage & GPUResourceUsageFlags.BF_VERTEX)) {\n            throw new Error('setVertexBuffer() failed: buffer is null or buffer has not Vertex usage flag');\n        }\n        stepMode = stepMode || 'vertex';\n        const vertexType = buffer.structure.structMembers[0].type.elementType;\n        if (vertexType.isStructType()) {\n            let offset = 0;\n            for (const attrib of vertexType.structMembers){\n                const loc = getVertexAttribByName(attrib.name);\n                this.internalSetVertexBuffer(loc, buffer, offset, stepMode);\n                offset += attrib.size;\n            }\n        } else {\n            const loc = getVertexAttribByName(buffer.structure.structMembers[0].name);\n            this.internalSetVertexBuffer(loc, buffer, 0, stepMode);\n        }\n        return buffer;\n    }\n    /**\n   * Removes a vertex buffer\n   * @param buffer - Vertex buffer to be removed\n   * @returns true if the buffer was successfully removed, otherwise false\n   */ removeVertexBuffer(buffer) {\n        let removed = false;\n        for(let loc = 0; loc < this._vertexBuffers.length; loc++){\n            const info = this._vertexBuffers[loc];\n            const remove = info?.buffer === buffer;\n            if (remove) {\n                this._vertexBuffers[loc] = null;\n                removed = true;\n            }\n        }\n        if (removed) {\n            this.calcNumVertices();\n        }\n        return removed;\n    }\n    /**\n   * Sets the index buffer\n   * @param buffer - Index buffer to be set\n   * @returns The index buffer that was set\n   */ setIndexBuffer(buffer) {\n        if (buffer !== this._indexBuffer) {\n            this._indexBuffer = buffer || null;\n        }\n        return buffer;\n    }\n    /** @internal */ calcNumVertices() {\n        this._numVertices = 0;\n        for(let i = 0; i < MAX_VERTEX_ATTRIBUTES; i++){\n            const info = this._vertexBuffers[i];\n            if (info && info.stepMode !== 'instance') {\n                const n = Math.floor(info.buffer.byteLength / info.stride);\n                if (n > this._numVertices) {\n                    this._numVertices = n;\n                }\n            }\n        }\n    }\n    /** @internal */ internalSetVertexBuffer(loc, buffer, offset, stepMode) {\n        if (loc < 0 || loc >= MAX_VERTEX_ATTRIBUTES) {\n            throw new Error(`setVertexBuffer() failed: location out of bounds: ${loc}`);\n        }\n        offset = Number(offset) || 0;\n        stepMode = stepMode || 'vertex';\n        const old = this._vertexBuffers[loc];\n        if (!old || old.buffer !== buffer || old.offset !== offset || old.stepMode !== stepMode) {\n            this._vertexBuffers[loc] = {\n                buffer: buffer,\n                offset: offset,\n                type: getVertexBufferAttribType(buffer.structure, loc),\n                stride: getVertexBufferStride(buffer.structure),\n                drawOffset: 0,\n                stepMode: stepMode\n            };\n            this.calcNumVertices();\n            return buffer;\n        }\n        return null;\n    }\n}\n\nexport { VertexData };\n//# sourceMappingURL=vertexdata.js.map\n","/**\n * Abstract timer interface\n * @public\n */ /**\n * CPU timer class\n * @public\n */ class CPUTimer {\n    /** @internal */ _cpuTimer;\n    /** @internal */ _cpuStart;\n    /** @internal */ _cpuTime;\n    /** @internal */ _ended;\n    constructor(){\n        this._cpuTimer = window.performance || window.Date;\n        this._cpuTime = null;\n        this._ended = false;\n    }\n    now() {\n        return this._cpuTimer.now();\n    }\n    begin() {\n        this._cpuStart = this.now();\n        this._cpuTime = null;\n        this._ended = false;\n    }\n    end() {\n        this._cpuTime = this.now() - this._cpuStart;\n        this._ended = true;\n    }\n    ended() {\n        return this._ended;\n    }\n    elapsed() {\n        return this._cpuTime;\n    }\n}\n\nexport { CPUTimer };\n//# sourceMappingURL=timer.js.map\n","/**\n * ObjectPool class is responsible for managing and reusing textures and framebuffers.\n * @public\n */ class Pool {\n    /** @internal */ _memCost;\n    /** @internal */ _memCostThreshold;\n    /** @internal */ _device;\n    /** @internal */ _id;\n    /** @internal */ _freeTextures = {};\n    /** @internal */ _allocatedTextures = new WeakMap();\n    /** @internal */ _autoReleaseTextures = new Set();\n    /** @internal */ _freeFramebuffers = {};\n    /** @internal */ _allocatedFramebuffers = new WeakMap();\n    /** @internal */ _autoReleaseFramebuffers = new Set();\n    /**\n   * Creates an instance of Pool class\n   * @param device - Rendering device\n   */ constructor(device, id, memCostThreshold = 1024 * 1024 * 1024){\n        this._device = device;\n        this._id = id;\n        this._memCost = 0;\n        this._memCostThreshold = memCostThreshold;\n        this._freeTextures = {};\n        this._allocatedTextures = new WeakMap();\n        this._autoReleaseTextures = new Set();\n        this._freeFramebuffers = {};\n        this._allocatedFramebuffers = new WeakMap();\n        this._autoReleaseFramebuffers = new Set();\n        this._memCost = 0;\n    }\n    /**\n   * Id for this pool\n   */ get id() {\n        return this._id;\n    }\n    autoRelease() {\n        // auto release objects\n        for (const tex of this._autoReleaseTextures){\n            this.releaseTexture(tex);\n        }\n        this._autoReleaseTextures.clear();\n        for (const fb of this._autoReleaseFramebuffers){\n            this.releaseFrameBuffer(fb);\n        }\n        this._autoReleaseFramebuffers.clear();\n        // Free up video memory if memory usage is greater than specific value\n        if (this._memCost >= this._memCostThreshold) {\n            this.purge();\n        }\n    }\n    /**\n   * Fetch a temporal 2D texture from the object pool.\n   * @param autoRelease - Whether the texture should be automatically released at the next frame.\n   * @param format - The format of the texture.\n   * @param width - The width of the texture.\n   * @param height - The height of the texture.\n   * @param mipmapping - Whether this texture support mipmapping\n   * @returns The fetched Texture2D object.\n   */ fetchTemporalTexture2D(autoRelease, format, width, height, mipmapping = false) {\n        const hash = `2d:${format}:${width}:${height}:${mipmapping ? 1 : 0}`;\n        let texture = null;\n        const list = this._freeTextures[hash];\n        if (!list) {\n            texture = this._device.createTexture2D(format, width, height, {\n                mipmapping\n            });\n            this._memCost += texture.memCost;\n        } else {\n            texture = list.pop();\n            if (list.length === 0) {\n                this._freeTextures[hash] = undefined;\n            }\n        }\n        this._allocatedTextures.set(texture, {\n            hash,\n            refcount: 1,\n            dispose: false\n        });\n        if (autoRelease) {\n            this._autoReleaseTextures.add(texture);\n        }\n        return texture;\n    }\n    /**\n   * Fetch a temporal 2D array texture from the object pool.\n   * @param autoRelease - Whether the texture should be automatically released at the next frame.\n   * @param format - Format of the texture.\n   * @param width - Width of the texture.\n   * @param height - Height of the texture.\n   * @param numLayers - Layer count of the texture\n   * @param mipmapping - Whether this texture support mipmapping\n   * @returns The fetched Texture2DArray object.\n   */ fetchTemporalTexture2DArray(autoRelease, format, width, height, numLayers, mipmapping = false) {\n        const hash = `2darray:${format}:${width}:${height}:${numLayers}:${mipmapping ? 1 : 0}`;\n        let texture = null;\n        const list = this._freeTextures[hash];\n        if (!list) {\n            texture = this._device.createTexture2DArray(format, width, height, numLayers, {\n                mipmapping\n            });\n            this._memCost += texture.memCost;\n        } else {\n            texture = list.pop();\n            if (list.length === 0) {\n                this._freeTextures[hash] = undefined;\n            }\n        }\n        this._allocatedTextures.set(texture, {\n            hash,\n            refcount: 1,\n            dispose: false\n        });\n        if (autoRelease) {\n            this._autoReleaseTextures.add(texture);\n        }\n        return texture;\n    }\n    /**\n   * Fetch a temporal Cube texture from the object pool.\n   * @param autoRelease - Whether the texture should be automatically released at the next frame.\n   * @param format - Format of the texture.\n   * @param size - size of the texture.\n   * @param mipmapping - Whether this texture support mipmapping\n   * @returns The fetched TextureCube object.\n   */ fetchTemporalTextureCube(autoRelease, format, size, mipmapping = false) {\n        const hash = `cube:${format}:${size}:${mipmapping ? 1 : 0}`;\n        let texture = null;\n        const list = this._freeTextures[hash];\n        if (!list) {\n            texture = this._device.createCubeTexture(format, size, {\n                mipmapping\n            });\n            this._memCost += texture.memCost;\n        } else {\n            texture = list.pop();\n            if (list.length === 0) {\n                this._freeTextures[hash] = undefined;\n            }\n        }\n        this._allocatedTextures.set(texture, {\n            hash,\n            refcount: 1,\n            dispose: false\n        });\n        if (autoRelease) {\n            this._autoReleaseTextures.add(texture);\n        }\n        return texture;\n    }\n    /**\n   * Creates a temporal framebuffer from the object pool.\n   * @param autoRelease - Whether the framebuffer should be automatically released at the next frame.\n   * @param width - Width of the framebuffer\n   * @param height - Height of the framebuffer\n   * @param colorAttachments - Array of color attachments or texture format of the framebuffer.\n   * @param depthAttachment - Depth attachment or texture format of the framebuffer.\n   * @param mipmapping - Whether mipmapping should be enabled when creating color attachment textures, default is false.\n   * @param sampleCount - The sample count for the framebuffer, default is 1.\n   * @param ignoreDepthStencil - Whether to ignore depth stencil when resolving msaa framebuffer, default is true.\n   * @param attachmentMipLevel - The mipmap level to which the color attachment will render, default is 0\n   * @param attachmentCubeface - The cubemap face to which the color attachment will render, default is 0\n   * @param attachmentLayer - The texture layer to which the color attachment will render, default is 0\n   * @returns The fetched FrameBuffer object.\n   */ fetchTemporalFramebuffer(autoRelease, width, height, colorTexOrFormat, depthTexOrFormat = null, mipmapping = false, sampleCount = 1, ignoreDepthStencil = true, attachmentMipLevel = 0, attachmentCubeface = 0, attachmentLayer = 0) {\n        const colors = Array.isArray(colorTexOrFormat) ? colorTexOrFormat : colorTexOrFormat ? [\n            colorTexOrFormat\n        ] : [];\n        const colorAttachments = colors.map((val)=>{\n            return typeof val === 'string' ? this.fetchTemporalTexture2D(false, val, width, height, mipmapping) : val;\n        });\n        const depthAttachment = typeof depthTexOrFormat === 'string' ? this.fetchTemporalTexture2D(false, depthTexOrFormat, width, height, false) : depthTexOrFormat;\n        const fb = this.createTemporalFramebuffer(autoRelease, colorAttachments, depthAttachment, sampleCount, ignoreDepthStencil, attachmentMipLevel, attachmentCubeface, attachmentLayer);\n        for(let i = 0; i < colors.length; i++){\n            if (typeof colors[i] === 'string') {\n                this.releaseTexture(colorAttachments[i]);\n            }\n        }\n        if (typeof depthTexOrFormat === 'string') {\n            this.releaseTexture(depthAttachment);\n        }\n        return fb;\n    }\n    /**\n   * Creates a temporal framebuffer from the object pool.\n   * @param autoRelease - Whether the framebuffer should be automatically released at the next frame.\n   * @param colorAttachments - Array of color attachments for the framebuffer.\n   * @param depthAttachment - Depth attachment for the framebuffer.\n   * @param sampleCount - The sample count for the framebuffer, default is 1.\n   * @param ignoreDepthStencil - Whether to ignore depth stencil when resolving msaa framebuffer, default is true.\n   * @param attachmentMipLevel - The mipmap level to which the color attachment will render, default is 0.\n   * @param attachmentCubeface - The cubemap face to which the color attachment will render, default is 0.\n   * @param attachmentLayer - The texture layer to which the color attachment will render, default is 0.\n   * @returns The fetched FrameBuffer object.\n   */ createTemporalFramebuffer(autoRelease, colorAttachments, depthAttachment = null, sampleCount = 1, ignoreDepthStencil = true, attachmentMipLevel = 0, attachmentCubeface = 0, attachmentLayer = 0) {\n        colorAttachments = colorAttachments ?? [];\n        let hash = `${depthAttachment?.uid ?? 0}:${sampleCount ?? 1}:${ignoreDepthStencil ? 1 : 0}`;\n        if (colorAttachments.length > 0) {\n            hash += `:${attachmentMipLevel}:${attachmentCubeface}:${attachmentLayer}`;\n            for (const tex of colorAttachments){\n                hash += `:${tex.uid}`;\n            }\n        }\n        let fb = null;\n        const list = this._freeFramebuffers[hash];\n        if (!list) {\n            fb = this._device.createFrameBuffer(colorAttachments, depthAttachment, {\n                ignoreDepthStencil,\n                sampleCount\n            });\n            for(let i = 0; i < fb.getColorAttachments().length; i++){\n                fb.setColorAttachmentMipLevel(i, attachmentMipLevel);\n                fb.setColorAttachmentCubeFace(i, attachmentCubeface);\n                fb.setColorAttachmentLayer(i, attachmentLayer);\n            }\n        } else {\n            fb = list.pop();\n            if (list.length === 0) {\n                this._freeFramebuffers[hash] = undefined;\n            }\n        }\n        // Mark referenced textures\n        const info = this._allocatedTextures.get(depthAttachment);\n        if (info) {\n            info.refcount++;\n        }\n        for (const tex of colorAttachments){\n            const info = this._allocatedTextures.get(tex);\n            if (info) {\n                info.refcount++;\n            }\n        }\n        this._allocatedFramebuffers.set(fb, {\n            hash,\n            refcount: 1\n        });\n        if (autoRelease) {\n            this._autoReleaseFramebuffers.add(fb);\n        }\n        return fb;\n    }\n    /**\n   * Dispose a texture that is allocated from the object pool.\n   * @param texture - The texture to dispose.\n   */ disposeTexture(texture) {\n        this.safeReleaseTexture(texture, true);\n    }\n    /**\n   * Release a texture back to the object pool.\n   * @param texture - The texture to release.\n   */ releaseTexture(texture) {\n        const info = this._allocatedTextures.get(texture);\n        if (!info) {\n            console.error(`ObjectPool.releaseTexture(): texture is not allocated from pool`);\n        } else {\n            this.safeReleaseTexture(texture);\n        }\n    }\n    /**\n   * Increment reference counter for given texture\n   * @param texture - The texture to retain\n   */ retainTexture(texture) {\n        const info = this._allocatedTextures.get(texture);\n        if (!info) {\n            console.error(`ObjectPool.retainTexture(): texture is not allocated from pool`);\n        } else {\n            info.refcount++;\n        }\n    }\n    /**\n   * Dispose a framebuffer that is allocated from the object pool.\n   * @param fb - The framebuffer to dispose.\n   */ disposeFrameBuffer(fb) {\n        const hash = this._allocatedFramebuffers.get(fb);\n        if (!hash) {\n            console.error(`ObjectPool.disposeFrameBuffer(): framebuffer is not allocated from pool`);\n        } else {\n            this.internalDisposeFrameBuffer(fb);\n            fb.dispose();\n        }\n    }\n    /**\n   * Release a framebuffer back to the object pool.\n   * @param fb - The framebuffer to release.\n   */ releaseFrameBuffer(fb) {\n        const info = this._allocatedFramebuffers.get(fb);\n        if (!info) {\n            console.error(`ObjectPool.releaseFrameBuffer(): framebuffer is not allocated from pool`);\n        } else {\n            info.refcount--;\n            if (info.refcount <= 0) {\n                this.internalDisposeFrameBuffer(fb);\n                const list = this._freeFramebuffers[info.hash];\n                if (list) {\n                    list.push(fb);\n                } else {\n                    this._freeFramebuffers[info.hash] = [\n                        fb\n                    ];\n                }\n            }\n        }\n    }\n    /**\n   * Increment reference counter for given framebuffer\n   * @param fb - The framebuffer to retain\n   */ retainFrameBuffer(fb) {\n        const info = this._allocatedFramebuffers.get(fb);\n        if (!info) {\n            console.error(`ObjectPool.retainFrameBuffer(): framebuffer is not allocated from pool`);\n        } else {\n            info.refcount++;\n        }\n    }\n    /**\n   * Purge the object pool by disposing all free framebuffers and textures.\n   */ purge() {\n        for(const k in this._freeFramebuffers){\n            const list = this._freeFramebuffers[k];\n            if (list) {\n                for (const fb of this._freeFramebuffers[k]){\n                    this.internalDisposeFrameBuffer(fb);\n                    fb.dispose();\n                }\n            }\n        }\n        this._freeFramebuffers = {};\n        for(const k in this._freeTextures){\n            const list = this._freeTextures[k];\n            for (const tex of list){\n                this._memCost -= tex.memCost;\n                tex.dispose();\n            }\n        }\n        this._freeTextures = {};\n    }\n    /** @internal */ internalDisposeFrameBuffer(fb) {\n        if (fb) {\n            // Release attachment textures\n            const colorAttachments = fb.getColorAttachments();\n            if (colorAttachments) {\n                for (const tex of colorAttachments){\n                    this.safeReleaseTexture(tex);\n                }\n            }\n            const depthAttachment = fb.getDepthAttachment();\n            if (depthAttachment) {\n                this.safeReleaseTexture(depthAttachment);\n            }\n            this._allocatedFramebuffers.delete(fb);\n            this._autoReleaseFramebuffers.delete(fb);\n        }\n    }\n    /** @internal */ safeReleaseTexture(texture, purge = false) {\n        const info = this._allocatedTextures.get(texture);\n        if (info) {\n            info.refcount--;\n            if (info.refcount <= 0) {\n                this._allocatedTextures.delete(texture);\n                this._autoReleaseTextures.delete(texture);\n                if (purge || info.dispose) {\n                    this._memCost -= texture.memCost;\n                    texture.dispose();\n                } else {\n                    const list = this._freeTextures[info.hash];\n                    if (list) {\n                        list.push(texture);\n                    } else {\n                        this._freeTextures[info.hash] = [\n                            texture\n                        ];\n                    }\n                }\n            } else if (purge) {\n                info.dispose = true;\n            }\n        }\n    }\n}\n\nexport { Pool };\n//# sourceMappingURL=pool.js.map\n","/**\n * Reflection interface for program builder\n * @public\n */ class PBReflection {\n    /** @internal */ _builder;\n    /** @internal */ _tagList;\n    /** @internal */ _attribList;\n    constructor(builder){\n        this._builder = builder;\n        this._tagList = {};\n        this._attribList = {};\n    }\n    /** Gets all the vertex attributes that was used by the program */ get vertexAttributes() {\n        return this._builder.getVertexAttributes();\n    }\n    /**\n   * Check if specified vertex attribute was used by the program\n   * @param attrib - The vertex attribute to check\n   */ hasVertexAttribute(attrib) {\n        return this.vertexAttributes.indexOf(attrib) >= 0;\n    }\n    /**\n   * Clear all contents\n   */ clear() {\n        this._tagList = {};\n        this._attribList = {};\n    }\n    tag(arg0, arg1) {\n        if (typeof arg0 === 'string') {\n            if (arg1 === undefined) {\n                return this.getTag(arg0);\n            } else {\n                this.addTag(arg0, arg1);\n            }\n        } else {\n            for (const k of Object.keys(arg0)){\n                this.addTag(k, arg0[k]);\n            }\n        }\n    }\n    /**\n   * Gets the variable which is the vertex attribute of specified semantic\n   * @param attrib - The vertex semantic\n   */ attribute(attrib) {\n        return this._attribList[attrib] || null;\n    }\n    /** @internal */ setAttrib(attrib, exp) {\n        this._attribList[attrib] = exp;\n    }\n    /** @internal */ addTag(name, exp) {\n        this._tagList[name] = exp;\n    }\n    /** @internal */ getTag(name) {\n        const getter = this._tagList[name];\n        return getter ? getter(this._builder.getGlobalScope()) : null;\n    }\n}\n\nexport { PBReflection };\n//# sourceMappingURL=reflection.js.map\n","/** @internal */ function expValueToString(deviceType, value) {\n    if (typeof value === 'number' || typeof value === 'boolean' || Array.isArray(value)) {\n        return `${value}`;\n    } else {\n        return value.$ast?.toString(deviceType);\n    }\n}\n/** @internal */ function expValueTypeToString(deviceType, type) {\n    return type?.toTypeName(deviceType);\n}\n/** @internal */ class PBError extends Error {\n}\n/** @internal */ class PBValueOutOfRange extends PBError {\n    value;\n    constructor(value){\n        super();\n        this.value = value;\n    }\n    getMessage(_deviceType) {\n        return `value out of range: ${this.value}`;\n    }\n}\n/** @internal */ class PBTypeCastError extends PBError {\n    value;\n    valueType;\n    expectedType;\n    constructor(value, valueType, expectedType){\n        super();\n        this.value = value;\n        this.valueType = valueType;\n        this.expectedType = expectedType;\n    }\n    getMessage(deviceType) {\n        const valueStr = typeof this.value === 'string' ? this.value : expValueToString(deviceType, this.value);\n        const valueTypeStr = typeof this.valueType === 'string' ? this.valueType : expValueTypeToString(deviceType, this.valueType);\n        const expectedTypeStr = typeof this.expectedType === 'string' ? this.expectedType : expValueTypeToString(deviceType, this.expectedType);\n        return `cannot convert '${valueStr}' of type '${valueTypeStr}' to type ${expectedTypeStr}`;\n    }\n}\n/** @internal */ class PBParamLengthError extends PBError {\n    func;\n    constructor(func){\n        super();\n        this.func = func;\n    }\n    getMessage(_deviceType) {\n        return `wrong argument count for function '${this.func}'`;\n    }\n}\n/** @internal */ class PBParamTypeError extends PBError {\n    func;\n    param;\n    constructor(func, param){\n        super();\n        this.func = func;\n        this.param = param || null;\n    }\n    getMessage(_deviceType) {\n        return `parameter type error for function '${this.func}': ${this.param}`;\n    }\n}\n/** @internal */ class PBParamValueError extends PBError {\n    func;\n    param;\n    reason;\n    constructor(func, param, reason){\n        super();\n        this.func = func;\n        this.param = param || null;\n        this.reason = reason || null;\n    }\n    getMessage(_deviceType) {\n        return `invalid parameter value for function '${this.func}'${this.param ? ': ' + this.param : ''}${this.reason ? ': ' + this.reason : ''}}`;\n    }\n}\n/** @internal */ class PBOverloadingMatchError extends PBError {\n    func;\n    constructor(func){\n        super();\n        this.func = func;\n    }\n    getMessage(_deviceType) {\n        return `No matched overloading found for function '${this.func}'`;\n    }\n}\n/** @internal */ class PBReferenceValueRequired extends PBError {\n    value;\n    constructor(value){\n        super();\n        this.value = value;\n    }\n    getMessage(deviceType) {\n        return `'${expValueToString(deviceType, this.value)}' is not a reference type`;\n    }\n}\n/** @internal */ class PBPointerValueRequired extends PBError {\n    value;\n    constructor(value){\n        super();\n        this.value = value;\n    }\n    getMessage(deviceType) {\n        return `'${expValueToString(deviceType, this.value)}' is not a pointer type`;\n    }\n}\n/** @internal */ class PBDeviceNotSupport extends PBError {\n    feature;\n    constructor(feature){\n        super();\n        this.feature = feature;\n    }\n    getMessage(deviceType) {\n        return `feature not support for ${deviceType} device: ${this.feature}`;\n    }\n}\n/** @internal */ class PBNonScopedFunctionCall extends PBError {\n    funcName;\n    constructor(funcName){\n        super();\n        this.funcName = funcName;\n    }\n    getMessage(_deviceType) {\n        return `function call must be made inside a function scope: ${this.funcName}()`;\n    }\n}\n/** @internal */ class PBASTError extends PBError {\n    ast;\n    text;\n    constructor(ast, text){\n        super();\n        this.ast = ast;\n        this.text = text;\n    }\n    getMessage(deviceType) {\n        return `${this.text}: ${this.ast.toString(deviceType)}`;\n    }\n}\n/** @internal */ class PBInternalError extends PBError {\n    constructor(desc){\n        super(desc);\n    }\n    getMessage(_deviceType) {\n        return `Internal error: ${this.message}`;\n    }\n}\n\nexport { PBASTError, PBDeviceNotSupport, PBError, PBInternalError, PBNonScopedFunctionCall, PBOverloadingMatchError, PBParamLengthError, PBParamTypeError, PBParamValueError, PBPointerValueRequired, PBReferenceValueRequired, PBTypeCastError, PBValueOutOfRange, expValueToString, expValueTypeToString };\n//# sourceMappingURL=errors.js.map\n","let currentProgramBuilder = null;\n/** @internal */ function setCurrentProgramBuilder(pb) {\n    currentProgramBuilder = pb;\n}\n/** @internal */ function getCurrentProgramBuilder() {\n    return currentProgramBuilder;\n}\n\nexport { getCurrentProgramBuilder, setCurrentProgramBuilder };\n//# sourceMappingURL=misc.js.map\n","import { ShaderType } from '../base_types.js';\nimport { semanticToAttrib } from '../gpuobject.js';\nimport { PBTextureType, PBPrimitiveTypeInfo, PBPrimitiveType, PBAddressSpace, PBPointerTypeInfo, typeBool, typeF32, typeI32, typeU32, typeVoid } from './types.js';\nimport { PBASTError, PBTypeCastError, PBInternalError, PBParamTypeError } from './errors.js';\nimport { getCurrentProgramBuilder } from './misc.js';\nimport { ASSERT } from '@zephyr3d/base';\n\nconst BuiltinInputStructNameVS = 'zVSInput';\nconst BuiltinOutputStructNameVS = 'zVSOutput';\nconst BuiltinInputStructNameFS = 'zFSInput';\nconst BuiltinOutputStructNameFS = 'zFSOutput';\nconst BuiltinInputStructNameCS = 'zCSInput';\nconst BuiltinOutputStructNameCS = 'zCSOutput';\nconst BuiltinParamNameVS = 'zVertexInput';\nconst BuiltinParamNameFS = 'zVertexOutput';\nconst BuiltinParamNameCS = 'zComputeInput';\nconst BuiltinInputStructInstanceNameVS = 'zVSInputCpy';\nconst BuiltinOutputStructInstanceNameVS = 'zVSOutputCpy';\nconst BuiltinInputStructInstanceNameFS = 'zFSInputCpy';\nconst BuiltinOutputStructInstanceNameFS = 'zFSOutputCpy';\nconst BuiltinInputStructInstanceNameCS = 'zCSInputCpy';\nconst BuiltinOutputStructInstanceNameCS = 'zCSOutputCpy';\n/** @internal */ var DeclareType = /*#__PURE__*/ function(DeclareType) {\n    DeclareType[DeclareType[\"DECLARE_TYPE_NONE\"] = 0] = \"DECLARE_TYPE_NONE\";\n    DeclareType[DeclareType[\"DECLARE_TYPE_IN\"] = 1] = \"DECLARE_TYPE_IN\";\n    DeclareType[DeclareType[\"DECLARE_TYPE_OUT\"] = 2] = \"DECLARE_TYPE_OUT\";\n    DeclareType[DeclareType[\"DECLARE_TYPE_WORKGROUP\"] = 3] = \"DECLARE_TYPE_WORKGROUP\";\n    DeclareType[DeclareType[\"DECLARE_TYPE_UNIFORM\"] = 4] = \"DECLARE_TYPE_UNIFORM\";\n    DeclareType[DeclareType[\"DECLARE_TYPE_STORAGE\"] = 5] = \"DECLARE_TYPE_STORAGE\";\n    return DeclareType;\n}({});\n/** @internal */ var ShaderPrecisionType = /*#__PURE__*/ function(ShaderPrecisionType) {\n    ShaderPrecisionType[ShaderPrecisionType[\"NONE\"] = 0] = \"NONE\";\n    ShaderPrecisionType[ShaderPrecisionType[\"HIGH\"] = 1] = \"HIGH\";\n    ShaderPrecisionType[ShaderPrecisionType[\"MEDIUM\"] = 2] = \"MEDIUM\";\n    ShaderPrecisionType[ShaderPrecisionType[\"LOW\"] = 3] = \"LOW\";\n    return ShaderPrecisionType;\n}({});\n/** @internal */ function getBuiltinParamName(shaderType) {\n    switch(shaderType){\n        case ShaderType.Vertex:\n            return BuiltinParamNameVS;\n        case ShaderType.Fragment:\n            return BuiltinParamNameFS;\n        case ShaderType.Compute:\n            return BuiltinParamNameCS;\n        default:\n            return null;\n    }\n}\n/** @internal */ function getBuiltinInputStructInstanceName(shaderType) {\n    switch(shaderType){\n        case ShaderType.Vertex:\n            return BuiltinInputStructInstanceNameVS;\n        case ShaderType.Fragment:\n            return BuiltinInputStructInstanceNameFS;\n        case ShaderType.Compute:\n            return BuiltinInputStructInstanceNameCS;\n        default:\n            return null;\n    }\n}\n/** @internal */ function getBuiltinOutputStructInstanceName(shaderType) {\n    switch(shaderType){\n        case ShaderType.Vertex:\n            return BuiltinOutputStructInstanceNameVS;\n        case ShaderType.Fragment:\n            return BuiltinOutputStructInstanceNameFS;\n        case ShaderType.Compute:\n            return BuiltinOutputStructInstanceNameCS;\n        default:\n            return null;\n    }\n}\n/** @internal */ function getBuiltinInputStructName(shaderType) {\n    switch(shaderType){\n        case ShaderType.Vertex:\n            return BuiltinInputStructNameVS;\n        case ShaderType.Fragment:\n            return BuiltinInputStructNameFS;\n        case ShaderType.Compute:\n            return BuiltinInputStructNameCS;\n        default:\n            return null;\n    }\n}\n/** @internal */ function getBuiltinOutputStructName(shaderType) {\n    switch(shaderType){\n        case ShaderType.Vertex:\n            return BuiltinOutputStructNameVS;\n        case ShaderType.Fragment:\n            return BuiltinOutputStructNameFS;\n        case ShaderType.Compute:\n            return BuiltinOutputStructNameCS;\n        default:\n            return null;\n    }\n}\n/** @internal */ function getTextureSampleType(type) {\n    switch(type.textureType){\n        case PBTextureType.TEX_1D:\n        case PBTextureType.TEX_STORAGE_1D:\n        case PBTextureType.TEX_2D:\n        case PBTextureType.TEX_STORAGE_2D:\n        case PBTextureType.TEX_2D_ARRAY:\n        case PBTextureType.TEX_STORAGE_2D_ARRAY:\n        case PBTextureType.TEX_3D:\n        case PBTextureType.TEX_STORAGE_3D:\n        case PBTextureType.TEX_CUBE:\n        case PBTextureType.TEX_EXTERNAL:\n            return new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4);\n        case PBTextureType.TEX_DEPTH_2D_ARRAY:\n        case PBTextureType.TEX_DEPTH_2D:\n        case PBTextureType.TEX_DEPTH_CUBE:\n            return new PBPrimitiveTypeInfo(PBPrimitiveType.F32);\n        case PBTextureType.ITEX_2D_ARRAY:\n        case PBTextureType.ITEX_1D:\n        case PBTextureType.ITEX_2D:\n        case PBTextureType.ITEX_3D:\n        case PBTextureType.ITEX_CUBE:\n            return new PBPrimitiveTypeInfo(PBPrimitiveType.I32);\n        case PBTextureType.UTEX_2D_ARRAY:\n        case PBTextureType.UTEX_1D:\n        case PBTextureType.UTEX_2D:\n        case PBTextureType.UTEX_3D:\n        case PBTextureType.UTEX_CUBE:\n            return new PBPrimitiveTypeInfo(PBPrimitiveType.U32);\n        default:\n            return null;\n    }\n}\n/** @internal */ function genSamplerName(textureName, comparison) {\n    return `ch_auto_sampler_${textureName}${comparison ? '_comparison' : ''}`;\n}\n/** @internal */ const builtinVariables = {\n    webgl: {\n        position: {\n            name: 'gl_Position',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4),\n            stage: 'vertex'\n        },\n        pointSize: {\n            name: 'gl_PointSize',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32),\n            stage: 'vertex'\n        },\n        fragCoord: {\n            name: 'gl_FragCoord',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4),\n            stage: 'fragment'\n        },\n        frontFacing: {\n            name: 'gl_FrontFacing',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.BOOL),\n            stage: 'fragment'\n        },\n        fragDepth: {\n            name: 'gl_FragDepthEXT',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32),\n            inOrOut: 'out',\n            extension: 'GL_EXT_frag_depth',\n            stage: 'fragment'\n        }\n    },\n    webgl2: {\n        vertexIndex: {\n            name: 'gl_VertexID',\n            semantic: 'vertex_index',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32),\n            inOrOut: 'in',\n            stage: 'vertex'\n        },\n        instanceIndex: {\n            name: 'gl_InstanceID',\n            semantic: 'instance_index',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32),\n            inOrOut: 'in',\n            stage: 'vertex'\n        },\n        position: {\n            name: 'gl_Position',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4),\n            stage: 'vertex'\n        },\n        pointSize: {\n            name: 'gl_PointSize',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32),\n            stage: 'vertex'\n        },\n        fragCoord: {\n            name: 'gl_FragCoord',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4),\n            stage: 'fragment'\n        },\n        frontFacing: {\n            name: 'gl_FrontFacing',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.BOOL),\n            stage: 'fragment'\n        },\n        fragDepth: {\n            name: 'gl_FragDepth',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32),\n            stage: 'fragment'\n        }\n    },\n    webgpu: {\n        vertexIndex: {\n            name: 'zVertexId',\n            semantic: 'vertex_index',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32),\n            inOrOut: 'in',\n            stage: 'vertex'\n        },\n        instanceIndex: {\n            name: 'zInstanceId',\n            semantic: 'instance_index',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32),\n            inOrOut: 'in',\n            stage: 'vertex'\n        },\n        position: {\n            name: 'zPosition',\n            semantic: 'position',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4),\n            inOrOut: 'out',\n            stage: 'vertex'\n        },\n        fragCoord: {\n            name: 'zFragCoord',\n            semantic: 'position',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4),\n            inOrOut: 'in',\n            stage: 'fragment'\n        },\n        frontFacing: {\n            name: 'zFrontFacing',\n            semantic: 'front_facing',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.BOOL),\n            inOrOut: 'in',\n            stage: 'fragment'\n        },\n        fragDepth: {\n            name: 'zFragDepth',\n            semantic: 'frag_depth',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32),\n            inOrOut: 'out',\n            stage: 'fragment'\n        },\n        localInvocationId: {\n            name: 'zLocalInvocationId',\n            semantic: 'local_invocation_id',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32VEC3),\n            inOrOut: 'in',\n            stage: 'compute'\n        },\n        globalInvocationId: {\n            name: 'zGlobalInvocationId',\n            semantic: 'global_invocation_id',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32VEC3),\n            inOrOut: 'in',\n            stage: 'compute'\n        },\n        workGroupId: {\n            name: 'zWorkGroupId',\n            semantic: 'workgroup_id',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32VEC3),\n            inOrOut: 'in',\n            stage: 'compute'\n        },\n        numWorkGroups: {\n            name: 'zNumWorkGroups',\n            semantic: 'num_workgroups',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32VEC3),\n            inOrOut: 'in',\n            stage: 'compute'\n        },\n        sampleMaskIn: {\n            name: 'zSampleMaskIn',\n            semantic: 'sample_mask_in',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32),\n            inOrOut: 'in',\n            stage: 'fragment'\n        },\n        sampleMaskOut: {\n            name: 'zSampleMaskOut',\n            semantic: 'sample_mask_out',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32),\n            inOrOut: 'out',\n            stage: 'fragment'\n        },\n        sampleIndex: {\n            name: 'zSampleIndex',\n            semantic: 'sample_index',\n            type: new PBPrimitiveTypeInfo(PBPrimitiveType.U32),\n            inOrOut: 'in',\n            stage: 'fragment'\n        }\n    }\n};\nfunction toFixed(n) {\n    return n % 1 === 0 ? n.toFixed(1) : String(n);\n}\nfunction toInt(n) {\n    return String(n | 0);\n}\nfunction toUint(n) {\n    return String(n >>> 0);\n}\nfunction unbracket(e) {\n    e = e.trim();\n    if (e[0] === '(' && e[e.length - 1] === ')') {\n        let match = 0;\n        for(let i = 1; i < e.length - 1; i++){\n            if (e[i] === '(') {\n                match++;\n            } else if (e[i] === ')') {\n                match--;\n                if (match < 0) {\n                    break;\n                }\n            }\n        }\n        if (match > 0) {\n            throw new PBInternalError(`Invalid expression: ${e}`);\n        } else if (match === 0) {\n            return e.substring(1, e.length - 1);\n        }\n    }\n    return e;\n}\n/** @internal */ class ShaderAST {\n    isReference() {\n        return false;\n    }\n    isPointer() {\n        return !!this.getType()?.isPointerType();\n    }\n    getType() {\n        return null;\n    }\n    toWebGL(_indent, _ctx) {\n        return '';\n    }\n    toWebGL2(_indent, _ctx) {\n        return '';\n    }\n    toWGSL(_indent, _ctx) {\n        return '';\n    }\n    toString(_deviceType) {\n        return this.constructor.name;\n    }\n}\n/** @internal */ class ASTExpression extends ShaderAST {\n}\n/** @internal */ class ASTFunctionParameter extends ASTExpression {\n    /** @internal */ paramAST;\n    /** @internal */ writable;\n    constructor(init){\n        super();\n        this.paramAST = init;\n        this.writable = false;\n    }\n    getType() {\n        return this.paramAST.getType();\n    }\n    markWritable() {\n        if (this.paramAST instanceof ASTPrimitive) {\n            console.warn(`Write to non-output parameter ${this.paramAST.value.$str}`);\n        }\n        this.writable = true;\n    }\n    isWritable() {\n        return this.writable;\n    }\n    getAddressSpace() {\n        return this.paramAST.getAddressSpace();\n    }\n    isConstExp() {\n        return this.paramAST.isConstExp();\n    }\n    isReference() {\n        return this.paramAST.isReference();\n    }\n    toWebGL(indent, ctx) {\n        return this.paramAST.toWebGL(indent, ctx);\n    }\n    toWebGL2(indent, ctx) {\n        return this.paramAST.toWebGL2(indent, ctx);\n    }\n    toWGSL(indent, ctx) {\n        return this.paramAST.toWGSL(indent, ctx);\n    }\n}\n/** @internal */ class ASTScope extends ShaderAST {\n    statements;\n    constructor(){\n        super();\n        this.statements = [];\n    }\n    toWebGL(indent, ctx) {\n        return this.statements.filter((stmt)=>!(stmt instanceof ASTCallFunction) || stmt.isStatement).map((stmt)=>stmt.toWebGL(indent, ctx)).join('');\n    }\n    toWebGL2(indent, ctx) {\n        return this.statements.filter((stmt)=>!(stmt instanceof ASTCallFunction) || stmt.isStatement).map((stmt)=>stmt.toWebGL2(indent, ctx)).join('');\n    }\n    toWGSL(indent, ctx) {\n        return this.statements.filter((stmt)=>!(stmt instanceof ASTCallFunction) || stmt.isStatement).map((stmt)=>{\n            if (stmt instanceof ASTCallFunction) {\n                if (!stmt.getType().isVoidType()) {\n                    return `${indent}_ = ${stmt.toWGSL('', ctx)}`;\n                }\n            }\n            return stmt.toWGSL(indent, ctx);\n        }).join('');\n    }\n}\n/** @internal */ class ASTNakedScope extends ASTScope {\n    toWebGL(indent, ctx) {\n        return `${indent}{\\n${super.toWebGL(indent + ' ', ctx)}${indent}}\\n`;\n    }\n    toWebGL2(indent, ctx) {\n        return `${indent}{\\n${super.toWebGL2(indent + ' ', ctx)}${indent}}\\n`;\n    }\n    toWGSL(indent, ctx) {\n        return `${indent}{\\n${super.toWGSL(indent + ' ', ctx)}${indent}}\\n`;\n    }\n}\n/** @internal */ class ASTGlobalScope extends ASTScope {\n    /** @internal */ uniforms;\n    constructor(){\n        super();\n        this.uniforms = [];\n    }\n    findFunctions(name) {\n        const result = [];\n        for (const stmt of this.statements){\n            if (stmt instanceof ASTFunction && stmt.name === name) {\n                result.push(stmt);\n            }\n        }\n        return result;\n    }\n    toWebGL(indent, ctx) {\n        // TODO: precision\n        const precisions = `${indent}precision highp float;\\n${indent}precision highp int;\\n`;\n        const version = `${indent}#version 100\\n`;\n        const body = ctx.types.map((val)=>val.toWebGL(indent, ctx)).join('') + this.uniforms.map((uniform)=>uniform.toWebGL(indent, ctx)).join('') + ctx.inputs.map((input)=>input.toWebGL(indent, ctx)).join('') + ctx.outputs.map((output)=>output.toWebGL(indent, ctx)).join('') + super.toWebGL(indent, ctx);\n        for (const k of ctx.builtins){\n            const info = builtinVariables.webgl[k];\n            if (info.extension) {\n                ctx.extensions.add(info.extension);\n            }\n        }\n        const extensions = [\n            ...ctx.extensions\n        ].map((s)=>`${indent}#extension ${s}: enable\\n`).join('');\n        const defines = ctx.defines.join('');\n        return version + extensions + precisions + defines + body;\n    }\n    toWebGL2(indent, ctx) {\n        const precisions = `${indent}precision highp float;\\n${indent}precision highp int;\\n`;\n        const version = `${indent}#version 300 es\\n`;\n        const body = ctx.types.map((val)=>val.toWebGL2(indent, ctx)).join('') + this.uniforms.map((uniform)=>uniform.toWebGL2(indent, ctx)).join('') + ctx.inputs.map((input)=>input.toWebGL2(indent, ctx)).join('') + ctx.outputs.map((output)=>output.toWebGL2(indent, ctx)).join('') + super.toWebGL2(indent, ctx);\n        for (const k of ctx.builtins){\n            const info = builtinVariables.webgl2[k];\n            if (info.extension) {\n                ctx.extensions.add(info.extension);\n            }\n        }\n        const extensions = [\n            ...ctx.extensions\n        ].map((s)=>`${indent}#extension ${s}: enable\\n`).join('');\n        const defines = ctx.defines.join('');\n        return version + extensions + precisions + defines + body;\n    }\n    toWGSL(indent, ctx) {\n        const structNames = ctx.type === ShaderType.Vertex ? [\n            BuiltinInputStructNameVS,\n            BuiltinOutputStructNameVS\n        ] : ctx.type === ShaderType.Fragment ? [\n            BuiltinInputStructNameFS,\n            BuiltinOutputStructNameFS\n        ] : [\n            BuiltinInputStructNameCS\n        ];\n        const usedBuiltins = [];\n        for (const k of ctx.builtins){\n            usedBuiltins.push(builtinVariables.webgpu[k].name);\n        }\n        const allBuiltins = Object.keys(builtinVariables.webgpu).map((val)=>builtinVariables.webgpu[val].name);\n        for (const type of ctx.types){\n            if (type instanceof ASTStructDefine && structNames.indexOf(type.type.structName) >= 0) {\n                for(let i = type.type.structMembers.length - 1; i >= 0; i--){\n                    const member = type.type.structMembers[i];\n                    if (allBuiltins.indexOf(member.name) >= 0 && usedBuiltins.indexOf(member.name) < 0) {\n                        type.type.structMembers.splice(i, 1);\n                        type.prefix.splice(i, 1);\n                    }\n                }\n            }\n        }\n        ctx.types = ctx.types.filter((val)=>!(val instanceof ASTStructDefine) || val.type.structMembers.length > 0);\n        return ctx.types.map((val)=>val.toWGSL(indent, ctx)).join('') + this.uniforms.map((uniform)=>uniform.toWGSL(indent, ctx)).join('') + super.toWGSL(indent, ctx);\n    }\n}\n/** @internal */ class ASTPrimitive extends ASTExpression {\n    /** @internal */ value;\n    /** @internal */ ref;\n    /** @internal */ writable;\n    /** @internal */ constExp;\n    constructor(value){\n        super();\n        this.value = value;\n        this.ref = null;\n        this.writable = false;\n        this.constExp = false;\n    }\n    get name() {\n        return this.value.$str;\n    }\n    isReference() {\n        return true;\n    }\n    isConstExp() {\n        return this.constExp;\n    }\n    markWritable() {\n        this.writable = true;\n        this.constExp = false;\n        if (this.ref) {\n            this.ref.markWritable();\n        }\n    }\n    isWritable() {\n        const type = this.getType();\n        return this.writable || type.isAtomicI32() || type.isAtomicU32() || type.isStructType() && type.haveAtomicMembers();\n    }\n    getAddressSpace() {\n        switch(this.value.$declareType){\n            case 4:\n                return PBAddressSpace.UNIFORM;\n            case 5:\n                return PBAddressSpace.STORAGE;\n            case 1:\n            case 2:\n                return null;\n            default:\n                return this.value.$global ? PBAddressSpace.PRIVATE : PBAddressSpace.FUNCTION;\n        }\n    }\n    getType() {\n        return this.value.$typeinfo;\n    }\n    toWebGL(_indent, _ctx) {\n        return this.name;\n    }\n    toWebGL2(_indent, _ctx) {\n        return this.name;\n    }\n    toWGSL(indent, ctx) {\n        if (this.value.$declareType === 1) {\n            const structName = getBuiltinInputStructInstanceName(ctx.type);\n            return ctx.global[structName][this.name].$ast.toWGSL(indent, ctx);\n        } else if (this.value.$declareType === 2) {\n            const structName = getBuiltinOutputStructInstanceName(ctx.type);\n            return ctx.global[structName][this.name].$ast.toWGSL(indent, ctx);\n        } else {\n            return this.name;\n        }\n    }\n    toString(_deviceType) {\n        return this.name;\n    }\n}\n/** @internal */ class ASTLValue extends ShaderAST {\n}\n/** @internal */ class ASTLValueScalar extends ASTLValue {\n    /** @internal */ value;\n    constructor(value){\n        super();\n        if (value.getAddressSpace() === PBAddressSpace.UNIFORM) {\n            throw new PBASTError(value, 'cannot assign to uniform variable');\n        }\n        this.value = value;\n        if (this.value instanceof ASTCallFunction) {\n            this.value.isStatement = false;\n        }\n    }\n    getType() {\n        return this.value.getType();\n    }\n    markWritable() {\n        this.value.markWritable();\n    }\n    isWritable() {\n        return this.value.isWritable();\n    }\n    isReference() {\n        return this.value.isReference();\n    }\n    toWebGL(indent, ctx) {\n        return this.value.toWebGL(indent, ctx);\n    }\n    toWebGL2(indent, ctx) {\n        return this.value.toWebGL2(indent, ctx);\n    }\n    toWGSL(indent, ctx) {\n        return this.value.toWGSL(indent, ctx);\n    }\n    toString(deviceType) {\n        return this.value.toString(deviceType);\n    }\n}\n/** @internal */ class ASTLValueHash extends ASTLValue {\n    /** @internal */ scope;\n    /** @internal */ field;\n    /** @internal */ type;\n    constructor(scope, field, type){\n        super();\n        this.scope = scope;\n        this.field = field;\n        this.type = type;\n    }\n    getType() {\n        return this.type;\n    }\n    markWritable() {\n        this.scope.markWritable();\n    }\n    isWritable() {\n        return this.scope.isWritable();\n    }\n    isReference() {\n        return this.scope.isReference();\n    }\n    toWebGL(indent, ctx) {\n        return `${this.scope.toWebGL(indent, ctx)}.${this.field}`;\n    }\n    toWebGL2(indent, ctx) {\n        return `${this.scope.toWebGL2(indent, ctx)}.${this.field}`;\n    }\n    toWGSL(indent, ctx) {\n        const scope = this.scope.isPointer() ? new ASTReferenceOf(this.scope) : this.scope;\n        return `${scope.toWGSL(indent, ctx)}.${this.field}`;\n    }\n    toString(deviceType) {\n        const scope = this.scope.isPointer() ? new ASTReferenceOf(this.scope) : this.scope;\n        return `${scope.toString(deviceType)}.${this.field}`;\n    }\n}\n/** @internal */ class ASTLValueArray extends ASTLValue {\n    /** @internal */ value;\n    /** @internal */ index;\n    /** @internal */ type;\n    constructor(value, index, type){\n        super();\n        this.value = value;\n        this.index = index;\n        this.type = type;\n        if (this.index instanceof ASTCallFunction) {\n            this.index.isStatement = false;\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    markWritable() {\n        this.value.markWritable();\n    }\n    isWritable() {\n        return this.value.isWritable();\n    }\n    isReference() {\n        return this.value.isReference();\n    }\n    toWebGL(indent, ctx) {\n        return `${this.value.toWebGL(indent, ctx)}[${this.index.toWebGL(indent, ctx)}]`;\n    }\n    toWebGL2(indent, ctx) {\n        return `${this.value.toWebGL2(indent, ctx)}[${this.index.toWebGL2(indent, ctx)}]`;\n    }\n    toWGSL(indent, ctx) {\n        const value = this.value.isPointer() ? new ASTReferenceOf(this.value) : this.value;\n        return `${value.toWGSL(indent, ctx)}[${this.index.toWGSL(indent, ctx)}]`;\n    }\n    toString(deviceType) {\n        const value = this.value.isPointer() ? new ASTReferenceOf(this.value) : this.value;\n        return `${value.toString(deviceType)}[${this.index.toString(deviceType)}]`;\n    }\n}\n/** @internal */ class ASTLValueDeclare extends ASTLValue {\n    /** @internal */ value;\n    constructor(value){\n        super();\n        this.value = value;\n        this.value.constExp = true;\n    }\n    getType() {\n        return this.value.getType();\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    isReference() {\n        return true;\n    }\n    toWebGL(_indent, _ctx) {\n        let prefix = '';\n        switch(this.value.value.$declareType){\n            case 1:\n            case 2:\n            case 4:\n            case 5:\n                throw new Error('invalid declare type');\n            default:\n                prefix = this.value.constExp && !this.value.isWritable() && !this.getType().isStructType() ? 'const ' : '';\n                break;\n        }\n        {\n            return `${prefix}${this.getType().toTypeName('webgl', this.value.name)}`;\n        }\n    }\n    toWebGL2(_indent, _ctx) {\n        let prefix = '';\n        switch(this.value.value.$declareType){\n            case 1:\n            case 2:\n            case 4:\n            case 5:\n                throw new Error('invalid declare type');\n            default:\n                prefix = this.value.constExp && !this.value.isWritable() && !this.getType().isStructType() ? 'const ' : '';\n                break;\n        }\n        {\n            return `${prefix}${this.getType().toTypeName('webgl2', this.value.name)}`;\n        }\n    }\n    toWGSL(_indent, _ctx) {\n        let prefix;\n        switch(this.value.value.$declareType){\n            case 1:\n            case 2:\n            case 4:\n            case 5:\n                throw new Error('invalid declare type');\n            default:\n                {\n                    const addressSpace = this.value.getAddressSpace();\n                    const readonly = this.getType().isPointerType() || !this.value.isWritable() && (addressSpace === PBAddressSpace.PRIVATE || addressSpace === PBAddressSpace.FUNCTION);\n                    const moduleScope = addressSpace === PBAddressSpace.PRIVATE;\n                    const storageAccessMode = addressSpace === PBAddressSpace.STORAGE && this.value.isWritable() ? ', read_write' : '';\n                    const decorator = addressSpace !== PBAddressSpace.FUNCTION ? `<${addressSpace}${storageAccessMode}>` : '';\n                    prefix = readonly ? moduleScope ? 'const ' : 'let ' : `var${decorator} `;\n                    break;\n                }\n        }\n        {\n            // const decl = this.value.value.$global ? this.getType().toTypeName('webgpu', this.value.name) : this.value.name;\n            const type = this.getType();\n            if (type.isPointerType() && (this.value.isWritable() || this.value.ref.isWritable())) {\n                type.writable = true;\n            }\n            const decl = type.toTypeName('webgpu', this.value.name);\n            return `${prefix}${decl}`;\n        }\n    }\n    toString(deviceType) {\n        return this.value.toString(deviceType);\n    }\n}\n/** @internal */ class ASTShaderExpConstructor extends ASTExpression {\n    /** @internal */ type;\n    /** @internal */ args;\n    /** @internal */ constExp;\n    /** @internal */ convertedArgs;\n    constructor(type, args){\n        super();\n        this.type = type;\n        this.args = args;\n        this.convertedArgs = null;\n        for (const arg of args){\n            if (arg === null || arg === undefined) {\n                throw new Error('invalid constructor argument');\n            }\n            if (arg instanceof ASTCallFunction) {\n                arg.isStatement = false;\n            }\n            this.constExp &&= !(arg instanceof ASTExpression) || arg.isConstExp();\n        }\n        const deviceType = getCurrentProgramBuilder().getDevice().type;\n        const overloads = this.type.getConstructorOverloads(deviceType);\n        for (const overload of overloads){\n            this.convertedArgs = convertArgs(this.args, overload);\n            if (this.convertedArgs) {\n                break;\n            }\n        }\n        if (!this.convertedArgs) {\n            throw new Error(`no matching overload function found for type ${this.type.toTypeName(deviceType)}`);\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    isConstExp() {\n        return this.constExp;\n    }\n    getAddressSpace() {\n        return null;\n    }\n    toWebGL(indent, ctx) {\n        const c = this.convertedArgs.args.map((arg)=>unbracket(arg.toWebGL(indent, ctx))).join(',');\n        return `${this.convertedArgs.name}(${c})`;\n    }\n    toWebGL2(indent, ctx) {\n        const c = this.convertedArgs.args.map((arg)=>unbracket(arg.toWebGL2(indent, ctx))).join(',');\n        return `${this.convertedArgs.name}(${c})`;\n    }\n    toWGSL(indent, ctx) {\n        const c = this.convertedArgs.args.map((arg)=>unbracket(arg.toWGSL(indent, ctx))).join(',');\n        return `${this.convertedArgs.name}(${c})`;\n    }\n    toString(_deviceType) {\n        return 'constructor';\n    }\n}\n/** @internal */ class ASTScalar extends ASTExpression {\n    /** @internal */ value;\n    /** @internal */ type;\n    constructor(value, type){\n        super();\n        this.value = value;\n        this.type = type;\n        if (typeof value === 'number') {\n            if (type.primitiveType === PBPrimitiveType.BOOL) {\n                throw new PBTypeCastError(value, typeof value, type);\n            }\n            if (type.primitiveType === PBPrimitiveType.I32 && (!Number.isInteger(value) || value < 0x80000000 >> 0 || value > 0xffffffff)) {\n                throw new PBTypeCastError(value, typeof value, type);\n            }\n            if (value < 0 && type.primitiveType === PBPrimitiveType.U32 && (!Number.isInteger(value) || value < 0 || value > 0xffffffff)) {\n                throw new PBTypeCastError(value, typeof value, type);\n            }\n        } else if (type.primitiveType !== PBPrimitiveType.BOOL) {\n            throw new PBTypeCastError(value, typeof value, type);\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    isConstExp() {\n        return true;\n    }\n    getAddressSpace() {\n        return null;\n    }\n    toWebGL(_indent, _ctx) {\n        switch(this.type.primitiveType){\n            case PBPrimitiveType.F32:\n                return toFixed(this.value);\n            case PBPrimitiveType.I32:\n                return toInt(this.value);\n            case PBPrimitiveType.U32:\n                return `${toUint(this.value)}u`;\n            case PBPrimitiveType.BOOL:\n                return String(!!this.value);\n            default:\n                throw new Error('Invalid scalar type');\n        }\n    }\n    toWebGL2(_indent, _ctx) {\n        switch(this.type.primitiveType){\n            case PBPrimitiveType.F32:\n                return toFixed(this.value);\n            case PBPrimitiveType.I32:\n                return toInt(this.value);\n            case PBPrimitiveType.U32:\n                return `${toUint(this.value)}u`;\n            case PBPrimitiveType.BOOL:\n                return String(!!this.value);\n            default:\n                throw new Error('Invalid scalar type');\n        }\n    }\n    toWGSL(_indent, _ctx) {\n        switch(this.type.primitiveType){\n            case PBPrimitiveType.F32:\n                return toFixed(this.value);\n            case PBPrimitiveType.I32:\n                return toInt(this.value);\n            case PBPrimitiveType.U32:\n                return `${toUint(this.value)}u`;\n            case PBPrimitiveType.BOOL:\n                return String(!!this.value);\n            default:\n                throw new Error('Invalid scalar type');\n        }\n    }\n    toString(_deviceType) {\n        return `${this.value}`;\n    }\n}\n/** @internal */ class ASTHash extends ASTExpression {\n    /** @internal */ source;\n    /** @internal */ field;\n    /** @internal */ type;\n    constructor(source, field, type){\n        super();\n        this.source = source;\n        this.field = field;\n        this.type = type;\n        if (this.source instanceof ASTCallFunction) {\n            this.source.isStatement = false;\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    isReference() {\n        return this.source.isReference();\n    }\n    isConstExp() {\n        return this.source.isConstExp();\n    }\n    markWritable() {\n        this.source.markWritable();\n    }\n    isWritable() {\n        return this.source.isWritable();\n    }\n    getAddressSpace() {\n        return this.source.getAddressSpace();\n    }\n    toWebGL(indent, ctx) {\n        return this.source instanceof ASTScalar ? `(${this.source.toWebGL(indent, ctx)}).${this.field}` : `${this.source.toWebGL(indent, ctx)}.${this.field}`;\n    }\n    toWebGL2(indent, ctx) {\n        return this.source instanceof ASTScalar ? `(${this.source.toWebGL(indent, ctx)}).${this.field}` : `${this.source.toWebGL(indent, ctx)}.${this.field}`;\n    }\n    toWGSL(indent, ctx) {\n        const source = this.source.isPointer() ? new ASTReferenceOf(this.source) : this.source;\n        return source instanceof ASTScalar ? `(${source.toWGSL(indent, ctx)}).${this.field}` : `${source.toWGSL(indent, ctx)}.${this.field}`;\n    }\n    toString(deviceType) {\n        const source = this.source.isPointer() ? new ASTReferenceOf(this.source) : this.source;\n        return `${source.toString(deviceType)}.${this.field}`;\n    }\n}\n/** @internal */ class ASTCast extends ASTExpression {\n    /** @internal */ sourceValue;\n    /** @internal */ castType;\n    constructor(source, type){\n        super();\n        this.sourceValue = source;\n        this.castType = type;\n        if (this.sourceValue instanceof ASTCallFunction) {\n            this.sourceValue.isStatement = false;\n        }\n    }\n    getType() {\n        return this.castType;\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    isConstExp() {\n        return this.sourceValue.isConstExp();\n    }\n    getAddressSpace() {\n        return null;\n    }\n    toWebGL(indent, ctx) {\n        if (!this.castType.isCompatibleType(this.sourceValue.getType())) {\n            return `${this.castType.toTypeName('webgl')}(${unbracket(this.sourceValue.toWebGL(indent, ctx))})`;\n        } else {\n            return this.sourceValue.toWebGL(indent, ctx);\n        }\n    }\n    toWebGL2(indent, ctx) {\n        if (!this.castType.isCompatibleType(this.sourceValue.getType())) {\n            return `${this.castType.toTypeName('webgl2')}(${unbracket(this.sourceValue.toWebGL2(indent, ctx))})`;\n        } else {\n            return this.sourceValue.toWebGL2(indent, ctx);\n        }\n    }\n    toWGSL(indent, ctx) {\n        if (!this.castType.isCompatibleType(this.sourceValue.getType())) {\n            return `${this.castType.toTypeName('webgpu')}(${unbracket(this.sourceValue.toWGSL(indent, ctx))})`;\n        } else {\n            return this.sourceValue.toWGSL(indent, ctx);\n        }\n    }\n    toString(deviceType) {\n        return `${this.castType.toTypeName(deviceType)}(${unbracket(this.sourceValue.toString(deviceType))})`;\n    }\n}\n/** @internal */ class ASTAddressOf extends ASTExpression {\n    /** @internal */ value;\n    /** @internal */ type;\n    constructor(value){\n        super();\n        ASSERT(value.isReference(), 'no pointer type for non-reference values');\n        this.value = value;\n        this.type = new PBPointerTypeInfo(value.getType(), value.getAddressSpace());\n    }\n    getType() {\n        return this.type;\n    }\n    isConstExp() {\n        return false;\n    }\n    markWritable() {\n        const addressSpace = this.value.getAddressSpace();\n        if (addressSpace === PBAddressSpace.UNIFORM) {\n            throw new PBASTError(this.value, 'uniforms are not writable');\n        }\n        this.value.markWritable();\n    }\n    isWritable() {\n        return this.value.isWritable();\n    }\n    getAddressSpace() {\n        return this.value.getAddressSpace();\n    }\n    toWebGL(_indent, _ctx) {\n        throw new Error('GLSL does not support pointer type');\n    }\n    toWebGL2(_indent, _ctx) {\n        throw new Error('GLSL does not support pointer type');\n    }\n    toWGSL(indent, ctx) {\n        const ast = this.value instanceof ASTFunctionParameter ? this.value.paramAST : this.value;\n        return ast instanceof ASTReferenceOf ? ast.value.toWGSL(indent, ctx) : `(&${ast.toWGSL(indent, ctx)})`;\n    }\n    toString(deviceType) {\n        const ast = this.value instanceof ASTFunctionParameter ? this.value.paramAST : this.value;\n        return ast instanceof ASTReferenceOf ? ast.value.toString(deviceType) : `(&${ast.toString(deviceType)})`;\n    }\n}\n/** @internal */ class ASTReferenceOf extends ASTExpression {\n    /** @internal */ value;\n    constructor(value){\n        super();\n        this.value = value;\n        if (this.value instanceof ASTCallFunction) {\n            this.value.isStatement = false;\n        }\n    }\n    getType() {\n        const type = this.value.getType();\n        return type.isPointerType() ? type.pointerType : type;\n    }\n    isReference() {\n        return true;\n    }\n    markWritable() {\n        this.value.markWritable();\n    }\n    isWritable() {\n        return this.value.isWritable();\n    }\n    isConstExp() {\n        return false;\n    }\n    getAddressSpace() {\n        return this.value instanceof ASTExpression ? this.value.getAddressSpace() : null;\n    }\n    toWebGL(indent, ctx) {\n        return this.value.toWebGL(indent, ctx);\n    }\n    toWebGL2(indent, ctx) {\n        return this.value.toWebGL2(indent, ctx);\n    }\n    toWGSL(indent, ctx) {\n        return this.value.getType().isPointerType() ? `(*${this.value.toWGSL(indent, ctx)})` : this.value.toWGSL(indent, ctx);\n    }\n    toString(deviceType) {\n        return `*${this.value.toString(deviceType)}`;\n    }\n}\n/** @internal */ class ASTUnaryFunc extends ASTExpression {\n    /** @internal */ value;\n    /** @internal */ op;\n    /** @internal */ type;\n    constructor(value, op, type){\n        super();\n        this.value = value;\n        this.op = op;\n        this.type = type;\n        if (this.value instanceof ASTCallFunction) {\n            this.value.isStatement = false;\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    isConstExp() {\n        return this.value.isConstExp();\n    }\n    getAddressSpace() {\n        return null;\n    }\n    toWebGL(indent, ctx) {\n        return `${this.op}${this.value.toWebGL(indent, ctx)}`;\n    }\n    toWebGL2(indent, ctx) {\n        return `${this.op}${this.value.toWebGL2(indent, ctx)}`;\n    }\n    toWGSL(indent, ctx) {\n        const value = this.value.isPointer() ? new ASTReferenceOf(this.value) : this.value;\n        return `${this.op}${value.toWGSL(indent, ctx)}`;\n    }\n    toString(deviceType) {\n        const value = this.value.isPointer() ? new ASTReferenceOf(this.value) : this.value;\n        return `${this.op}${value.toString(deviceType)}`;\n    }\n}\n/** @internal */ class ASTBinaryFunc extends ASTExpression {\n    /** @internal */ left;\n    /** @internal */ right;\n    /** @internal */ type;\n    /** @internal */ op;\n    constructor(left, right, op, type){\n        super();\n        this.left = left;\n        this.right = right;\n        this.op = op;\n        this.type = type;\n        if (this.left instanceof ASTCallFunction) {\n            this.left.isStatement = false;\n        }\n        if (this.right instanceof ASTCallFunction) {\n            this.right.isStatement = false;\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    isConstExp() {\n        return this.left.isConstExp() && this.right.isConstExp();\n    }\n    getAddressSpace() {\n        return null;\n    }\n    toWebGL(indent, ctx) {\n        return `(${this.left.toWebGL(indent, ctx)} ${this.op} ${this.right.toWebGL(indent, ctx)})`;\n    }\n    toWebGL2(indent, ctx) {\n        return `(${this.left.toWebGL2(indent, ctx)} ${this.op} ${this.right.toWebGL2(indent, ctx)})`;\n    }\n    toWGSL(indent, ctx) {\n        const left = this.left.isPointer() ? new ASTReferenceOf(this.left) : this.left;\n        const right = this.right.isPointer() ? new ASTReferenceOf(this.right) : this.right;\n        return `(${left.toWGSL(indent, ctx)} ${this.op} ${right.toWGSL(indent, ctx)})`;\n    }\n    toString(deviceType) {\n        const left = this.left.isPointer() ? new ASTReferenceOf(this.left) : this.left;\n        const right = this.right.isPointer() ? new ASTReferenceOf(this.right) : this.right;\n        return `(${left.toString(deviceType)} ${this.op} ${right.toString(deviceType)})`;\n    }\n}\n/** @internal */ class ASTArrayIndex extends ASTExpression {\n    /** @internal */ source;\n    /** @internal */ index;\n    /** @internal */ type;\n    constructor(source, index, type){\n        super();\n        this.source = source;\n        this.index = index;\n        this.type = type;\n        if (this.source instanceof ASTCallFunction) {\n            this.source.isStatement = false;\n        }\n        if (this.index instanceof ASTCallFunction) {\n            this.index.isStatement = false;\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    isReference() {\n        return this.source.isReference();\n    }\n    markWritable() {\n        this.source.markWritable();\n    }\n    isWritable() {\n        return this.source.isWritable();\n    }\n    isConstExp() {\n        return this.source.isConstExp() && this.index.isConstExp();\n    }\n    getAddressSpace() {\n        return this.source.getAddressSpace();\n    }\n    toWebGL(indent, ctx) {\n        return `${this.source.toWebGL(indent, ctx)}[${unbracket(this.index.toWebGL(indent, ctx))}]`;\n    }\n    toWebGL2(indent, ctx) {\n        return `${this.source.toWebGL2(indent, ctx)}[${unbracket(this.index.toWebGL2(indent, ctx))}]`;\n    }\n    toWGSL(indent, ctx) {\n        return `${this.source.toWGSL(indent, ctx)}[${unbracket(this.index.toWGSL(indent, ctx))}]`;\n    }\n    toString(deviceType) {\n        return `${this.source.toString(deviceType)}[${unbracket(this.index.toString(deviceType))}]`;\n    }\n}\n/** @internal */ class ASTTouch extends ShaderAST {\n    /** @internal */ value;\n    constructor(value){\n        super();\n        if (value.getType().isVoidType()) {\n            throw new Error('can not touch void type');\n        }\n        if (value instanceof ASTCallFunction) {\n            value.isStatement = false;\n        }\n        this.value = value;\n    }\n    toWebGL(indent, ctx) {\n        return `${indent}${this.value.toWebGL('', ctx)};\\n`;\n    }\n    toWebGL2(indent, ctx) {\n        return `${indent}${this.value.toWebGL2('', ctx)};\\n`;\n    }\n    toWGSL(indent, ctx) {\n        if (!this.value.getType().isVoidType()) {\n            return `${indent}_ = ${this.value.toWGSL('', ctx)};\\n`;\n        } else {\n            return `${indent}${this.value.toWGSL('', ctx)};\\n`;\n        }\n    }\n}\n/** @internal */ class ASTSelect extends ASTExpression {\n    /** @internal */ condition;\n    /** @internal */ first;\n    /** @internal */ second;\n    /** @internal */ type;\n    constructor(condition, first, second){\n        super();\n        if (condition instanceof ASTCallFunction) {\n            condition.isStatement = false;\n        }\n        if (first instanceof ASTCallFunction) {\n            first.isStatement = false;\n        }\n        if (second instanceof ASTCallFunction) {\n            second.isStatement = false;\n        }\n        this.condition = condition instanceof ASTExpression ? condition : new ASTScalar(condition, typeBool);\n        let firstType = null;\n        let secondType = null;\n        if (first instanceof ASTExpression) {\n            firstType = first.getType();\n            this.first = first;\n            if (first instanceof ASTCallFunction) {\n                first.isStatement = false;\n            }\n        } else if (typeof first === 'number') {\n            if (!Number.isInteger(first)) {\n                this.first = new ASTScalar(first, typeF32);\n                firstType = typeF32;\n            }\n        } else if (typeof first === 'boolean') {\n            this.first = new ASTScalar(first, typeBool);\n            firstType = typeBool;\n        } else {\n            throw new Error('select: invalid first value');\n        }\n        if (second instanceof ASTExpression) {\n            secondType = second.getType();\n            this.second = second;\n            if (second instanceof ASTCallFunction) {\n                second.isStatement = false;\n            }\n        } else if (typeof second === 'number') {\n            if (!Number.isInteger(second)) {\n                this.second = new ASTScalar(second, typeF32);\n                secondType = typeF32;\n            }\n        } else if (typeof second === 'boolean') {\n            this.second = new ASTScalar(second, typeBool);\n            secondType = typeBool;\n        } else {\n            throw new Error('select: invalid second value');\n        }\n        if (!firstType && !secondType) {\n            throw new Error('select: cannot determine the value types');\n        }\n        if (firstType && secondType) {\n            if (!firstType.isCompatibleType(secondType)) {\n                throw new Error('select: first value and second value must be the same type');\n            } else {\n                this.type = firstType;\n            }\n        } else if (!firstType) {\n            if (secondType.typeId === typeF32.typeId) {\n                this.first = new ASTScalar(first, typeF32);\n            } else if (secondType.typeId === typeI32.typeId) {\n                this.first = new ASTScalar(first, typeI32);\n            } else if (secondType.typeId === typeU32.typeId) {\n                this.first = new ASTScalar(first, typeU32);\n            } else {\n                throw new Error('select: invalid type of the first value');\n            }\n            this.type = secondType;\n        } else {\n            if (firstType.typeId === typeF32.typeId) {\n                this.second = new ASTScalar(second, typeF32);\n            } else if (firstType.typeId === typeI32.typeId) {\n                this.second = new ASTScalar(second, typeI32);\n            } else if (firstType.typeId === typeU32.typeId) {\n                this.second = new ASTScalar(second, typeU32);\n            } else {\n                throw new Error('select: invalid type of the second value');\n            }\n            this.type = firstType;\n        }\n    }\n    getType() {\n        return this.type;\n    }\n    isConstExp() {\n        return false;\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    getAddressSpace() {\n        return null;\n    }\n    toWebGL(indent, ctx) {\n        return `${indent}(${this.condition.toWebGL('', ctx)} ? ${this.first.toWebGL('', ctx)} : ${this.second.toWebGL('', ctx)})`;\n    }\n    toWebGL2(indent, ctx) {\n        return `${indent}(${this.condition.toWebGL2('', ctx)} ? ${this.first.toWebGL2('', ctx)} : ${this.second.toWebGL2('', ctx)})`;\n    }\n    toWGSL(indent, ctx) {\n        return `${indent}select(${this.second.toWGSL('', ctx)}, ${this.first.toWGSL('', ctx)}, ${this.condition.toWGSL('', ctx)})`;\n    //return `${indent}${this.condition.toWGSL('', ctx)} ? ${this.first.toWGSL('', ctx)} : ${this.second.toWGSL('', ctx)}`;\n    }\n}\n/** @internal */ class ASTAssignment extends ShaderAST {\n    /** @internal */ lvalue;\n    /** @internal */ rvalue;\n    constructor(lvalue, rvalue){\n        super();\n        if (!lvalue.isReference()) {\n            throw new Error('assignment: l-value required');\n        }\n        this.lvalue = lvalue;\n        this.rvalue = rvalue;\n        if (!(this.lvalue instanceof ASTLValueDeclare)) {\n            if (this.lvalue.getType().isPointerType()) {\n                throw new PBASTError(this.lvalue, 'cannot assign to read-only variable');\n            }\n            this.lvalue.markWritable();\n        } else if (this.lvalue.getType().isPointerType()) {\n            if (this.rvalue instanceof ASTPrimitive) {\n                this.lvalue.value.ref = this.rvalue.ref;\n            } else if (this.rvalue instanceof ASTAddressOf) {\n                this.lvalue.value.ref = this.rvalue.value;\n            } else {\n                throw new PBASTError(this.lvalue, 'invalid pointer assignment');\n            }\n        } else if (this.rvalue instanceof ASTExpression) {\n            this.lvalue.value.constExp = this.rvalue.isConstExp();\n        }\n        if (this.rvalue instanceof ASTCallFunction) {\n            this.rvalue.isStatement = false;\n        }\n        const ltype = this.lvalue.getType();\n        const valueTypeLeft = ltype.isPointerType() ? ltype.pointerType : ltype;\n        const rtype = this.checkScalarType(this.rvalue, valueTypeLeft);\n        const rvalueIsPtr = rtype && rtype.isPointerType();\n        const valueTypeRight = rvalueIsPtr ? rtype.pointerType : rtype;\n        if (!valueTypeLeft.isCompatibleType(valueTypeRight)) {\n            throw new PBTypeCastError(this.rvalue instanceof ASTExpression ? this.rvalue.toString(rtype.isPointerType() ? 'webgpu' : 'webgl') : `${this.rvalue}`, rtype, ltype);\n        }\n    }\n    getType() {\n        return null;\n    }\n    toWebGL(indent, ctx) {\n        let rhs = null;\n        const ltype = this.lvalue.getType();\n        const rtype = this.checkScalarType(this.rvalue, ltype);\n        if (!ltype.isCompatibleType(rtype)) {\n            throw new PBTypeCastError(this.rvalue instanceof ASTExpression ? this.rvalue.toString('webgl') : `${this.rvalue}`, rtype, ltype);\n        }\n        if (typeof this.rvalue === 'number' || typeof this.rvalue === 'boolean') {\n            rhs = rtype.primitiveType === PBPrimitiveType.F32 ? toFixed(this.rvalue) : String(this.rvalue);\n        } else {\n            rhs = unbracket(this.rvalue.toWebGL(indent, ctx));\n        }\n        if (this.lvalue instanceof ASTLValueDeclare) {\n            this.lvalue.value.constExp &&= !(this.rvalue instanceof ASTExpression) || this.rvalue.isConstExp();\n        }\n        return `${indent}${this.lvalue.toWebGL(indent, ctx)} = ${rhs};\\n`;\n    }\n    toWebGL2(indent, ctx) {\n        let rhs = null;\n        const ltype = this.lvalue.getType();\n        const rtype = this.checkScalarType(this.rvalue, ltype);\n        if (!ltype.isCompatibleType(rtype)) {\n            throw new PBTypeCastError(this.rvalue instanceof ASTExpression ? this.rvalue.toString('webgl2') : `${this.rvalue}`, rtype, ltype);\n        }\n        if (typeof this.rvalue === 'number' || typeof this.rvalue === 'boolean') {\n            rhs = rtype.primitiveType === PBPrimitiveType.F32 ? toFixed(this.rvalue) : String(this.rvalue);\n        } else {\n            rhs = unbracket(this.rvalue.toWebGL2(indent, ctx));\n        }\n        if (this.lvalue instanceof ASTLValueDeclare) {\n            this.lvalue.value.constExp &&= !(this.rvalue instanceof ASTExpression) || this.rvalue.isConstExp();\n        }\n        return `${indent}${this.lvalue.toWebGL2(indent, ctx)} = ${rhs};\\n`;\n    }\n    toWGSL(indent, ctx) {\n        const ltype = this.lvalue.getType();\n        const [valueTypeLeft, lvalueIsPtr] = ltype.isPointerType() ? [\n            ltype.pointerType,\n            true\n        ] : [\n            ltype,\n            false\n        ];\n        const rtype = this.checkScalarType(this.rvalue, valueTypeLeft);\n        const rvalueIsPtr = rtype && rtype.isPointerType();\n        const valueTypeRight = rvalueIsPtr ? rtype.pointerType : rtype;\n        if (!valueTypeLeft.isCompatibleType(valueTypeRight)) {\n            throw new PBTypeCastError(this.rvalue instanceof ASTExpression ? this.rvalue.toString('webgpu') : `${this.rvalue}`, rtype, ltype);\n        }\n        if (this.lvalue instanceof ASTLValueScalar || this.lvalue instanceof ASTLValueDeclare) {\n            const structName = valueTypeLeft.isStructType() ? valueTypeLeft.structName : null;\n            if (structName && ctx.types.findIndex((val)=>val instanceof ASTStructDefine && val.type.structName === structName) < 0) {\n                return '';\n            }\n        }\n        let rhs;\n        if (typeof this.rvalue === 'number' || typeof this.rvalue === 'boolean') {\n            rhs = rtype.primitiveType === PBPrimitiveType.F32 ? toFixed(this.rvalue) : String(this.rvalue);\n        } else {\n            rhs = unbracket(this.rvalue.toWGSL(indent, ctx));\n        }\n        const name = this.lvalue.toWGSL(indent, ctx);\n        if (lvalueIsPtr && !rvalueIsPtr) {\n            if (this.lvalue instanceof ASTLValueDeclare) {\n                throw new Error(`rvalue must be pointer type: ${rhs}`);\n            } else {\n                return `${indent}*(${name}) = ${rhs};\\n`;\n            }\n        } else if (rvalueIsPtr && !lvalueIsPtr) {\n            return `${indent}${name} = *(${rhs});\\n`;\n        } else {\n            return `${indent}${name} = ${rhs};\\n`;\n        }\n    }\n    checkScalarType(value, targetType) {\n        if (value instanceof ASTExpression) {\n            return value.getType();\n        }\n        const isBool = typeof value === 'boolean';\n        const isInt = typeof value === 'number' && Number.isInteger(value) && value >= 0x80000000 >> 0 && value <= 0x7fffffff;\n        const isUint = typeof value === 'number' && Number.isInteger(value) && value >= 0 && value <= 0xffffffff;\n        const isFloat = typeof value === 'number';\n        if (targetType.isPrimitiveType()) {\n            switch(targetType.primitiveType){\n                case PBPrimitiveType.BOOL:\n                    return isBool ? targetType : isInt ? typeI32 : isUint ? typeU32 : typeF32;\n                case PBPrimitiveType.F32:\n                    return isFloat ? targetType : typeBool;\n                case PBPrimitiveType.I32:\n                    return isInt ? targetType : isBool ? typeBool : isUint ? typeU32 : typeF32;\n                case PBPrimitiveType.U32:\n                    return isUint ? targetType : isBool ? typeBool : isInt ? typeI32 : typeF32;\n                default:\n                    return null;\n            }\n        } else {\n            return isBool ? typeBool : isInt ? typeI32 : isUint ? typeU32 : typeF32;\n        }\n    }\n}\n/** @internal */ class ASTDiscard extends ShaderAST {\n    toWebGL(indent, _ctx) {\n        return `${indent}discard;\\n`;\n    }\n    toWebGL2(indent, _ctx) {\n        return `${indent}discard;\\n`;\n    }\n    toWGSL(indent, _ctx) {\n        return `${indent}discard;\\n`;\n    }\n}\n/** @internal */ class ASTBreak extends ShaderAST {\n    toWebGL(indent, _ctx) {\n        return `${indent}break;\\n`;\n    }\n    toWebGL2(indent, _ctx) {\n        return `${indent}break;\\n`;\n    }\n    toWGSL(indent, _ctx) {\n        return `${indent}break;\\n`;\n    }\n}\n/** @internal */ class ASTContinue extends ShaderAST {\n    toWebGL(indent, _ctx) {\n        return `${indent}continue;\\n`;\n    }\n    toWebGL2(indent, _ctx) {\n        return `${indent}continue;\\n`;\n    }\n    toWGSL(indent, _ctx) {\n        return `${indent}continue;\\n`;\n    }\n}\n/** @internal */ class ASTReturn extends ShaderAST {\n    /** @internal */ value;\n    constructor(value){\n        super();\n        this.value = value;\n        if (this.value instanceof ASTCallFunction) {\n            this.value.isStatement = false;\n        }\n    }\n    toWebGL(indent, ctx) {\n        return this.value ? `${indent}return ${unbracket(this.value.toWebGL(indent, ctx))};\\n` : `${indent}return;\\n`;\n    }\n    toWebGL2(indent, ctx) {\n        return this.value ? `${indent}return ${unbracket(this.value.toWebGL2(indent, ctx))};\\n` : `${indent}return;\\n`;\n    }\n    toWGSL(indent, ctx) {\n        return this.value ? `${indent}return ${unbracket(this.value.toWGSL(indent, ctx))};\\n` : `${indent}return;\\n`;\n    }\n}\n/** @internal */ class ASTCallFunction extends ASTExpression {\n    /** @internal */ name;\n    /** @internal */ args;\n    /** @internal */ retType;\n    /** @internal */ func;\n    /** @internal */ isStatement;\n    constructor(name, args, func, deviceType, retType){\n        super();\n        this.name = name;\n        this.args = args;\n        this.retType = func?.returnType ?? retType ?? typeVoid;\n        this.func = func;\n        this.isStatement = true;\n        if (func) {\n            if (func.funcType.argTypes.length !== this.args.length) {\n                throw new PBInternalError(`ASTCallFunction(): number of parameters mismatch`);\n            }\n            for(let i = 0; i < this.args.length; i++){\n                const funcArg = func.funcType.argTypes[i];\n                if (funcArg.byRef) {\n                    if (deviceType === 'webgpu') {\n                        const argAddressSpace = args[i].getAddressSpace();\n                        if (argAddressSpace !== PBAddressSpace.FUNCTION && argAddressSpace !== PBAddressSpace.PRIVATE) {\n                            throw new PBParamTypeError(name, 'pointer type of function parameter must be function or private');\n                        }\n                        const argType = funcArg.type;\n                        if (!argType.isPointerType()) {\n                            throw new PBInternalError(`ASTCallFunction(): invalid reference type`);\n                        }\n                        if (argType.addressSpace === PBAddressSpace.UNKNOWN) {\n                            argType.addressSpace = argAddressSpace;\n                        } else if (argType.addressSpace !== argAddressSpace) {\n                            throw new PBParamTypeError(name, `invalid pointer parameter address space '${argAddressSpace}', should be '${argType.addressSpace}`);\n                        }\n                    }\n                    this.args[i].markWritable();\n                }\n            }\n        }\n        for (const arg of this.args){\n            if (arg instanceof ASTCallFunction) {\n                arg.isStatement = false;\n            }\n        }\n    }\n    getType() {\n        return this.retType;\n    }\n    isConstExp() {\n        return false;\n    }\n    markWritable() {}\n    isWritable() {\n        return false;\n    }\n    getAddressSpace() {\n        return null;\n    }\n    toWebGL(indent, ctx) {\n        if (this.name === 'dFdx' || this.name === 'dFdy' || this.name === 'fwidth') {\n            ctx.extensions.add('GL_OES_standard_derivatives');\n        } else if (this.name === 'texture2DLodEXT' || this.name === 'texture2DProjLodEXT' || this.name === 'textureCubeLodEXT' || this.name === 'texture2DGradEXT' || this.name === 'texture2DProjGradEXT' || this.name === 'textureCubeGradEXT') {\n            ctx.extensions.add('GL_EXT_shader_texture_lod');\n        }\n        const args = this.args.map((arg)=>unbracket(arg.toWebGL(indent, ctx)));\n        return `${this.isStatement ? indent : ''}${this.name}(${args.join(',')})${this.isStatement ? ';\\n' : ''}`;\n    }\n    toWebGL2(indent, ctx) {\n        const args = this.args.map((arg)=>unbracket(arg.toWebGL2(indent, ctx)));\n        return `${this.isStatement ? indent : ''}${this.name}(${args.join(',')})${this.isStatement ? ';\\n' : ''}`;\n    }\n    toWGSL(indent, ctx) {\n        let thisArgs = this.args;\n        if (this.func) {\n            let argsNew;\n            const convertedArgs = convertArgs(thisArgs, this.func.funcType);\n            if (convertedArgs) {\n                argsNew = convertedArgs.args;\n            }\n            if (!argsNew) {\n                throw new Error(`no matching overloading found for function '${this.name}'`);\n            }\n            thisArgs = argsNew.filter((val)=>{\n                const type = val.getType();\n                if (type.isStructType() && ctx.types.findIndex((t)=>t instanceof ASTStructDefine && t.type.structName === type.structName) < 0) {\n                    return false;\n                }\n                return true;\n            });\n        }\n        const args = thisArgs.map((arg)=>unbracket(arg.toWGSL(indent, ctx)));\n        return `${this.isStatement ? indent : ''}${this.name}(${args.join(',')})${this.isStatement ? ';\\n' : ''}`;\n    }\n    toString(_deviceType) {\n        return `${this.name}(...)`;\n    }\n}\n/** @internal */ class ASTDeclareVar extends ShaderAST {\n    /** @internal */ value;\n    /** @internal */ group;\n    /** @internal */ binding;\n    /** @internal */ blockName;\n    constructor(exp){\n        super();\n        this.value = exp;\n        this.group = 0;\n        this.binding = 0;\n    }\n    isReference() {\n        return true;\n    }\n    isPointer() {\n        return this.value.getType().isPointerType();\n    }\n    toWebGL(indent, ctx) {\n        let prefix = '';\n        let builtin = false;\n        let valueType = this.value.getType();\n        switch(this.value.value.$declareType){\n            case 1:\n                if (ctx.type === ShaderType.Vertex) {\n                    prefix = 'attribute ';\n                    ctx.defines.push(`#define ${this.value.name} ${semanticToAttrib(ctx.vertexAttributes[this.value.value.$location])}\\n`);\n                } else {\n                    prefix = 'varying ';\n                // ctx.defines.push(`#define ${this.value.$str} ch_varying_${this.value.$location}\\n`);\n                }\n                break;\n            case 2:\n                if (ctx.type === ShaderType.Vertex) {\n                    prefix = 'varying ';\n                // ctx.defines.push(`#define ${this.value.$str} ch_varying_${this.value.$location}\\n`);\n                } else {\n                    builtin = true;\n                    if (ctx.mrt) {\n                        ctx.defines.push(`#define ${this.value.name} gl_FragData[${this.value.value.$location}]\\n`);\n                        ctx.extensions.add('GL_EXT_draw_buffers');\n                    } else {\n                        ctx.defines.push(`#define ${this.value.name} gl_FragColor\\n`);\n                    }\n                }\n                break;\n            case 4:\n                prefix = 'uniform ';\n                valueType = ctx.typeReplacement?.get(this.value.value) || valueType;\n                break;\n            case 5:\n                throw new Error(`invalid variable declare type: ${this.value.name}`);\n        }\n        if (!builtin) {\n            return `${indent}${prefix}${valueType.toTypeName('webgl', this.value.name)};\\n`;\n        }\n    }\n    toWebGL2(indent, ctx) {\n        let prefix = '';\n        let valueType = this.value.getType();\n        switch(this.value.value.$declareType){\n            case 1:\n                if (ctx.type === ShaderType.Fragment && valueType.isPrimitiveType() && valueType.isInteger()) {\n                    prefix = 'flat in ';\n                } else {\n                    prefix = 'in ';\n                }\n                if (ctx.type === ShaderType.Vertex) {\n                    ctx.defines.push(`#define ${this.value.name} ${semanticToAttrib(ctx.vertexAttributes[this.value.value.$location])}\\n`);\n                }\n                break;\n            case 2:\n                if (ctx.type === ShaderType.Vertex) {\n                    if (valueType.isPrimitiveType() && valueType.isInteger()) {\n                        prefix = 'flat out ';\n                    } else {\n                        prefix = 'out ';\n                    }\n                } else {\n                    prefix = `layout(location = ${this.value.value.$location}) out `;\n                }\n                break;\n            case 4:\n                if (valueType.isStructType()) {\n                    /*\n          if (valueType.layout !== 'std140') {\n            throw new errors.PBASTError(this, 'uniform buffer layout must be std140');\n          }\n          */ return `${indent}layout(std140) uniform ${this.blockName} { ${valueType.structName} ${this.value.name}; };\\n`;\n                } else {\n                    valueType = ctx.typeReplacement?.get(this.value.value) || valueType;\n                    return `${indent}uniform ${valueType.toTypeName('webgl2', this.value.name)};\\n`;\n                }\n            case 5:\n                throw new Error(`invalid variable declare type: ${this.value.name}`);\n        }\n        {\n            return `${indent}${prefix}${this.value.getType().toTypeName('webgl2', this.value.name)};\\n`;\n        }\n    }\n    toWGSL(indent, ctx) {\n        let prefix;\n        const isBlock = this.value.getType().isPrimitiveType() || this.value.getType().isStructType() || this.value.getType().isArrayType();\n        switch(this.value.value.$declareType){\n            case 1:\n            case 2:\n                // prefix = `@location(${this.value.value.$location}) var<out> `;\n                throw new Error(`Internal error`);\n            case 4:\n                prefix = `@group(${this.group}) @binding(${this.binding}) var${isBlock ? '<uniform>' : ''} `;\n                break;\n            case 5:\n                prefix = `@group(${this.group}) @binding(${this.binding}) var<storage, ${this.value.value.$readonly ? 'read' : 'read_write' //this.value.isWritable() || this.value.getType().haveAtomicMembers() ? 'read_write' : 'read'\n                }> `;\n                break;\n            case 3:\n                prefix = `var<workgroup> `;\n                break;\n            default:\n                prefix = `${this.value.getType().isPointerType() ? 'let' : 'var'}${this.value.value.$global && !this.value.getType().isPointerType() ? '<private>' : ''} `;\n        }\n        {\n            const type = this.value.getType();\n            const structName = type.isStructType() ? type.structName : null;\n            if (structName && ctx.types.findIndex((val)=>val instanceof ASTStructDefine && val.type.structName === structName) < 0) {\n                return '';\n            } else {\n                return `${indent}${prefix}${type.toTypeName('webgpu', this.value.name)};\\n`;\n            }\n        }\n    }\n    toString(deviceType) {\n        return this.value.toString(deviceType);\n    }\n}\n/** @internal */ class ASTFunction extends ASTScope {\n    /** @internal */ name;\n    /** @internal */ args;\n    /** @internal */ isBuiltin;\n    /** @internal */ isMainFunc;\n    /** @internal */ funcType;\n    /** @internal */ builtins;\n    /** @internal */ returnType;\n    constructor(name, args, isMainFunc, type, isBuiltin = false){\n        super();\n        this.name = name;\n        this.args = args;\n        this.funcType = type;\n        this.builtins = [];\n        this.isBuiltin = isBuiltin;\n        this.isMainFunc = isMainFunc;\n        this.returnType = type ? type.returnType : null;\n    }\n    toWebGL(indent, ctx) {\n        if (!this.isBuiltin) {\n            let str = '';\n            const p = [];\n            for (const param of this.args){\n                let exp;\n                let name;\n                let qualifier;\n                if (param.paramAST instanceof ASTPrimitive) {\n                    exp = param.paramAST.value;\n                    name = param.paramAST.name;\n                    qualifier = '';\n                } else {\n                    exp = param.paramAST.value.value;\n                    name = param.paramAST.value.name;\n                    qualifier = `${exp.$inout} `;\n                }\n                p.push(`${qualifier}${param.getType().toTypeName('webgl', name)}`);\n            }\n            str += `${indent}${this.returnType.toTypeName('webgl')} ${this.name}(${p.join(',')}) {\\n`;\n            str += super.toWebGL(indent + '  ', ctx);\n            str += `${indent}}\\n`;\n            return str;\n        } else {\n            return '';\n        }\n    }\n    toWebGL2(indent, ctx) {\n        if (!this.isBuiltin) {\n            let str = '';\n            const p = [];\n            for (const param of this.args){\n                let exp;\n                let name;\n                let qualifier;\n                if (param.paramAST instanceof ASTPrimitive) {\n                    exp = param.paramAST.value;\n                    name = param.paramAST.name;\n                    qualifier = '';\n                } else {\n                    exp = param.paramAST.value.value;\n                    name = param.paramAST.value.name;\n                    qualifier = `${exp.$inout} `;\n                }\n                p.push(`${qualifier}${param.getType().toTypeName('webgl2', name)}`);\n            }\n            str += `${indent}${this.returnType.toTypeName('webgl2')} ${this.name}(${p.join(',')}) {\\n`;\n            str += super.toWebGL2(indent + '  ', ctx);\n            str += `${indent}}\\n`;\n            return str;\n        } else {\n            return '';\n        }\n    }\n    toWGSL(indent, ctx) {\n        if (!this.isBuiltin) {\n            let str = '';\n            const p = [\n                ...this.builtins\n            ];\n            for (const param of this.args){\n                const name = param.paramAST instanceof ASTPrimitive ? param.paramAST.name : param.paramAST.value.name;\n                const paramType = param.paramAST instanceof ASTPrimitive ? param.paramAST.getType() : param.paramAST.value.getType();\n                const dataType = paramType.isPointerType() ? paramType.pointerType : paramType;\n                if (dataType.isStructType() && ctx.types.findIndex((t)=>t instanceof ASTStructDefine && t.type.structName === dataType.structName) < 0) {\n                    continue;\n                }\n                p.push(`${paramType.toTypeName('webgpu', name)}`);\n            }\n            let t = '';\n            if (this.isMainFunc) {\n                switch(ctx.type){\n                    case ShaderType.Vertex:\n                        t = '@vertex ';\n                        break;\n                    case ShaderType.Fragment:\n                        t = '@fragment ';\n                        break;\n                    case ShaderType.Compute:\n                        t = `@compute @workgroup_size(${ctx.workgroupSize[0]}, ${ctx.workgroupSize[1]}, ${ctx.workgroupSize[2]}) `;\n                        break;\n                }\n            }\n            const retName = this.returnType.isVoidType() ? null : this.returnType.toTypeName('webgpu');\n            const retStr = retName ? ` -> ${retName}` : '';\n            str += `${indent}${t}fn ${this.name}(${p.join(',')})${retStr} {\\n`;\n            str += super.toWGSL(indent + '  ', ctx);\n            str += `${indent}}\\n`;\n            return str;\n        } else {\n            return '';\n        }\n    }\n}\n/** @internal */ class ASTIf extends ASTScope {\n    /** @internal */ keyword;\n    /** @internal */ condition;\n    /** @internal */ nextElse;\n    constructor(keyword, condition){\n        super();\n        this.keyword = keyword;\n        this.condition = condition;\n        this.nextElse = null;\n        if (this.condition instanceof ASTCallFunction) {\n            this.condition.isStatement = false;\n        }\n    }\n    toWebGL(indent, ctx) {\n        let str = `${indent}${this.keyword} ${this.condition ? '(' + unbracket(this.condition.toWebGL(indent, ctx)) + ')' : ''} {\\n`;\n        str += super.toWebGL(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        if (this.nextElse) {\n            str += this.nextElse.toWebGL(indent, ctx);\n        }\n        return str;\n    }\n    toWebGL2(indent, ctx) {\n        let str = `${indent}${this.keyword} ${this.condition ? '(' + unbracket(this.condition.toWebGL2(indent, ctx)) + ')' : ''} {\\n`;\n        str += super.toWebGL2(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        if (this.nextElse) {\n            str += this.nextElse.toWebGL2(indent, ctx);\n        }\n        return str;\n    }\n    toWGSL(indent, ctx) {\n        let str = `${indent}${this.keyword} ${this.condition ? '(' + unbracket(this.condition.toWGSL(indent, ctx)) + ')' : ''} {\\n`;\n        str += super.toWGSL(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        if (this.nextElse) {\n            str += this.nextElse.toWGSL(indent, ctx);\n        }\n        return str;\n    }\n}\n/** @internal */ class ASTRange extends ASTScope {\n    /** @internal */ init;\n    /** @internal */ start;\n    /** @internal */ end;\n    /** @internal */ open;\n    /** @internal */ reverse;\n    constructor(init, start, end, open, reverse){\n        super();\n        this.init = init;\n        this.start = start;\n        this.end = end;\n        this.open = open;\n        this.reverse = reverse;\n        this.statements = [];\n        if (this.start instanceof ASTCallFunction) {\n            this.start.isStatement = false;\n        }\n        if (this.end instanceof ASTCallFunction) {\n            this.end.isStatement = false;\n        }\n    }\n    toWebGL(indent, ctx) {\n        const init = this.init.getType().toTypeName('webgl', this.init.name);\n        const start = unbracket(this.start.toWebGL(indent, ctx));\n        const end = unbracket(this.end.toWebGL(indent, ctx));\n        const comp = this.open ? this.reverse ? '>' : '<' : this.reverse ? '>=' : '<=';\n        let str = `${indent}for (${init} = ${start}; ${this.init.name} ${comp} ${end}; ${this.init.name}${this.reverse ? '--' : '++'}) {\\n`;\n        str += super.toWebGL(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        return str;\n    }\n    toWebGL2(indent, ctx) {\n        const init = this.init.getType().toTypeName('webgl2', this.init.name);\n        const start = unbracket(this.start.toWebGL2(indent, ctx));\n        const end = unbracket(this.end.toWebGL2(indent, ctx));\n        const comp = this.open ? this.reverse ? '>' : '<' : this.reverse ? '>=' : '<=';\n        let str = `${indent}for (${init} = ${start}; ${this.init.name} ${comp} ${end}; ${this.init.name}${this.reverse ? '--' : '++'}) {\\n`;\n        str += super.toWebGL2(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        return str;\n    }\n    toWGSL(indent, ctx) {\n        const init = `var ${this.init.getType().toTypeName('webgpu', this.init.name)}`;\n        const start = unbracket(this.start.toWGSL(indent, ctx));\n        const end = unbracket(this.end.toWGSL(indent, ctx));\n        const incr = new ASTScalar(1, this.init.getType()).toWGSL(indent, ctx);\n        const comp = this.open ? this.reverse ? '> ' : '<' : this.reverse ? '>=' : '<=';\n        let str = `${indent}for (${init} = ${start}; ${this.init.name} ${comp} ${end}; ${this.init.name} = ${this.init.name} ${this.reverse ? '-' : '+'} ${incr}) {\\n`;\n        str += super.toWGSL(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        return str;\n    }\n}\n/** @internal */ class ASTDoWhile extends ASTScope {\n    /** @internal */ condition;\n    constructor(condition){\n        super();\n        this.condition = condition;\n        if (this.condition instanceof ASTCallFunction) {\n            this.condition.isStatement = false;\n        }\n    }\n    toWebGL(_indent, _ctx) {\n        throw new Error(`No do-while() loop support for WebGL1.0 device`);\n    }\n    toWebGL2(indent, ctx) {\n        let str = `${indent}do {\\n`;\n        str += super.toWebGL2(indent + ' ', ctx);\n        str += `${indent}} while(${unbracket(this.condition.toWebGL2(indent, ctx))});\\n`;\n        return str;\n    }\n    toWGSL(indent, ctx) {\n        let str = `${indent}loop {\\n`;\n        str += super.toWGSL(indent + ' ', ctx);\n        str += `${indent}  if (!(${unbracket(this.condition.toWGSL(indent, ctx))})) { break; }\\n`;\n        str += `${indent}}\\n`;\n        return str;\n    }\n}\n/** @internal */ class ASTWhile extends ASTScope {\n    /** @internal */ condition;\n    constructor(condition){\n        super();\n        this.condition = condition;\n        if (this.condition instanceof ASTCallFunction) {\n            this.condition.isStatement = false;\n        }\n    }\n    toWebGL(indent, ctx) {\n        let str = `${indent}for(int z_tmp_counter = 0; z_tmp_counter == 0; z_tmp_counter += 0) {\\n`;\n        const indent2 = indent + '  ';\n        str += `${indent2}if(!(${unbracket(this.condition.toWebGL(indent, ctx))})){ break; }\\n`;\n        str += super.toWebGL(indent2, ctx);\n        str += `${indent}}\\n`;\n        return str;\n    }\n    toWebGL2(indent, ctx) {\n        let str = `${indent}while(${unbracket(this.condition.toWebGL2(indent, ctx))}) {\\n`;\n        str += super.toWebGL2(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        return str;\n    }\n    toWGSL(indent, ctx) {\n        let str = `${indent}for(;${unbracket(this.condition.toWGSL(indent, ctx))};) {\\n`;\n        str += super.toWGSL(indent + '  ', ctx);\n        str += `${indent}}\\n`;\n        return str;\n    /*\n    let str = `${indent}loop {\\n`;\n    const newIndent = indent + '  ';\n    str += `${newIndent}if (!(${unbracket(this.condition.toWGSL(indent, ctx))})) { break; }\\n`;\n    str += super.toWGSL(newIndent, ctx);\n    str += `${indent}}\\n`;\n    return str;\n    */ }\n}\n/** @internal */ class ASTStructDefine extends ShaderAST {\n    /** @internal */ type;\n    /** @internal */ prefix;\n    /** @internal */ builtin;\n    constructor(type, builtin){\n        super();\n        this.prefix = null;\n        this.builtin = builtin;\n        this.type = type;\n    }\n    getType() {\n        return this.type;\n    }\n    toWebGL(indent, _ctx) {\n        if (!this.builtin) {\n            let str = `${indent}struct ${this.type.structName} {\\n`;\n            for (const arg of this.type.structMembers){\n                str += `${indent}  ${arg.type.toTypeName('webgl', arg.name)};\\n`;\n            }\n            str += `${indent}};\\n`;\n            return str;\n        } else {\n            return '';\n        }\n    }\n    toWebGL2(indent, _ctx) {\n        if (!this.builtin) {\n            let str = `${indent}struct ${this.type.structName} {\\n`;\n            for (const arg of this.type.structMembers){\n                str += `${indent}  ${arg.type.toTypeName('webgl2', arg.name)};\\n`;\n            }\n            str += `${indent}};\\n`;\n            return str;\n        } else {\n            return '';\n        }\n    }\n    toWGSL(indent, _ctx) {\n        if (!this.builtin) {\n            let str = `${indent}struct ${this.type.structName} {\\n`;\n            str += this.type.structMembers.map((arg, i)=>{\n                const prefix = this.prefix ? this.prefix[i] : '';\n                const sizePrefix = arg.type.getLayoutSize(this.type.layout) !== arg.type.getLayoutSize('default') ? `@size(${arg.type.getLayoutSize(this.type.layout)}) ` : '';\n                const alignPrefix = i > 0 && arg.type.getLayoutAlignment(this.type.layout) !== arg.type.getLayoutAlignment('default') ? `@align(${arg.type.getLayoutAlignment(this.type.layout)}) ` : '';\n                return `${indent}  ${prefix}${alignPrefix}${sizePrefix}${arg.type.toTypeName('webgpu', arg.name)}`;\n            }).join(',\\n');\n            str += `\\n${indent}};\\n`;\n            return str;\n        } else {\n            return '';\n        }\n    }\n}\nfunction convertArgs(args, overload) {\n    if (args.length !== overload.argTypes.length) {\n        return null;\n    }\n    const result = [];\n    for(let i = 0; i < args.length; i++){\n        const isRef = !!overload.argTypes[i].byRef;\n        const argType = isRef ? overload.argTypes[i].type.pointerType : overload.argTypes[i].type;\n        const arg = args[i];\n        if (typeof arg === 'number') {\n            if (!isRef && argType.isPrimitiveType() && argType.isScalarType() && argType.primitiveType !== PBPrimitiveType.BOOL) {\n                result.push(new ASTScalar(arg, argType));\n            } else {\n                return null;\n            }\n        } else if (typeof arg === 'boolean') {\n            if (!isRef && argType.isPrimitiveType() && argType.primitiveType === PBPrimitiveType.BOOL) {\n                result.push(new ASTScalar(arg, argType));\n            } else {\n                return null;\n            }\n        } else if (argType.isCompatibleType(arg.getType())) {\n            if (isRef) {\n                arg.markWritable();\n                result.push(new ASTAddressOf(arg));\n            } else {\n                result.push(arg);\n            }\n        } else {\n            return null;\n        }\n    }\n    return {\n        name: overload.name,\n        args: result\n    };\n}\n\nexport { ASTAddressOf, ASTArrayIndex, ASTAssignment, ASTBinaryFunc, ASTBreak, ASTCallFunction, ASTCast, ASTContinue, ASTDeclareVar, ASTDiscard, ASTDoWhile, ASTExpression, ASTFunction, ASTFunctionParameter, ASTGlobalScope, ASTHash, ASTIf, ASTLValue, ASTLValueArray, ASTLValueDeclare, ASTLValueHash, ASTLValueScalar, ASTNakedScope, ASTPrimitive, ASTRange, ASTReferenceOf, ASTReturn, ASTScalar, ASTScope, ASTSelect, ASTShaderExpConstructor, ASTStructDefine, ASTTouch, ASTUnaryFunc, ASTWhile, DeclareType, ShaderAST, ShaderPrecisionType, builtinVariables, genSamplerName, getBuiltinInputStructInstanceName, getBuiltinInputStructName, getBuiltinOutputStructInstanceName, getBuiltinOutputStructName, getBuiltinParamName, getTextureSampleType };\n//# sourceMappingURL=ast.js.map\n","import { ShaderPrecisionType, ASTPrimitive, DeclareType, getTextureSampleType, ASTArrayIndex, ASTScalar, ASTCast, ASTAssignment, ASTLValueArray, ASTLValueScalar, ASTShaderExpConstructor, ASTHash, ASTLValueHash } from './ast.js';\nimport { PBPointerTypeInfo, PBAddressSpace, PBArrayTypeInfo, PBPrimitiveType, PBPrimitiveTypeInfo, typeI32 } from './types.js';\nimport { PBASTError } from './errors.js';\nimport { getCurrentProgramBuilder } from './misc.js';\n\nconst constructorCache = new Map();\n/** @internal */ function makeConstructor(typeFunc, elementType) {\n    const wrappedTypeFunc = new Proxy(typeFunc, {\n        get: function(target, prop) {\n            if (typeof prop === 'symbol' || prop in target) {\n                return target[prop];\n            }\n            let entries = constructorCache.get(typeFunc);\n            if (!entries) {\n                entries = {};\n                constructorCache.set(typeFunc, entries);\n            }\n            let ctor = entries[prop];\n            if (!ctor) {\n                if (elementType.isPrimitiveType() || elementType.isStructType() || elementType.isArrayType() || elementType.isAtomicI32() || elementType.isAtomicU32()) {\n                    if (prop === 'ptr') {\n                        const pointerType = new PBPointerTypeInfo(elementType, PBAddressSpace.FUNCTION);\n                        ctor = function pointerCtor(...args) {\n                            if (args.length === 1 && typeof args[0] === 'string') {\n                                return new PBShaderExp(args[0], pointerType);\n                            } else {\n                                throw new Error(`Invalid pointer type constructor`);\n                            }\n                        };\n                    } else {\n                        const dim = Number(prop);\n                        if (Number.isInteger(dim) && dim >= 0) {\n                            const arrayType = new PBArrayTypeInfo(elementType, dim);\n                            const arrayTypeFunc = function arrayCtor(...args) {\n                                if (args.length === 1 && typeof args[0] === 'string') {\n                                    return new PBShaderExp(args[0], arrayType);\n                                } else {\n                                    const exp = new PBShaderExp('', arrayType);\n                                    exp.$ast = new ASTShaderExpConstructor(exp.$typeinfo, args.map((arg)=>arg instanceof PBShaderExp ? arg.$ast : arg));\n                                    return exp;\n                                }\n                            };\n                            ctor = makeConstructor(arrayTypeFunc, arrayType);\n                        }\n                    }\n                }\n            }\n            if (ctor) {\n                entries[prop] = ctor;\n            }\n            return ctor;\n        }\n    });\n    return wrappedTypeFunc;\n}\n/**\n * Base class for proxiable object\n * @public\n */ class Proxiable {\n    /** @internal */ proxy;\n    constructor(){\n        this.proxy = new Proxy(this, {\n            get: function(target, prop) {\n                return typeof prop === 'string' ? target.$get(prop) : undefined;\n            },\n            set: function(target, prop, value) {\n                return typeof prop === 'string' ? target.$set(prop, value) : false;\n            }\n        });\n        return this.proxy;\n    }\n    get $thisProxy() {\n        return this.proxy;\n    }\n}\nlet uidExp = 0;\n/**\n * Base class for a expression in the shader\n * @public\n */ class PBShaderExp extends Proxiable {\n    /** @internal */ $uid;\n    /** @internal */ $str;\n    /** @internal */ $location;\n    /** @internal */ $typeinfo;\n    /** @internal */ $global;\n    /** @internal */ $sampleType;\n    /** @internal */ $precision;\n    /** @internal */ $ast;\n    /** @internal */ $inout;\n    /** @internal */ $memberCache;\n    /** @internal */ $attrib;\n    /** @internal */ $tags;\n    /** @internal */ $_group;\n    /** @internal */ $declareType;\n    /** @internal */ $isBuffer;\n    /** @internal */ $readonly;\n    /** @internal */ $bindingSize;\n    /** @internal */ constructor(str, typeInfo){\n        super();\n        if (!str && typeInfo.isPointerType()) {\n            throw new Error('no default constructor for pointer type');\n        }\n        this.$uid = uidExp++;\n        this.$str = str || '';\n        this.$location = 0;\n        this.$global = false;\n        this.$typeinfo = typeInfo;\n        this.$qualifier = null;\n        this.$precision = ShaderPrecisionType.NONE;\n        this.$ast = new ASTPrimitive(this);\n        this.$inout = null;\n        this.$memberCache = {};\n        this.$attrib = null;\n        this.$tags = [];\n        this.$_group = null;\n        this.$declareType = DeclareType.DECLARE_TYPE_NONE;\n        this.$isBuffer = false;\n        this.$bindingSize = 0;\n        this.$readonly = false;\n        if (typeInfo.isTextureType()) {\n            if (typeInfo.isDepthTexture()) {\n                this.$sampleType = 'depth';\n            } else {\n                const t = getTextureSampleType(typeInfo);\n                if (t.primitiveType === PBPrimitiveType.I32) {\n                    this.$sampleType = 'sint';\n                } else if (t.primitiveType === PBPrimitiveType.U32) {\n                    this.$sampleType = 'uint';\n                } else {\n                    this.$sampleType = 'float';\n                }\n            }\n        }\n    }\n    get $group() {\n        return this.$_group;\n    }\n    set $group(val) {\n        this.$_group = val;\n    }\n    /**\n   * Point out that the variable should be in uniform address space\n   * @param group - The bind group index\n   * @returns self\n   */ uniform(group) {\n        this.$declareType = DeclareType.DECLARE_TYPE_UNIFORM;\n        this.$group = group;\n        this.$isBuffer = false;\n        return this;\n    }\n    /**\n   * Point out that the variable should be an uniform buffer\n   * @param group - The bind group index\n   * @returns self\n   */ uniformBuffer(group, bindingSize = 0) {\n        if (!this.$typeinfo.isPrimitiveType() && !this.$typeinfo.isArrayType() && !this.$typeinfo.isStructType()) {\n            throw new PBASTError(this.$ast, 'only primitive type, array type or structure type can be set as uniform buffer');\n        }\n        this.$declareType = DeclareType.DECLARE_TYPE_UNIFORM;\n        this.$group = group;\n        this.$isBuffer = true;\n        this.$bindingSize = bindingSize;\n        return this;\n    }\n    /**\n   * Point out that the variable should be in workgroup address space\n   *\n   * @remarks\n   * WebGPU device only\n   *\n   * @returns self\n   */ workgroup() {\n        this.$declareType = DeclareType.DECLARE_TYPE_WORKGROUP;\n        return this;\n    }\n    /**\n   * Point out that the variable should be in storage address space\n   * @param group - The bind group index\n   * @returns self\n   */ storage(group) {\n        if (!this.$typeinfo.isHostSharable()) {\n            if (this.$typeinfo.isTextureType()) {\n                if (!this.$typeinfo.isStorageTexture()) {\n                    throw new PBASTError(this.$ast, 'type cannot be declared as storage texture');\n                }\n                return this.uniform(group);\n            }\n            throw new PBASTError(this.$ast, 'type cannot be declared in storage address space');\n        }\n        this.$declareType = DeclareType.DECLARE_TYPE_STORAGE;\n        this.$group = group;\n        this.$isBuffer = false;\n        this.$readonly = false;\n        return this;\n    }\n    /**\n   * Point out that the variable is read-only and should be in storage address space\n   * @param group - The bind group index\n   * @returns self\n   */ storageReadonly(group) {\n        this.storage(group);\n        this.$readonly = true;\n        return this;\n    }\n    /**\n   * Point out that the variable should be a storage buffer\n   * @param group - The bind group index\n   * @returns self\n   */ storageBuffer(group, bindingSize = 0) {\n        if (!this.$typeinfo.isPrimitiveType() && !this.$typeinfo.isArrayType() && !this.$typeinfo.isStructType() && !this.$typeinfo.isAtomicI32() && !this.$typeinfo.isAtomicU32()) {\n            throw new PBASTError(this.$ast, 'only primitive type, array type or structure type can be set as storage buffer');\n        }\n        this.$declareType = DeclareType.DECLARE_TYPE_STORAGE;\n        this.$group = group;\n        this.$isBuffer = true;\n        this.$bindingSize = bindingSize;\n        this.$readonly = false;\n        return this;\n    }\n    /**\n   * Point out that the variable is read-only and should be a storage buffer\n   * @param group - The bind group index\n   * @returns self\n   */ storageBufferReadonly(group, bindingSize = 0) {\n        this.storageBuffer(group, bindingSize);\n        this.$readonly = true;\n        return this;\n    }\n    inout() {\n        this.$inout = 'inout';\n        return this;\n    }\n    out() {\n        this.$inout = 'out';\n        return this;\n    }\n    /**\n   * Point out that the variable is a input vertex attribute\n   * @param attr - The vertex semantic\n   * @returns self\n   */ attrib(attr) {\n        this.$declareType = DeclareType.DECLARE_TYPE_IN;\n        this.$attrib = attr;\n        return this;\n    }\n    /**\n   * Create tags for the variable\n   * @param args - tags\n   * @returns self\n   */ tag(...args) {\n        args.forEach((val)=>{\n            if (this.$tags.indexOf(val) < 0) {\n                this.$tags.push(val);\n            }\n        });\n        return this;\n    }\n    /**\n   * Set sample type for the variable if the variable is of type texture\n   * @param type - sample type\n   * @returns self\n   */ sampleType(type) {\n        if (type) {\n            this.$sampleType = type;\n        }\n        return this;\n    }\n    /**\n   * Get element in the array by index\n   * @param index - index of the element\n   * @returns the element variable\n   */ at(index) {\n        const varType = this.$ast.getType();\n        if (!varType.isArrayType() && (!varType.isPrimitiveType() || !varType.isVectorType() && !varType.isMatrixType())) {\n            throw new Error('at() function must be used with array types');\n        }\n        let elementType = null;\n        let dimension;\n        if (varType.isArrayType()) {\n            elementType = varType.elementType;\n            dimension = varType.dimension;\n        } else if (varType.isVectorType()) {\n            elementType = PBPrimitiveTypeInfo.getCachedTypeInfo(varType.resizeType(1, 1));\n            dimension = varType.cols;\n        } else if (varType.isMatrixType()) {\n            elementType = PBPrimitiveTypeInfo.getCachedTypeInfo(varType.resizeType(1, varType.cols));\n            dimension = varType.rows;\n        }\n        const result = new PBShaderExp('', elementType);\n        if (typeof index === 'number') {\n            if (!Number.isInteger(index)) {\n                throw new Error('at() array index must be integer type');\n            }\n            if (index < 0 || dimension > 0 && index >= dimension) {\n                throw new Error('at() array index out of bounds');\n            }\n            result.$ast = new ASTArrayIndex(this.$ast, new ASTScalar(index, typeI32), elementType);\n        } else {\n            const type = index.$ast.getType();\n            if (!type.isPrimitiveType() || !type.isScalarType()) {\n                throw new Error('at() array index must be scalar type');\n            }\n            let ast = index.$ast;\n            if (type.scalarType !== PBPrimitiveType.I32 && type.scalarType !== PBPrimitiveType.U32) {\n                ast = new ASTCast(ast, typeI32);\n            }\n            result.$ast = new ASTArrayIndex(this.$ast, ast, elementType);\n        }\n        return result;\n    }\n    /**\n   * Set element in the array by index\n   * @param index - index of the element\n   * @param val - value to set\n   */ setAt(index, val) {\n        const varType = this.$ast.getType();\n        if (!varType.isArrayType() && !(varType.isPrimitiveType() && varType.isVectorType())) {\n            throw new Error('setAt() function must be used with array types');\n        }\n        if (typeof index === 'number') {\n            if (!Number.isInteger(index)) {\n                throw new Error('setAt() array index must be integer type');\n            }\n            const dimension = varType.isArrayType() ? varType.dimension : varType.cols;\n            if (index < 0 || dimension > 0 && index >= dimension) {\n                throw new Error('setAt() array index out of bounds');\n            }\n        }\n        getCurrentProgramBuilder().getCurrentScope().$ast.statements.push(new ASTAssignment(new ASTLValueArray(new ASTLValueScalar(this.$ast), typeof index === 'number' ? new ASTScalar(index, typeI32) : index.$ast, varType.isArrayType() ? varType.elementType : new PBPrimitiveTypeInfo(varType.scalarType)), val instanceof PBShaderExp ? val.$ast : val));\n    }\n    /**\n   * Point out that the variable should be in high precision\n   * @returns self\n   */ highp() {\n        this.$precision = ShaderPrecisionType.HIGH;\n        return this;\n    }\n    /**\n   * Points out that the variable should be in medium precision\n   * @returns self\n   */ mediump() {\n        this.$precision = ShaderPrecisionType.MEDIUM;\n        return this;\n    }\n    /**\n   * Points out that the variable should be in low precision\n   * @returns self\n   */ lowp() {\n        this.$precision = ShaderPrecisionType.LOW;\n        return this;\n    }\n    /**\n   * Whether this is a constructor\n   * @returns true if this is a constructor\n   */ isConstructor() {\n        return this.$ast instanceof ASTShaderExpConstructor && this.$ast.args.length === 0;\n    }\n    /**\n   * Determine if this variable is of vector type\n   * @returns true if the variable is of vector type, otherwise false\n   */ isVector() {\n        const varType = this.$ast.getType();\n        return varType.isPrimitiveType() && varType.isVectorType();\n    }\n    /**\n   * Get vector component count of the variable if this variable is of vector type\n   * @returns the vector component count\n   */ numComponents() {\n        const varType = this.$ast.getType();\n        return varType.isPrimitiveType() ? varType.cols : 0;\n    }\n    /**\n   * Get type name of this variable\n   * @returns The type name of this variable\n   */ getTypeName() {\n        return this.$ast.getType().toTypeName(getCurrentProgramBuilder().getDevice().type);\n    }\n    /** @internal */ $get(prop) {\n        if (typeof prop === 'string') {\n            if (prop[0] === '$' || prop in this) {\n                return this[prop];\n            } else {\n                let exp = this.$memberCache[prop];\n                if (!exp) {\n                    const varType = this.$ast?.getType() || this.$typeinfo;\n                    const num = Number(prop);\n                    if (Number.isNaN(num)) {\n                        if (varType.isStructType()) {\n                            const elementIndex = varType.structMembers.findIndex((val)=>val.name === prop);\n                            if (elementIndex < 0) {\n                                return undefined;\n                            }\n                            const element = varType.structMembers[elementIndex];\n                            if (element.type.isStructType()) {\n                                const ctor = getCurrentProgramBuilder().structInfo.structs[element.type.structName];\n                                exp = ctor.call(getCurrentProgramBuilder(), `${this.$str}.${prop}`);\n                            } else {\n                                exp = new PBShaderExp(`${this.$str}.${prop}`, element.type);\n                            }\n                            exp.$ast = new ASTHash(this.$ast, prop, element.type);\n                        } else {\n                            if (!varType.isPrimitiveType() || !varType.isVectorType() && !varType.isScalarType()) {\n                                throw new Error(`invalid index operation: ${this.$ast.toString(getCurrentProgramBuilder().getDevice().type)}[${prop}]`);\n                            }\n                            if (prop.length === 0 || prop.length > 4 || [\n                                ...prop\n                            ].some((val)=>'xyzw'.slice(0, varType.cols).indexOf(val) < 0) && [\n                                ...prop\n                            ].some((val)=>'rgba'.slice(0, varType.cols).indexOf(val) < 0)) {\n                                throw new Error(`unknown swizzle target: ${this.$ast.toString(getCurrentProgramBuilder().getDevice().type)}[${prop}]`);\n                            }\n                            const type = PBPrimitiveTypeInfo.getCachedTypeInfo(varType.resizeType(1, prop.length));\n                            exp = new PBShaderExp('', type);\n                            if (varType.cols === 1) {\n                                exp.$ast = new ASTShaderExpConstructor(type, [\n                                    this.$ast\n                                ]);\n                            } else {\n                                exp.$ast = new ASTHash(this.$ast, prop, type);\n                            }\n                        }\n                    } else {\n                        if (varType.isArrayType()) {\n                            exp = this.at(num);\n                        } else if (varType.isPrimitiveType() && varType.isVectorType()) {\n                            if (num >= varType.cols) {\n                                throw new Error(`component index out of bounds: ${this.$str}[${num}]`);\n                            }\n                            exp = this.$get('xyzw'[num]);\n                        } else if (varType.isPrimitiveType() && varType.isMatrixType()) {\n                            const type = PBPrimitiveTypeInfo.getCachedTypeInfo(varType.resizeType(1, varType.cols));\n                            exp = new PBShaderExp('', type);\n                            exp.$ast = new ASTArrayIndex(this.$ast, new ASTScalar(num, typeI32), type);\n                        } else {\n                            throw new Error(`invalid index operation: ${this.$str}[${num}]`);\n                        }\n                    }\n                    this.$memberCache[prop] = exp;\n                }\n                return exp;\n            }\n        } else {\n            return undefined;\n        }\n    }\n    /** @internal */ $set(prop, value) {\n        if (typeof prop === 'string') {\n            if (prop[0] === '$' || prop in this) {\n                this[prop] = value;\n            } else {\n                if (typeof value !== 'number' && typeof value !== 'boolean' && !(value instanceof PBShaderExp)) {\n                    throw new Error(`Invalid output value assignment`);\n                }\n                const varType = this.$ast?.getType() || this.$typeinfo;\n                const num = Number(prop);\n                if (Number.isNaN(num)) {\n                    if (varType.isStructType()) {\n                        const elementIndex = varType.structMembers.findIndex((val)=>val.name === prop);\n                        if (elementIndex < 0) {\n                            throw new Error(`unknown struct member '${prop}`);\n                        }\n                        const element = varType.structMembers[elementIndex];\n                        let dstAST;\n                        if (typeof value === 'number' || typeof value === 'boolean') {\n                            if (!element.type.isPrimitiveType() || !element.type.isScalarType()) {\n                                throw new Error(`can not set struct member '${prop}: invalid value type`);\n                            }\n                            dstAST = new ASTScalar(value, element.type);\n                        } else if (value instanceof PBShaderExp) {\n                            dstAST = value.$ast;\n                        }\n                        if (!dstAST) {\n                            throw new Error(`can not set struct member '${prop}: invalid value type`);\n                        }\n                        getCurrentProgramBuilder().getCurrentScope().$ast.statements.push(new ASTAssignment(new ASTLValueHash(new ASTLValueScalar(this.$ast), prop, element.type), dstAST));\n                    } else {\n                        // FIXME: WGSL does not support l-value swizzling\n                        if (prop.length > 1 || 'xyzw'.indexOf(prop) < 0 && 'rgba'.indexOf(prop) < 0) {\n                            throw new Error(`invalid index operation: ${this.$str}[${num}]`);\n                        }\n                        if (!varType.isPrimitiveType() || !varType.isVectorType()) {\n                            throw new Error(`invalid index operation: ${this.$str}[${num}]`);\n                        }\n                        const type = PBPrimitiveTypeInfo.getCachedTypeInfo(varType.scalarType);\n                        getCurrentProgramBuilder().getCurrentScope().$ast.statements.push(new ASTAssignment(new ASTLValueHash(new ASTLValueScalar(this.$ast), prop, type), value instanceof PBShaderExp ? value.$ast : value));\n                    }\n                } else {\n                    if (varType.isArrayType()) {\n                        this.setAt(num, value);\n                    } else if (varType.isPrimitiveType() && varType.isVectorType()) {\n                        if (num >= varType.cols) {\n                            throw new Error(`component index out of bounds: ${this.$str}[${num}]`);\n                        }\n                        this.$set('xyzw'[num], value);\n                    } else if (varType.isPrimitiveType() && varType.isMatrixType()) {\n                        if (!(value instanceof PBShaderExp)) {\n                            throw new Error(`invalid matrix column vector assignment: ${this.$str}[${num}]`);\n                        }\n                        const type = PBPrimitiveTypeInfo.getCachedTypeInfo(varType.resizeType(1, varType.cols));\n                        getCurrentProgramBuilder().getCurrentScope().$ast.statements.push(new ASTAssignment(new ASTLValueArray(new ASTLValueScalar(this.$ast), new ASTScalar(num, typeI32), type), value.$ast));\n                    } else {\n                        throw new Error(`invalid index operation: ${this.$str}[${num}]`);\n                    }\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n}\n\nexport { PBShaderExp, Proxiable, makeConstructor };\n//# sourceMappingURL=base.js.map\n","import { PBPrimitiveType, typeU32, typeF32, typeI32, typeAtomicI32, typeAtomicU32, typeVoid, PBFunctionTypeInfo, typeF32Vec2, typeF32Vec3, typeF32Vec4, typeI32Vec2, typeI32Vec3, typeI32Vec4, typeU32Vec2, typeU32Vec3, typeU32Vec4, typeMat2, typeMat3x2, typeMat4x2, typeMat2x3, typeMat3, typeMat4x3, typeMat2x4, typeMat3x4, typeMat4, typeFrexpResult, typeFrexpResultVec2, typeFrexpResultVec3, typeFrexpResultVec4, typeBool, typeTex1D, typeITex1D, typeUTex1D, typeTex2D, typeITex2D, typeUTex2D, typeTex2DArray, typeITex2DArray, typeUTex2DArray, typeTex3D, typeITex3D, typeUTex3D, typeTexCube, typeITexCube, typeUTexCube, typeTexCubeArray, typeITexCubeArray, typeUTexCubeArray, typeTexMultisampled2D, typeITexMultisampled2D, typeUTexMultisampled2D, typeTexDepth2D, typeTexDepth2DArray, typeTexDepthCube, typeTexDepthCubeArray, typeTexDepthMultisampled2D, typeTexStorage1D_rgba8unorm, typeTexStorage1D_rgba8snorm, typeTexStorage1D_rgba8uint, typeTexStorage1D_rgba8sint, typeTexStorage1D_rgba16uint, typeTexStorage1D_rgba16sint, typeTexStorage1D_rgba16float, typeTexStorage1D_rgba32uint, typeTexStorage1D_rgba32sint, typeTexStorage1D_rgba32float, typeTexStorage1D_rg32uint, typeTexStorage1D_rg32sint, typeTexStorage1D_rg32float, typeTexStorage1D_r32uint, typeTexStorage1D_r32sint, typeTexStorage1D_r32float, typeTexStorage2D_rgba8unorm, typeTexStorage2D_rgba8snorm, typeTexStorage2D_rgba8uint, typeTexStorage2D_rgba8sint, typeTexStorage2D_rgba16uint, typeTexStorage2D_rgba16sint, typeTexStorage2D_rgba16float, typeTexStorage2D_rgba32uint, typeTexStorage2D_rgba32sint, typeTexStorage2D_rgba32float, typeTexStorage2D_rg32uint, typeTexStorage2D_rg32sint, typeTexStorage2D_rg32float, typeTexStorage2D_r32uint, typeTexStorage2D_r32sint, typeTexStorage2D_r32float, typeTexStorage2DArray_rgba8unorm, typeTexStorage2DArray_rgba8snorm, typeTexStorage2DArray_rgba8uint, typeTexStorage2DArray_rgba8sint, typeTexStorage2DArray_rgba16uint, typeTexStorage2DArray_rgba16sint, typeTexStorage2DArray_rgba16float, typeTexStorage2DArray_rgba32uint, typeTexStorage2DArray_rgba32sint, typeTexStorage2DArray_rgba32float, typeTexStorage2DArray_rg32uint, typeTexStorage2DArray_rg32sint, typeTexStorage2DArray_rg32float, typeTexStorage2DArray_r32uint, typeTexStorage2DArray_r32sint, typeTexStorage2DArray_r32float, typeTexStorage3D_rgba8unorm, typeTexStorage3D_rgba8snorm, typeTexStorage3D_rgba8uint, typeTexStorage3D_rgba8sint, typeTexStorage3D_rgba16uint, typeTexStorage3D_rgba16sint, typeTexStorage3D_rgba16float, typeTexStorage3D_rgba32uint, typeTexStorage3D_rgba32sint, typeTexStorage3D_rgba32float, typeTexStorage3D_rg32uint, typeTexStorage3D_rg32sint, typeTexStorage3D_rg32float, typeTexStorage3D_r32uint, typeTexStorage3D_r32sint, typeTexStorage3D_r32float, typeSampler, typeSamplerComparison, typeTexStorage1D_bgra8unorm, typeTexStorage2D_bgra8unorm, typeTexStorage3D_bgra8unorm, typeTexExternal, typeBVec2, typeBVec3, typeBVec4 } from './types.js';\nimport { ASTScalar, ASTAddressOf, ASTFunction, ASTUnaryFunc, ASTBinaryFunc } from './ast.js';\nimport { PBShaderExp } from './base.js';\nimport { PBParamLengthError, PBDeviceNotSupport, PBParamValueError, PBParamTypeError, PBOverloadingMatchError } from './errors.js';\n\nconst genTypeList = [\n    [\n        typeF32,\n        typeF32Vec2,\n        typeF32Vec3,\n        typeF32Vec4\n    ],\n    [\n        typeI32,\n        typeI32Vec2,\n        typeI32Vec3,\n        typeI32Vec4\n    ],\n    [\n        typeU32,\n        typeU32Vec2,\n        typeU32Vec3,\n        typeU32Vec4\n    ],\n    [\n        typeBool,\n        typeBVec2,\n        typeBVec3,\n        typeBVec4\n    ]\n];\nconst genMatrixTypeList = [\n    typeMat2,\n    typeMat2x3,\n    typeMat2x4,\n    typeMat3x2,\n    typeMat3,\n    typeMat3x4,\n    typeMat4x2,\n    typeMat4x3,\n    typeMat4\n];\nfunction matchFunctionOverloadings(pb, name, ...args) {\n    const bit = pb.getDevice().type === 'webgl' ? MASK_WEBGL1 : pb.getDevice().type === 'webgl2' ? MASK_WEBGL2 : MASK_WEBGPU;\n    const overloadings = builtinFunctionsAll?.[name].overloads.filter((val)=>!!(val[1] & bit)).map((val)=>val[0]);\n    if (!overloadings || overloadings.length === 0) {\n        throw new PBDeviceNotSupport(`builtin shader function '${name}'`);\n    }\n    const argsNonArray = args.map((val)=>pb.normalizeExpValue(val));\n    const matchResult = pb._matchFunctionOverloading(overloadings, argsNonArray);\n    if (!matchResult) {\n        throw new PBOverloadingMatchError(name);\n    }\n    return matchResult;\n}\nfunction callBuiltinChecked(pb, matchResult) {\n    return pb.$callFunction(matchResult[0].name, matchResult[1], matchResult[0]);\n}\nfunction callBuiltin(pb, name, ...args) {\n    return callBuiltinChecked(pb, matchFunctionOverloadings(pb, name, ...args));\n}\nfunction genMatrixType(name, shaderTypeMask, r, args) {\n    const result = [];\n    for(let i = 0; i < genMatrixTypeList.length; i++){\n        const returnType = genMatrixTypeList[i];\n        const argTypes = args.map((arg)=>{\n            return {\n                type: arg || genMatrixTypeList[i]\n            };\n        });\n        result.push([\n            new ASTFunction(name, null, false, new PBFunctionTypeInfo(name, returnType, argTypes), true),\n            shaderTypeMask\n        ]);\n    }\n    return result;\n}\nfunction genType(name, shaderTypeMask, r, args, vecOnly) {\n    if (args.findIndex((val)=>typeof val === 'number') < 0) {\n        return [\n            [\n                new ASTFunction(name, null, false, new PBFunctionTypeInfo(name, r, args.map((arg)=>({\n                        type: arg\n                    }))), true),\n                shaderTypeMask\n            ]\n        ];\n    } else {\n        const result = [];\n        let i = vecOnly ? 1 : 0;\n        for(; i < 4; i++){\n            const returnType = typeof r === 'number' ? genTypeList[r][i] : r;\n            const argTypes = args.map((arg)=>{\n                if (typeof arg === 'number') {\n                    return {\n                        type: genTypeList[arg][i]\n                    };\n                } else {\n                    return {\n                        type: arg\n                    };\n                }\n            });\n            result.push([\n                new ASTFunction(name, null, false, new PBFunctionTypeInfo(name, returnType, argTypes), true),\n                shaderTypeMask\n            ]);\n        }\n        return result;\n    }\n}\nfunction unaryFunc(a, op, type) {\n    const exp = new PBShaderExp('', type);\n    exp.$ast = new ASTUnaryFunc(a, op, type);\n    return exp;\n}\nfunction binaryFunc(a, b, op, type) {\n    const exp = new PBShaderExp('', type);\n    exp.$ast = new ASTBinaryFunc(a, b, op, type);\n    return exp;\n}\nconst MASK_WEBGL1 = 1 << 0;\nconst MASK_WEBGL2 = 1 << 1;\nconst MASK_WEBGPU = 1 << 2;\nconst MASK_WEBGL = MASK_WEBGL1 | MASK_WEBGL2;\nconst MASK_ALL = MASK_WEBGL | MASK_WEBGPU;\nconst builtinFunctionsAll = {\n    add_2: {\n        overloads: [\n            ...genType('', MASK_ALL, 0, [\n                0,\n                0\n            ]),\n            ...genType('', MASK_ALL, 1, [\n                1,\n                1\n            ]),\n            ...genType('', MASK_ALL, 2, [\n                2,\n                2\n            ]),\n            ...genType('', MASK_ALL, 3, [\n                3,\n                3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32,\n                typeF32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32,\n                typeF32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32,\n                typeF32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32Vec4,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32,\n                typeI32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32,\n                typeI32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32Vec4,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32,\n                typeU32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32Vec2,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32,\n                typeU32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32Vec3,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32Vec4,\n                typeU32\n            ]),\n            ...genMatrixType('', MASK_ALL, null, [\n                null,\n                null\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length === 2 && typeof args[0] === 'number' && typeof args[1] === 'number') {\n                return args[0] + args[1];\n            }\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '+', matchResult[0].returnType);\n        }\n    },\n    add: {\n        overloads: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length < 2) {\n                throw new PBParamLengthError('add');\n            }\n            let result = args[0];\n            for(let i = 1; i < args.length; i++){\n                result = pb.add_2(result, args[i]);\n            }\n            return result;\n        }\n    },\n    sub: {\n        overloads: [\n            ...genType('', MASK_ALL, 0, [\n                0,\n                0\n            ]),\n            ...genType('', MASK_ALL, 1, [\n                1,\n                1\n            ]),\n            ...genType('', MASK_ALL, 2, [\n                2,\n                2\n            ]),\n            ...genType('', MASK_ALL, 3, [\n                3,\n                3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32,\n                typeF32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32,\n                typeF32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32,\n                typeF32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32Vec4,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32,\n                typeI32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32,\n                typeI32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32Vec4,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32,\n                typeU32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32Vec2,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32,\n                typeU32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32Vec3,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32Vec4,\n                typeU32\n            ]),\n            ...genMatrixType('', MASK_ALL, null, [\n                null,\n                null\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '-', matchResult[0].returnType);\n        }\n    },\n    div: {\n        overloads: [\n            ...genType('', MASK_ALL, 0, [\n                0,\n                0\n            ]),\n            ...genType('', MASK_ALL, 1, [\n                1,\n                1\n            ]),\n            ...genType('', MASK_ALL, 2, [\n                2,\n                2\n            ]),\n            ...genType('', MASK_ALL, 3, [\n                3,\n                3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32,\n                typeF32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32,\n                typeF32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32,\n                typeF32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32Vec4,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32,\n                typeI32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32,\n                typeI32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32Vec4,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32,\n                typeU32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32Vec2,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32,\n                typeU32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32Vec3,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32Vec4,\n                typeU32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '/', matchResult[0].returnType);\n        }\n    },\n    mul_2: {\n        overloads: [\n            ...genType('', MASK_ALL, 0, [\n                0,\n                0\n            ]),\n            ...genType('', MASK_ALL, 1, [\n                1,\n                1\n            ]),\n            ...genType('', MASK_ALL, 2, [\n                2,\n                2\n            ]),\n            ...genType('', MASK_ALL, 3, [\n                3,\n                3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32,\n                typeF32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32,\n                typeF32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32,\n                typeF32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32Vec4,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32,\n                typeI32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec2, [\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32,\n                typeI32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec3, [\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeI32Vec4, [\n                typeI32Vec4,\n                typeI32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32,\n                typeU32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec2, [\n                typeU32Vec2,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32,\n                typeU32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec3, [\n                typeU32Vec3,\n                typeU32\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeU32Vec4, [\n                typeU32Vec4,\n                typeU32\n            ]),\n            ...genMatrixType('', MASK_ALL, null, [\n                typeF32,\n                null\n            ]),\n            ...genMatrixType('', MASK_ALL, null, [\n                null,\n                typeF32\n            ]),\n            ...genType('', MASK_ALL, typeMat2, [\n                typeMat2,\n                typeMat2\n            ]),\n            ...genType('', MASK_ALL, typeMat3x2, [\n                typeMat2,\n                typeMat3x2\n            ]),\n            ...genType('', MASK_ALL, typeMat4x2, [\n                typeMat2,\n                typeMat4x2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeMat2,\n                typeF32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32Vec2,\n                typeMat2\n            ]),\n            ...genType('', MASK_ALL, typeMat2x3, [\n                typeMat2x3,\n                typeMat2\n            ]),\n            ...genType('', MASK_ALL, typeMat3, [\n                typeMat2x3,\n                typeMat3x2\n            ]),\n            ...genType('', MASK_ALL, typeMat4x3, [\n                typeMat2x3,\n                typeMat4x2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeMat2x3,\n                typeF32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32Vec3,\n                typeMat2x3\n            ]),\n            ...genType('', MASK_ALL, typeMat2x4, [\n                typeMat2x4,\n                typeMat2\n            ]),\n            ...genType('', MASK_ALL, typeMat3x4, [\n                typeMat2x4,\n                typeMat3x2\n            ]),\n            ...genType('', MASK_ALL, typeMat4, [\n                typeMat2x4,\n                typeMat4x2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeMat2x4,\n                typeF32Vec2\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeF32Vec4,\n                typeMat2x4\n            ]),\n            ...genType('', MASK_ALL, typeMat2, [\n                typeMat3x2,\n                typeMat2x3\n            ]),\n            ...genType('', MASK_ALL, typeMat3x2, [\n                typeMat3x2,\n                typeMat3\n            ]),\n            ...genType('', MASK_ALL, typeMat4x2, [\n                typeMat3x2,\n                typeMat4x3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeMat3x2,\n                typeF32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32Vec2,\n                typeMat3x2\n            ]),\n            ...genType('', MASK_ALL, typeMat2x3, [\n                typeMat3,\n                typeMat2x3\n            ]),\n            ...genType('', MASK_ALL, typeMat3, [\n                typeMat3,\n                typeMat3\n            ]),\n            ...genType('', MASK_ALL, typeMat4x3, [\n                typeMat3,\n                typeMat4x3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeMat3,\n                typeF32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32Vec3,\n                typeMat3\n            ]),\n            ...genType('', MASK_ALL, typeMat2x4, [\n                typeMat3x4,\n                typeMat2x3\n            ]),\n            ...genType('', MASK_ALL, typeMat3x4, [\n                typeMat3x4,\n                typeMat3\n            ]),\n            ...genType('', MASK_ALL, typeMat4, [\n                typeMat3x4,\n                typeMat4x3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeMat3x4,\n                typeF32Vec3\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeF32Vec4,\n                typeMat3x4\n            ]),\n            ...genType('', MASK_ALL, typeMat2, [\n                typeMat4x2,\n                typeMat2x4\n            ]),\n            ...genType('', MASK_ALL, typeMat3x2, [\n                typeMat4x2,\n                typeMat3x4\n            ]),\n            ...genType('', MASK_ALL, typeMat4x2, [\n                typeMat4x2,\n                typeMat4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec2, [\n                typeMat4x2,\n                typeF32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32Vec2,\n                typeMat4x2\n            ]),\n            ...genType('', MASK_ALL, typeMat2x3, [\n                typeMat4x3,\n                typeMat2x4\n            ]),\n            ...genType('', MASK_ALL, typeMat3, [\n                typeMat4x3,\n                typeMat3x4\n            ]),\n            ...genType('', MASK_ALL, typeMat4x3, [\n                typeMat4x3,\n                typeMat4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec3, [\n                typeMat4x3,\n                typeF32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32Vec3,\n                typeMat4x3\n            ]),\n            ...genType('', MASK_ALL, typeMat2x4, [\n                typeMat4,\n                typeMat2x4\n            ]),\n            ...genType('', MASK_ALL, typeMat3x4, [\n                typeMat4,\n                typeMat3x4\n            ]),\n            ...genType('', MASK_ALL, typeMat4, [\n                typeMat4,\n                typeMat4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeMat4,\n                typeF32Vec4\n            ]),\n            ...genType('', MASK_ALL, typeF32Vec4, [\n                typeF32Vec4,\n                typeMat4\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '*', matchResult[0].returnType);\n        }\n    },\n    mul: {\n        overloads: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length < 2) {\n                throw new PBParamLengthError('mul');\n            }\n            let result = args[0];\n            for(let i = 1; i < args.length; i++){\n                result = pb.mul_2(result, args[i]);\n            }\n            return result;\n        }\n    },\n    mod: {\n        overloads: [\n            ...genType('mod', MASK_ALL, 0, [\n                0,\n                0\n            ]),\n            ...genType('mod', MASK_ALL, 1, [\n                1,\n                1\n            ]),\n            ...genType('mod', MASK_ALL, 2, [\n                2,\n                2\n            ]),\n            ...genType('mod', MASK_ALL, 3, [\n                3,\n                3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            const isIntegerType = argType.isPrimitiveType() && (argType.scalarType === PBPrimitiveType.I32 || argType.scalarType === PBPrimitiveType.U32);\n            if (pb.getDevice().type === 'webgl' && isIntegerType) {\n                throw new PBDeviceNotSupport('integer modulus');\n            }\n            if (pb.getDevice().type === 'webgpu' || isIntegerType) {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '%', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    radians: {\n        overloads: genType('radians', MASK_ALL, 0, [\n            0\n        ])\n    },\n    degrees: {\n        overloads: genType('degrees', MASK_ALL, 0, [\n            0\n        ])\n    },\n    sin: {\n        overloads: genType('sin', MASK_ALL, 0, [\n            0\n        ])\n    },\n    cos: {\n        overloads: genType('cos', MASK_ALL, 0, [\n            0\n        ])\n    },\n    tan: {\n        overloads: genType('tan', MASK_ALL, 0, [\n            0\n        ])\n    },\n    asin: {\n        overloads: genType('asin', MASK_ALL, 0, [\n            0\n        ])\n    },\n    acos: {\n        overloads: genType('acos', MASK_ALL, 0, [\n            0\n        ])\n    },\n    atan: {\n        overloads: genType('atan', MASK_ALL, 0, [\n            0\n        ])\n    },\n    atan2: {\n        overloads: [\n            ...genType('atan', MASK_WEBGL, 0, [\n                0,\n                0\n            ]),\n            ...genType('atan2', MASK_WEBGPU, 0, [\n                0,\n                0\n            ])\n        ]\n    },\n    sinh: {\n        overloads: genType('sinh', MASK_WEBGL2 | MASK_WEBGPU, 0, [\n            0\n        ])\n    },\n    cosh: {\n        overloads: genType('cosh', MASK_WEBGL2 | MASK_WEBGPU, 0, [\n            0\n        ])\n    },\n    tanh: {\n        overloads: genType('tanh', MASK_WEBGL2 | MASK_WEBGPU, 0, [\n            0\n        ])\n    },\n    asinh: {\n        overloads: genType('asinh', MASK_WEBGL2, 0, [\n            0\n        ])\n    },\n    acosh: {\n        overloads: genType('acosh', MASK_WEBGL2, 0, [\n            0\n        ])\n    },\n    atanh: {\n        overloads: genType('atanh', MASK_WEBGL2, 0, [\n            0\n        ])\n    },\n    pow: {\n        overloads: genType('pow', MASK_ALL, 0, [\n            0,\n            0\n        ])\n    },\n    exp: {\n        overloads: genType('exp', MASK_ALL, 0, [\n            0\n        ])\n    },\n    exp2: {\n        overloads: genType('exp2', MASK_ALL, 0, [\n            0\n        ])\n    },\n    log: {\n        overloads: genType('log', MASK_ALL, 0, [\n            0\n        ])\n    },\n    log2: {\n        overloads: genType('log2', MASK_ALL, 0, [\n            0\n        ])\n    },\n    sqrt: {\n        overloads: genType('sqrt', MASK_ALL, 0, [\n            0\n        ])\n    },\n    inverseSqrt: {\n        overloads: [\n            ...genType('inversesqrt', MASK_WEBGL, 0, [\n                0\n            ]),\n            ...genType('inverseSqrt', MASK_WEBGPU, 0, [\n                0\n            ])\n        ]\n    },\n    abs: {\n        overloads: [\n            ...genType('abs', MASK_ALL, 0, [\n                0\n            ]),\n            ...genType('abs', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1\n            ]),\n            ...genType('abs', MASK_WEBGPU, 2, [\n                2\n            ])\n        ]\n    },\n    sign: {\n        overloads: [\n            ...genType('sign', MASK_ALL, 0, [\n                0\n            ]),\n            ...genType('sign', MASK_WEBGL2, 1, [\n                1\n            ])\n        ]\n    },\n    floor: {\n        overloads: genType('floor', MASK_ALL, 0, [\n            0\n        ])\n    },\n    ceil: {\n        overloads: genType('ceil', MASK_ALL, 0, [\n            0\n        ])\n    },\n    fract: {\n        overloads: genType('fract', MASK_ALL, 0, [\n            0\n        ])\n    },\n    fma: {\n        overloads: genType('fma', MASK_ALL, 0, [\n            0,\n            0,\n            0\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            if (pb.getDevice().type === 'webgpu') {\n                return callBuiltinChecked(pb, matchResult);\n            } else {\n                return pb.add(pb.mul(args[0], args[1]), args[2]);\n            }\n        }\n    },\n    round: {\n        overloads: genType('round', MASK_WEBGPU, 0, [\n            0\n        ])\n    },\n    trunc: {\n        overloads: genType('trunc', MASK_WEBGPU, 0, [\n            0\n        ])\n    },\n    // TODO: modf\n    min: {\n        overloads: [\n            ...genType('min', MASK_ALL, 0, [\n                0,\n                0\n            ]),\n            ...genType('min', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                1\n            ]),\n            ...genType('min', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2\n            ])\n        ]\n    },\n    max: {\n        overloads: [\n            ...genType('max', MASK_ALL, 0, [\n                0,\n                0\n            ]),\n            ...genType('max', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                1\n            ]),\n            ...genType('max', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2\n            ])\n        ]\n    },\n    clamp: {\n        overloads: [\n            ...genType('clamp', MASK_ALL, 0, [\n                0,\n                0,\n                0\n            ]),\n            ...genType('clamp', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                1,\n                1\n            ]),\n            ...genType('clamp', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2,\n                2\n            ])\n        ]\n    },\n    saturate: {\n        overloads: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 1) {\n                throw new PBParamLengthError('saturate');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                throw new PBParamValueError('saturate', 'x');\n            }\n            const argType = args[0].$ast.getType();\n            if (!argType.isPrimitiveType() || !argType.isScalarType() && !argType.isVectorType()) {\n                throw new PBParamTypeError('saturate', 'x');\n            }\n            const a = argType.isScalarType() ? 0 : pb[`vec${argType.cols}`](0);\n            const b = argType.isScalarType() ? 1 : pb[`vec${argType.cols}`](1);\n            return pb.clamp(args[0], a, b);\n        }\n    },\n    mix: {\n        overloads: [\n            ...genType('mix', MASK_ALL, 0, [\n                0,\n                0,\n                0\n            ]),\n            ...genType('mix', MASK_ALL, 0, [\n                0,\n                0,\n                typeF32\n            ])\n        ]\n    },\n    step: {\n        overloads: genType('step', MASK_ALL, 0, [\n            0,\n            0\n        ])\n    },\n    smoothStep: {\n        overloads: genType('smoothstep', MASK_ALL, 0, [\n            0,\n            0,\n            0\n        ])\n    },\n    isnan: {\n        overloads: genType('isnan', MASK_WEBGL2, 3, [\n            0\n        ])\n    },\n    isinf: {\n        overloads: genType('isinf', MASK_WEBGL2, 3, [\n            0\n        ])\n    },\n    length: {\n        overloads: genType('length', MASK_ALL, typeF32, [\n            0\n        ])\n    },\n    distance: {\n        overloads: genType('distance', MASK_ALL, typeF32, [\n            0,\n            0\n        ])\n    },\n    dot: {\n        overloads: [\n            ...genType('dot', MASK_ALL, typeF32, [\n                0,\n                0\n            ], true),\n            ...genType('dot', MASK_WEBGPU, typeI32, [\n                1,\n                1\n            ], true),\n            ...genType('dot', MASK_WEBGPU, typeU32, [\n                2,\n                2\n            ], true)\n        ]\n    },\n    cross: {\n        overloads: genType('cross', MASK_ALL, typeF32Vec3, [\n            typeF32Vec3,\n            typeF32Vec3\n        ])\n    },\n    normalize: {\n        overloads: genType('normalize', MASK_ALL, 0, [\n            0\n        ], true)\n    },\n    faceForward: {\n        overloads: [\n            ...genType('faceforward', MASK_WEBGL, 0, [\n                0,\n                0,\n                0\n            ], true),\n            ...genType('faceForward', MASK_WEBGPU, 0, [\n                0,\n                0,\n                0\n            ], true)\n        ]\n    },\n    reflect: {\n        overloads: genType('reflect', MASK_ALL, 0, [\n            0,\n            0\n        ], true)\n    },\n    refract: {\n        overloads: genType('refract', MASK_ALL, 0, [\n            0,\n            0,\n            typeF32\n        ], true)\n    },\n    frexp: {\n        overloads: [\n            ...genType('frexp', MASK_WEBGPU, typeFrexpResult, [\n                typeF32\n            ]),\n            ...genType('frexp', MASK_WEBGPU, typeFrexpResultVec2, [\n                typeF32Vec2\n            ]),\n            ...genType('frexp', MASK_WEBGPU, typeFrexpResultVec3, [\n                typeF32Vec3\n            ]),\n            ...genType('frexp', MASK_WEBGPU, typeFrexpResultVec4, [\n                typeF32Vec4\n            ])\n        ]\n    },\n    outerProduct: {\n        overloads: [\n            ...genType('outerProduct', MASK_WEBGL2, typeMat2, [\n                typeF32Vec2,\n                typeF32Vec2\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat3, [\n                typeF32Vec3,\n                typeF32Vec3\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat4, [\n                typeF32Vec4,\n                typeF32Vec4\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat2x3, [\n                typeF32Vec3,\n                typeF32Vec2\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat3x2, [\n                typeF32Vec2,\n                typeF32Vec3\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat2x4, [\n                typeF32Vec4,\n                typeF32Vec2\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat4x2, [\n                typeF32Vec2,\n                typeF32Vec4\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat3x4, [\n                typeF32Vec4,\n                typeF32Vec3\n            ]),\n            ...genType('outerProduct', MASK_WEBGL2, typeMat4x3, [\n                typeF32Vec3,\n                typeF32Vec4\n            ])\n        ]\n    },\n    transpose: {\n        overloads: [\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat2, [\n                typeMat2\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat3, [\n                typeMat3\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat4, [\n                typeMat4\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat2x3, [\n                typeMat3x2\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat3x2, [\n                typeMat2x3\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat2x4, [\n                typeMat4x2\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat4x2, [\n                typeMat2x4\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat3x4, [\n                typeMat4x3\n            ]),\n            ...genType('transpose', MASK_WEBGL2 | MASK_WEBGPU, typeMat4x3, [\n                typeMat3x4\n            ])\n        ]\n    },\n    determinant: {\n        overloads: [\n            ...genType('determinant', MASK_WEBGL2 | MASK_WEBGPU, typeF32, [\n                typeMat2\n            ]),\n            ...genType('determinant', MASK_WEBGL2 | MASK_WEBGPU, typeF32, [\n                typeMat3\n            ]),\n            ...genType('determinant', MASK_WEBGL2 | MASK_WEBGPU, typeF32, [\n                typeMat4\n            ])\n        ]\n    },\n    inverse: {\n        overloads: [\n            ...genType('inverse', MASK_WEBGL2, typeMat2, [\n                typeMat2\n            ]),\n            ...genType('inverse', MASK_WEBGL2, typeMat3, [\n                typeMat3\n            ]),\n            ...genType('inverse', MASK_WEBGL2, typeMat4, [\n                typeMat4\n            ])\n        ]\n    },\n    lessThan: {\n        overloads: [\n            ...genType('lessThan', MASK_ALL, 3, [\n                0,\n                0\n            ]),\n            ...genType('lessThan', MASK_ALL, 3, [\n                1,\n                1\n            ]),\n            ...genType('lessThan', MASK_ALL, 3, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' || argType.isPrimitiveType() && argType.isScalarType()) {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '<', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    lessThanEqual: {\n        overloads: [\n            ...genType('lessThanEqual', MASK_ALL, 3, [\n                0,\n                0\n            ]),\n            ...genType('lessThanEqual', MASK_ALL, 3, [\n                1,\n                1\n            ]),\n            ...genType('lessThanEqual', MASK_ALL, 3, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' || argType.isPrimitiveType() && argType.isScalarType()) {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '<=', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    greaterThan: {\n        overloads: [\n            ...genType('greaterThan', MASK_ALL, 3, [\n                0,\n                0\n            ]),\n            ...genType('greaterThan', MASK_ALL, 3, [\n                1,\n                1\n            ]),\n            ...genType('greaterThan', MASK_ALL, 3, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' || argType.isPrimitiveType() && argType.isScalarType()) {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '>', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    greaterThanEqual: {\n        overloads: [\n            ...genType('greaterThanEqual', MASK_ALL, 3, [\n                0,\n                0\n            ]),\n            ...genType('greaterThanEqual', MASK_ALL, 3, [\n                1,\n                1\n            ]),\n            ...genType('greaterThanEqual', MASK_ALL, 3, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' || argType.isPrimitiveType() && argType.isScalarType()) {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '>=', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    compEqual: {\n        overloads: [\n            ...genType('equal', MASK_ALL, 3, [\n                0,\n                0\n            ]),\n            ...genType('equal', MASK_ALL, 3, [\n                1,\n                1\n            ]),\n            ...genType('equal', MASK_ALL, 3, [\n                2,\n                2\n            ]),\n            ...genType('equal', MASK_ALL, 3, [\n                3,\n                3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' || argType.isPrimitiveType() && argType.isScalarType()) {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '==', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    compNotEqual: {\n        overloads: [\n            ...genType('notEqual', MASK_ALL, 3, [\n                0,\n                0\n            ]),\n            ...genType('notEqual', MASK_ALL, 3, [\n                1,\n                1\n            ]),\n            ...genType('notEqual', MASK_ALL, 3, [\n                2,\n                2\n            ]),\n            ...genType('notEqual', MASK_ALL, 3, [\n                3,\n                3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' || argType.isPrimitiveType() && argType.isScalarType()) {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '!=', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    equal: {\n        overloads: [\n            ...genType('equal', MASK_ALL, typeBool, [\n                0,\n                0\n            ]),\n            ...genType('equal', MASK_ALL, typeBool, [\n                1,\n                1\n            ]),\n            ...genType('equal', MASK_ALL, typeBool, [\n                2,\n                2\n            ]),\n            ...genType('equal', MASK_ALL, typeBool, [\n                3,\n                3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' && argType.isPrimitiveType() && !argType.isScalarType()) {\n                return pb.all(pb.compEqual(args[0], args[1]));\n            } else {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '==', matchResult[0].returnType);\n            }\n        }\n    },\n    notEqual: {\n        overloads: [\n            ...genType('notEqual', MASK_ALL, typeBool, [\n                0,\n                0\n            ]),\n            ...genType('notEqual', MASK_ALL, typeBool, [\n                1,\n                1\n            ]),\n            ...genType('notEqual', MASK_ALL, typeBool, [\n                2,\n                2\n            ]),\n            ...genType('notEqual', MASK_ALL, typeBool, [\n                3,\n                3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' && argType.isPrimitiveType() && !argType.isScalarType()) {\n                return pb.any(pb.compNotEqual(args[0], args[1]));\n            } else {\n                return binaryFunc(matchResult[1][0], matchResult[1][1], '!=', matchResult[0].returnType);\n            }\n        }\n    },\n    any: {\n        overloads: genType('any', MASK_ALL, typeBool, [\n            3\n        ], true)\n    },\n    all: {\n        overloads: genType('all', MASK_ALL, typeBool, [\n            3\n        ], true)\n    },\n    not: {\n        overloads: genType('not', MASK_ALL, 3, [\n            3\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            const argType = matchResult[1][0].getType();\n            if (pb.getDevice().type === 'webgpu' || argType.isPrimitiveType() && argType.isScalarType()) {\n                return unaryFunc(matchResult[1][0], '!', matchResult[0].returnType);\n            } else {\n                return callBuiltinChecked(pb, matchResult);\n            }\n        }\n    },\n    neg: {\n        overloads: [\n            ...genType('neg', MASK_ALL, 0, [\n                0\n            ]),\n            ...genType('neg', MASK_ALL, 1, [\n                1\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return unaryFunc(matchResult[1][0], '-', matchResult[0].returnType);\n        }\n    },\n    or_2: {\n        overloads: genType('or', MASK_ALL, typeBool, [\n            3,\n            3\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '||', matchResult[0].returnType);\n        }\n    },\n    or: {\n        overloads: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length < 2) {\n                throw new PBParamLengthError('or');\n            }\n            let result = args[0];\n            for(let i = 1; i < args.length; i++){\n                result = pb.or_2(result, args[i]);\n            }\n            return result;\n        }\n    },\n    compOr: {\n        overloads: [\n            ...genType('compOr', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                1\n            ]),\n            ...genType('compOr', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '|', matchResult[0].returnType);\n        }\n    },\n    and_2: {\n        overloads: genType('and', MASK_ALL, typeBool, [\n            3,\n            3\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '&&', matchResult[0].returnType);\n        }\n    },\n    and: {\n        overloads: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length < 2) {\n                throw new PBParamLengthError('and');\n            }\n            let result = args[0];\n            for(let i = 1; i < args.length; i++){\n                result = pb.and_2(result, args[i]);\n            }\n            return result;\n        }\n    },\n    compAnd: {\n        overloads: [\n            ...genType('compAnd', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                1\n            ]),\n            ...genType('compAnd', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '&', matchResult[0].returnType);\n        }\n    },\n    compXor: {\n        overloads: [\n            ...genType('compXor', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                1\n            ]),\n            ...genType('compXor', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '^', matchResult[0].returnType);\n        }\n    },\n    sal: {\n        overloads: [\n            ...genType('sal', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                2\n            ]),\n            ...genType('sal', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '<<', matchResult[0].returnType);\n        }\n    },\n    sar: {\n        overloads: [\n            ...genType('sar', MASK_WEBGL2 | MASK_WEBGPU, 1, [\n                1,\n                2\n            ]),\n            ...genType('sar', MASK_WEBGL2 | MASK_WEBGPU, 2, [\n                2,\n                2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const matchResult = matchFunctionOverloadings(pb, name, ...args);\n            return binaryFunc(matchResult[1][0], matchResult[1][1], '>>', matchResult[0].returnType);\n        }\n    },\n    arrayLength: {\n        overloads: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 1) {\n                throw new PBParamLengthError('arrayLength');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                throw new PBParamValueError('arrayLength', 'array');\n            }\n            const type = args[0].$ast.getType();\n            const arrayType = type.isPointerType() ? type.pointerType : type;\n            if (!arrayType.isArrayType() || arrayType.dimension !== 0) {\n                throw new PBParamTypeError('arrayLength', 'array');\n            }\n            const arg = type.isArrayType() ? pb.addressOf(args[0]).$ast : args[0].$ast;\n            return pb.$callFunctionNoCheck(name, [\n                arg\n            ], typeU32);\n        }\n    },\n    select: {\n        overloads: [\n            ...genType('select', MASK_WEBGPU, 0, [\n                0,\n                0,\n                typeBool\n            ]),\n            ...genType('select', MASK_WEBGPU, 1, [\n                1,\n                1,\n                typeBool\n            ]),\n            ...genType('select', MASK_WEBGPU, 2, [\n                2,\n                2,\n                typeBool\n            ]),\n            ...genType('select', MASK_WEBGPU, 3, [\n                3,\n                3,\n                typeBool\n            ]),\n            ...genType('select', MASK_WEBGPU, 0, [\n                0,\n                0,\n                3\n            ], true),\n            ...genType('select', MASK_WEBGPU, 1, [\n                1,\n                1,\n                3\n            ], true),\n            ...genType('select', MASK_WEBGPU, 2, [\n                2,\n                2,\n                3\n            ], true),\n            ...genType('select', MASK_WEBGPU, 3, [\n                3,\n                3,\n                3\n            ], true),\n            ...genType('mix', MASK_WEBGL2, 0, [\n                0,\n                0,\n                3\n            ]),\n            ...genType('mix', MASK_WEBGL2, 1, [\n                1,\n                1,\n                3\n            ]),\n            ...genType('mix', MASK_WEBGL2, 2, [\n                2,\n                2,\n                3\n            ])\n        ]\n    },\n    floatBitsToInt: {\n        overloads: genType('floatBitsToInt', MASK_WEBGL2, 1, [\n            0\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 1) {\n                throw new PBParamLengthError('floatBitsToInt');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                if (typeof args[0] !== 'number') {\n                    throw new PBParamValueError('floatBitsToInt', 'x');\n                }\n            } else {\n                const type = args[0].$ast.getType();\n                if (type.typeId !== typeF32.typeId) {\n                    throw new PBParamTypeError('floatBitsToInt', 'x');\n                }\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                return pb.$callFunctionNoCheck('bitcast<i32>', [\n                    args[0] instanceof PBShaderExp ? args[0].$ast : new ASTScalar(args[0], typeF32)\n                ], typeI32);\n            } else {\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    floatBitsToUint: {\n        overloads: genType('floatBitsToUint', MASK_WEBGL2, 2, [\n            0\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 1) {\n                throw new PBParamLengthError('floatBitsToUint');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                if (typeof args[0] !== 'number') {\n                    throw new PBParamValueError('floatBitsToUint', 'x');\n                }\n            } else {\n                const type = args[0].$ast.getType();\n                if (type.typeId !== typeF32.typeId) {\n                    throw new PBParamTypeError('floatBitsToUint', 'x');\n                }\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                return pb.$callFunctionNoCheck('bitcast<u32>', [\n                    args[0] instanceof PBShaderExp ? args[0].$ast : new ASTScalar(args[0], typeF32)\n                ], typeU32);\n            } else {\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    intBitsToFloat: {\n        overloads: genType('intBitsToFloat', MASK_WEBGL2, 0, [\n            1\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 1) {\n                throw new PBParamLengthError('intBitsToFloat');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                if (typeof args[0] !== 'number') {\n                    throw new PBParamValueError('intBitsToFloat', 'x');\n                }\n            } else {\n                const type = args[0].$ast.getType();\n                if (type.typeId !== typeI32.typeId) {\n                    throw new PBParamTypeError('intBitsToFloat', 'x');\n                }\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                return pb.$callFunctionNoCheck('bitcast<f32>', [\n                    args[0] instanceof PBShaderExp ? args[0].$ast : new ASTScalar(args[0], typeI32)\n                ], typeF32);\n            } else {\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    uintBitsToFloat: {\n        overloads: genType('uintBitsToFloat', MASK_WEBGL2, 0, [\n            2\n        ]),\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 1) {\n                throw new PBParamLengthError('uintBitsToFloat');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                if (typeof args[0] !== 'number') {\n                    throw new PBParamValueError('uintBitsToFloat', 'x');\n                }\n            } else {\n                const type = args[0].$ast.getType();\n                if (type.typeId !== typeU32.typeId) {\n                    throw new PBParamTypeError('uintBitsToFloat', 'x');\n                }\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                return pb.$callFunctionNoCheck('bitcast<f32>', [\n                    args[0] instanceof PBShaderExp ? args[0].$ast : new ASTScalar(args[0], typeU32)\n                ], typeF32);\n            } else {\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    pack4x8snorm: {\n        overloads: genType('pack4x8snorm', MASK_WEBGPU, typeU32, [\n            typeF32Vec4\n        ])\n    },\n    unpack4x8snorm: {\n        overloads: genType('unpack4x8snorm', MASK_WEBGPU, typeF32Vec4, [\n            typeU32\n        ])\n    },\n    pack4x8unorm: {\n        overloads: genType('pack4x8unorm', MASK_WEBGPU, typeU32, [\n            typeF32Vec4\n        ])\n    },\n    unpack4x8unorm: {\n        overloads: genType('unpack4x8unorm', MASK_WEBGPU, typeF32Vec4, [\n            typeU32\n        ])\n    },\n    pack2x16snorm: {\n        overloads: [\n            ...genType('pack2x16snorm', MASK_WEBGPU, typeU32, [\n                typeF32Vec2\n            ]),\n            ...genType('packSnorm2x16', MASK_WEBGL2, typeU32, [\n                typeF32Vec2\n            ])\n        ]\n    },\n    unpack2x16snorm: {\n        overloads: [\n            ...genType('unpack2x16snorm', MASK_WEBGPU, typeF32Vec2, [\n                typeU32\n            ]),\n            ...genType('unpackSnorm2x16', MASK_WEBGL2, typeF32Vec2, [\n                typeU32\n            ])\n        ]\n    },\n    pack2x16unorm: {\n        overloads: [\n            ...genType('pack2x16unorm', MASK_WEBGPU, typeU32, [\n                typeF32Vec2\n            ]),\n            ...genType('packUnorm2x16', MASK_WEBGL2, typeU32, [\n                typeF32Vec2\n            ])\n        ]\n    },\n    unpack2x16unorm: {\n        overloads: [\n            ...genType('unpack2x16unorm', MASK_WEBGPU, typeF32Vec2, [\n                typeU32\n            ]),\n            ...genType('unpackUnorm2x16', MASK_WEBGL2, typeF32Vec2, [\n                typeU32\n            ])\n        ]\n    },\n    pack2x16float: {\n        overloads: [\n            ...genType('pack2x16float', MASK_WEBGPU, typeU32, [\n                typeF32Vec2\n            ]),\n            ...genType('packHalf2x16', MASK_WEBGL2, typeU32, [\n                typeF32Vec2\n            ])\n        ]\n    },\n    unpack2x16float: {\n        overloads: [\n            ...genType('unpack2x16float', MASK_WEBGPU, typeF32Vec2, [\n                typeU32\n            ]),\n            ...genType('unpackHalf2x16', MASK_WEBGL2, typeF32Vec2, [\n                typeU32\n            ])\n        ]\n    },\n    matrixCompMult: {\n        overloads: genMatrixType('matrixCompMult', MASK_WEBGL, null, [\n            null,\n            null\n        ])\n    },\n    dpdx: {\n        overloads: [\n            ...genType('dFdx', MASK_WEBGL, 0, [\n                0\n            ]),\n            ...genType('dpdx', MASK_WEBGPU, 0, [\n                0\n            ])\n        ]\n    },\n    dpdy: {\n        overloads: [\n            ...genType('dFdy', MASK_WEBGL, 0, [\n                0\n            ]),\n            ...genType('dpdy', MASK_WEBGPU, 0, [\n                0\n            ])\n        ]\n    },\n    fwidth: {\n        overloads: genType('fwidth', MASK_ALL, 0, [\n            0\n        ])\n    },\n    dpdxCoarse: {\n        overloads: [\n            ...genType('dpdxCoarse', MASK_WEBGPU, 0, [\n                0\n            ]),\n            ...genType('dFdx', MASK_WEBGL, 0, [\n                0\n            ])\n        ]\n    },\n    dpdxFine: {\n        overloads: [\n            ...genType('dpdxFine', MASK_WEBGPU, 0, [\n                0\n            ]),\n            ...genType('dFdx', MASK_WEBGL, 0, [\n                0\n            ])\n        ]\n    },\n    dpdyCoarse: {\n        overloads: [\n            ...genType('dpdyCoarse', MASK_WEBGPU, 0, [\n                0\n            ]),\n            ...genType('dFdy', MASK_WEBGL, 0, [\n                0\n            ])\n        ]\n    },\n    dpdyFine: {\n        overloads: [\n            ...genType('dpdyFine', MASK_WEBGPU, 0, [\n                0\n            ]),\n            ...genType('dFdy', MASK_WEBGL, 0, [\n                0\n            ])\n        ]\n    },\n    // textureDimensions(tex: PBShaderExp, level?: number|PBShaderExp);\n    textureDimensions: {\n        overloads: [\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTex1D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeITex1D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeUTex1D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTex2D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeITex2D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeUTex2D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTex2DArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeITex2DArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeUTex2DArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTex3D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeITex3D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeUTex3D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexCube,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeITexCube,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeUTexCube,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexCubeArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeITexCubeArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeUTexCubeArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexMultisampled2D\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeITexMultisampled2D\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeUTexMultisampled2D\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexDepth2D,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexDepth2DArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexDepthCube,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexDepthCubeArray,\n                typeI32\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexDepthMultisampled2D\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba8unorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba8snorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba8uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba8sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba16uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba16sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba16float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rgba32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rg32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rg32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_rg32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_r32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_r32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32, [\n                typeTexStorage1D_r32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba8unorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba8snorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba8uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba8sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba16uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba16sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba16float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rgba32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rg32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rg32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_rg32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_r32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_r32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2D_r32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba8unorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba8snorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba8uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba8sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba16uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba16sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba16float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rgba32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rg32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rg32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_rg32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_r32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_r32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec2, [\n                typeTexStorage2DArray_r32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba8unorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba8snorm\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba8uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba8sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba16uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba16sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba16float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rgba32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rg32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rg32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_rg32float\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_r32uint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_r32sint\n            ]),\n            ...genType('textureDimensions', MASK_WEBGPU, typeU32Vec3, [\n                typeTexStorage3D_r32float\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeTex1D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeTex2D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeITex1D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeITex2D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeUTex1D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeUTex2D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeTex2DArray,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeITex2DArray,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeUTex2DArray,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeTexCube,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeITexCube,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeUTexCube,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec3, [\n                typeTex3D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec3, [\n                typeITex3D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec3, [\n                typeUTex3D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeTexDepth2D,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeTexDepthCube,\n                typeI32\n            ]),\n            ...genType('textureSize', MASK_WEBGL2, typeI32Vec2, [\n                typeTexDepth2DArray,\n                typeI32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length < 1 || args.length > 2) {\n                throw new PBParamLengthError('textureDimensions');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                throw new PBParamValueError('textureDimensions', 'tex');\n            }\n            const texType = args[0].$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureDimensions', 'tex');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                if (texType.isMultisampledTexture() || texType.isStorageTexture()) {\n                    if (args[1] !== undefined) {\n                        throw new PBParamValueError('textureDimensions', 'level');\n                    }\n                }\n                return callBuiltin(pb, name, ...args);\n            } else if (pb.getDevice().type === 'webgl2') {\n                const tex = args[0];\n                const level = args[1] || 0;\n                return texType.is1DTexture() ? callBuiltin(pb, name, tex, level).x : callBuiltin(pb, name, tex, level);\n            }\n        }\n    },\n    // textureGather(tex: PBShaderExp, sampler: PBShaderExp, coords: PBShaderExp);\n    // textureGather(component: number|PBShaderExp, tex: PBShaderExp, sampler: PBShaderExp, coords: PBShaderExp);\n    textureGather: {\n        overloads: [\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeI32,\n                typeTex2D,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeI32Vec4, [\n                typeI32,\n                typeITex2D,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeU32Vec4, [\n                typeI32,\n                typeUTex2D,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeI32,\n                typeTexCube,\n                typeSampler,\n                typeF32Vec3\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeI32Vec4, [\n                typeI32,\n                typeITexCube,\n                typeSampler,\n                typeF32Vec3\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeU32Vec4, [\n                typeI32,\n                typeUTexCube,\n                typeSampler,\n                typeF32Vec3\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepth2D,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepthCube,\n                typeSampler,\n                typeF32Vec3\n            ])\n        ]\n    },\n    // textureArrayGather(tex: PBShaderExp, sampler: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp);\n    // textureArrayGather(component: number|PBShaderExp, tex: PBShaderExp, sampler: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp);\n    textureArrayGather: {\n        overloads: [\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeI32,\n                typeTex2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeI32Vec4, [\n                typeI32,\n                typeITex2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeU32Vec4, [\n                typeI32,\n                typeUTex2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeI32,\n                typeTexCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeI32Vec4, [\n                typeI32,\n                typeITexCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeU32Vec4, [\n                typeI32,\n                typeUTexCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepth2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32\n            ]),\n            ...genType('textureGather', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepthCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32\n            ])\n        ]\n    },\n    // textureGatherCompare(tex: PBShaderExp, samplerCompare: PBShaderExp, coords: PBShaderExp, depthRef: number|PBShaderExp);\n    textureGatherCompare: {\n        overloads: [\n            ...genType('textureGatherCompare', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepth2D,\n                typeSamplerComparison,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureGatherCompare', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepthCube,\n                typeSamplerComparison,\n                typeF32Vec3,\n                typeF32\n            ])\n        ]\n    },\n    // textureArrayGatherCompare(tex: PBShaderExp, samplerCompare: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp, depthRef: number|PBShaderExp);\n    textureArrayGatherCompare: {\n        overloads: [\n            ...genType('textureGatherCompare', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepth2DArray,\n                typeSamplerComparison,\n                typeF32Vec2,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('textureGatherCompare', MASK_WEBGPU, typeF32Vec4, [\n                typeTexDepthCubeArray,\n                typeSamplerComparison,\n                typeF32Vec3,\n                typeI32,\n                typeF32\n            ])\n        ]\n    },\n    // textureLoad(tex: PBShaderExp, coords: number|PBShaderExp, levelOrSampleIndex: number|PBShaderExp);\n    textureLoad: {\n        overloads: [\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTex1D,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeITex1D,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeUTex1D,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage1D_bgra8unorm,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage1D_r32float,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage1D_r32sint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage1D_r32uint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage1D_rg32float,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage1D_rg32sint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage1D_rg32uint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage1D_rgba16float,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage1D_rgba16sint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage1D_rgba16uint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage1D_rgba32float,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage1D_rgba32sint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage1D_rgba32uint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage1D_rgba8sint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage1D_rgba8uint,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage1D_rgba8snorm,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage1D_rgba8unorm,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeITex2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeUTex2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage2D_bgra8unorm,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage2D_r32float,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage2D_r32sint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage2D_r32uint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage2D_rg32float,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage2D_rg32sint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage2D_rg32uint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage2D_rgba16float,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage2D_rgba16sint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage2D_rgba16uint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage2D_rgba32float,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage2D_rgba32sint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage2D_rgba32uint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage2D_rgba8sint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage2D_rgba8uint,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage2D_rgba8snorm,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage2D_rgba8unorm,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTex3D,\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeITex3D,\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeUTex3D,\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage3D_bgra8unorm,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage3D_r32float,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage3D_r32sint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage3D_r32uint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage3D_rg32float,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage3D_rg32sint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage3D_rg32uint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage3D_rgba16float,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage3D_rgba16sint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage3D_rgba16uint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage3D_rgba32float,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage3D_rgba32sint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage3D_rgba32uint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeTexStorage3D_rgba8sint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeTexStorage3D_rgba8uint,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage3D_rgba8snorm,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexStorage3D_rgba8unorm,\n                typeI32Vec3\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexMultisampled2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeITexMultisampled2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeUTexMultisampled2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexExternal,\n                typeI32Vec2\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32, [\n                typeTexDepth2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32, [\n                typeTexDepthMultisampled2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeF32Vec4, [\n                typeTex1D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeF32Vec4, [\n                typeTex3D,\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeU32Vec4, [\n                typeTexExternal,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeF32Vec4, [\n                typeITex1D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeI32Vec4, [\n                typeITex2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeI32Vec4, [\n                typeITex3D,\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeF32Vec4, [\n                typeUTex1D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeU32Vec4, [\n                typeUTex2D,\n                typeI32Vec2,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeU32Vec4, [\n                typeUTex3D,\n                typeI32Vec3,\n                typeI32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length === 0) {\n                throw new PBParamLengthError('textureLoad');\n            }\n            if (!(args[0] instanceof PBShaderExp)) {\n                throw new PBParamValueError('textureLoad', 'tex');\n            }\n            const texType = args[0].$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureLoad', 'tex');\n            }\n            if (pb.getDevice().type === 'webgl2') {\n                if (args.length !== 3) {\n                    throw new PBParamLengthError('textureLoad');\n                }\n                if (texType.is1DTexture()) {\n                    if (typeof args[1] === 'number') {\n                        if (!Number.isInteger(args[1])) {\n                            throw new PBParamTypeError('textureLoad', 'coord');\n                        }\n                    } else if (args[1] instanceof PBShaderExp) {\n                        const coordType = args[1].$ast.getType();\n                        if (!coordType.isPrimitiveType() || !coordType.isScalarType() || coordType.scalarType !== PBPrimitiveType.I32) {\n                            throw new PBParamTypeError('textureLoad', 'coord');\n                        }\n                    } else {\n                        throw new PBParamTypeError('textureLoad', 'coord');\n                    }\n                    args[1] = pb.ivec2(args[1], 0);\n                }\n            } else if (pb.getDevice().type === 'webgpu') {\n                if (texType.isExternalTexture()) {\n                    args = args.slice(0, 2);\n                }\n                if (texType.isStorageTexture()) {\n                    texType.readable = true;\n                }\n            }\n            return callBuiltin(pb, name, ...args);\n        }\n    },\n    // textureArrayLoad(tex: PBShaderExp, coords: number|PBShaderExp, arrayIndex: number|PBShaderExp, level: number|PBShaderExp);\n    textureArrayLoad: {\n        overloads: [\n            ...genType('textureLoad', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2DArray,\n                typeI32Vec2,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeI32Vec4, [\n                typeITex2DArray,\n                typeI32Vec2,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeU32Vec4, [\n                typeUTex2DArray,\n                typeI32Vec2,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureLoad', MASK_WEBGPU, typeF32, [\n                typeTexDepth2DArray,\n                typeI32Vec2,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2DArray,\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeI32Vec4, [\n                typeITex2DArray,\n                typeI32Vec3,\n                typeI32\n            ]),\n            ...genType('texelFetch', MASK_WEBGL2, typeU32Vec4, [\n                typeUTex2DArray,\n                typeI32Vec3,\n                typeI32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length === 0) {\n                throw new PBParamLengthError('textureArrayLoad');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamValueError('textureArrayLoad', 'tex');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureArrayLoad', 'tex');\n            }\n            if (pb.getDevice().type === 'webgl2') {\n                if (args.length !== 4) {\n                    throw new PBParamLengthError('textureArrayLoad');\n                }\n                const coords = pb.ivec3(args[1], args[2]);\n                const level = args[3];\n                return callBuiltin(pb, name, tex, coords, level);\n            } else {\n                if (texType.isStorageTexture()) {\n                    texType.readable = true;\n                }\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    // textureStore(tex: PBShaderExp, coords: number|PBShaderExp, value: PBShaderExp);\n    textureStore: {\n        overloads: [\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba8unorm,\n                typeU32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba8snorm,\n                typeU32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba8uint,\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba8sint,\n                typeU32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba16uint,\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba16sint,\n                typeU32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba16float,\n                typeU32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba32uint,\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba32sint,\n                typeU32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rgba32float,\n                typeU32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rg32uint,\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rg32sint,\n                typeU32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_rg32float,\n                typeU32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_r32uint,\n                typeU32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_r32sint,\n                typeU32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage1D_r32float,\n                typeU32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba8unorm,\n                typeU32Vec2,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba8snorm,\n                typeU32Vec2,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba8uint,\n                typeU32Vec2,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba8sint,\n                typeU32Vec2,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba16uint,\n                typeU32Vec2,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba16sint,\n                typeU32Vec2,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba16float,\n                typeU32Vec2,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba32uint,\n                typeU32Vec2,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba32sint,\n                typeU32Vec2,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rgba32float,\n                typeU32Vec2,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rg32uint,\n                typeU32Vec2,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rg32sint,\n                typeU32Vec2,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_rg32float,\n                typeU32Vec2,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_r32uint,\n                typeU32Vec2,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_r32uint,\n                typeI32Vec2,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_r32sint,\n                typeU32Vec2,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2D_r32float,\n                typeU32Vec2,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba8unorm,\n                typeU32Vec3,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba8snorm,\n                typeU32Vec3,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba8uint,\n                typeU32Vec3,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba8sint,\n                typeU32Vec3,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba16uint,\n                typeU32Vec3,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba16sint,\n                typeU32Vec3,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba16float,\n                typeU32Vec3,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba32uint,\n                typeU32Vec3,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba32sint,\n                typeU32Vec3,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rgba32float,\n                typeU32Vec3,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rg32uint,\n                typeU32Vec3,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rg32sint,\n                typeU32Vec3,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_rg32float,\n                typeU32Vec3,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_r32uint,\n                typeU32Vec3,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_r32sint,\n                typeU32Vec3,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage3D_r32float,\n                typeU32Vec3,\n                typeF32Vec4\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (pb.getDevice().type === 'webgpu') {\n                const tex = args[0];\n                if (tex instanceof PBShaderExp) {\n                    const texType = tex.$ast.getType();\n                    if (texType?.isTextureType() && texType.isStorageTexture()) {\n                        texType.writable = true;\n                    }\n                }\n            }\n            return callBuiltin(pb, name, ...args);\n        }\n    },\n    // textureArrayStore(tex: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp, value: PBShaderExp);\n    textureArrayStore: {\n        overloads: [\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba8unorm,\n                typeU32Vec2,\n                typeI32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba8snorm,\n                typeU32Vec2,\n                typeI32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba8uint,\n                typeU32Vec2,\n                typeI32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba8sint,\n                typeU32Vec2,\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba16uint,\n                typeU32Vec2,\n                typeI32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba16sint,\n                typeU32Vec2,\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba16float,\n                typeU32Vec2,\n                typeI32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba32uint,\n                typeU32Vec2,\n                typeI32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba32sint,\n                typeU32Vec2,\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rgba32float,\n                typeU32Vec2,\n                typeI32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rg32uint,\n                typeU32Vec2,\n                typeI32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rg32sint,\n                typeU32Vec2,\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_rg32float,\n                typeU32Vec2,\n                typeI32,\n                typeF32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_r32uint,\n                typeU32Vec2,\n                typeI32,\n                typeU32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_r32sint,\n                typeU32Vec2,\n                typeI32,\n                typeI32Vec4\n            ]),\n            ...genType('textureStore', MASK_WEBGPU, typeVoid, [\n                typeTexStorage2DArray_r32float,\n                typeU32Vec2,\n                typeI32,\n                typeF32Vec4\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (pb.getDevice().type === 'webgpu') {\n                const tex = args[0];\n                if (tex instanceof PBShaderExp) {\n                    const texType = tex.$ast.getType();\n                    if (texType?.isTextureType() && texType.isStorageTexture()) {\n                        texType.writable = true;\n                    }\n                }\n            }\n            return callBuiltin(pb, name, ...args);\n        }\n    },\n    // textureNumLayers(tex: PBShaderExp);\n    textureNumLayers: {\n        overloads: [\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTex2DArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeITex2DArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeUTex2DArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexCubeArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeITexCubeArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeUTexCubeArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexDepth2DArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexDepthCubeArray\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_r32float\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_r32sint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_r32uint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rg32float\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rg32sint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rg32uint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba16float\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba16sint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba16uint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba32float\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba32sint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba32uint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba8sint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba8snorm\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba8uint\n            ]),\n            ...genType('textureNumLayers', MASK_WEBGPU, typeI32, [\n                typeTexStorage2DArray_rgba8unorm\n            ])\n        ]\n    },\n    // textureNumLevels(tex: PBShaderExp);\n    textureNumLevels: {\n        overloads: [\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTex1D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeITex1D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeUTex1D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTex2D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeITex2D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeUTex2D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTex2DArray\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeITex2DArray\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeUTex2DArray\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTex3D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeITex3D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeUTex3D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTexCube\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeITexCube\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeUTexCube\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTexCubeArray\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeITexCubeArray\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeUTexCubeArray\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTexDepth2D\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTexDepth2DArray\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTexDepthCube\n            ]),\n            ...genType('textureNumLevels', MASK_WEBGPU, typeI32, [\n                typeTexDepthCubeArray\n            ])\n        ]\n    },\n    // textureNumSamples(tex: PBShaderExp);\n    textureNumSamples: {\n        overloads: [\n            ...genType('textureNumSamples', MASK_WEBGPU, typeI32, [\n                typeTexMultisampled2D\n            ]),\n            ...genType('textureNumSamples', MASK_WEBGPU, typeI32, [\n                typeITexMultisampled2D\n            ]),\n            ...genType('textureNumSamples', MASK_WEBGPU, typeI32, [\n                typeUTexMultisampled2D\n            ]),\n            ...genType('textureNumSamples', MASK_WEBGPU, typeI32, [\n                typeTexDepthMultisampled2D\n            ])\n        ]\n    },\n    // textureSample(tex: texture, coords: number|PBShaderExp);\n    textureSample: {\n        overloads: [\n            ...genType('textureSample', MASK_WEBGPU, typeF32Vec4, [\n                typeTex1D,\n                typeSampler,\n                typeF32\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2D,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32Vec4, [\n                typeTex3D,\n                typeSampler,\n                typeF32Vec3\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCube,\n                typeSampler,\n                typeF32Vec3\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32, [\n                typeTexDepth2D,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32, [\n                typeTexDepthCube,\n                typeSampler,\n                typeF32Vec3\n            ]),\n            ...genType('textureSampleBaseClampToEdge', MASK_WEBGPU, typeF32Vec4, [\n                typeTexExternal,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTex1D,\n                typeF32Vec2\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTexExternal,\n                typeF32Vec2\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTexDepth2D,\n                typeF32Vec2\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTex3D,\n                typeF32Vec3\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTexDepthCube,\n                typeF32Vec3\n            ]),\n            ...genType('texture2D', MASK_WEBGL1, typeF32Vec4, [\n                typeTex1D,\n                typeF32Vec2\n            ]),\n            ...genType('texture2D', MASK_WEBGL1, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2\n            ]),\n            ...genType('texture2D', MASK_WEBGL1, typeF32Vec4, [\n                typeTexExternal,\n                typeF32Vec2\n            ]),\n            ...genType('texture2D', MASK_WEBGL1, typeF32Vec4, [\n                typeTexDepth2D,\n                typeF32Vec2\n            ]),\n            ...genType('textureCube', MASK_WEBGL1, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3\n            ]),\n            ...genType('textureCube', MASK_WEBGL1, typeF32Vec4, [\n                typeTexDepthCube,\n                typeF32Vec3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 2) {\n                throw new PBParamLengthError('textureSample');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureSample', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureSample', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                if (texType.isStorageTexture()) {\n                    throw new PBParamTypeError('textureSample', 'texture');\n                }\n                const sampler = pb.getDefaultSampler(tex, false);\n                const coords = args[1];\n                const ret = callBuiltin(pb, name, tex, sampler, coords);\n                if (ret.$ast.getType().isCompatibleType(typeF32)) {\n                    return pb.vec4(ret);\n                } else {\n                    return ret;\n                }\n            } else {\n                pb.getDefaultSampler(tex, false);\n                if (texType.is1DTexture()) {\n                    if (args[1] instanceof PBShaderExp) {\n                        const coordType = args[1].$ast.getType();\n                        if (!coordType.isPrimitiveType() || !coordType.isScalarType() || coordType.scalarType !== PBPrimitiveType.F32) {\n                            throw new PBParamTypeError('textureSample', 'coord');\n                        }\n                    } else if (typeof args[1] !== 'number') {\n                        throw new PBParamTypeError('textureSample', 'coord');\n                    }\n                    args[1] = pb.vec2(args[1], 0);\n                }\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    // textureArraySample(tex: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp)\n    textureArraySample: {\n        overloads: [\n            ...genType('textureSample', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32, [\n                typeTexDepth2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32\n            ]),\n            ...genType('textureSample', MASK_WEBGPU, typeF32, [\n                typeTexDepthCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2DArray,\n                typeF32Vec3\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTexDepth2DArray,\n                typeF32Vec3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 3) {\n                throw new PBParamLengthError('textureArraySample');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureArraySample', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureArraySample', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, false);\n                const coords = args[1];\n                const arrayIndex = args[2];\n                const ret = callBuiltin(pb, name, tex, sampler, coords, arrayIndex);\n                if (ret.$ast.getType().isCompatibleType(typeF32)) {\n                    return pb.vec4(ret);\n                } else {\n                    return ret;\n                }\n            } else {\n                pb.getDefaultSampler(tex, false);\n                const coords = args[1];\n                const arrayIndex = args[2];\n                const coordsComposit = pb.vec3(coords, pb.float(arrayIndex));\n                return callBuiltin(pb, name, tex, coordsComposit);\n            }\n        }\n    },\n    // textureSampleBias(tex: PBShaderExp, coords: PBShaderExp, bias: number|PBShaderExp)\n    textureSampleBias: {\n        overloads: [\n            ...genType('textureSampleBias', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2D,\n                typeSampler,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureSampleBias', MASK_WEBGPU, typeF32Vec4, [\n                typeTex3D,\n                typeSampler,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('textureSampleBias', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCube,\n                typeSampler,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTex3D,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('texture2D', MASK_WEBGL1, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureCube', MASK_WEBGL1, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3,\n                typeF32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 3) {\n                throw new PBParamLengthError('textureSampleBias');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureSampleBias', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureSampleBias', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, false);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2]);\n            } else {\n                pb.getDefaultSampler(tex, false);\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    // textureArraySampleBias(tex: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp, bias: number|PBShaderExp)\n    textureArraySampleBias: {\n        overloads: [\n            ...genType('textureSampleBias', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('textureSampleBias', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2DArray,\n                typeF32Vec3,\n                typeF32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 4) {\n                throw new PBParamLengthError('textureArraySampleBias');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureArraySampleBias', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureArraySampleBias', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, false);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2], args[3]);\n            } else if (pb.getDevice().type === 'webgl2') {\n                pb.getDefaultSampler(tex, false);\n                const coords = args[1];\n                const arrayIndex = args[2];\n                const coordsComposit = pb.vec3(coords, pb.float(arrayIndex));\n                return callBuiltin(pb, name, tex, coordsComposit, args[3]);\n            }\n        }\n    },\n    // textureSampleCompare(tex: PBShaderExp, coords: PBShaderExp, depthRef: number|PBShaderExp)\n    textureSampleCompare: {\n        overloads: [\n            ...genType('textureSampleCompare', MASK_WEBGPU, typeF32, [\n                typeTexDepth2D,\n                typeSamplerComparison,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureSampleCompare', MASK_WEBGPU, typeF32, [\n                typeTexDepthCube,\n                typeSamplerComparison,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32, [\n                typeTexDepth2D,\n                typeF32Vec3\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32, [\n                typeTexDepthCube,\n                typeF32Vec4\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 3) {\n                throw new PBParamLengthError('textureSampleCompare');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureSampleCompare', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType() || !texType.isDepthTexture()) {\n                throw new PBParamTypeError('textureSampleCompare', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(args[0], true);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2]);\n            } else {\n                pb.getDefaultSampler(args[0], true);\n                let coordsComposite;\n                if (texType.isCubeTexture() || texType.isArrayTexture()) {\n                    coordsComposite = pb.vec4(args[1], args[2]);\n                } else {\n                    coordsComposite = pb.vec3(args[1], args[2]);\n                }\n                return callBuiltin(pb, name, tex, coordsComposite);\n            }\n        }\n    },\n    // textureArraySampleCompare(tex: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp, depthRef: number|PBShaderExp)\n    textureArraySampleCompare: {\n        overloads: [\n            ...genType('textureSampleCompare', MASK_WEBGPU, typeF32, [\n                typeTexDepth2DArray,\n                typeSamplerComparison,\n                typeF32Vec2,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('textureSampleCompare', MASK_WEBGPU, typeF32, [\n                typeTexDepthCubeArray,\n                typeSamplerComparison,\n                typeF32Vec3,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32, [\n                typeTexDepth2DArray,\n                typeF32Vec4\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 4) {\n                throw new PBParamLengthError('textureArraySampleCompare');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureArraySampleCompare', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType() || !texType.isDepthTexture()) {\n                throw new PBParamTypeError('textureArraySampleCompare', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(args[0], true);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2], args[3]);\n            } else {\n                pb.getDefaultSampler(args[0], true);\n                const coordsComposite = pb.vec4(args[1], pb.float(args[2]), args[3]);\n                return callBuiltin(pb, name, tex, coordsComposite);\n            }\n        }\n    },\n    // textureSampleLevel(tex: PBShaderExp, coords: PBShaderExp, level: number|PBShaderExp)\n    textureSampleLevel: {\n        overloads: [\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2D,\n                typeSampler,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32Vec4, [\n                typeTex3D,\n                typeSampler,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCube,\n                typeSampler,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32Vec4, [\n                typeTexExternal,\n                typeSampler,\n                typeF32Vec2\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepth2D,\n                typeSampler,\n                typeF32Vec2,\n                typeI32\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepthCube,\n                typeSampler,\n                typeF32Vec3,\n                typeI32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32Vec4, [\n                typeTexDepth2D,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32Vec4, [\n                typeTexExternal,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32Vec4, [\n                typeTex3D,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32Vec4, [\n                typeTexDepthCube,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('texture2DLodEXT', MASK_WEBGL1, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('texture2DLodEXT', MASK_WEBGL1, typeF32Vec4, [\n                typeTexDepth2D,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('texture2DLodEXT', MASK_WEBGL1, typeF32Vec4, [\n                typeTexExternal,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureCubeLodEXT', MASK_WEBGL1, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('textureCubeLodEXT', MASK_WEBGL1, typeF32Vec4, [\n                typeTexDepthCube,\n                typeF32Vec3,\n                typeF32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureSampleLevel', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureSampleLevel', 'texture');\n            }\n            if (pb.getDevice().type === 'webgl' && pb.shaderKind === 'vertex') {\n                // WebGL1 does not support vertex texture lod\n                return pb.textureSample(tex, args[1]);\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                if (texType.isExternalTexture()) {\n                    return pb.textureLoad(tex, pb.ivec2(args[1]), 0);\n                } else {\n                    const sampler = pb.getDefaultSampler(tex, false);\n                    const level = texType.isDepthTexture() && (typeof args[2] === 'number' || args[2] instanceof PBShaderExp && args[2].$ast.getType().isCompatibleType(typeF32)) ? pb.int(args[2]) : args[2];\n                    const ret = texType.isExternalTexture() ? callBuiltin(pb, name, tex, sampler, args[1]) : callBuiltin(pb, name, tex, sampler, args[1], level);\n                    if (ret.$ast.getType().isCompatibleType(typeF32)) {\n                        return pb.vec4(ret);\n                    } else {\n                        return ret;\n                    }\n                }\n            } else {\n                pb.getDefaultSampler(tex, false);\n                return texType.isExternalTexture() ? callBuiltin(pb, name, args[0], args[1], 0) : callBuiltin(pb, name, args[0], args[1], args[2]);\n            }\n        }\n    },\n    // textureArraySampleLevel(tex: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp, level: number|PBShaderExp)\n    textureArraySampleLevel: {\n        overloads: [\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepth2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureSampleLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepthCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32,\n                typeI32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2DArray,\n                typeF32Vec3,\n                typeF32\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 4) {\n                throw new PBParamLengthError('textureArraySampleLevel');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureArraySampleLevel', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureArraySampleLevel', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, false);\n                const level = texType.isDepthTexture() && (typeof args[3] === 'number' || args[3] instanceof PBShaderExp && args[3].$ast.getType().isCompatibleType(typeF32)) ? pb.int(args[3]) : args[3];\n                const ret = callBuiltin(pb, name, tex, sampler, args[1], args[2], level);\n                if (ret.$ast.getType().isCompatibleType(typeF32)) {\n                    return pb.vec4(ret);\n                } else {\n                    return ret;\n                }\n            } else {\n                pb.getDefaultSampler(tex, false);\n                const coordsComposite = pb.vec3(args[1], pb.float(args[2]));\n                return callBuiltin(pb, name, tex, coordsComposite, args[3]);\n            }\n        }\n    },\n    // textureSampleCompare(tex: PBShaderExp, coords: PBShaderExp, depthRef: number|PBShaderExp)\n    textureSampleCompareLevel: {\n        overloads: [\n            ...genType('textureSampleCompareLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepth2D,\n                typeSamplerComparison,\n                typeF32Vec2,\n                typeF32\n            ]),\n            ...genType('textureSampleCompareLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepthCube,\n                typeSamplerComparison,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('textureLod', MASK_WEBGL2, typeF32, [\n                typeTexDepth2D,\n                typeF32Vec3,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32, [\n                typeTexDepthCube,\n                typeF32Vec4\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 3) {\n                throw new PBParamLengthError('textureSampleCompareLevel');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureSampleCompareLevel', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType() || !texType.isDepthTexture()) {\n                throw new PBParamTypeError('textureSampleCompareLevel', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, true);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2]);\n            } else {\n                pb.getDefaultSampler(args[0], true);\n                let coordsComposite;\n                if (texType.isCubeTexture() || texType.isArrayTexture()) {\n                    coordsComposite = pb.vec4(args[1], args[2]);\n                } else {\n                    coordsComposite = pb.vec3(args[1], args[2]);\n                }\n                return texType.isCubeTexture() ? callBuiltin(pb, name, tex, coordsComposite) : callBuiltin(pb, name, tex, coordsComposite, 0);\n            }\n        }\n    },\n    // textureArraySampleCompareLevel(tex: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp, depthRef: number|PBShaderExp)\n    textureArraySampleCompareLevel: {\n        overloads: [\n            ...genType('textureSampleCompareLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepth2DArray,\n                typeSamplerComparison,\n                typeF32Vec2,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('textureSampleCompareLevel', MASK_WEBGPU, typeF32, [\n                typeTexDepthCubeArray,\n                typeSamplerComparison,\n                typeF32Vec3,\n                typeI32,\n                typeF32\n            ]),\n            ...genType('texture', MASK_WEBGL2, typeF32, [\n                typeTexDepth2DArray,\n                typeF32Vec4\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 4) {\n                throw new PBParamLengthError('textureArraySampleCompareLevel');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureArraySampleCompareLevel', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType() || !texType.isDepthTexture()) {\n                throw new PBParamTypeError('textureArraySampleCompareLevel', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, true);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2], args[3]);\n            } else {\n                pb.getDefaultSampler(args[0], true);\n                const coordsComposite = pb.vec4(args[1], pb.float(args[2]), args[3]);\n                return callBuiltin(pb, name, tex, coordsComposite);\n            }\n        }\n    },\n    // textureSampleGrad(tex: PBShaderExp, coords: PBShaderExp, ddx: PBShaderExp, ddy: PBShaderExp)\n    textureSampleGrad: {\n        overloads: [\n            ...genType('textureSampleGrad', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2D,\n                typeSampler,\n                typeF32Vec2,\n                typeF32Vec2,\n                typeF32Vec2\n            ]),\n            ...genType('textureSampleGrad', MASK_WEBGPU, typeF32Vec4, [\n                typeTex3D,\n                typeSampler,\n                typeF32Vec3,\n                typeF32Vec3,\n                typeF32Vec3\n            ]),\n            ...genType('textureSampleGrad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCube,\n                typeSampler,\n                typeF32Vec3,\n                typeF32Vec3,\n                typeF32Vec3\n            ]),\n            ...genType('textureGrad', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2,\n                typeF32Vec2,\n                typeF32Vec2\n            ]),\n            ...genType('textureGrad', MASK_WEBGL2, typeF32Vec4, [\n                typeTex3D,\n                typeF32Vec3,\n                typeF32Vec3,\n                typeF32Vec3\n            ]),\n            ...genType('textureGrad', MASK_WEBGL2, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3,\n                typeF32Vec3,\n                typeF32Vec3\n            ]),\n            ...genType('texture2DGradEXT', MASK_WEBGL1, typeF32Vec4, [\n                typeTex2D,\n                typeF32Vec2,\n                typeF32Vec2,\n                typeF32Vec2\n            ]),\n            ...genType('textureCubeGradEXT', MASK_WEBGL1, typeF32Vec4, [\n                typeTexCube,\n                typeF32Vec3,\n                typeF32Vec3,\n                typeF32Vec3\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 4) {\n                throw new PBParamLengthError('textureSampleGrad');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureSampleGrad', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType()) {\n                throw new PBParamTypeError('textureSampleGrad', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, false);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2], args[3]);\n            } else {\n                pb.getDefaultSampler(tex, false);\n                return callBuiltin(pb, name, ...args);\n            }\n        }\n    },\n    // textureArraySampleGrad(tex: PBShaderExp, coords: PBShaderExp, arrayIndex: number|PBShaderExp, ddx: PBShaderExp, ddy: PBShaderExp)\n    textureArraySampleGrad: {\n        overloads: [\n            ...genType('textureSampleGrad', MASK_WEBGPU, typeF32Vec4, [\n                typeTex2DArray,\n                typeSampler,\n                typeF32Vec2,\n                typeI32,\n                typeF32Vec2,\n                typeF32Vec2\n            ]),\n            ...genType('textureSampleGrad', MASK_WEBGPU, typeF32Vec4, [\n                typeTexCubeArray,\n                typeSampler,\n                typeF32Vec3,\n                typeI32,\n                typeF32Vec3,\n                typeF32Vec3\n            ]),\n            ...genType('textureGrad', MASK_WEBGL2, typeF32Vec4, [\n                typeTex2DArray,\n                typeF32Vec3,\n                typeF32Vec2,\n                typeF32Vec2\n            ])\n        ],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 5) {\n                throw new PBParamLengthError('textureArraySampleGrad');\n            }\n            const tex = args[0];\n            if (!(tex instanceof PBShaderExp)) {\n                throw new PBParamTypeError('textureArraySampleGrad', 'texture');\n            }\n            const texType = tex.$ast.getType();\n            if (!texType.isTextureType() || !texType.isArrayTexture()) {\n                throw new PBParamTypeError('textureArraySampleGrad', 'texture');\n            }\n            if (pb.getDevice().type === 'webgpu') {\n                const sampler = pb.getDefaultSampler(tex, false);\n                return callBuiltin(pb, name, tex, sampler, args[1], args[2], args[3], args[4]);\n            } else {\n                pb.getDefaultSampler(tex, false);\n                const coordsComposite = pb.vec3(args[1], pb.float(args[2]));\n                return callBuiltin(pb, name, tex, coordsComposite, args[3], args[4]);\n            }\n        }\n    },\n    storageBarrier: {\n        overloads: genType('storageBarrier', MASK_WEBGPU, typeVoid, [])\n    },\n    workgroupBarrier: {\n        overloads: genType('workgroupBarrier', MASK_WEBGPU, typeVoid, [])\n    },\n    atomicLoad: {\n        overloades: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 1) {\n                throw new PBParamLengthError(name);\n            }\n            const arg = args[0];\n            if (!(arg instanceof PBShaderExp)) {\n                throw new PBParamTypeError(name, 'ptr');\n            }\n            if (arg.$ast.getType().typeId === typeAtomicI32.typeId) {\n                return pb.$callFunctionNoCheck(name, [\n                    new ASTAddressOf(arg.$ast)\n                ], typeI32);\n            } else if (arg.$ast.getType().typeId === typeAtomicU32.typeId) {\n                return pb.$callFunctionNoCheck(name, [\n                    new ASTAddressOf(arg.$ast)\n                ], typeU32);\n            } else {\n                throw new PBParamValueError(name, 'ptr must be atomic type');\n            }\n        }\n    },\n    atomicStore: {\n        overloades: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 2) {\n                throw new PBParamLengthError(name);\n            }\n            const arg1 = args[0];\n            const arg2 = args[1];\n            if (!(arg1 instanceof PBShaderExp)) {\n                throw new PBParamTypeError(name, 'ptr');\n            }\n            if (arg1.$ast.getType().typeId === typeAtomicI32.typeId) {\n                if (typeof arg2 === 'number') {\n                    if (!Number.isInteger(arg2)) {\n                        throw new PBParamValueError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        new ASTScalar(arg2, typeI32)\n                    ], typeVoid);\n                } else if (arg2 instanceof PBShaderExp) {\n                    if (arg2.$ast.getType().typeId !== typeI32.typeId) {\n                        throw new PBParamTypeError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        arg2.$ast\n                    ], typeVoid);\n                } else {\n                    throw new PBParamTypeError(name, 'value');\n                }\n            } else if (arg1.$ast.getType().typeId === typeAtomicU32.typeId) {\n                if (typeof arg2 === 'number') {\n                    if (!Number.isInteger(arg2)) {\n                        throw new PBParamValueError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        new ASTScalar(arg2, typeU32)\n                    ], typeVoid);\n                } else if (arg2 instanceof PBShaderExp) {\n                    if (arg2.$ast.getType().typeId !== typeU32.typeId) {\n                        throw new PBParamTypeError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        arg2.$ast\n                    ], typeVoid);\n                } else {\n                    throw new PBParamTypeError(name, 'value');\n                }\n            } else {\n                throw new PBParamValueError(name, 'ptr must be atomic type');\n            }\n        }\n    }\n};\nfor (const name of [\n    'atomicAdd',\n    'atomicSub',\n    'atomicMax',\n    'atomicMin',\n    'atomicAnd',\n    'atomicOr',\n    'atomicXor',\n    'atomicExchange'\n]){\n    builtinFunctionsAll[name] = {\n        overloades: [],\n        normalizeFunc (pb, name, ...args) {\n            if (args.length !== 2) {\n                throw new PBParamLengthError(name);\n            }\n            const arg1 = args[0];\n            const arg2 = args[1];\n            if (!(arg1 instanceof PBShaderExp)) {\n                throw new PBParamTypeError(name, 'ptr');\n            }\n            if (arg1.$ast.getType().typeId === typeAtomicI32.typeId) {\n                if (typeof arg2 === 'number') {\n                    if (!Number.isInteger(arg2)) {\n                        throw new PBParamValueError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        new ASTScalar(arg2, typeI32)\n                    ], typeI32);\n                } else if (arg2 instanceof PBShaderExp) {\n                    if (arg2.$ast.getType().typeId !== typeI32.typeId) {\n                        throw new PBParamTypeError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        arg2.$ast\n                    ], typeI32);\n                } else {\n                    throw new PBParamTypeError(name, 'value');\n                }\n            } else if (arg1.$ast.getType().typeId === typeAtomicU32.typeId) {\n                if (typeof arg2 === 'number') {\n                    if (!Number.isInteger(arg2)) {\n                        throw new PBParamValueError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        new ASTScalar(arg2, typeU32)\n                    ], typeU32);\n                } else if (arg2 instanceof PBShaderExp) {\n                    if (arg2.$ast.getType().typeId !== typeU32.typeId) {\n                        throw new PBParamTypeError(name, 'value');\n                    }\n                    return pb.$callFunctionNoCheck(name, [\n                        new ASTAddressOf(arg1.$ast),\n                        arg2.$ast\n                    ], typeU32);\n                } else {\n                    throw new PBParamTypeError(name, 'value');\n                }\n            } else {\n                throw new PBParamValueError(name, 'ptr must be atomic type');\n            }\n        }\n    };\n}\n/** @internal */ function setBuiltinFuncs(cls) {\n    for (const k of Object.keys(builtinFunctionsAll)){\n        cls.prototype[k] = function(...args) {\n            const normalizeFunc = builtinFunctionsAll?.[k]?.normalizeFunc || callBuiltin;\n            return normalizeFunc(this, k, ...args);\n        };\n    }\n}\n\nexport { setBuiltinFuncs };\n//# sourceMappingURL=builtinfunc.js.map\n","import { makeConstructor, PBShaderExp } from './base.js';\nimport { typeAtomicI32, typeAtomicU32, typeU32, PBPrimitiveType, typeF32, typeI32, typeBool, typeF32Vec2, typeI32Vec2, typeU32Vec2, typeBVec2, typeF32Vec3, typeI32Vec3, typeU32Vec3, typeBVec3, typeF32Vec4, typeI32Vec4, typeU32Vec4, typeBVec4, typeMat2, typeMat2x3, typeMat2x4, typeMat3x2, typeMat3, typeMat3x4, typeMat4x2, typeMat4x3, typeMat4, typeTex1D, typeTex2D, typeTex3D, typeTexCube, typeTexDepth2D, typeTexDepthCube, typeTex2DArray, typeTexDepth2DArray, typeTexExternal, typeITex1D, typeITex2D, typeITex3D, typeITexCube, typeITex2DArray, typeUTex1D, typeUTex2D, typeUTex3D, typeUTexCube, typeUTex2DArray, typeSampler, typeSamplerComparison, PBTextureTypeInfo, PBTextureType } from './types.js';\nimport { ASTShaderExpConstructor, ASTScalar } from './ast.js';\nimport { PBParamLengthError, PBParamTypeError, PBDeviceNotSupport } from './errors.js';\n\nconst StorageTextureFormatMap = {\n    rgba8unorm: 'rgba8unorm',\n    rgba8snorm: 'rgba8snorm',\n    rgba8uint: 'rgba8ui',\n    rgba8sint: 'rgba8i',\n    rgba16uint: 'rgba16ui',\n    rgba16sint: 'rgba16i',\n    rgba16float: 'rgba16f',\n    r32float: 'r32f',\n    r32uint: 'r32ui',\n    r32sint: 'r32i',\n    rg32float: 'rg32f',\n    rg32uint: 'rg32ui',\n    rg32sint: 'rg32i',\n    rgba32float: 'rgba32f',\n    rgba32uint: 'rgba32ui',\n    rgba32sint: 'rgba32i'\n};\nfunction vec_n(vecType, ...args) {\n    if (this.getDevice().type === 'webgl') {\n        if (vecType.scalarType === PBPrimitiveType.U32) {\n            throw new PBDeviceNotSupport('unsigned integer type');\n        }\n        if (vecType.isMatrixType() && vecType.cols !== vecType.rows) {\n            throw new PBDeviceNotSupport('non-square matrix type');\n        }\n    }\n    if (args.length === 1 && typeof args[0] === 'string') {\n        return new PBShaderExp(args[0], vecType);\n    } else {\n        const exp = new PBShaderExp('', vecType);\n        if (vecType.isScalarType() && args.length === 1 && (typeof args[0] === 'number' || typeof args[0] === 'boolean')) {\n            exp.$ast = new ASTScalar(args[0], vecType);\n        } else {\n            exp.$ast = new ASTShaderExpConstructor(exp.$typeinfo, args.map((arg)=>{\n                if (typeof arg === 'string') {\n                    throw new PBParamTypeError('vec_n');\n                }\n                return arg instanceof PBShaderExp ? arg.$ast : arg;\n            }));\n        }\n        return exp;\n    }\n}\nconst primitiveCtors = {\n    float: typeF32,\n    int: typeI32,\n    uint: typeU32,\n    bool: typeBool,\n    vec2: typeF32Vec2,\n    ivec2: typeI32Vec2,\n    uvec2: typeU32Vec2,\n    bvec2: typeBVec2,\n    vec3: typeF32Vec3,\n    ivec3: typeI32Vec3,\n    uvec3: typeU32Vec3,\n    bvec3: typeBVec3,\n    vec4: typeF32Vec4,\n    ivec4: typeI32Vec4,\n    uvec4: typeU32Vec4,\n    bvec4: typeBVec4,\n    mat2: typeMat2,\n    mat2x3: typeMat2x3,\n    mat2x4: typeMat2x4,\n    mat3x2: typeMat3x2,\n    mat3: typeMat3,\n    mat3x4: typeMat3x4,\n    mat4x2: typeMat4x2,\n    mat4x3: typeMat4x3,\n    mat4: typeMat4\n};\nconst simpleCtors = {\n    tex1D: typeTex1D,\n    tex2D: typeTex2D,\n    tex3D: typeTex3D,\n    texCube: typeTexCube,\n    tex2DShadow: typeTexDepth2D,\n    texCubeShadow: typeTexDepthCube,\n    tex2DArray: typeTex2DArray,\n    tex2DArrayShadow: typeTexDepth2DArray,\n    texExternal: typeTexExternal,\n    itex1D: typeITex1D,\n    itex2D: typeITex2D,\n    itex3D: typeITex3D,\n    itexCube: typeITexCube,\n    itex2DArray: typeITex2DArray,\n    utex1D: typeUTex1D,\n    utex2D: typeUTex2D,\n    utex3D: typeUTex3D,\n    utexCube: typeUTexCube,\n    utex2DArray: typeUTex2DArray,\n    sampler: typeSampler,\n    samplerComparison: typeSamplerComparison\n};\nfunction makeStorageTextureCtor(type) {\n    const ctor = {};\n    for (const k of Object.keys(StorageTextureFormatMap)){\n        ctor[k] = function(rhs) {\n            return new PBShaderExp(rhs, new PBTextureTypeInfo(type, StorageTextureFormatMap[k]));\n        };\n    }\n    return ctor;\n}\nconst texStorageCtors = {\n    texStorage1D: PBTextureType.TEX_STORAGE_1D,\n    texStorage2D: PBTextureType.TEX_STORAGE_2D,\n    texStorage2DArray: PBTextureType.TEX_STORAGE_2D_ARRAY,\n    texStorage3D: PBTextureType.TEX_STORAGE_3D\n};\n/** @internal */ function setConstructors(cls) {\n    Object.keys(primitiveCtors).forEach((k)=>{\n        cls.prototype[k] = makeConstructor(function(...args) {\n            return vec_n.call(this, primitiveCtors[k], ...args);\n        }, primitiveCtors[k]);\n    });\n    Object.keys(simpleCtors).forEach((k)=>{\n        cls.prototype[k] = function(rhs) {\n            return new PBShaderExp(rhs, simpleCtors[k]);\n        };\n    });\n    Object.keys(texStorageCtors).forEach((k)=>{\n        cls.prototype[k] = makeStorageTextureCtor(texStorageCtors[k]);\n    });\n    cls.prototype['atomic_int'] = makeConstructor(function(...args) {\n        if (args.length > 1) {\n            throw new PBParamLengthError('atomic_int');\n        }\n        if (args.length === 1) {\n            if (typeof args[0] !== 'string') {\n                throw new PBParamTypeError('atomic_int', 'name');\n            }\n            return new PBShaderExp(args[0], typeAtomicI32);\n        } else {\n            const exp = new PBShaderExp('', typeAtomicI32);\n            exp.$ast = new ASTShaderExpConstructor(exp.$typeinfo, []);\n            return exp;\n        }\n    }, typeAtomicI32);\n    cls.prototype['atomic_uint'] = makeConstructor(function(...args) {\n        if (args.length > 1) {\n            throw new PBParamLengthError('atomic_uint');\n        }\n        if (args.length === 1 && typeof args[0] === 'string') {\n            return new PBShaderExp(args[0], typeAtomicU32);\n        } else if (args.length === 0) {\n            const exp = new PBShaderExp('', typeAtomicU32);\n            exp.$ast = new ASTShaderExpConstructor(exp.$typeinfo, []);\n            return exp;\n        }\n        const arg = args[0];\n        if (typeof arg === 'number' && Number.isInteger(arg) || arg instanceof PBShaderExp && arg.$ast.getType().typeId === typeU32.typeId) {\n            const exp = new PBShaderExp('', typeAtomicU32);\n            exp.$ast = new ASTShaderExpConstructor(exp.$typeinfo, [\n                arg instanceof PBShaderExp ? arg.$ast : arg\n            ]);\n            return exp;\n        }\n        return null;\n    }, typeAtomicU32);\n} /*\nProgramBuilder.prototype.texStorage1D = makeStorageTextureCtor(typeinfo.PBTextureType.TEX_STORAGE_1D);\nProgramBuilder.prototype.texStorage2D = makeStorageTextureCtor(typeinfo.PBTextureType.TEX_STORAGE_2D);\nProgramBuilder.prototype.texStorage2DArray = makeStorageTextureCtor(typeinfo.PBTextureType.TEX_STORAGE_2D_ARRAY);\nProgramBuilder.prototype.texStorage3D = makeStorageTextureCtor(typeinfo.PBTextureType.TEX_STORAGE_3D);\n*/\n\nexport { setConstructors };\n//# sourceMappingURL=constructors.js.map\n","import { ShaderType } from '../base_types.js';\nimport { MAX_BINDING_GROUPS, getVertexAttribByName } from '../gpuobject.js';\nimport { PBReflection } from './reflection.js';\nimport { PBShaderExp, makeConstructor, Proxiable } from './base.js';\nimport { ASTAddressOf, ASTReferenceOf, ASTStructDefine, ASTShaderExpConstructor, ASTDeclareVar, getBuiltinParamName, ASTScalar, ASTDiscard, DeclareType, ASTPrimitive, ASTAssignment, ASTLValueScalar, genSamplerName, ASTCallFunction, ASTTouch, ASTLValueDeclare, builtinVariables, getBuiltinInputStructName, ASTGlobalScope, ASTFunctionParameter, ASTFunction, ASTScope, ASTReturn, ASTNakedScope, ASTIf, ASTSelect, ASTBreak, ASTContinue, ASTRange, ASTDoWhile, ASTWhile, getBuiltinOutputStructName, getBuiltinInputStructInstanceName, getBuiltinOutputStructInstanceName } from './ast.js';\nimport { PBDeviceNotSupport, PBReferenceValueRequired, PBPointerValueRequired, PBParamValueError, PBInternalError, PBParamLengthError, PBParamTypeError, PBTypeCastError, PBValueOutOfRange, PBError, PBNonScopedFunctionCall, PBASTError } from './errors.js';\nimport { setBuiltinFuncs } from './builtinfunc.js';\nimport { setConstructors } from './constructors.js';\nimport { PBStructTypeInfo, typeFrexpResult, typeFrexpResultVec2, typeFrexpResultVec3, typeFrexpResultVec4, typeBool, typeI32, typeU32, typeF32, PBArrayTypeInfo, typeTex2DArray, typeTex2D, typeTexCube, PBSamplerAccessMode, PBPrimitiveType, typeVoid, PBPointerTypeInfo, PBAddressSpace, PBFunctionTypeInfo } from './types.js';\nimport { getCurrentProgramBuilder, setCurrentProgramBuilder } from './misc.js';\n\nconst COMPUTE_UNIFORM_NAME = 'zUBC';\nconst COMPUTE_STORAGE_NAME = 'zSBC';\nconst VERTEX_UNIFORM_NAME = 'zUBV';\nconst FRAGMENT_UNIFORM_NAME = 'zUBF';\nconst SHARED_UNIFORM_NAME = 'zUBA';\nconst VERTEX_STORAGE_NAME = 'zSBV';\nconst FRAGMENT_STORAGE_NAME = 'zSBF';\nconst SHARED_STORAGE_NAME = 'zSBA';\nconst input_prefix = 'zVSInput_';\nconst output_prefix_vs = 'zVSOutput_';\nconst output_prefix_fs = 'zFSOutput_';\n/**\n * The program builder class\n * @public\n */ class ProgramBuilder {\n    /** @internal */ _device;\n    /** @internal */ _workgroupSize;\n    /** @internal */ _scopeStack = [];\n    /** @internal */ _shaderType = ShaderType.Vertex | ShaderType.Fragment | ShaderType.Compute;\n    /** @internal */ _structInfo;\n    /** @internal */ _uniforms;\n    /** @internal */ _globalScope;\n    /** @internal */ _builtinScope;\n    /** @internal */ _inputScope;\n    /** @internal */ _outputScope;\n    /** @internal */ _inputs;\n    /** @internal */ _outputs;\n    /** @internal */ _vertexAttributes;\n    /** @internal */ _depthRangeCorrection;\n    /** @internal */ _emulateDepthClamp;\n    /** @internal */ _lastError;\n    /** @internal */ _reflection;\n    /** @internal */ _autoStructureTypeIndex;\n    /** @internal */ _nameMap;\n    /**\n   * Creates a program builder for given device\n   * @param device - The device\n   */ constructor(device){\n        this._device = device;\n        this._workgroupSize = null;\n        this._structInfo = {};\n        this._uniforms = [];\n        this._scopeStack = [];\n        this._globalScope = null;\n        this._builtinScope = null;\n        this._inputScope = null;\n        this._outputScope = null;\n        this._inputs = [];\n        this._outputs = [];\n        this._vertexAttributes = [];\n        this._depthRangeCorrection = device.type === 'webgpu';\n        this._emulateDepthClamp = false;\n        this._lastError = null;\n        this._reflection = new PBReflection(this);\n        this._autoStructureTypeIndex = 0;\n        this._nameMap = [];\n    }\n    /** Get last error */ get lastError() {\n        return this._lastError;\n    }\n    /** @internal */ get shaderType() {\n        return this._shaderType;\n    }\n    /** Current shader kind */ get shaderKind() {\n        return this._shaderType === ShaderType.Vertex ? 'vertex' : this._shaderType === ShaderType.Fragment ? 'fragment' : this._shaderType === ShaderType.Compute ? 'compute' : null;\n    }\n    /** Gets the global scope */ getGlobalScope() {\n        return this._globalScope;\n    }\n    /** @internal */ get builtinScope() {\n        return this._builtinScope;\n    }\n    /** @internal */ get inputScope() {\n        return this._inputScope;\n    }\n    /** @internal */ get outputScope() {\n        return this._outputScope;\n    }\n    /** @internal */ get depthRangeCorrection() {\n        return this._depthRangeCorrection;\n    }\n    get emulateDepthClamp() {\n        return this._emulateDepthClamp;\n    }\n    set emulateDepthClamp(val) {\n        this._emulateDepthClamp = val;\n    }\n    /** Get the shader code reflection interface */ getReflection() {\n        return this._reflection;\n    }\n    /** Get the device */ getDevice() {\n        return this._device;\n    }\n    /** @internal */ reset() {\n        this._workgroupSize = null;\n        this._structInfo = {};\n        this._uniforms = [];\n        this._scopeStack = [];\n        this._globalScope = null;\n        this._builtinScope = null;\n        this._inputScope = null;\n        this._outputScope = null;\n        this._inputs = [];\n        this._outputs = [];\n        this._vertexAttributes = [];\n        this._depthRangeCorrection = this._device.type === 'webgpu';\n        this._reflection = new PBReflection(this);\n        this._autoStructureTypeIndex = 0;\n        this._nameMap = [];\n    }\n    /**\n   * Query the global variable by the name\n   * @param name - Name of the variable\n   * @returns The variable or null if not exists\n   */ queryGlobal(name) {\n        return this.getReflection().tag(name);\n    }\n    /** @internal */ pushScope(scope) {\n        this._scopeStack.unshift(scope);\n    }\n    /** @internal */ popScope() {\n        return this._scopeStack.shift();\n    }\n    /** Gets the current scope */ getCurrentScope() {\n        return this._scopeStack[0];\n    }\n    /** Gets the current function scope */ getCurrentFunctionScope() {\n        let funcScope = this.getCurrentScope();\n        while(funcScope && !(funcScope instanceof PBFunctionScope)){\n            funcScope = funcScope.$parent;\n        }\n        return funcScope;\n    }\n    /**\n   * Generates shader codes for a render program\n   * @param options - The build options\n   * @returns a tuple made by vertex shader source, fragment shader source, bind group layouts and vertex attributes used, or null if build faild\n   */ buildRender(options) {\n        setCurrentProgramBuilder(this);\n        this._lastError = null;\n        this.defineInternalStructs();\n        const ret = this.buildRenderSource(options);\n        setCurrentProgramBuilder(null);\n        this.reset();\n        return ret;\n    }\n    /**\n   * Generates shader code for a compute program\n   * @param options - The build programs\n   * @returns a tuple made by compute shader source and bind group layouts, or null if build failed\n   */ buildCompute(options) {\n        setCurrentProgramBuilder(this);\n        this._lastError = null;\n        this._workgroupSize = options.workgroupSize;\n        this.defineInternalStructs();\n        const ret = this.buildComputeSource(options);\n        setCurrentProgramBuilder(null);\n        this.reset();\n        return ret;\n    }\n    /**\n   * Creates a shader program for render\n   * @param options - The build options\n   * @returns The created program or null if build failed\n   */ buildRenderProgram(options) {\n        const ret = this.buildRender(options);\n        return ret ? this._device.createGPUProgram({\n            type: 'render',\n            label: options.label,\n            params: {\n                vs: ret[0],\n                fs: ret[1],\n                bindGroupLayouts: ret[2],\n                vertexAttributes: ret[3]\n            }\n        }) : null;\n    }\n    /**\n   * Creates a shader program for compute\n   * @param options - The build options\n   * @returns The created program or null if build failed\n   */ buildComputeProgram(options) {\n        const ret = this.buildCompute(options);\n        return ret ? this._device.createGPUProgram({\n            type: 'compute',\n            params: {\n                source: ret[0],\n                bindGroupLayouts: ret[1]\n            }\n        }) : null;\n    }\n    /**\n   * Creates a function\n   * @param name - Name of the function\n   * @param params - Parameters of the function\n   * @param body - The generator function\n   */ func(name, params, body) {\n        this.getGlobalScope().$createFunctionIfNotExists(name, params, body);\n    }\n    /**\n   * Create the main entry function of the shader\n   * @param body - The shader generator function\n   */ main(body) {\n        this.getGlobalScope().$mainFunc(body);\n    }\n    /**\n   * Create an 'AddressOf' expression for WGSL\n   * @param ref - The reference variable\n   * @returns the 'AddressOf' expression\n   */ addressOf(ref) {\n        if (this._device.type !== 'webgpu') {\n            throw new PBDeviceNotSupport('pointer shader type');\n        }\n        if (!ref.$ast.isReference()) {\n            throw new PBReferenceValueRequired(ref);\n        }\n        const exp = new PBShaderExp('', ref.$ast.getType());\n        exp.$ast = new ASTAddressOf(ref.$ast);\n        return exp;\n    }\n    /**\n   * Creates a 'referenceOf' expression for WGSL\n   * @param ptr - The pointer variable\n   * @returns the 'referenceOf' expression\n   */ referenceOf(ptr) {\n        if (this._device.type !== 'webgpu') {\n            throw new PBDeviceNotSupport('pointer shader type');\n        }\n        if (!ptr.$ast.getType().isPointerType()) {\n            throw new PBPointerValueRequired(ptr);\n        }\n        const ast = new ASTReferenceOf(ptr.$ast);\n        const exp = new PBShaderExp('', ast.getType());\n        exp.$ast = ast;\n        return exp;\n    }\n    /**\n   * Creates a structure type variable\n   * @param structName - Name of the structure type\n   * @param instanceName - Name of the variable\n   * @returns the created variable\n   */ struct(structName, instanceName) {\n        let ctor = null;\n        for (const st of [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Compute\n        ]){\n            if (st & this._shaderType) {\n                const structInfo = this._structInfo[st];\n                ctor = structInfo?.structs[structName];\n                if (ctor) {\n                    break;\n                }\n            }\n        }\n        if (!ctor) {\n            throw new PBParamValueError('struct', 'structName', `Struct type ${structName} not exists`);\n        }\n        return ctor.call(this, instanceName);\n    }\n    /** @internal */ isIdenticalStruct(a, b, checkName) {\n        if (checkName && a.structName && b.structName && a.structName !== b.structName) {\n            return false;\n        }\n        if (a.structMembers.length !== b.structMembers.length) {\n            return false;\n        }\n        for(let index = 0; index < a.structMembers.length; index++){\n            const val = a.structMembers[index];\n            const other = b.structMembers[index];\n            if (val.name !== other.name) {\n                return false;\n            }\n            if (val.type.isStructType()) {\n                if (!other.type.isStructType()) {\n                    return false;\n                }\n                if (!this.isIdenticalStruct(val.type, other.type, true)) {\n                    return false;\n                }\n            } else if (!val.type.isCompatibleType(other.type)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */ generateStructureName() {\n        return `zStruct${this._autoStructureTypeIndex++}`;\n    }\n    /** @internal */ getVertexAttributes() {\n        return this._vertexAttributes;\n    }\n    /** @internal */ defineHiddenStruct(type) {\n        for (const shaderType of [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Compute\n        ]){\n            let structInfo = this._structInfo[shaderType];\n            if (!structInfo) {\n                structInfo = {\n                    structs: {},\n                    types: []\n                };\n                this._structInfo[shaderType] = structInfo;\n            }\n            if (structInfo.structs[type.structName]) {\n                throw new PBParamValueError('defineStruct', 'structName', `cannot re-define struct '${type.structName}'`);\n            }\n            structInfo.types.push(new ASTStructDefine(type, true));\n        }\n    }\n    // /**\n    //  * Defines an uniform buffer\n    //  * @param name - Name of the uniform buffer\n    //  * @param args - Members of the buffer structure\n    //  * @returns The structure type constructor\n    //  */\n    // defineUniformBuffer(name: string, ...args: PBShaderExp[]): ShaderTypeFunc {\n    //   return this.defineStructOrUniformBuffer(name, 'std140', ...args);\n    // }\n    // /**\n    //  * Defines a structure type\n    //  * @param structName - Name of the type\n    //  * @param layout - The structure layout\n    //  * @param args - Members of the structure\n    //  * @returns The structure type constructor\n    //  */\n    // defineStruct(structName: string, ...args: PBShaderExp[]): ShaderTypeFunc {\n    //   return this.defineStructOrUniformBuffer(structName, 'default', ...args);\n    // }\n    /**\n   * Defines a structure type\n   * @param members - Members of the structure\n   * @param structName - Name of the type\n   * @returns The structure type constructor\n   */ defineStruct(members, structName) {\n        const layout = 'default';\n        const structType = new PBStructTypeInfo(structName ?? '', layout, members.map((arg)=>{\n            if (!arg.$typeinfo.isPrimitiveType() && !arg.$typeinfo.isArrayType() && !arg.$typeinfo.isStructType() && !arg.$typeinfo.isAtomicI32() && !arg.$typeinfo.isAtomicU32()) {\n                throw new Error(`invalid struct member type: '${arg.$str}'`);\n            }\n            return {\n                name: arg.$str,\n                type: arg.$typeinfo\n            };\n        }));\n        for (const shaderType of [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Compute\n        ]){\n            let structDef = null;\n            let ctor = null;\n            const structInfo = this._structInfo[shaderType];\n            if (structInfo) {\n                if (getCurrentProgramBuilder().shaderType === shaderType && structInfo.structs[structType.structName]) {\n                    throw new PBParamValueError('defineStruct', 'structName', `cannot re-define struct '${structType.structName}'`);\n                }\n                for (const type of structInfo.types){\n                    if (!type.builtin && this.isIdenticalStruct(type.getType(), structType, false)) {\n                        structDef = type;\n                        ctor = structInfo.structs[type.getType().structName];\n                        break;\n                    }\n                }\n            }\n            if (structDef) {\n                if (structDef.type.layout !== layout) {\n                    throw new Error(`Can not redefine struct ${structDef.type.structName} with different layout`);\n                }\n                if (shaderType !== getCurrentProgramBuilder().shaderType) {\n                    if (!this._structInfo[getCurrentProgramBuilder().shaderType]) {\n                        this._structInfo[getCurrentProgramBuilder().shaderType] = {\n                            structs: {},\n                            types: []\n                        };\n                    }\n                    if (this._structInfo[getCurrentProgramBuilder().shaderType].types.indexOf(structDef) < 0) {\n                        this._structInfo[getCurrentProgramBuilder().shaderType].types.push(structDef);\n                        this._structInfo[getCurrentProgramBuilder().shaderType].structs[structDef.getType().structName] = ctor;\n                    }\n                }\n                return ctor;\n            }\n        }\n        return this.internalDefineStruct(structName ?? this.generateStructureName(), layout, this._shaderType, false, ...members);\n    }\n    /**\n   * Defines a structure type\n   * @param structType - The structure type info\n   * @returns The structure type constructor\n   */ defineStructByType(structType) {\n        const typeCopy = structType.extends(structType.structName || this.generateStructureName(), []);\n        for (const shaderType of [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Compute\n        ]){\n            let structDef = null;\n            let ctor = null;\n            const structInfo = this._structInfo[shaderType];\n            if (structInfo) {\n                if (getCurrentProgramBuilder().shaderType === shaderType && structInfo.structs[typeCopy.structName]) {\n                    throw new PBParamValueError('defineStruct', 'structName', `cannot re-define struct '${typeCopy.structName}'`);\n                }\n                for (const type of structInfo.types){\n                    if (!type.builtin && this.isIdenticalStruct(type.getType(), typeCopy, false)) {\n                        structDef = type;\n                        ctor = structInfo.structs[type.getType().structName];\n                        break;\n                    }\n                }\n            }\n            if (structDef) {\n                if (structDef.type.layout !== typeCopy.layout) {\n                    throw new Error(`Can not redefine struct ${structDef.type.structName} with different layout`);\n                }\n                if (shaderType !== getCurrentProgramBuilder().shaderType) {\n                    if (!this._structInfo[getCurrentProgramBuilder().shaderType]) {\n                        this._structInfo[getCurrentProgramBuilder().shaderType] = {\n                            structs: {},\n                            types: []\n                        };\n                    }\n                    this._structInfo[getCurrentProgramBuilder().shaderType].types.push(structDef);\n                    this._structInfo[getCurrentProgramBuilder().shaderType].structs[structDef.getType().structName] = ctor;\n                }\n                return ctor;\n            }\n        }\n        return this.internalDefineStructByType(this._shaderType, false, typeCopy);\n    }\n    /** @internal */ internalDefineStruct(structName, layout, shaderTypeMask, builtin, ...args) {\n        const structType = new PBStructTypeInfo(structName, layout, args.map((arg)=>{\n            if (!arg.$typeinfo.isPrimitiveType() && !arg.$typeinfo.isArrayType() && !arg.$typeinfo.isStructType() && !arg.$typeinfo.isAtomicI32() && !arg.$typeinfo.isAtomicU32()) {\n                throw new Error(`invalid struct member type: '${arg.$str}'`);\n            }\n            return {\n                name: arg.$str,\n                type: arg.$typeinfo\n            };\n        }));\n        return this.internalDefineStructByType(shaderTypeMask, builtin, structType);\n    }\n    /** @internal */ internalDefineStructByType(shaderTypeMask, builtin, structType) {\n        const struct = makeConstructor(function structConstructor(...blockArgs) {\n            let e;\n            if (blockArgs.length === 1 && typeof blockArgs[0] === 'string') {\n                e = new PBShaderExp(blockArgs[0], structType);\n            } else {\n                e = new PBShaderExp('', structType);\n                e.$ast = new ASTShaderExpConstructor(e.$typeinfo, blockArgs.map((arg)=>arg instanceof PBShaderExp ? arg.$ast : arg));\n            }\n            return e;\n        }, structType);\n        for (const shaderType of [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Compute\n        ]){\n            if (shaderTypeMask & shaderType) {\n                let structInfo = this._structInfo[shaderType];\n                if (!structInfo) {\n                    structInfo = {\n                        structs: {},\n                        types: []\n                    };\n                    this._structInfo[shaderType] = structInfo;\n                }\n                if (structInfo.structs[structType.structName]) {\n                    throw new PBParamValueError('defineStruct', 'structName', `cannot re-define struct '${structType.structName}'`);\n                }\n                structInfo.types.push(new ASTStructDefine(structType, builtin));\n                structInfo.structs[structType.structName] = struct;\n            }\n        }\n        // this.changeStructLayout(structType, layout);\n        return struct;\n    }\n    /** @internal */ getFunction(name) {\n        return this._globalScope ? this._globalScope.$getFunctions(name) : null;\n    }\n    /** @internal */ get structInfo() {\n        return this._structInfo[this._shaderType];\n    }\n    /** @internal */ getBlockName(instanceName) {\n        return `ch_block_name_${instanceName}`;\n    }\n    /** @internal */ defineBuiltinStruct(shaderType, inOrOut) {\n        const structName = inOrOut === 'in' ? getBuiltinInputStructName(shaderType) : getBuiltinOutputStructName(shaderType);\n        const instanceName = inOrOut === 'in' ? getBuiltinInputStructInstanceName(shaderType) : getBuiltinOutputStructInstanceName(shaderType);\n        const stage = shaderType === ShaderType.Vertex ? 'vertex' : shaderType === ShaderType.Fragment ? 'fragment' : 'compute';\n        const builtinVars = builtinVariables['webgpu'];\n        const args = [];\n        const prefix = [];\n        for(const k in builtinVars){\n            if (builtinVars[k].stage === stage && builtinVars[k].inOrOut === inOrOut) {\n                args.push({\n                    name: builtinVars[k].name,\n                    type: builtinVars[k].type\n                });\n                prefix.push(`@builtin(${builtinVars[k].semantic}) `);\n            }\n        }\n        const inoutList = inOrOut === 'in' ? this._inputs : this._outputs;\n        for (const k of inoutList){\n            // for debug only\n            if (!(k[1] instanceof ASTDeclareVar)) {\n                throw new PBInternalError('defineBuiltinStruct() failed: input/output is not declare var ast node');\n            }\n            const type = k[1].value.getType();\n            if (!type.isPrimitiveType() && !type.isArrayType() && !type.isStructType()) {\n                throw new Error(`invalid in/out variable type: '${k[1].value.name}'`);\n            }\n            args.push({\n                name: k[1].value.name,\n                type: type\n            });\n            prefix.push(`@location(${k[1].value.value.$location}) ${type.isPrimitiveType() && type.isInteger() ? '@interpolate(flat) ' : ''}`);\n        }\n        if (args.length > 0) {\n            const st = this.findStructType(structName, shaderType);\n            if (st) {\n                st.getType().reset(structName, 'default', args);\n                st.prefix = prefix;\n                return null;\n            } else {\n                const structType = this.internalDefineStructByType(this._shaderType, false, new PBStructTypeInfo(structName, 'default', args));\n                this.findStructType(structName, shaderType).prefix = prefix;\n                const structInstance = this.struct(structName, instanceName);\n                const structInstanceIN = inOrOut === 'in' ? this.struct(structName, getBuiltinParamName(shaderType)) : structInstance;\n                return [\n                    structType,\n                    structInstance,\n                    structName,\n                    structInstanceIN\n                ];\n            }\n        } else {\n            return null;\n        }\n    }\n    /** @internal */ defineInternalStructs() {\n        this.defineHiddenStruct(typeFrexpResult);\n        this.defineHiddenStruct(typeFrexpResultVec2);\n        this.defineHiddenStruct(typeFrexpResultVec3);\n        this.defineHiddenStruct(typeFrexpResultVec4);\n    }\n    /** @internal */ array(...args) {\n        if (args.length === 0) {\n            throw new PBParamLengthError('array');\n        }\n        args = args.map((arg)=>this.normalizeExpValue(arg));\n        let typeok = true;\n        let type = null;\n        let isBool = true;\n        let isFloat = true;\n        let isInt = true;\n        let isUint = true;\n        let isComposite = false;\n        for (const arg of args){\n            if (arg instanceof PBShaderExp) {\n                const argType = arg.$ast.getType();\n                if (!argType.isConstructible()) {\n                    typeok = false;\n                    break;\n                }\n                if (!type) {\n                    type = argType;\n                } else if (!argType.isCompatibleType(type)) {\n                    typeok = false;\n                }\n            }\n        }\n        if (typeok) {\n            if (type && type.isPrimitiveType() && type.isScalarType()) {\n                isBool = type.primitiveType === PBPrimitiveType.BOOL;\n                isFloat = type.primitiveType === PBPrimitiveType.F32;\n                isUint = type.primitiveType === PBPrimitiveType.U32;\n                isInt = type.primitiveType === PBPrimitiveType.I32;\n            } else if (type) {\n                isBool = false;\n                isFloat = false;\n                isUint = false;\n                isInt = false;\n                isComposite = true;\n            }\n            for (const arg of args){\n                if (!(arg instanceof PBShaderExp) && isComposite) {\n                    typeok = false;\n                    break;\n                }\n                if (typeof arg === 'number') {\n                    isBool = false;\n                    if ((arg | 0) === arg) {\n                        if (arg < 0) {\n                            isUint = false;\n                            isInt = isInt && arg >= 0x80000000 >> 0;\n                        } else {\n                            isUint = isUint && arg <= 0xffffffff;\n                            isInt = isInt && arg <= 0x7fffffff;\n                        }\n                    }\n                } else if (typeof arg === 'boolean') {\n                    isFloat = false;\n                    isInt = false;\n                    isUint = false;\n                }\n            }\n        }\n        if (typeok && !isComposite) {\n            if (isBool) {\n                type = typeBool;\n            } else if (isInt) {\n                type = typeI32;\n            } else if (isUint) {\n                type = typeU32;\n            } else if (isFloat) {\n                type = typeF32;\n            }\n            typeok = !!type;\n        }\n        if (!typeok) {\n            throw new PBParamTypeError('array');\n        }\n        if (!type.isPrimitiveType() && !type.isArrayType() && !type.isStructType()) {\n            throw new PBParamTypeError('array');\n        }\n        const arrayType = new PBArrayTypeInfo(type, args.length);\n        const exp = new PBShaderExp('', arrayType);\n        exp.$ast = new ASTShaderExpConstructor(arrayType, args.map((arg)=>{\n            if (arg instanceof PBShaderExp) {\n                return arg.$ast;\n            }\n            if (!type.isPrimitiveType() || !type.isScalarType()) {\n                throw new PBTypeCastError(arg, typeof arg, type);\n            }\n            return new ASTScalar(arg, type);\n        }));\n        return exp;\n    }\n    /**\n   * Creates a 'discard' statement\n   */ discard() {\n        this.getCurrentScope().$ast.statements.push(new ASTDiscard());\n    }\n    /** @internal */ tagShaderExp(getter, tagValue) {\n        if (typeof tagValue === 'string') {\n            this._reflection.tag(tagValue, getter);\n        } else if (Array.isArray(tagValue)) {\n            tagValue.forEach((tag)=>this.tagShaderExp(getter, tag));\n        } else {\n            for (const k of Object.keys(tagValue)){\n                this.tagShaderExp((scope)=>{\n                    const value = getter(scope);\n                    return value[k];\n                }, tagValue[k]);\n            }\n        }\n    }\n    /** @internal */ in(location, name, variable) {\n        if (this._inputs[location]) {\n            // input already exists, create an alias\n            if (!this._inputScope[name]) {\n                Object.defineProperty(this._inputScope, name, {\n                    get: function() {\n                        return variable;\n                    },\n                    set: function() {\n                        throw new Error(`cannot assign to readonly variable: ${name}`);\n                    }\n                });\n            }\n        //throw new Error(`input location ${location} already declared`);\n        } else {\n            variable.$location = location;\n            variable.$declareType = DeclareType.DECLARE_TYPE_IN;\n            this._inputs[location] = [\n                name,\n                new ASTDeclareVar(new ASTPrimitive(variable))\n            ];\n            Object.defineProperty(this._inputScope, name, {\n                get: function() {\n                    return variable;\n                },\n                set: function() {\n                    throw new Error(`cannot assign to readonly variable: ${name}`);\n                }\n            });\n            variable.$tags.forEach((val)=>this.tagShaderExp(()=>variable, val));\n        }\n    }\n    /** @internal */ out(location, name, variable) {\n        if (this._outputs[location]) {\n            throw new Error(`output location ${location} has already been used`);\n        }\n        variable.$location = location;\n        variable.$declareType = DeclareType.DECLARE_TYPE_OUT;\n        this._outputs[location] = [\n            name,\n            new ASTDeclareVar(new ASTPrimitive(variable))\n        ];\n        for (const prop of [\n            name,\n            String(location)\n        ]){\n            Object.defineProperty(this._outputScope, prop, {\n                get: function() {\n                    return variable;\n                },\n                set: function(v) {\n                    getCurrentProgramBuilder().getCurrentScope().$ast.statements.push(new ASTAssignment(new ASTLValueScalar(variable.$ast), v instanceof PBShaderExp ? v.$ast : v));\n                }\n            });\n        }\n    }\n    /** @internal */ getDefaultSampler(t, comparison) {\n        const u = this._uniforms.findIndex((val)=>val.texture?.exp === t);\n        if (u < 0) {\n            return;\n        //throw new Error('invalid texture uniform object');\n        }\n        const samplerType = comparison ? 'comparison' : 'sample';\n        if (this._uniforms[u].texture.autoBindSampler && this._uniforms[u].texture.autoBindSampler !== samplerType) {\n            throw new Error('multiple sampler not supported');\n        }\n        this._uniforms[u].texture.autoBindSampler = samplerType;\n        if (this._device.type === 'webgpu') {\n            const samplerName = genSamplerName(t.$str, comparison);\n            if (!this.getGlobalScope()[samplerName]) {\n                throw new Error(`failed to find sampler name ${samplerName}`);\n            }\n            return this.getGlobalScope()[samplerName];\n        } else {\n            return null;\n        }\n    }\n    /** @internal */ normalizeExpValue(value) {\n        if (Array.isArray(value)) {\n            const converted = value.map((val)=>Array.isArray(val) ? this.normalizeExpValue(val) : val);\n            return this.array(...converted);\n        } else {\n            return value;\n        }\n    }\n    /** @internal */ guessExpValueType(value) {\n        const val = this.normalizeExpValue(value);\n        if (typeof val === 'boolean') {\n            return typeBool;\n        } else if (typeof val === 'number') {\n            if (!Number.isInteger(val)) {\n                return typeF32;\n            } else if (val >= 0x80000000 >> 1 && val <= 0x7fffffff) {\n                return typeI32;\n            } else if (val >= 0 && val <= 0xffffffff) {\n                return typeU32;\n            } else {\n                throw new PBValueOutOfRange(val);\n            }\n        } else if (val instanceof PBShaderExp) {\n            return val.$ast?.getType() || val.$typeinfo;\n        }\n    }\n    /** @internal */ findStructType(name, shaderType) {\n        for (const st of [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Compute\n        ]){\n            if (st & shaderType) {\n                const structInfo = this._structInfo[st];\n                if (structInfo) {\n                    for (const t of structInfo.types){\n                        if (t.type.structName === name) {\n                            return t;\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    /** @internal */ findStructConstructor(name, shaderType) {\n        for (const st of [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Compute\n        ]){\n            if (st & shaderType) {\n                const structInfo = this._structInfo[st];\n                if (structInfo && structInfo.structs?.[name]) {\n                    return structInfo.structs[name];\n                }\n            }\n        }\n        return null;\n    }\n    /** @internal */ buildComputeSource(options) {\n        try {\n            this._lastError = null;\n            this._shaderType = ShaderType.Compute;\n            this._scopeStack = [];\n            this._globalScope = new PBGlobalScope();\n            this._builtinScope = new PBBuiltinScope();\n            this._inputs = [];\n            this._outputs = [];\n            this._inputScope = new PBInputScope();\n            this._outputScope = new PBOutputScope();\n            this._reflection.clear();\n            this.generate(options.compute);\n            // this.removeUnusedSamplerBindings(this._globalScope);\n            this.mergeUniformsCompute(this._globalScope);\n            this.updateUniformBindings([\n                this._globalScope\n            ], [\n                ShaderType.Compute\n            ]);\n            return [\n                this.generateComputeSource(this._globalScope, this._builtinScope),\n                this.createBindGroupLayouts(options.label)\n            ];\n        } catch (err) {\n            if (err instanceof PBError) {\n                this._lastError = err.getMessage(this._device.type);\n                console.error(this._lastError);\n                return null;\n            } else if (err instanceof Error) {\n                this._lastError = err.toString();\n                console.error(this._lastError);\n                return null;\n            } else {\n                this._lastError = Object.prototype.toString.call(err);\n                console.error(`Error: ${this._lastError}`);\n                return null;\n            }\n        }\n    }\n    /** @internal */ buildRenderSource(options) {\n        try {\n            this._lastError = null;\n            this._shaderType = ShaderType.Vertex;\n            this._scopeStack = [];\n            this._globalScope = new PBGlobalScope();\n            this._builtinScope = new PBBuiltinScope();\n            this._inputs = [];\n            this._outputs = [];\n            this._inputScope = new PBInputScope();\n            this._outputScope = new PBOutputScope();\n            this._reflection.clear();\n            this.generate(options.vertex);\n            const vertexScope = this._globalScope;\n            const vertexBuiltinScope = this._builtinScope;\n            const vertexInputs = this._inputs;\n            const vertexOutputs = this._outputs;\n            this._shaderType = ShaderType.Fragment;\n            this._scopeStack = [];\n            this._globalScope = new PBGlobalScope();\n            this._builtinScope = new PBBuiltinScope();\n            this._inputs = [];\n            this._outputs = [];\n            this._inputScope = new PBInputScope();\n            this._outputScope = new PBOutputScope();\n            this._reflection.clear();\n            vertexOutputs.forEach((val, index)=>{\n                this.in(index, val[0], new PBShaderExp(val[1].value.name, val[1].value.getType()).tag(...val[1].value.value.$tags));\n            });\n            this.generate(options.fragment);\n            const fragScope = this._globalScope;\n            const fragBuiltinScope = this._builtinScope;\n            const fragInputs = this._inputs;\n            const fragOutputs = this._outputs;\n            this.mergeUniforms(vertexScope, fragScope);\n            this.updateUniformBindings([\n                vertexScope,\n                fragScope\n            ], [\n                ShaderType.Vertex,\n                ShaderType.Fragment\n            ]);\n            return [\n                this.generateRenderSource(ShaderType.Vertex, vertexScope, vertexBuiltinScope, vertexInputs.map((val)=>val[1]), vertexOutputs.map((val)=>val[1])),\n                this.generateRenderSource(ShaderType.Fragment, fragScope, fragBuiltinScope, fragInputs.map((val)=>val[1]), fragOutputs.map((val)=>val[1])),\n                this.createBindGroupLayouts(options.label),\n                this._vertexAttributes\n            ];\n        } catch (err) {\n            if (err instanceof PBError) {\n                this._lastError = err.getMessage(this._device.type);\n                console.error(this._lastError);\n                return null;\n            } else if (err instanceof Error) {\n                this._lastError = err.toString();\n                console.error(this._lastError);\n                return null;\n            } else {\n                this._lastError = Object.prototype.toString.call(err);\n                console.error(`Error: ${this._lastError}`);\n                return null;\n            }\n        }\n    }\n    /** @internal */ generate(body) {\n        this.pushScope(this._globalScope);\n        if (this._emulateDepthClamp && this._shaderType === ShaderType.Vertex) {\n            this._globalScope.$outputs.clamppedDepth = this.float().tag('CLAMPPED_DEPTH');\n        }\n        body?.call(this._globalScope, this);\n        this.popScope();\n        // Global delcarations should be at the first\n        this._globalScope.$ast.statements = [\n            ...this._globalScope.$ast.statements.filter((val)=>val instanceof ASTDeclareVar || val instanceof ASTAssignment),\n            ...this._globalScope.$ast.statements.filter((val)=>!(val instanceof ASTDeclareVar) && !(val instanceof ASTAssignment))\n        ];\n    }\n    /** @internal */ generateRenderSource(shaderType, scope, builtinScope, inputs, outputs) {\n        const context = {\n            type: shaderType,\n            mrt: shaderType === ShaderType.Fragment && outputs.length > 1,\n            defines: [],\n            extensions: new Set(),\n            builtins: [\n                ...builtinScope.$_usedBuiltins\n            ],\n            types: this._structInfo[shaderType]?.types || [],\n            typeReplacement: new Map(),\n            inputs: inputs,\n            outputs: outputs,\n            global: scope,\n            vertexAttributes: this._vertexAttributes,\n            workgroupSize: null\n        };\n        switch(this._device.type){\n            case 'webgl':\n                for (const u of this._uniforms){\n                    if (u.texture) {\n                        const type = u.texture.exp.$ast.getType();\n                        if (type.isTextureType() && type.isDepthTexture()) {\n                            if (u.texture.autoBindSampler === 'comparison') {\n                                throw new PBDeviceNotSupport('depth texture comparison');\n                            }\n                            if (u.texture.autoBindSampler === 'sample') {\n                                if (type.is2DTexture()) {\n                                    context.typeReplacement.set(u.texture.exp, typeTex2D);\n                                } else if (type.isCubeTexture()) {\n                                    context.typeReplacement.set(u.texture.exp, typeTexCube);\n                                }\n                            }\n                        }\n                    }\n                }\n                return scope.$ast.toWebGL('', context);\n            case 'webgl2':\n                for (const u of this._uniforms){\n                    if (u.texture) {\n                        const type = u.texture.exp.$ast.getType();\n                        if (type.isTextureType() && type.isDepthTexture() && u.texture.autoBindSampler === 'sample') {\n                            if (type.is2DTexture()) {\n                                context.typeReplacement.set(u.texture.exp, type.isArrayTexture() ? typeTex2DArray : typeTex2D);\n                            } else if (type.isCubeTexture()) {\n                                context.typeReplacement.set(u.texture.exp, typeTexCube);\n                            }\n                        }\n                    }\n                }\n                return scope.$ast.toWebGL2('', context);\n            case 'webgpu':\n                return scope.$ast.toWGSL('', context);\n            default:\n                return null;\n        }\n    }\n    /** @internal */ generateComputeSource(scope, builtinScope) {\n        const context = {\n            type: ShaderType.Compute,\n            mrt: false,\n            defines: [],\n            extensions: new Set(),\n            builtins: [\n                ...builtinScope.$_usedBuiltins\n            ],\n            types: this._structInfo[ShaderType.Compute]?.types || [],\n            typeReplacement: null,\n            inputs: [],\n            outputs: [],\n            global: scope,\n            vertexAttributes: [],\n            workgroupSize: this._workgroupSize\n        };\n        return scope.$ast.toWGSL('', context);\n    }\n    /** @internal */ mergeUniformsCompute(globalScope) {\n        const uniformList = [];\n        for(let i = 0; i < this._uniforms.length; i++){\n            const u = this._uniforms[i];\n            if (u.block && (u.block.exp.$declareType === DeclareType.DECLARE_TYPE_UNIFORM || u.block.exp.$declareType === DeclareType.DECLARE_TYPE_STORAGE)) {\n                if (u.block.exp.$typeinfo.isStructType() && u.block.exp.$isBuffer) {\n                    continue;\n                }\n                if (!uniformList[u.group]) {\n                    uniformList[u.group] = [];\n                }\n                const exp = new PBShaderExp(u.block.exp.$str, u.block.exp.$ast.getType());\n                exp.$declareType = u.block.exp.$declareType;\n                exp.$isBuffer = u.block.exp.$isBuffer;\n                exp.$bindingSize = u.block.exp.$bindingSize;\n                exp.$readonly = u.block.exp.$readonly;\n                uniformList[u.group].push({\n                    member: exp,\n                    uniform: i\n                });\n            }\n        }\n        for(const k in uniformList){\n            if (uniformList[k].length > 0) {\n                const types = [\n                    'std140',\n                    'std430'\n                ];\n                const nameList = [\n                    COMPUTE_UNIFORM_NAME,\n                    COMPUTE_STORAGE_NAME\n                ];\n                const ulist = [\n                    uniformList[k].filter((val)=>val.member.$declareType === DeclareType.DECLARE_TYPE_UNIFORM),\n                    uniformList[k].filter((val)=>val.member.$declareType === DeclareType.DECLARE_TYPE_STORAGE)\n                ];\n                for(let i = 0; i < 2; i++){\n                    if (ulist[i].length === 0) {\n                        continue;\n                    }\n                    const nonBufferList = ulist[i].filter((val)=>!val.member.$isBuffer);\n                    const bufferList = ulist[i].filter((val)=>val.member.$isBuffer);\n                    const allLists = [\n                        nonBufferList,\n                        ...bufferList.map((val)=>[\n                                val\n                            ])\n                    ];\n                    for(let p = 0; p < allLists.length; p++){\n                        if (allLists[p].length === 0) {\n                            continue;\n                        }\n                        const uname = `${nameList[i]}_${k}_${p}`;\n                        const structName = this.generateStructureName();\n                        const t = getCurrentProgramBuilder().internalDefineStruct(structName, types[i], ShaderType.Compute, false, ...allLists[p].map((val)=>val.member));\n                        const readonly = i > 0 ? allLists[p].findIndex((val)=>!val.member.$readonly) < 0 : true;\n                        const exp = t();\n                        if (i === 0) {\n                            exp.uniformBuffer(Number(k), p > 0 ? allLists[p][0].member.$bindingSize : 0);\n                        } else {\n                            exp.storageBuffer(Number(k), p > 0 ? allLists[p][0].member.$bindingSize : 0);\n                            exp.$readonly = readonly;\n                        }\n                        globalScope[uname] = exp;\n                        const index = this._uniforms.findIndex((val)=>val.block?.name === uname);\n                        this._uniforms[index].mask = ShaderType.Compute;\n                        let nameMap = this._nameMap[Number(k)];\n                        if (!nameMap) {\n                            nameMap = {};\n                            this._nameMap[Number(k)] = nameMap;\n                        }\n                        let writable = false;\n                        for(let n = allLists[p].length - 1; n >= 0; n--){\n                            const u = allLists[p][n];\n                            const exp = this._uniforms[u.uniform].block.exp;\n                            nameMap[exp.$str] = uname;\n                            exp.$str = `${uname}.${exp.$str}`;\n                            writable ||= exp.$ast.isWritable();\n                        }\n                        if (writable) {\n                            globalScope[uname].$ast.markWritable();\n                        }\n                    }\n                }\n            }\n        }\n        this._uniforms = this._uniforms.filter((val)=>{\n            return !val.block || val.block.exp.$typeinfo.isStructType() && val.block.exp.$isBuffer;\n        //return !val.block || val.block.exp.$isBuffer;\n        /*\n      if (!val.block || (val.block.exp.$declareType !== AST.DeclareType.DECLARE_TYPE_UNIFORM && val.block.exp.$declareType !== AST.DeclareType.DECLARE_TYPE_STORAGE)) {\n        return true;\n      }\n      const type = val.block.exp.$ast.getType();\n      return (\n        type.isTextureType() ||\n        type.isSamplerType() ||\n        (type.isStructType() && (type.detail.layout === 'std140' || type.detail.layout === 'std430'))\n      );\n      */ });\n    }\n    /** @internal */ mergeUniforms(globalScopeVertex, globalScopeFragmet) {\n        const vertexUniformList = [];\n        const fragUniformList = [];\n        const sharedUniformList = [];\n        //const vertexUniformList: { members: PBShaderExp[]; uniforms: number[] }[] = [];\n        //const fragUniformList: { members: PBShaderExp[]; uniforms: number[] }[] = [];\n        //const sharedUniformList: { members: PBShaderExp[]; uniforms: number[] }[] = [];\n        for(let i = 0; i < this._uniforms.length; i++){\n            const u = this._uniforms[i];\n            if (u.block && (u.block.exp.$declareType === DeclareType.DECLARE_TYPE_UNIFORM || u.block.exp.$declareType === DeclareType.DECLARE_TYPE_STORAGE)) {\n                if (u.block.exp.$typeinfo.isStructType() && u.block.exp.$isBuffer) {\n                    continue;\n                }\n                const v = !!(u.mask & ShaderType.Vertex);\n                const f = !!(u.mask & ShaderType.Fragment);\n                if (v && f) {\n                    if (!sharedUniformList[u.group]) {\n                        sharedUniformList[u.group] = []; //{ members: [], uniforms: [] };\n                    }\n                    const exp = new PBShaderExp(u.block.exp.$str, u.block.exp.$ast.getType());\n                    exp.$declareType = u.block.exp.$declareType;\n                    exp.$isBuffer = u.block.exp.$isBuffer;\n                    exp.$bindingSize = u.block.exp.$bindingSize;\n                    exp.$readonly = u.block.exp.$readonly;\n                    sharedUniformList[u.group].push({\n                        member: exp,\n                        uniform: i\n                    });\n                //sharedUniformList[u.group].uniforms.push(i);\n                } else if (v) {\n                    if (!vertexUniformList[u.group]) {\n                        vertexUniformList[u.group] = []; //{ members: [], uniforms: [] };\n                    }\n                    const exp = new PBShaderExp(u.block.exp.$str, u.block.exp.$ast.getType());\n                    exp.$declareType = u.block.exp.$declareType;\n                    exp.$isBuffer = u.block.exp.$isBuffer;\n                    exp.$bindingSize = u.block.exp.$bindingSize;\n                    exp.$readonly = u.block.exp.$readonly;\n                    vertexUniformList[u.group].push({\n                        member: exp,\n                        uniform: i\n                    });\n                //vertexUniformList[u.group].uniforms.push(i);\n                } else if (f) {\n                    if (!fragUniformList[u.group]) {\n                        fragUniformList[u.group] = []; //{ members: [], uniforms: [] };\n                    }\n                    const exp = new PBShaderExp(u.block.exp.$str, u.block.exp.$ast.getType());\n                    exp.$declareType = u.block.exp.$declareType;\n                    exp.$isBuffer = u.block.exp.$isBuffer;\n                    exp.$bindingSize = u.block.exp.$bindingSize;\n                    exp.$readonly = u.block.exp.$readonly;\n                    fragUniformList[u.group].push({\n                        member: exp,\n                        uniform: i\n                    }); //members.push(exp);\n                //fragUniformList[u.group].uniforms.push(i);\n                }\n            }\n        }\n        const uniformLists = [\n            vertexUniformList,\n            fragUniformList,\n            sharedUniformList\n        ];\n        const nameListUniform = [\n            VERTEX_UNIFORM_NAME,\n            FRAGMENT_UNIFORM_NAME,\n            SHARED_UNIFORM_NAME\n        ];\n        const nameListStorage = [\n            VERTEX_STORAGE_NAME,\n            FRAGMENT_STORAGE_NAME,\n            SHARED_STORAGE_NAME\n        ];\n        const maskList = [\n            ShaderType.Vertex,\n            ShaderType.Fragment,\n            ShaderType.Vertex | ShaderType.Fragment\n        ];\n        for(let i = 0; i < 3; i++){\n            for(const k in uniformLists[i]){\n                if (uniformLists[i][k]?.length > 0) {\n                    const ulist = [\n                        uniformLists[i][k].filter((val)=>val.member.$declareType === DeclareType.DECLARE_TYPE_UNIFORM),\n                        uniformLists[i][k].filter((val)=>val.member.$declareType === DeclareType.DECLARE_TYPE_STORAGE)\n                    ];\n                    const nameList = [\n                        nameListUniform,\n                        nameListStorage\n                    ];\n                    const layoutList = [\n                        'std140',\n                        'std430'\n                    ];\n                    for(let j = 0; j < 2; j++){\n                        if (ulist[j].length === 0) {\n                            continue;\n                        }\n                        const nonBufferList = ulist[j].filter((val)=>!val.member.$isBuffer);\n                        const bufferList = ulist[j].filter((val)=>val.member.$isBuffer);\n                        const allLists = [\n                            nonBufferList,\n                            ...bufferList.map((val)=>[\n                                    val\n                                ])\n                        ];\n                        for(let p = 0; p < allLists.length; p++){\n                            if (allLists[p].length === 0) {\n                                continue;\n                            }\n                            const uname = `${nameList[j][i]}_${k}_${p}`;\n                            const structName = this.generateStructureName();\n                            const t = getCurrentProgramBuilder().internalDefineStruct(structName, layoutList[j], maskList[i], false, ...allLists[p].map((val)=>val.member));\n                            const readonly = j > 0 ? allLists[p].findIndex((val)=>!val.member.$readonly) < 0 : true;\n                            if (maskList[i] & ShaderType.Vertex) {\n                                const exp = t();\n                                if (j > 0 && !readonly) {\n                                    throw new Error(`Storage buffer in vertex shader must be read-only`);\n                                }\n                                if (j === 0) {\n                                    exp.uniformBuffer(Number(k), p > 0 ? allLists[p][0].member.$bindingSize : 0);\n                                } else {\n                                    exp.storageBuffer(Number(k), p > 0 ? allLists[p][0].member.$bindingSize : 0);\n                                    exp.$readonly = readonly;\n                                }\n                                globalScopeVertex[uname] = exp;\n                            }\n                            if (maskList[i] & ShaderType.Fragment) {\n                                const exp = t();\n                                if (j === 0) {\n                                    exp.uniformBuffer(Number(k), p > 0 ? allLists[p][0].member.$bindingSize : 0);\n                                } else {\n                                    exp.storageBuffer(Number(k), p > 0 ? allLists[p][0].member.$bindingSize : 0);\n                                    exp.$readonly = readonly;\n                                }\n                                globalScopeFragmet[uname] = exp;\n                            }\n                            const index = this._uniforms.findIndex((val)=>val.block?.name === uname);\n                            this._uniforms[index].mask = maskList[i];\n                            let nameMap = this._nameMap[Number(k)];\n                            if (!nameMap) {\n                                nameMap = {};\n                                this._nameMap[Number(k)] = nameMap;\n                            }\n                            let writable = false;\n                            for(let n = allLists[p].length - 1; n >= 0; n--){\n                                const u = allLists[p][n];\n                                const exp = this._uniforms[u.uniform].block.exp;\n                                nameMap[exp.$str] = uname;\n                                exp.$str = `${uname}.${exp.$str}`;\n                                writable ||= exp.$ast.isWritable();\n                            }\n                            if (writable) {\n                                if (maskList[i] & ShaderType.Vertex) {\n                                    globalScopeVertex[uname].$ast.markWritable();\n                                } else {\n                                    globalScopeFragmet[uname].$ast.markWritable();\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this._uniforms = this._uniforms.filter((val)=>{\n            return !val.block || val.block.exp.$typeinfo.isStructType() && val.block.exp.$isBuffer;\n        /*\n      if (!val.block) {\n        return true;\n      }\n      const type = val.block.exp.$ast.getType();\n      return (\n        type.isTextureType() ||\n        type.isSamplerType() ||\n        (type.isStructType() && (type.detail.layout === 'std140' || type.detail.layout === 'std430'))\n      );\n      */ });\n    }\n    /** @internal */ updateUniformBindings(scopes, shaderTypes) {\n        this._uniforms = this._uniforms.filter((val)=>!!val.mask);\n        const bindings = Array.from({\n            length: MAX_BINDING_GROUPS\n        }).fill(0);\n        for (const u of this._uniforms){\n            u.binding = bindings[u.group]++;\n        }\n        for(let i = 0; i < scopes.length; i++){\n            const scope = scopes[i];\n            const type = shaderTypes[i];\n            for (const u of this._uniforms){\n                if (u.mask & type) {\n                    const uniforms = scope.$ast.uniforms;\n                    const name = u.block ? u.block.name : u.texture ? u.texture.exp.$str : u.sampler.$str;\n                    const index = uniforms.findIndex((val)=>val.value.name === name);\n                    if (index < 0) {\n                        throw new Error(`updateUniformBindings() failed: unable to find uniform ${name}`);\n                    }\n                    uniforms[index].binding = u.binding;\n                }\n            }\n        }\n    }\n    /** @internal */ createBindGroupLayouts(label) {\n        const layouts = [];\n        const dynamicOffsetIndex = [\n            0,\n            0,\n            0,\n            0\n        ];\n        for (const uniformInfo of this._uniforms){\n            let layout = layouts[uniformInfo.group];\n            if (!layout) {\n                layout = {\n                    label: `${label || 'unknown'}[${uniformInfo.group}]`,\n                    entries: []\n                };\n                if (this._nameMap[uniformInfo.group]) {\n                    layout.nameMap = this._nameMap[uniformInfo.group];\n                }\n                layouts[uniformInfo.group] = layout;\n            }\n            const entry = {\n                binding: uniformInfo.binding,\n                visibility: uniformInfo.mask,\n                type: null,\n                name: ''\n            };\n            if (uniformInfo.block) {\n                entry.type = uniformInfo.block.exp.$typeinfo.clone(this.getBlockName(uniformInfo.block.name));\n                const isStorage = uniformInfo.block.exp.$declareType === DeclareType.DECLARE_TYPE_STORAGE;\n                entry.buffer = {\n                    type: isStorage ? uniformInfo.block.exp.$readonly ? 'read-only-storage' : 'storage' : 'uniform',\n                    minBindingSize: uniformInfo.block.bindingSize,\n                    hasDynamicOffset: !!uniformInfo.block.bindingSize,\n                    uniformLayout: entry.type.toBufferLayout(0, entry.type.layout),\n                    dynamicOffsetIndex: uniformInfo.block.bindingSize ? dynamicOffsetIndex[uniformInfo.group]++ : -1\n                };\n                entry.name = uniformInfo.block.name;\n            } else if (uniformInfo.texture) {\n                entry.type = uniformInfo.texture.exp.$typeinfo;\n                if (!entry.type.isTextureType()) {\n                    throw new Error('internal error');\n                }\n                if (entry.type.isStorageTexture()) {\n                    let viewDimension;\n                    if (entry.type.isArrayTexture()) {\n                        viewDimension = entry.type.isCubeTexture() ? 'cube-array' : '2d-array';\n                    } else if (entry.type.is3DTexture()) {\n                        viewDimension = '3d';\n                    } else if (entry.type.isCubeTexture()) {\n                        viewDimension = 'cube';\n                    } else if (entry.type.is1DTexture()) {\n                        viewDimension = '1d';\n                    } else {\n                        viewDimension = '2d';\n                    }\n                    entry.storageTexture = {\n                        access: 'write-only',\n                        viewDimension: viewDimension,\n                        format: entry.type.storageTexelFormat\n                    };\n                } else if (entry.type.isExternalTexture()) {\n                    entry.externalTexture = {\n                        autoBindSampler: uniformInfo.texture.autoBindSampler ? genSamplerName(uniformInfo.texture.exp.$str, false) : null\n                    };\n                } else {\n                    const sampleType = this._device.type === 'webgpu' ? uniformInfo.texture.exp.$sampleType : uniformInfo.texture.autoBindSampler && entry.type.isDepthTexture() ? 'float' : uniformInfo.texture.exp.$sampleType;\n                    let viewDimension;\n                    if (entry.type.isArrayTexture()) {\n                        viewDimension = entry.type.isCubeTexture() ? 'cube-array' : '2d-array';\n                    } else if (entry.type.is3DTexture()) {\n                        viewDimension = '3d';\n                    } else if (entry.type.isCubeTexture()) {\n                        viewDimension = 'cube';\n                    } else if (entry.type.is1DTexture()) {\n                        viewDimension = '1d';\n                    } else {\n                        viewDimension = '2d';\n                    }\n                    entry.texture = {\n                        sampleType: sampleType,\n                        viewDimension: viewDimension,\n                        multisampled: false,\n                        autoBindSampler: null,\n                        autoBindSamplerComparison: null\n                    };\n                    if (this._device.type === 'webgpu' || uniformInfo.texture.autoBindSampler === 'sample') {\n                        entry.texture.autoBindSampler = genSamplerName(uniformInfo.texture.exp.$str, false);\n                    }\n                    if (this._device.type === 'webgpu' && entry.type.isDepthTexture() || uniformInfo.texture.autoBindSampler === 'comparison') {\n                        entry.texture.autoBindSamplerComparison = genSamplerName(uniformInfo.texture.exp.$str, true);\n                    }\n                }\n                entry.name = uniformInfo.texture.exp.$str;\n            } else if (uniformInfo.sampler) {\n                entry.type = uniformInfo.sampler.$typeinfo;\n                if (!entry.type.isSamplerType()) {\n                    throw new Error('internal error');\n                }\n                entry.sampler = {\n                    type: entry.type.accessMode === PBSamplerAccessMode.SAMPLE ? uniformInfo.sampler.$sampleType === 'float' ? 'filtering' : 'non-filtering' : 'comparison'\n                };\n                entry.name = uniformInfo.sampler.$str;\n            } else {\n                throw new PBInternalError('invalid uniform entry type');\n            }\n            layout.entries.push(entry);\n        }\n        for(let i = 0; i < layouts.length; i++){\n            if (!layouts[i]) {\n                layouts[i] = {\n                    label: `${label || 'unknown'}[${i}]`,\n                    entries: []\n                };\n            }\n        }\n        return layouts;\n    }\n    /** @internal */ _getFunctionOverload(funcName, args) {\n        const thisArgs = args.filter((val)=>{\n            if (val instanceof PBShaderExp) {\n                const type = val.$ast.getType();\n                if (type.isStructType() && this._structInfo[this._shaderType]?.types.findIndex((t)=>t.type.structName === type.structName) < 0) {\n                    return false;\n                }\n            }\n            return true;\n        });\n        const fn = this.getGlobalScope().$getFunctions(funcName);\n        return fn ? this._matchFunctionOverloading(fn, thisArgs) : null;\n    }\n    /** @internal */ _matchFunctionOverloading(overloadings, args) {\n        for (const overload of overloadings){\n            if (args.length !== overload.funcType.argTypes.length) {\n                continue;\n            }\n            const result = [];\n            let matches = true;\n            for(let i = 0; i < args.length; i++){\n                const argInfo = overload.funcType.argTypes[i];\n                const argType = argInfo.byRef && argInfo.type instanceof PBPointerTypeInfo ? argInfo.type.pointerType : argInfo.type;\n                const arg = args[i];\n                if (typeof arg === 'boolean') {\n                    if (!argType.isPrimitiveType() || argType.primitiveType !== PBPrimitiveType.BOOL) {\n                        matches = false;\n                        break;\n                    }\n                    result.push(new ASTScalar(arg, typeBool));\n                } else if (typeof arg === 'number') {\n                    if (!argType.isPrimitiveType() || !argType.isScalarType() || argType.scalarType === PBPrimitiveType.BOOL) {\n                        matches = false;\n                        break;\n                    }\n                    if (argType.scalarType === PBPrimitiveType.I32) {\n                        if (!Number.isInteger(arg) || arg < 0x80000000 >> 0 || arg > 0x7fffffff) {\n                            matches = false;\n                            break;\n                        }\n                        result.push(new ASTScalar(arg, typeI32));\n                    } else if (argType.scalarType === PBPrimitiveType.U32) {\n                        if (!Number.isInteger(arg) || arg < 0 || arg > 0xffffffff) {\n                            matches = false;\n                            break;\n                        }\n                        result.push(new ASTScalar(arg, typeU32));\n                    } else {\n                        result.push(new ASTScalar(arg, argType));\n                    }\n                } else {\n                    if (!argType.isCompatibleType(arg.$ast.getType())) {\n                        matches = false;\n                        break;\n                    }\n                    result.push(arg.$ast);\n                }\n            }\n            if (matches) {\n                return [\n                    overload,\n                    result\n                ];\n            }\n        }\n        return null;\n    }\n    /** @internal */ $callFunction(funcName, args, func) {\n        if (this.getCurrentScope() === this.getGlobalScope()) {\n            throw new PBNonScopedFunctionCall(funcName);\n        }\n        const exp = new PBShaderExp('', func.returnType);\n        exp.$ast = new ASTCallFunction(funcName, args, func, getCurrentProgramBuilder().getDevice().type);\n        this.getCurrentScope().$ast.statements.push(exp.$ast);\n        return exp;\n    }\n    /** @internal */ $callFunctionNoCheck(funcName, args, retType) {\n        if (this.getCurrentScope() === this.getGlobalScope()) {\n            throw new PBNonScopedFunctionCall(funcName);\n        }\n        const exp = new PBShaderExp('', retType);\n        exp.$ast = new ASTCallFunction(funcName, args, null, getCurrentProgramBuilder().getDevice().type, retType);\n        this.getCurrentScope().$ast.statements.push(exp.$ast);\n        return exp;\n    }\n}\n/**\n * Base class for scope of the shader program\n * @public\n */ class PBScope extends Proxiable {\n    /** @internal */ $_variables;\n    /** @internal */ $_parentScope;\n    /** @internal */ $_AST;\n    /** @internal */ $_localScope;\n    /** @internal */ constructor(astScope, parent){\n        super();\n        this.$_parentScope = parent || null;\n        this.$_variables = {};\n        this.$_AST = astScope;\n        this.$_localScope = null;\n    }\n    /** Get the program builder */ get $builder() {\n        return getCurrentProgramBuilder();\n    }\n    /** Returns the scope of the builtin variables */ get $builtins() {\n        return getCurrentProgramBuilder().builtinScope;\n    }\n    /** Returns the scope of the input variables */ get $inputs() {\n        return getCurrentProgramBuilder().inputScope;\n    }\n    /** Returns the scope of the output variables */ get $outputs() {\n        return getCurrentProgramBuilder().outputScope;\n    }\n    /** @internal */ get $parent() {\n        return this.$_parentScope;\n    }\n    /** @internal */ get $ast() {\n        return this.$_AST;\n    }\n    /** @internal */ set $ast(ast) {\n        this.$_AST = ast;\n    }\n    /**\n   * Get the input vertex attribute by specified semantic\n   *\n   * @remarks\n   * Can only be called only in vertex shader\n   *\n   * @param semantic - The vertex semantic\n   * @returns The input vertex attribute or null if not exists\n   */ $getVertexAttrib(semantic) {\n        return this.$inputs.$getVertexAttrib(semantic); // getCurrentProgramBuilder().getReflection().attribute(semantic);\n    }\n    /** Get the current local scope */ get $l() {\n        return this.$_getLocalScope();\n    }\n    /** Get the global scope */ get $g() {\n        return this.$_getGlobalScope();\n    }\n    /** @internal */ $local(variable, init) {\n        const initNonArray = getCurrentProgramBuilder().normalizeExpValue(init);\n        variable.$global = this instanceof PBGlobalScope;\n        this.$_declare(variable, initNonArray);\n    }\n    /** @internal */ $touch(exp) {\n        this.$ast.statements.push(new ASTTouch(exp.$ast));\n    }\n    /**\n   * Query the global variable by the name\n   * @param name - Name of the variable\n   * @returns The variable or null if not exists\n   */ $query(name) {\n        return this.$builder.getReflection().tag(name);\n    }\n    /** @internal */ $_declareInternal(variable, init) {\n        const key = variable.$str;\n        if (this.$_variables[key]) {\n            throw new Error(`cannot re-declare variable '${key}'`);\n        }\n        if (!(variable.$ast instanceof ASTPrimitive)) {\n            throw new Error(`invalid variable declaration: '${variable.$ast.toString(getCurrentProgramBuilder().getDevice().type)}'`);\n        }\n        const varType = variable.$typeinfo;\n        if (varType.isPointerType()) {\n            if (!init) {\n                throw new Error(`cannot declare pointer type variable without initialization: '${variable.$str}'`);\n            }\n            if (!(init instanceof PBShaderExp)) {\n                throw new Error(`invalid initialization for pointer type declaration: '${variable.$str}`);\n            }\n            const initType = init.$ast.getType();\n            if (!initType.isPointerType() || !varType.pointerType.isCompatibleType(initType.pointerType)) {\n                throw new Error(`incompatible pointer type assignment: '${variable.$str}'`);\n            }\n            variable.$typeinfo = initType;\n        }\n        this.$_registerVar(variable, key);\n        if (init === undefined || init === null) {\n            return new ASTDeclareVar(variable.$ast);\n        } else {\n            if (init instanceof PBShaderExp && init.$ast instanceof ASTShaderExpConstructor && init.$ast.args.length === 0) {\n                if (!init.$ast.getType().isCompatibleType(variable.$ast.getType())) {\n                    throw new PBTypeCastError(init, init.$ast.getType(), variable.$ast.getType());\n                }\n                return new ASTDeclareVar(variable.$ast);\n            } else {\n                return new ASTAssignment(new ASTLValueDeclare(variable.$ast), init instanceof PBShaderExp ? init.$ast : init);\n            }\n        }\n    }\n    /** @internal */ $_findOrSetUniform(variable) {\n        const name = variable.$str;\n        const uniformInfo = {\n            group: variable.$group,\n            binding: 0,\n            mask: 0\n        };\n        if (variable.$typeinfo.isTextureType()) {\n            uniformInfo.texture = {\n                autoBindSampler: null,\n                exp: variable\n            };\n        } else if (variable.$typeinfo.isSamplerType()) {\n            uniformInfo.sampler = variable;\n        } else {\n            uniformInfo.block = {\n                name: name,\n                bindingSize: variable.$bindingSize,\n                exp: variable\n            };\n        // throw new Error(`unsupported uniform type: ${name}`);\n        }\n        let found = false;\n        for (const u of getCurrentProgramBuilder()._uniforms){\n            if (u.group !== uniformInfo.group) {\n                continue;\n            }\n            if (uniformInfo.block && u.block && u.block.name === uniformInfo.block.name && u.block.exp.$typeinfo.isCompatibleType(uniformInfo.block.exp.$typeinfo)) {\n                u.mask |= getCurrentProgramBuilder().shaderType;\n                variable = u.block.exp;\n                // u.block.exp = variable;\n                found = true;\n                break;\n            }\n            if (uniformInfo.texture && u.texture && uniformInfo.texture.exp.$str === u.texture.exp.$str && uniformInfo.texture.exp.$typeinfo.isCompatibleType(u.texture.exp.$typeinfo)) {\n                u.mask |= getCurrentProgramBuilder().shaderType;\n                variable = u.texture.exp;\n                // u.texture.exp = variable;\n                found = true;\n                break;\n            }\n            if (uniformInfo.sampler && u.sampler && uniformInfo.sampler.$str === u.sampler.$str && uniformInfo.sampler.$typeinfo.isCompatibleType(u.sampler.$typeinfo)) {\n                u.mask |= getCurrentProgramBuilder().shaderType;\n                variable = u.sampler;\n                // u.sampler = variable;\n                found = true;\n                break;\n            }\n        }\n        if (!found) {\n            uniformInfo.mask = getCurrentProgramBuilder().shaderType;\n            getCurrentProgramBuilder()._uniforms.push(uniformInfo);\n        }\n        if (uniformInfo.texture && !uniformInfo.texture.exp.$typeinfo.isStorageTexture() && getCurrentProgramBuilder().getDevice().type === 'webgpu') {\n            // webgpu requires explicit sampler bindings\n            const isDepth = variable.$typeinfo.isTextureType() && variable.$typeinfo.isDepthTexture();\n            const samplerName = genSamplerName(variable.$str, false);\n            const samplerExp = getCurrentProgramBuilder().sampler(samplerName).uniform(uniformInfo.group).sampleType(variable.$sampleType);\n            samplerExp.$sampleType = variable.$sampleType;\n            this.$local(samplerExp);\n            if (isDepth) {\n                const samplerNameComp = genSamplerName(variable.$str, true);\n                const samplerExpComp = getCurrentProgramBuilder().samplerComparison(samplerNameComp).uniform(uniformInfo.group).sampleType(variable.$sampleType);\n                this.$local(samplerExpComp);\n            }\n        }\n        return variable;\n    }\n    /** @internal */ $_declare(variable, init) {\n        if (this.$_variables[variable.$str]) {\n            throw new PBASTError(variable.$ast, 'cannot re-declare variable');\n        }\n        if (variable.$declareType === DeclareType.DECLARE_TYPE_UNIFORM || variable.$declareType === DeclareType.DECLARE_TYPE_STORAGE) {\n            const name = variable.$ast.name;\n            if (!(this instanceof PBGlobalScope)) {\n                throw new Error(`uniform or storage variables can only be declared within global scope: ${name}`);\n            }\n            if (variable.$declareType === DeclareType.DECLARE_TYPE_UNIFORM && !variable.$typeinfo.isTextureType() && !variable.$typeinfo.isSamplerType() && (!variable.$typeinfo.isConstructible() || !variable.$typeinfo.isHostSharable())) {\n                throw new PBASTError(variable.$ast, `type '${variable.$typeinfo.toTypeName(getCurrentProgramBuilder().getDevice().type)}' cannot be declared in uniform address space`);\n            }\n            if (variable.$declareType === DeclareType.DECLARE_TYPE_STORAGE) {\n                if (getCurrentProgramBuilder().getDevice().type !== 'webgpu') {\n                    throw new PBDeviceNotSupport('storage buffer binding');\n                } else if (!variable.$typeinfo.isHostSharable()) {\n                    throw new PBASTError(variable.$ast, `type '${variable.$typeinfo.toTypeName(getCurrentProgramBuilder().getDevice().type)}' cannot be declared in storage address space`);\n                }\n            }\n            /*\n      if (\n        variable.$declareType === AST.DeclareType.DECLARE_TYPE_STORAGE &&\n        (variable.$typeinfo.isPrimitiveType() || variable.$typeinfo.isArrayType() || variable.$typeinfo.isAtomicI32() || variable.$typeinfo.isAtomicU32())\n      ) {\n        originalType = variable.$typeinfo as PBPrimitiveTypeInfo | PBArrayTypeInfo;\n        const wrappedStruct = getCurrentProgramBuilder().defineStruct(null, new PBShaderExp('value', originalType));\n        variable.$typeinfo = wrappedStruct().$typeinfo;\n      }\n      */ variable = this.$_findOrSetUniform(variable);\n            const ast = this.$_declareInternal(variable);\n            ast.group = variable.$group;\n            ast.binding = 0;\n            ast.blockName = getCurrentProgramBuilder().getBlockName(name);\n            const type = variable.$typeinfo;\n            if (type.isStructType() && variable.$isBuffer || type.isTextureType() || type.isSamplerType() || type.isStructType() && (type.detail.layout === 'std140' || type.detail.layout === 'std430')) {\n                this.$ast.uniforms.push(ast);\n            }\n            variable.$tags.forEach((val)=>{\n                getCurrentProgramBuilder().tagShaderExp(()=>variable, val);\n            });\n        } else {\n            const ast = this.$_declareInternal(variable, init);\n            this.$ast.statements.push(ast);\n        }\n    }\n    /** @internal */ $_registerVar(variable, name) {\n        const key = name || variable.$str;\n        const options = {\n            configurable: true,\n            get: function() {\n                return variable;\n            },\n            set: function(val) {\n                getCurrentProgramBuilder().getCurrentScope().$ast.statements.push(new ASTAssignment(new ASTLValueScalar(variable.$ast), val instanceof PBShaderExp ? val.$ast : val));\n            }\n        };\n        Object.defineProperty(this, key, options);\n        this.$_variables[key] = variable;\n    }\n    /** @internal */ $localGet(prop) {\n        if (typeof prop === 'string' && (prop[0] === '$' || prop in this)) {\n            return this[prop];\n        }\n        return undefined;\n    }\n    /** @internal */ $localSet(prop, value) {\n        if (prop[0] === '$' || prop in this) {\n            this[prop] = value;\n            return true;\n        }\n        return false;\n    }\n    /** @internal */ $get(prop) {\n        const ret = this.$localGet(prop);\n        return ret === undefined && this.$_parentScope ? this.$_parentScope.$thisProxy.$get(prop) : ret;\n    }\n    /** @internal */ $set(prop, value) {\n        if (prop[0] === '$') {\n            this[prop] = value;\n            return true;\n        } else {\n            let scope = this;\n            while(scope && !(prop in scope)){\n                scope = scope.$_parentScope;\n            }\n            if (scope) {\n                scope[prop] = value;\n                return true;\n            } else {\n                if (this.$l) {\n                    this.$l[prop] = value;\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    /** @internal */ $_getLocalScope() {\n        if (!this.$_localScope) {\n            this.$_localScope = new PBLocalScope(this);\n        }\n        return this.$_localScope;\n    }\n    /** @internal */ $_getGlobalScope() {\n        return this.$builder.getGlobalScope();\n    }\n}\n/**\n * The local scope of a shader\n * @public\n */ class PBLocalScope extends PBScope {\n    /** @internal */ $_scope;\n    constructor(scope){\n        super(null, null);\n        this.$_scope = scope;\n    }\n    /** @internal */ $get(prop) {\n        return prop[0] === '$' ? this[prop] : this.$_scope.$localGet(prop);\n    }\n    /** @internal */ $set(prop, value) {\n        if (prop[0] === '$') {\n            this[prop] = value;\n            return true;\n        }\n        if (!(this.$_scope instanceof PBGlobalScope) && value instanceof PBShaderExp && (value.isConstructor() || value.$typeinfo.isTextureType() && value.$ast instanceof ASTPrimitive && !value.$ast.name) && (value.$declareType === DeclareType.DECLARE_TYPE_UNIFORM || value.$declareType === DeclareType.DECLARE_TYPE_STORAGE)) {\n            // We are setting uniform a uniform, should invoke in the global scope\n            this.$g[prop] = value;\n            return true;\n        }\n        const val = this.$_scope.$localGet(prop);\n        if (val === undefined) {\n            const type = getCurrentProgramBuilder().guessExpValueType(value);\n            if (type.isCompatibleType(typeVoid)) {\n                throw new Error(`Cannot assign void type to '${prop}'`);\n            }\n            const exp = new PBShaderExp(prop, type);\n            if (value instanceof PBShaderExp && !this.$_scope.$parent) {\n                exp.$declareType = value.$declareType;\n                exp.$isBuffer = value.$isBuffer;\n                exp.$bindingSize = value.$bindingSize;\n                exp.$readonly = value.$readonly;\n                exp.$group = value.$group;\n                exp.$attrib = value.$attrib;\n                exp.$sampleType = value.$sampleType;\n                exp.$precision = value.$precision;\n                exp.tag(...value.$tags);\n            }\n            this.$_scope.$local(exp, value);\n            return true;\n        } else {\n            return this.$_scope.$localSet(prop, value);\n        }\n    }\n    /** @internal */ $_getLocalScope() {\n        return this;\n    }\n}\n/**\n * The builtin scope of a shader\n * @public\n */ class PBBuiltinScope extends PBScope {\n    /** @internal */ $_usedBuiltins;\n    /** @internal */ $_builtinVars;\n    constructor(){\n        super(null);\n        this.$_usedBuiltins = new Set();\n        const isWebGPU = getCurrentProgramBuilder().getDevice().type === 'webgpu';\n        if (!isWebGPU) {\n            this.$_builtinVars = {};\n            const v = builtinVariables[getCurrentProgramBuilder().getDevice().type];\n            for(const k in v){\n                const info = v[k];\n                this.$_builtinVars[k] = new PBShaderExp(info.name, info.type);\n            }\n        }\n        const v = builtinVariables[getCurrentProgramBuilder().getDevice().type];\n        const that = this;\n        for (const k of Object.keys(v)){\n            Object.defineProperty(this, k, {\n                get: function() {\n                    return that.$getBuiltinVar(k);\n                },\n                set: function(v) {\n                    if (typeof v !== 'number' && !(v instanceof PBShaderExp)) {\n                        throw new Error(`Invalid output value assignment`);\n                    }\n                    const exp = that.$getBuiltinVar(k);\n                    getCurrentProgramBuilder().getCurrentScope().$ast.statements.push(new ASTAssignment(new ASTLValueScalar(exp.$ast), v instanceof PBShaderExp ? v.$ast : v));\n                }\n            });\n        }\n    }\n    /** @internal */ $_getLocalScope() {\n        return null;\n    }\n    /** @internal */ $getBuiltinVar(name) {\n        const pb = getCurrentProgramBuilder();\n        this.$_usedBuiltins.add(name);\n        const isWebGPU = pb.getDevice().type === 'webgpu';\n        if (isWebGPU) {\n            const v = builtinVariables[pb.getDevice().type];\n            const info = v[name];\n            const inout = info.inOrOut;\n            if (inout === 'in') {\n                return pb.getCurrentFunctionScope()[getBuiltinParamName(pb.shaderType)][info.name];\n            }\n            const structName = inout === 'in' ? getBuiltinInputStructInstanceName(pb.shaderType) : getBuiltinOutputStructInstanceName(pb.shaderType);\n            const scope = pb.getCurrentScope();\n            if (!scope[structName] || !scope[structName][info.name]) {\n                throw new Error(`invalid use of builtin variable ${name}`);\n            }\n            return scope[structName][info.name];\n        } else {\n            if (pb.getDevice().type === 'webgl2' && (name === 'vertexIndex' || name === 'instanceIndex')) {\n                return pb.uint(this.$_builtinVars[name]);\n            } else {\n                return this.$_builtinVars[name];\n            }\n        }\n    }\n}\n/**\n * The input scope of a shader\n * @public\n */ class PBInputScope extends PBScope {\n    /** @internal */ $_names;\n    $_aliases;\n    /** @internal */ constructor(){\n        super(null);\n        this.$_names = {};\n        this.$_aliases = {};\n    }\n    /** @internal */ $getVertexAttrib(attrib) {\n        const name = this.$_names[attrib];\n        return name ? this[name] : null;\n    }\n    /** @internal */ $_getLocalScope() {\n        return null;\n    }\n    /** @internal */ $get(prop) {\n        if (prop[0] === '$') {\n            return this[prop];\n        }\n        if (this.$_aliases[prop]) {\n            prop = this.$_aliases[prop];\n        }\n        const pb = this.$builder;\n        if (pb.getDevice().type === 'webgpu') {\n            const param = pb.getCurrentFunctionScope()[getBuiltinParamName(pb.shaderType)];\n            const prefix = pb.shaderKind === 'vertex' ? input_prefix : output_prefix_vs;\n            const name = `${prefix}${prop}`;\n            if (param.$typeinfo.structMembers.findIndex((val)=>val.name === name) < 0) {\n                return undefined;\n            }\n            return param[`${prefix}${prop}`];\n        }\n        return super.$get(prop);\n    }\n    /** @internal */ $set(prop, value) {\n        if (prop[0] === '$') {\n            this[prop] = value;\n        } else {\n            if (!(value instanceof PBShaderExp)) {\n                throw new Error(`invalid vertex input value`);\n            }\n            const st = getCurrentProgramBuilder().shaderType;\n            if (st !== ShaderType.Vertex) {\n                throw new Error(`shader input variables can only be declared in vertex shader: \"${prop}\"`);\n            }\n            const attrib = getVertexAttribByName(value.$attrib);\n            if (attrib === undefined) {\n                throw new Error(`can not declare shader input variable: invalid vertex attribute: \"${prop}\"`);\n            }\n            if (getCurrentProgramBuilder()._vertexAttributes.indexOf(attrib) >= 0) {\n                const lastName = this.$_names[value.$attrib];\n                if (prop !== lastName) {\n                    const p = this[lastName];\n                    if (p.$typeinfo.typeId !== value.$typeinfo.typeId) {\n                        throw new Error(`can not declare shader input variable: attribute already declared with different type: \"${prop}\"`);\n                    }\n                    this.$_aliases[prop] = lastName;\n                }\n                return true;\n            }\n            if (!(value instanceof PBShaderExp) || !(value.$ast instanceof ASTShaderExpConstructor)) {\n                throw new Error(`invalid shader input variable declaration: \"${prop}\"`);\n            }\n            const type = value.$ast.getType();\n            if (!type.isPrimitiveType() || type.isMatrixType() || type.primitiveType === PBPrimitiveType.BOOL) {\n                throw new Error(`type cannot be used as pipeline input/output: ${prop}`);\n            }\n            this.$_names[value.$attrib] = prop;\n            const location = getCurrentProgramBuilder()._inputs.length;\n            const exp = new PBShaderExp(`${input_prefix}${prop}`, type).tag(...value.$tags);\n            getCurrentProgramBuilder().in(location, prop, exp);\n            getCurrentProgramBuilder()._vertexAttributes.push(attrib);\n            //getCurrentProgramBuilder().getReflection().setAttrib(value.$attrib, exp);\n            // modify input struct for webgpu\n            if (getCurrentProgramBuilder().getDevice().type === 'webgpu') {\n                if (getCurrentProgramBuilder().findStructType(getBuiltinInputStructName(st), st)) {\n                    getCurrentProgramBuilder().defineBuiltinStruct(st, 'in');\n                }\n            }\n        }\n        return true;\n    }\n}\n/**\n * The output scope of a shader\n * @public\n */ class PBOutputScope extends PBScope {\n    constructor(){\n        super(null);\n    }\n    /** @internal */ $_getLocalScope() {\n        return null;\n    }\n    /** @internal */ $set(prop, value) {\n        if (prop[0] === '$' /* || prop in this*/ ) {\n            this[prop] = value;\n        } else {\n            const pb = getCurrentProgramBuilder();\n            if (!(prop in this)) {\n                if (pb.getCurrentScope() === pb.getGlobalScope() && (!(value instanceof PBShaderExp) || !(value.$ast instanceof ASTShaderExpConstructor))) {\n                    throw new Error(`invalid shader output variable declaration: ${prop}`);\n                }\n                const type = value.$ast.getType();\n                if (!type.isPrimitiveType() || type.isMatrixType() || type.primitiveType === PBPrimitiveType.BOOL) {\n                    throw new Error(`type cannot be used as pipeline input/output: ${prop}`);\n                }\n                const location = pb._outputs.length;\n                pb.out(location, prop, new PBShaderExp(`${pb.shaderKind === 'vertex' ? output_prefix_vs : output_prefix_fs}${prop}`, type).tag(...value.$tags));\n                // modify output struct for webgpu\n                if (getCurrentProgramBuilder().getDevice().type === 'webgpu') {\n                    const st = getCurrentProgramBuilder().shaderType;\n                    if (getCurrentProgramBuilder().findStructType(getBuiltinInputStructName(st), st)) {\n                        getCurrentProgramBuilder().defineBuiltinStruct(st, 'out');\n                    }\n                }\n            }\n            if (getCurrentProgramBuilder().getCurrentScope() !== getCurrentProgramBuilder().getGlobalScope()) {\n                const ast = value.$ast;\n                if (!(ast instanceof ASTShaderExpConstructor) || ast.args.length > 0) {\n                    this[prop] = value;\n                }\n            }\n        }\n        return true;\n    }\n}\n/**\n * The global scope of a shader\n * @public\n */ class PBGlobalScope extends PBScope {\n    /** @internal */ $_inputStructInfo;\n    /** @internal */ constructor(){\n        super(new ASTGlobalScope());\n        this.$_inputStructInfo = null;\n    }\n    /** @internal */ get $inputStructInfo() {\n        if (!this.$_inputStructInfo) {\n            this.$_inputStructInfo = this.$builder.defineBuiltinStruct(this.$builder.shaderType, 'in');\n        }\n        return this.$_inputStructInfo;\n    }\n    /** @internal */ get $inputStruct() {\n        return this.$inputStructInfo[0];\n    }\n    /** @internal */ $mainFunc(body) {\n        const pb = getCurrentProgramBuilder();\n        if (pb.getDevice().type === 'webgpu') {\n            const inputStruct = this.$inputStructInfo;\n            //this.$local(inputStruct[1]);\n            const isCompute = pb.shaderType === ShaderType.Compute;\n            const outputStruct = isCompute ? null : pb.defineBuiltinStruct(pb.shaderType, 'out');\n            if (outputStruct) {\n                this.$local(outputStruct[1]);\n            }\n            // this.$internalCreateFunction('chMainStub', [], false, body);\n            this.$internalCreateFunction('main', inputStruct ? [\n                inputStruct[3]\n            ] : [], true, function() {\n                /*\n          if (inputStruct) {\n            this[inputStruct[1].$str] = this[inputStruct[3].$str];\n          }\n          */ if (pb.shaderType === ShaderType.Fragment && pb.emulateDepthClamp) {\n                    this.$builtins.fragDepth = pb.clamp(this.$inputs.clamppedDepth, 0, 1);\n                }\n                body?.call(this);\n                //this.chMainStub();\n                if (pb.shaderType === ShaderType.Vertex) {\n                    if (pb.depthRangeCorrection) {\n                        this.$builtins.position.z = pb.mul(pb.add(this.$builtins.position.z, this.$builtins.position.w), 0.5);\n                    }\n                    if (pb.emulateDepthClamp) {\n                        //z = gl_Position.z / gl_Position.w;\n                        //z = (gl_DepthRange.diff * z + gl_DepthRange.near + gl_DepthRange.far) * 0.5;\n                        this.$outputs.clamppedDepth = pb.div(this.$builtins.position.z, this.$builtins.position.w);\n                        this.$builtins.position.z = 0;\n                    }\n                }\n                if (!isCompute) {\n                    this.$return(outputStruct[1]);\n                }\n            });\n        } else {\n            this.$internalCreateFunction('main', [], true, function() {\n                if (pb.shaderType === ShaderType.Fragment && pb.emulateDepthClamp) {\n                    this.$builtins.fragDepth = pb.clamp(this.$inputs.clamppedDepth, 0, 1);\n                }\n                body?.call(this);\n                if (pb.shaderType === ShaderType.Vertex && pb.emulateDepthClamp) {\n                    this.$outputs.clamppedDepth = pb.div(pb.add(pb.div(this.$builtins.position.z, this.$builtins.position.w), 1), 2);\n                    this.$builtins.position.z = 0;\n                }\n            });\n        }\n    }\n    /** @internal */ $createFunctionIfNotExists(name, params, body) {\n        this.$internalCreateFunction(name, params, false, body);\n    }\n    /** @internal */ $getFunctions(name) {\n        return this.$ast.findFunctions(name);\n    }\n    /** @internal */ $getCurrentFunctionScope() {\n        let scope = getCurrentProgramBuilder().getCurrentScope();\n        while(scope && !(scope instanceof PBFunctionScope)){\n            scope = scope.$parent;\n        }\n        return scope;\n    }\n    /** @internal */ $internalCreateFunction(name, params, isMain, body) {\n        const pb = getCurrentProgramBuilder();\n        if (pb.getDevice().type === 'webgpu' && !isMain) {\n            params.push(this.$inputStruct(getBuiltinParamName(pb.shaderType)));\n        }\n        params.forEach((param)=>{\n            if (!(param.$ast instanceof ASTPrimitive)) {\n                throw new Error(`${name}(): invalid function definition`);\n            }\n            let ast = param.$ast;\n            if (param.$inout) {\n                if (getCurrentProgramBuilder().getDevice().type === 'webgpu') {\n                    param.$typeinfo = new PBPointerTypeInfo(param.$typeinfo, PBAddressSpace.UNKNOWN);\n                }\n                ast = new ASTReferenceOf(param.$ast);\n            }\n            param.$ast = new ASTFunctionParameter(ast);\n        });\n        const overloads = this.$getFunctions(name);\n        const currentFunctionScope = this.$getCurrentFunctionScope();\n        const astFunc = new ASTFunction(name, params.map((val)=>val.$ast), isMain, null, false);\n        if (currentFunctionScope) {\n            const curIndex = this.$ast.statements.indexOf(currentFunctionScope.$ast);\n            if (curIndex < 0) {\n                throw new Error('Internal error');\n            }\n            this.$ast.statements.splice(curIndex, 0, astFunc);\n        } else {\n            this.$ast.statements.push(astFunc);\n        }\n        new PBFunctionScope(this, params, astFunc, body);\n        if (!astFunc.returnType) {\n            astFunc.returnType = typeVoid;\n        }\n        astFunc.funcType = new PBFunctionTypeInfo(astFunc.name, astFunc.returnType, params.map((param)=>{\n            const ast = param.$ast;\n            return ast.paramAST instanceof ASTReferenceOf ? {\n                type: ast.paramAST.value.getType(),\n                byRef: ast.paramAST instanceof ASTReferenceOf\n            } : {\n                type: ast.paramAST.getType(),\n                byRef: false\n            };\n        }));\n        for (const overload of overloads){\n            if (overload.funcType.argHash === astFunc.funcType.argHash) {\n                if (overload.returnType.isCompatibleType(astFunc.returnType)) {\n                    // Function signature already exists\n                    // console.warn(`Function '${name}' already exists`);\n                    this.$ast.statements.splice(this.$ast.statements.indexOf(astFunc), 1);\n                    return;\n                } else {\n                    throw new Error(`Invalid function overloading: ${name}`);\n                }\n            }\n        }\n        if (overloads.length === 0) {\n            Object.defineProperty(this, name, {\n                get: function() {\n                    const func = this.$getFunctions(name);\n                    if (func.length === 0) {\n                        throw new Error(`function ${name} not found`);\n                    }\n                    return (...args)=>{\n                        let inputArg = null;\n                        if (pb.getDevice().type === 'webgpu') {\n                            let funcScope = pb.getCurrentScope();\n                            while(funcScope && !(funcScope instanceof PBFunctionScope)){\n                                funcScope = funcScope.$parent;\n                            }\n                            const funcArgs = funcScope.$ast.args;\n                            const arg = funcArgs[funcArgs.length - 1].paramAST;\n                            const name = arg.name;\n                            inputArg = funcScope[name];\n                        }\n                        const argsNonArray = (inputArg ? [\n                            ...args,\n                            inputArg\n                        ] : args).map((val)=>pb.normalizeExpValue(val));\n                        const funcType = pb._getFunctionOverload(name, argsNonArray);\n                        if (!funcType) {\n                            throw new Error(`ERROR: no matching overloads for function ${name}(${argsNonArray.map((val)=>{\n                                if (val instanceof PBShaderExp) {\n                                    return val.$ast?.getType()?.toTypeName() ?? '?';\n                                } else {\n                                    return typeof val;\n                                }\n                            }).join(', ')})`);\n                        }\n                        return getCurrentProgramBuilder().$callFunction(name, funcType[1], funcType[0]);\n                    };\n                }\n            });\n        }\n    }\n}\n/**\n * Scope that is inside a function\n * @public\n */ class PBInsideFunctionScope extends PBScope {\n    /** @internal */ constructor(parent){\n        super(new ASTScope(), parent);\n    }\n    /**\n   * Creates a 'return' statement\n   * @param retval - The return value\n   */ $return(retval) {\n        const functionScope = this.findOwnerFunction();\n        const astFunc = functionScope.$ast;\n        let returnType = null;\n        const retValNonArray = getCurrentProgramBuilder().normalizeExpValue(retval);\n        if (retValNonArray !== undefined && retValNonArray !== null) {\n            if (typeof retValNonArray === 'number') {\n                if (astFunc.returnType) {\n                    if (astFunc.returnType.isPrimitiveType() && astFunc.returnType.isScalarType() && !astFunc.returnType.isCompatibleType(typeBool)) {\n                        returnType = astFunc.returnType;\n                    }\n                }\n                if (!returnType) {\n                    if (Number.isInteger(retValNonArray)) {\n                        if (retValNonArray < 0) {\n                            if (retValNonArray < 0x80000000 >> 0) {\n                                throw new Error(`function ${astFunc.name}: invalid return value: ${retValNonArray}`);\n                            }\n                            returnType = typeI32;\n                        } else {\n                            if (retValNonArray > 0xffffffff) {\n                                throw new Error(`function ${astFunc.name}: invalid return value: ${retValNonArray}`);\n                            }\n                            returnType = retValNonArray <= 0x7fffffff ? typeI32 : typeU32;\n                        }\n                    } else {\n                        returnType = typeF32;\n                    }\n                }\n            } else if (typeof retValNonArray === 'boolean') {\n                returnType = typeBool;\n            } else {\n                returnType = retValNonArray.$ast.getType();\n            }\n        } else {\n            returnType = typeVoid;\n        }\n        if (returnType.isPointerType()) {\n            throw new Error('function can not return pointer type');\n        }\n        if (!astFunc.returnType) {\n            astFunc.returnType = returnType;\n        } else if (!astFunc.returnType.isCompatibleType(returnType)) {\n            throw new Error(`function ${astFunc.name}: return type must be ${astFunc.returnType?.toTypeName(getCurrentProgramBuilder().getDevice().type) || 'void'}`);\n        }\n        let returnValue = null;\n        if (retValNonArray !== undefined && retValNonArray !== null) {\n            if (retValNonArray instanceof PBShaderExp) {\n                returnValue = retValNonArray.$ast;\n            } else {\n                if (!returnType.isPrimitiveType() || !returnType.isScalarType()) {\n                    throw new PBTypeCastError(retValNonArray, typeof retValNonArray, returnType);\n                }\n                returnValue = new ASTScalar(retValNonArray, returnType);\n            }\n        }\n        this.$ast.statements.push(new ASTReturn(returnValue));\n    }\n    /**\n   * Creates a new scope\n   * @param body - Generator function for the scope\n   * @returns The created scope\n   */ $scope(body) {\n        const astScope = new ASTNakedScope();\n        this.$ast.statements.push(astScope);\n        return new PBNakedScope(this, astScope, body);\n    }\n    /**\n   * Creates an 'if' statement\n   * @param condition - Condition expression for the if statement\n   * @param body - Generator function for the scope inside the if statement\n   * @returns The scope inside the if statement\n   */ $if(condition, body) {\n        const astIf = new ASTIf('if', condition instanceof PBShaderExp ? condition.$ast : new ASTScalar(condition, typeof condition === 'number' ? typeF32 : typeBool));\n        this.$ast.statements.push(astIf);\n        return new PBIfScope(this, astIf, body);\n    }\n    /**\n   * Creates a select statement: condition ? first : second\n   * @param condition - Condition expression\n   * @param first - The first value\n   * @param second - The second value\n   * @returns The first value if condition evaluates to true, otherwise returns the second value\n   */ $choice(condition, first, second) {\n        const ast = new ASTSelect(condition instanceof PBShaderExp ? condition.$ast : condition, first instanceof PBShaderExp ? first.$ast : first, second instanceof PBShaderExp ? second.$ast : second);\n        const exp = new PBShaderExp('', ast.getType());\n        exp.$ast = ast;\n        return exp;\n    }\n    /** Creates a 'break' statement */ $break() {\n        this.$ast.statements.push(new ASTBreak());\n    }\n    /** Creates a 'continue' statement */ $continue() {\n        this.$ast.statements.push(new ASTContinue());\n    }\n    /**\n   * Creates a 'for' statement\n   * @param counter - The repeat counter variable declaration\n   * @param init - initial value of the repeat counter variable\n   * @param end - end value of the counter exclusive\n   * @param body - Generator function for the scope that inside the for statement\n   */ $for(counter, init, end, open, reverse, body) {\n        const initializerType = counter.$ast.getType();\n        if (!initializerType.isPrimitiveType() || !initializerType.isScalarType()) {\n            throw new PBASTError(counter.$ast, 'invalid for range initializer type');\n        }\n        const initval = init instanceof PBShaderExp ? init.$ast : new ASTScalar(init, initializerType);\n        if (typeof open === 'function') {\n            body = open;\n            open = true;\n            reverse = false;\n        } else if (typeof reverse === 'function') {\n            body = reverse;\n            open = !!open;\n            reverse = false;\n        } else {\n            open = !!open;\n            reverse = !!reverse;\n        }\n        const astFor = new ASTRange(counter.$ast, initval, end instanceof PBShaderExp ? end.$ast : new ASTScalar(end, initializerType), open, reverse);\n        this.$ast.statements.push(astFor);\n        new PBForScope(this, counter, end, astFor, body);\n    }\n    /**\n   * Creates a 'do..while' statement\n   * @param body - Generator function for the scope that inside the do..while statment\n   * @returns The scope that inside the do..while statement\n   */ $do(body) {\n        if (this.$builder.getDevice().type === 'webgl') {\n            throw new Error(`No do-while() loop support for WebGL1.0 device`);\n        }\n        const astDoWhile = new ASTDoWhile(null);\n        this.$ast.statements.push(astDoWhile);\n        return new PBDoWhileScope(this, astDoWhile, body);\n    }\n    /**\n   * Creates a 'while' statement\n   * @param condition - Condition expression for the while statement\n   * @param body - Generator function for the scope that inside the while statement\n   */ $while(condition, body) {\n        const astWhile = new ASTWhile(condition instanceof PBShaderExp ? condition.$ast : new ASTScalar(condition, typeof condition === 'number' ? typeF32 : typeBool));\n        this.$ast.statements.push(astWhile);\n        new PBWhileScope(this, astWhile, body);\n    }\n    /** @internal */ findOwnerFunction() {\n        for(let scope = this; scope; scope = scope.$parent){\n            if (scope instanceof PBFunctionScope) {\n                return scope;\n            }\n        }\n        return null;\n    }\n    /** Gets main function scope */ $getMainScope() {\n        for(let scope = this; scope; scope = scope.$parent){\n            if (scope instanceof PBFunctionScope && scope.$isMain()) {\n                return scope;\n            }\n        }\n        return null;\n    }\n}\n/**\n * Scope that insides a function\n * @public\n */ class PBFunctionScope extends PBInsideFunctionScope {\n    /** @internal */ $typeinfo;\n    /** @internal */ constructor(parent, params, ast, body){\n        super(parent);\n        this.$ast = ast;\n        for (const param of params){\n            if (this.$_variables[param.$str]) {\n                throw new Error('Duplicate function parameter name is not allowed');\n            }\n            this.$_registerVar(param);\n        }\n        getCurrentProgramBuilder().pushScope(this);\n        body?.call(this);\n        getCurrentProgramBuilder().popScope();\n    }\n    $isMain() {\n        return this.$ast.isMainFunc;\n    }\n}\n/**\n * Scope that insides a while statement\n * @public\n */ class PBWhileScope extends PBInsideFunctionScope {\n    /** @internal */ constructor(parent, ast, body){\n        super(parent);\n        this.$ast = ast;\n        getCurrentProgramBuilder().pushScope(this);\n        body?.call(this);\n        getCurrentProgramBuilder().popScope();\n    }\n}\n/**\n * Scope that insides a do..while statement\n * @public\n */ class PBDoWhileScope extends PBInsideFunctionScope {\n    /** @internal */ constructor(parent, ast, body){\n        super(parent);\n        this.$ast = ast;\n        getCurrentProgramBuilder().pushScope(this);\n        body?.call(this);\n        getCurrentProgramBuilder().popScope();\n    }\n    $while(condition) {\n        this.$ast.condition = condition instanceof PBShaderExp ? condition.$ast : new ASTScalar(condition, typeof condition === 'number' ? typeF32 : typeBool);\n    }\n}\n/**\n * Scope that insides a for statement\n * @public\n */ class PBForScope extends PBInsideFunctionScope {\n    /** @internal */ constructor(parent, counter, count, ast, body){\n        super(parent);\n        this.$ast = ast;\n        this.$_registerVar(counter);\n        getCurrentProgramBuilder().pushScope(this);\n        body?.call(this);\n        getCurrentProgramBuilder().popScope();\n    }\n}\n/**\n * A naked scope\n * @public\n */ class PBNakedScope extends PBInsideFunctionScope {\n    /** @internal */ constructor(parent, ast, body){\n        super(parent);\n        this.$ast = ast;\n        getCurrentProgramBuilder().pushScope(this);\n        body?.call(this);\n        getCurrentProgramBuilder().popScope();\n    }\n}\n/**\n * Scope that insides an if statement\n * @public\n */ class PBIfScope extends PBInsideFunctionScope {\n    /** @internal */ constructor(parent, ast, body){\n        super(parent);\n        this.$ast = ast;\n        getCurrentProgramBuilder().pushScope(this);\n        body?.call(this);\n        getCurrentProgramBuilder().popScope();\n    }\n    /**\n   * Creates an 'else if' branch\n   * @param condition - Condition expression for the else if branch\n   * @param body - Generator function for the scope that insides the else if statement\n   * @returns The scope that insides the else if statement\n   */ $elseif(condition, body) {\n        const astElseIf = new ASTIf('else if', condition instanceof PBShaderExp ? condition.$ast : new ASTScalar(condition, typeof condition === 'number' ? typeF32 : typeBool));\n        this.$ast.nextElse = astElseIf;\n        return new PBIfScope(this.$_parentScope, astElseIf, body);\n    }\n    /**\n   * Creates an 'else' branch\n   * @param body - Generator function for the scope that insides the else statement\n   */ $else(body) {\n        const astElse = new ASTIf('else', null);\n        this.$ast.nextElse = astElse;\n        new PBIfScope(this.$_parentScope, astElse, body);\n    }\n}\nsetBuiltinFuncs(ProgramBuilder);\nsetConstructors(ProgramBuilder);\n\nexport { PBBuiltinScope, PBDoWhileScope, PBForScope, PBFunctionScope, PBGlobalScope, PBIfScope, PBInputScope, PBInsideFunctionScope, PBLocalScope, PBNakedScope, PBOutputScope, PBScope, PBWhileScope, ProgramBuilder };\n//# sourceMappingURL=programbuilder.js.map\n","/** @internal */ class FontCanvas {\n    static _canvas = null;\n    static _context = null;\n    static get canvas() {\n        this._realize();\n        return this._canvas;\n    }\n    static get context() {\n        this._realize();\n        return this._context;\n    }\n    static get font() {\n        return this.context.font;\n    }\n    static set font(font) {\n        this.context.font = font;\n    }\n    static _realize() {\n        if (!this._canvas) {\n            this._canvas = document.createElement('canvas');\n            this._canvas.width = 512;\n            this._canvas.height = 512;\n            this._canvas.style.left = '-10000px';\n            this._canvas.style.position = 'absolute';\n            //document.body.appendChild(this._canvas);\n            this._context = this._canvas.getContext('2d', {\n                willReadFrequently: true\n            });\n            this._context.textBaseline = 'top';\n            this._context.textAlign = 'left';\n            this._context.fillStyle = 'transparent';\n            this._context.fillRect(0, 0, this._canvas.width, this._canvas.height);\n            this._context.fillStyle = '#ffffff';\n            this._context.imageSmoothingEnabled = true;\n            this._context.imageSmoothingQuality = 'high';\n        }\n    }\n}\n/**\n * The font class\n * @public\n */ class Font {\n    /** @internal */ static fontCache = {};\n    /** @internal */ _name;\n    /** @internal */ _nameScaled;\n    /** @internal */ _scale;\n    /** @internal */ _size;\n    /** @internal */ _family;\n    /** @internal */ _top;\n    /** @internal */ _bottom;\n    /** @internal */ _topScaled;\n    /** @internal */ _bottomScaled;\n    /** @internal */ _div;\n    /**\n   * Creates a instance of font class from font name and the scale value\n   * @param name - The font name\n   * @param scale - The scale value\n   */ constructor(name, scale){\n        this._top = 0;\n        this._bottom = 0;\n        this._size = 0;\n        this._topScaled = 0;\n        this._bottomScaled = 0;\n        this._family = '';\n        this._scale = scale;\n        this._name = name;\n        this._nameScaled = null;\n        this._div = document.createElement('div');\n        if (this._name) {\n            this._normalizeFont();\n        }\n    }\n    /**\n   * Fetch a font from cache\n   * @param name - The font name\n   * @param scale - The scale value\n   * @returns The font object\n   */ static fetchFont(name, scale) {\n        let fontlist = this.fontCache[name];\n        if (!fontlist) {\n            fontlist = {};\n            this.fontCache[name] = fontlist;\n        }\n        let font = fontlist[scale];\n        if (!font) {\n            font = new Font(name, scale);\n            fontlist[scale] = font;\n        }\n        return font;\n    }\n    /** Gets the font name */ get fontName() {\n        return this._name;\n    }\n    set fontName(name) {\n        this._name = name;\n        this._normalizeFont();\n    }\n    /** Gets the scaled font name */ get fontNameScaled() {\n        return this._nameScaled;\n    }\n    /** Gets the font size */ get size() {\n        return this._size;\n    }\n    /** Gets the font family */ get family() {\n        return this._family;\n    }\n    /** Gets top position of the font */ get top() {\n        return this._top;\n    }\n    /** Gets the bottom position of the font */ get bottom() {\n        return this._bottom;\n    }\n    /** Gets the scaled top position of the font */ get topScaled() {\n        return this._topScaled;\n    }\n    /** Gets the scaled bottom position of the font */ get bottomScaled() {\n        return this._bottomScaled;\n    }\n    /** Gets the maximum height of the font */ get maxHeight() {\n        return this._bottom - this._top + 1;\n    }\n    /** Gets the scaled maximum height of the font */ get maxHeightScaled() {\n        return this._bottomScaled - this._topScaled + 1;\n    }\n    /** Tests if two fonts are the same */ equalTo(other) {\n        return this._size === other._size && this._family === other._family;\n    }\n    /** @internal */ _measureFontHeight(fontName) {\n        const oldFont = FontCanvas.context.font;\n        const oldTextBaseline = FontCanvas.context.textBaseline;\n        const oldFillStyle = FontCanvas.context.fillStyle;\n        FontCanvas.context.font = fontName;\n        this._div.style.font = FontCanvas.context.font;\n        const fontSize = this._div.style.fontSize;\n        const size = parseInt(fontSize.substring(0, fontSize.length - 2));\n        const family = this._div.style.fontFamily;\n        const testString = 'bdfghijklpq|_~';\n        const metric = FontCanvas.context.measureText(testString);\n        let top, bottom;\n        top = 0;\n        bottom = size - 1;\n        const extra = 10;\n        const halfExtra = extra >> 1;\n        const maxWidth = Math.ceil(metric.width) + extra;\n        const maxHeight = size + extra;\n        FontCanvas.context.clearRect(0, 0, maxWidth, maxHeight);\n        FontCanvas.context.textBaseline = 'top';\n        FontCanvas.context.fillStyle = '#ffffff';\n        FontCanvas.context.fillText(testString, halfExtra, halfExtra);\n        const bitmap = FontCanvas.context.getImageData(0, 0, maxWidth, maxHeight);\n        const pixels = bitmap.data;\n        for(let i = 0; i < maxWidth * maxHeight; i++){\n            if (pixels[i * 4 + 3] > 0) {\n                top = Math.floor(i / maxWidth);\n                break;\n            }\n        }\n        for(let i = maxWidth * maxHeight - 1; i >= 0; i--){\n            if (pixels[i * 4 + 3] > 0) {\n                bottom = Math.floor(i / maxWidth);\n                break;\n            }\n        }\n        top -= halfExtra;\n        bottom -= halfExtra;\n        FontCanvas.context.font = oldFont;\n        FontCanvas.context.textBaseline = oldTextBaseline;\n        FontCanvas.context.fillStyle = oldFillStyle;\n        return {\n            size,\n            family,\n            top,\n            bottom\n        };\n    }\n    /** @internal */ _normalizeFont() {\n        const info = this._measureFontHeight(this._name);\n        this._nameScaled = `${Math.round(info.size * this._scale)}px ${info.family}`;\n        const infoScaled = this._measureFontHeight(this._nameScaled);\n        this._size = info.size;\n        this._family = info.family;\n        this._top = info.top;\n        this._bottom = info.bottom;\n        this._topScaled = infoScaled.top;\n        this._bottomScaled = infoScaled.bottom;\n    }\n}\n\nexport { Font, FontCanvas };\n//# sourceMappingURL=font.js.map\n","import { RectsPacker } from '@zephyr3d/base';\n\n/**\n * Texture atlas manager\n * @public\n */ class TextureAtlasManager {\n    /** @internal */ static ATLAS_WIDTH = 1024;\n    /** @internal */ static ATLAS_HEIGHT = 1024;\n    /** @internal */ _packer;\n    /** @internal */ _device;\n    /** @internal */ _binWidth;\n    /** @internal */ _binHeight;\n    /** @internal */ _rectBorderWidth;\n    /** @internal */ _linearSpace;\n    /** @internal */ _atlasList;\n    /** @internal */ _atlasInfoMap;\n    /** @internal */ _atlasRestoreHandler;\n    /**\n   * Creates a new texture atlas manager instance\n   * @param device - The render device\n   * @param binWidth - Width of an atlas bin\n   * @param binHeight - Height of an atlas bin\n   * @param rectBorderWidth - Border width of an atlas\n   * @param linearSpace - true if the texture space is linear\n   */ constructor(device, binWidth, binHeight, rectBorderWidth, linearSpace){\n        this._device = device;\n        this._binWidth = binWidth;\n        this._binHeight = binHeight;\n        this._rectBorderWidth = rectBorderWidth;\n        this._linearSpace = !!linearSpace;\n        this._packer = new RectsPacker(this._binWidth, this._binHeight);\n        this._atlasList = [];\n        this._atlasInfoMap = {};\n        this._atlasRestoreHandler = null;\n    }\n    /**\n   * The texture restore handler callback function\n   * This callback function will be called whenever the device has been restored\n   */ get atlasTextureRestoreHandler() {\n        return this._atlasRestoreHandler;\n    }\n    set atlasTextureRestoreHandler(f) {\n        this._atlasRestoreHandler = f;\n    }\n    /**\n   * Gets the atlas texture of a given index\n   * @param index - Index of the atlas bin\n   * @returns Atlas texture for given index\n   */ getAtlasTexture(index) {\n        return this._atlasList[index];\n    }\n    /**\n   * Gets the information about specified atlas\n   * @param key - Key of the atlas\n   * @returns Information of the atlas\n   */ getAtlasInfo(key) {\n        return this._atlasInfoMap[key] || null;\n    }\n    /**\n   * Check if no atlas has been created\n   * @returns true if no atlas has been created\n   */ isEmpty() {\n        return this._atlasList.length === 0;\n    }\n    /**\n   * Removes all created atlases\n   */ clear() {\n        this._packer.clear();\n        for (const tex of this._atlasList){\n            tex.dispose();\n        }\n        this._atlasList = [];\n        this._atlasInfoMap = {};\n    }\n    /**\n   * Inserts a rectangle of a canvas to the atlas texture\n   * @param key - Key of the atlas\n   * @param ctx - The canvas context\n   * @param x - x offset of the rectangle\n   * @param y - y offset of the rectangle\n   * @param w - width of the rectangle\n   * @param h - height of the rectangle\n   * @returns The atals info or null if insert failed\n   */ pushCanvas(key, ctx, x, y, w, h) {\n        const rc = this._packer.insert(w + 2 * this._rectBorderWidth, h + 2 * this._rectBorderWidth);\n        if (rc) {\n            const atlasX = rc.x + this._rectBorderWidth;\n            const atlasY = rc.y + this._rectBorderWidth;\n            this._updateAtlasTextureCanvas(rc.binIndex, ctx, atlasX, atlasY, w, h, x, y);\n            const info = {\n                atlasIndex: rc.binIndex,\n                uMin: atlasX / this._binWidth,\n                vMin: atlasY / this._binHeight,\n                uMax: (atlasX + w) / this._binWidth,\n                vMax: (atlasY + h) / this._binHeight,\n                width: w,\n                height: h\n            };\n            this._atlasInfoMap[key] = info;\n            return info;\n        }\n        return null;\n    }\n    /**\n   * Inserts a bitmap to the atlas texture\n   * @param key - Key of the atlas\n   * @param bitmap - The bitmap object\n   * @returns The atals info or null if insert failed\n   */ pushBitmap(key, bitmap) {\n        const rc = this._packer.insert(bitmap.width + 2 * this._rectBorderWidth, bitmap.height + 2 * this._rectBorderWidth);\n        if (rc) {\n            const atlasX = rc.x + this._rectBorderWidth;\n            const atlasY = rc.y + this._rectBorderWidth;\n            this._updateAtlasTexture(rc.binIndex, bitmap, atlasX, atlasY);\n            const info = {\n                atlasIndex: rc.binIndex,\n                uMin: atlasX / this._binWidth,\n                vMin: atlasY / this._binHeight,\n                uMax: (atlasX + bitmap.width) / this._binWidth,\n                vMax: (atlasY + bitmap.height) / this._binHeight,\n                width: bitmap.width,\n                height: bitmap.height\n            };\n            this._atlasInfoMap[key] = info;\n            return info;\n        }\n        return null;\n    }\n    /** @internal */ _createAtlasTexture() {\n        const tex = this._device.createTexture2D('rgba8unorm', this._binWidth, this._binHeight, {\n            mipmapping: false\n        });\n        tex.update(new Uint8Array(tex.width * tex.height * 4), 0, 0, tex.width, tex.height);\n        tex.restoreHandler = ()=>{\n            tex.update(new Uint8Array(tex.width * tex.height * 4), 0, 0, tex.width, tex.height);\n            this._atlasRestoreHandler?.(tex);\n        };\n        return tex;\n    }\n    /** @internal */ _updateAtlasTextureCanvas(atlasIndex, ctx, x, y, w, h, xOffset, yOffset) {\n        let textureAtlas = null;\n        if (atlasIndex === this._atlasList.length) {\n            textureAtlas = this._createAtlasTexture();\n            this._atlasList.push(textureAtlas);\n        } else {\n            textureAtlas = this._atlasList[atlasIndex];\n        }\n        textureAtlas.updateFromElement(ctx.canvas, x, y, xOffset, yOffset, w, h);\n    }\n    /** @internal */ _updateAtlasTexture(atlasIndex, bitmap, x, y) {\n        let textureAtlas = null;\n        if (atlasIndex === this._atlasList.length) {\n            textureAtlas = this._createAtlasTexture();\n            this._atlasList.push(textureAtlas);\n        } else {\n            textureAtlas = this._atlasList[atlasIndex];\n        }\n        if (bitmap instanceof ImageBitmap) {\n            textureAtlas.updateFromElement(bitmap, x, y, 0, 0, bitmap.width, bitmap.height);\n        } else {\n            const originValues = new Uint8Array(bitmap.data.buffer);\n            textureAtlas.update(originValues, x, y, bitmap.width, bitmap.height);\n        }\n    }\n}\n\nexport { TextureAtlasManager };\n//# sourceMappingURL=textureatlas.js.map\n","import { FontCanvas } from './font.js';\nimport { TextureAtlasManager } from './textureatlas.js';\n\n/**\n * Manager of texture glyphs\n * @public\n */ class GlyphManager extends TextureAtlasManager {\n    /**\n   * Creates a new glyph manager instance\n   * @param device - The render device\n   * @param binWidth - Width of an atlas bin\n   * @param binHeight - Height of an atlas bin\n   * @param border - Border width of an atlas\n   */ constructor(device, binWidth, binHeight, border){\n        super(device, binWidth, binHeight, border, true);\n        this.atlasTextureRestoreHandler = async ()=>{\n            if (!this.isEmpty()) {\n                this.clear();\n            }\n        };\n    }\n    /**\n   * Gets the atlas information for given character\n   * @param char - The character\n   * @param font - Font of the character\n   * @returns Atlas information for the glyph\n   */ getGlyphInfo(char, font) {\n        if (!char || !font) {\n            return null;\n        }\n        let glyphInfo = this.getAtlasInfo(this._hash(char, font));\n        if (!glyphInfo) {\n            glyphInfo = this._cacheGlyph(char, font);\n            glyphInfo.width = Math.round(glyphInfo.width * (font.maxHeight / font.maxHeightScaled));\n            glyphInfo.height = font.maxHeight;\n        }\n        return glyphInfo;\n    }\n    /**\n   * Measuring the width of a string\n   * @param str - The string to be measured\n   * @param charMargin - margin size between characters\n   * @param font - Font of the string\n   * @returns Width of the string\n   */ measureStringWidth(str, charMargin, font) {\n        let w = 0;\n        for (const ch of str){\n            w += charMargin + this.getCharWidth(ch, font);\n        }\n        return w;\n    }\n    /**\n   * Clips a string so that it's width is not larger than the given value\n   * @param str - The string to be clipped\n   * @param width - The desired maximum width\n   * @param charMargin - Margin size between characters\n   * @param start - Start index of the string to be clipped\n   * @param font - Font of the string\n   * @returns\n   */ clipStringToWidth(str, width, charMargin, start, font) {\n        let sum = 0;\n        let i = start;\n        for(; i < str.length; i++){\n            sum += charMargin + this.getCharWidth(str[i], font);\n            if (sum > width) {\n                break;\n            }\n        }\n        return i - start;\n    }\n    /**\n   * Measuring width of a character\n   * @param char - The character to be measured\n   * @param font - Font of the character\n   * @returns Width of the character\n   */ getCharWidth(char, font) {\n        if (!font) {\n            return 0;\n        }\n        FontCanvas.font = font.fontNameScaled;\n        const metric = FontCanvas.context.measureText(char);\n        let w = metric.width;\n        if (w === 0) {\n            return 0;\n        }\n        if (typeof metric.actualBoundingBoxRight === 'number') {\n            w = Math.floor(Math.max(w, metric.actualBoundingBoxRight) + 0.8);\n        }\n        w = Math.round(w * (font.maxHeight / font.maxHeightScaled));\n        return w;\n    }\n    /** @internal */ _getGlyphBitmap(char, font) {\n        if (!font) {\n            return null;\n        }\n        FontCanvas.font = font.fontNameScaled;\n        const metric = FontCanvas.context.measureText(char);\n        let w = metric.width;\n        if (w === 0) {\n            return null;\n        }\n        if (typeof metric.actualBoundingBoxRight === 'number') {\n            w = Math.floor(Math.max(w, metric.actualBoundingBoxRight) + 0.8);\n        }\n        const h = font.maxHeightScaled;\n        FontCanvas.context.fillStyle = '#fff';\n        FontCanvas.context.clearRect(0, 0, w + 2, h);\n        FontCanvas.context.fillText(char, 0, -font.topScaled);\n        return FontCanvas.context.getImageData(0, 0, w, h);\n    }\n    /** @internal */ _hash(char, font) {\n        return `${font.family}@${font.size}&${char}`;\n    }\n    /** @internal */ _cacheGlyph(char, font) {\n        const bitmap = this._getGlyphBitmap(char, font);\n        return this.pushBitmap(this._hash(char, font), bitmap);\n    }\n}\n\nexport { GlyphManager };\n//# sourceMappingURL=glyphmanager.js.map\n","import { Matrix4x4, Vector4, Vector3, parseColor } from '@zephyr3d/base';\nimport { Font } from './font.js';\nimport { GlyphManager } from './glyphmanager.js';\n\nconst MAX_GLYPH_COUNT = 1024;\n/**\n * Helper class to draw some text onto the screen\n * @public\n */ class DrawText {\n    /** @internal */ static GLYPH_COUNT = MAX_GLYPH_COUNT;\n    /** @internal */ static glyphManager = null;\n    /** @internal */ static prepared = false;\n    /** @internal */ static textVertexBuffer = null;\n    /** @internal */ static textVertexLayout = null;\n    /** @internal */ static textProgram = null;\n    /** @internal */ static textBindGroup = null;\n    /** @internal */ static textRenderStates = null;\n    /** @internal */ static textOffset = 0;\n    /** @internal */ static textMatrix = new Matrix4x4();\n    /** @internal */ static font = null;\n    /** @internal */ static vertexCache = null;\n    /** @internal */ static colorValue = new Vector4();\n    /** @internal */ static calculateTextMatrix(device, matrix) {\n        const viewport = device.getViewport();\n        const projectionMatrix = Matrix4x4.ortho(0, viewport.width, 0, viewport.height, 1, 100);\n        const flipMatrix = Matrix4x4.translation(new Vector3(0, viewport.height, 0)).scaleRight(new Vector3(1, -1, 1));\n        Matrix4x4.multiply(projectionMatrix, flipMatrix, matrix);\n    }\n    /**\n   * Set the font that will be used to draw strings\n   * @param device - The render device\n   * @param name - The font name\n   */ static setFont(device, name) {\n        this.font = Font.fetchFont(name, device.getScale()) || Font.fetchFont('12px arial', device.getScale());\n    }\n    /**\n   * Draw text onto the screen\n   * @param device - The render device\n   * @param text - The text to be drawn\n   * @param color - The text color\n   * @param x - X coordinate of the text\n   * @param y - Y coordinate of the text\n   */ static drawText(device, text, color, x, y) {\n        if (text.length > 0) {\n            device.pushDeviceStates();\n            this.prepareDrawText(device);\n            this.calculateTextMatrix(device, this.textMatrix);\n            const colorValue = parseColor(color);\n            this.colorValue.x = colorValue.r;\n            this.colorValue.y = colorValue.g;\n            this.colorValue.z = colorValue.b;\n            this.colorValue.w = colorValue.a;\n            this.textBindGroup.setValue('flip', device.type === 'webgpu' && device.getFramebuffer() ? 1 : 0);\n            this.textBindGroup.setValue('srgbOut', device.getFramebuffer() ? 0 : 1);\n            this.textBindGroup.setValue('textMatrix', this.textMatrix);\n            this.textBindGroup.setValue('textColor', this.colorValue);\n            device.setProgram(this.textProgram);\n            device.setVertexLayout(this.textVertexLayout);\n            device.setRenderStates(this.textRenderStates);\n            device.setBindGroup(0, this.textBindGroup);\n            let drawn = 0;\n            const total = text.length;\n            while(drawn < total){\n                const count = Math.min(total - drawn, this.GLYPH_COUNT - this.textOffset);\n                if (count > 0) {\n                    x = this.drawTextNoOverflow(device, text, drawn, count, x, y);\n                    drawn += count;\n                    this.textOffset += count;\n                }\n                if (this.GLYPH_COUNT === this.textOffset) {\n                    this.textOffset = 0;\n                    device.flush();\n                }\n            }\n            device.popDeviceStates();\n        }\n    }\n    /** @internal */ static drawTextNoOverflow(device, text, start, count, x, y) {\n        let drawn = 0;\n        let atlasIndex = -1;\n        let i = 0;\n        for(; i < count; i++){\n            const glyph = this.glyphManager.getGlyphInfo(text[i + start], this.font) || this.glyphManager.getGlyphInfo('?', this.font);\n            if (atlasIndex >= 0 && glyph.atlasIndex !== atlasIndex) {\n                this.textVertexBuffer.bufferSubData((this.textOffset + drawn) * 16 * 4, this.vertexCache, (this.textOffset + drawn) * 16, (i - drawn) * 16);\n                this.textBindGroup.setTexture('tex', this.glyphManager.getAtlasTexture(atlasIndex));\n                device.draw('triangle-list', (this.textOffset + drawn) * 6, (i - drawn) * 6);\n                drawn = i;\n            }\n            atlasIndex = glyph.atlasIndex;\n            const base = (this.textOffset + i) * 16;\n            this.vertexCache[base + 0] = x;\n            this.vertexCache[base + 1] = y;\n            this.vertexCache[base + 2] = glyph.uMin;\n            this.vertexCache[base + 3] = glyph.vMin;\n            this.vertexCache[base + 4] = x + glyph.width;\n            this.vertexCache[base + 5] = y;\n            this.vertexCache[base + 6] = glyph.uMax;\n            this.vertexCache[base + 7] = glyph.vMin;\n            this.vertexCache[base + 8] = x + glyph.width;\n            this.vertexCache[base + 9] = y + glyph.height;\n            this.vertexCache[base + 10] = glyph.uMax;\n            this.vertexCache[base + 11] = glyph.vMax;\n            this.vertexCache[base + 12] = x;\n            this.vertexCache[base + 13] = y + glyph.height;\n            this.vertexCache[base + 14] = glyph.uMin;\n            this.vertexCache[base + 15] = glyph.vMax;\n            x += glyph.width;\n        }\n        this.textVertexBuffer.bufferSubData((this.textOffset + drawn) * 16 * 4, this.vertexCache, (this.textOffset + drawn) * 16, (i - drawn) * 16);\n        this.textBindGroup.setTexture('tex', this.glyphManager.getAtlasTexture(atlasIndex));\n        device.draw('triangle-list', (this.textOffset + drawn) * 6, (i - drawn) * 6);\n        return x;\n    }\n    /** @internal */ static prepareDrawText(device) {\n        if (!this.prepared) {\n            this.prepared = true;\n            this.font = this.font || Font.fetchFont('16px arial', device.getScale());\n            this.glyphManager = new GlyphManager(device, 1024, 1024, 1);\n            this.vertexCache = new Float32Array(this.GLYPH_COUNT * 16);\n            this.textVertexBuffer = device.createInterleavedVertexBuffer([\n                'position_f32x2',\n                'tex0_f32x2'\n            ], this.vertexCache, {\n                dynamic: true\n            });\n            const indices = new Uint16Array(this.GLYPH_COUNT * 6);\n            for(let i = 0; i < this.GLYPH_COUNT; i++){\n                const base = i * 4;\n                indices[i * 6 + 0] = base + 0;\n                indices[i * 6 + 1] = base + 1;\n                indices[i * 6 + 2] = base + 2;\n                indices[i * 6 + 3] = base + 0;\n                indices[i * 6 + 4] = base + 2;\n                indices[i * 6 + 5] = base + 3;\n            }\n            const textIndexBuffer = device.createIndexBuffer(indices);\n            this.textVertexLayout = device.createVertexLayout({\n                vertexBuffers: [\n                    {\n                        buffer: this.textVertexBuffer\n                    }\n                ],\n                indexBuffer: textIndexBuffer\n            });\n            this.textOffset = 0;\n            this.textProgram = device.buildRenderProgram({\n                vertex (pb) {\n                    this.$inputs.pos = pb.vec2().attrib('position');\n                    this.$inputs.uv = pb.vec2().attrib('texCoord0');\n                    this.$outputs.uv = pb.vec2();\n                    this.flip = pb.int(0).uniform(0);\n                    this.textMatrix = pb.mat4().uniform(0);\n                    pb.main(function() {\n                        this.$builtins.position = pb.mul(this.textMatrix, pb.vec4(this.$inputs.pos, -50, 1));\n                        this.$if(pb.notEqual(this.flip, 0), function() {\n                            this.$builtins.position.y = pb.neg(this.$builtins.position.y);\n                        });\n                        this.$outputs.uv = this.$inputs.uv;\n                    });\n                },\n                fragment (pb) {\n                    this.$outputs.color = pb.vec4();\n                    this.textColor = pb.vec4().uniform(0);\n                    this.tex = pb.tex2D().uniform(0);\n                    this.srgbOut = pb.int().uniform(0);\n                    pb.main(function() {\n                        this.alpha = pb.mul(pb.textureSample(this.tex, this.$inputs.uv).a, this.textColor.a);\n                        this.$if(pb.notEqual(this.srgbOut, 0), function() {\n                            this.$outputs.color = pb.vec4(pb.mul(pb.pow(this.textColor.rgb, pb.vec3(1 / 2.2)), this.alpha), this.alpha);\n                        }).$else(function() {\n                            this.$outputs.color = pb.vec4(pb.mul(this.textColor.rgb, this.alpha), this.alpha);\n                        });\n                    });\n                }\n            });\n            this.textProgram.name = '@DrawText';\n            this.textBindGroup = device.createBindGroup(this.textProgram.bindGroupLayouts[0]);\n            this.textRenderStates = device.createRenderStateSet();\n            this.textRenderStates.useBlendingState().enable(true).setBlendFuncRGB('one', 'inv-src-alpha').setBlendFuncAlpha('zero', 'one');\n            this.textRenderStates.useDepthState().enableTest(false).enableWrite(false);\n            this.textRenderStates.useRasterizerState().setCullMode('none');\n        }\n    }\n}\n\nexport { DrawText };\n//# sourceMappingURL=drawtext.js.map\n","import { Observable } from '@zephyr3d/base';\nimport { CPUTimer } from './timer.js';\nimport { getVertexAttribFormat, makeVertexBufferType, getVertexFormatSize, GPUResourceUsageFlags } from './gpuobject.js';\nimport { Pool } from './pool.js';\nimport { ProgramBuilder } from './builder/programbuilder.js';\nimport { DrawText } from './helpers/drawtext.js';\n\n/**\n * Base class for rendering device\n * @public\n */ class BaseDevice extends Observable {\n    _canvas;\n    _canvasClientWidth;\n    _canvasClientHeight;\n    _gpuObjectList;\n    _gpuMemCost;\n    _disposeObjectList;\n    _beginFrameTime;\n    _endFrameTime;\n    _frameInfo;\n    _cpuTimer;\n    _gpuTimer;\n    _runningLoop;\n    _fpsCounter;\n    _runLoopFunc;\n    _backend;\n    _beginFrameCounter;\n    _programBuilder;\n    _poolMap;\n    _defaultPoolKey;\n    _temporalFramebuffer;\n    _vSync;\n    _stateStack;\n    constructor(cvs, backend){\n        super();\n        this._backend = backend;\n        this._gpuObjectList = {\n            textures: [],\n            samplers: [],\n            buffers: [],\n            programs: [],\n            framebuffers: [],\n            vertexArrayObjects: [],\n            bindGroups: []\n        };\n        this._canvas = cvs;\n        this._canvas.setAttribute('tabindex', '1');\n        this._canvasClientWidth = cvs.clientWidth;\n        this._canvasClientHeight = cvs.clientHeight;\n        this._gpuMemCost = 0;\n        this._disposeObjectList = [];\n        this._beginFrameTime = 0;\n        this._endFrameTime = 0;\n        this._runLoopFunc = null;\n        this._frameInfo = {\n            frameCounter: 0,\n            frameTimestamp: 0,\n            elapsedTimeCPU: 0,\n            elapsedTimeGPU: 0,\n            elapsedFrame: 0,\n            elapsedOverall: 0,\n            FPS: 0,\n            drawCalls: 0,\n            computeCalls: 0,\n            nextFrameCall: [],\n            nextFrameCallNext: []\n        };\n        this._programBuilder = new ProgramBuilder(this);\n        this._cpuTimer = new CPUTimer();\n        this._gpuTimer = null;\n        this._runningLoop = null;\n        this._fpsCounter = {\n            time: 0,\n            frame: 0\n        };\n        this._stateStack = [];\n        this._beginFrameCounter = 0;\n        this._poolMap = new Map();\n        this._defaultPoolKey = Symbol('defaultPool');\n        this._poolMap.set(this._defaultPoolKey, new Pool(this, this._defaultPoolKey));\n        this._temporalFramebuffer = false;\n        this._temporalFramebuffer = false;\n        this._vSync = true;\n        this._registerEventHandlers();\n    }\n    get backend() {\n        return this._backend;\n    }\n    get videoMemoryUsage() {\n        return this._gpuMemCost;\n    }\n    get frameInfo() {\n        return this._frameInfo;\n    }\n    get isRendering() {\n        return this._runningLoop !== null;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get type() {\n        return this._backend.typeName();\n    }\n    get vSync() {\n        return this._vSync;\n    }\n    set vSync(val) {\n        this._vSync = !!val;\n    }\n    get pool() {\n        return this._poolMap.get(this._defaultPoolKey);\n    }\n    get runLoopFunction() {\n        return this._runLoopFunc;\n    }\n    get programBuilder() {\n        return this._programBuilder;\n    }\n    poolExists(key) {\n        return this._poolMap.has(key);\n    }\n    getPool(key) {\n        let pool = this._poolMap.get(key);\n        if (!pool) {\n            pool = new Pool(this, key);\n            this._poolMap.set(key, pool);\n        }\n        return pool;\n    }\n    setFont(fontName) {\n        DrawText.setFont(this, fontName);\n    }\n    drawText(text, x, y, color) {\n        DrawText.drawText(this, text, color, x, y);\n    }\n    setFramebuffer(colorOrRT, depth, sampleCount) {\n        let newRT = null;\n        let temporal = false;\n        if (!Array.isArray(colorOrRT)) {\n            newRT = colorOrRT ?? null;\n        } else {\n            newRT = this.pool.fetchTemporalFramebuffer(false, 0, 0, colorOrRT, depth, true, sampleCount);\n            temporal = true;\n        }\n        const currentRT = this.getFramebuffer();\n        if (currentRT !== newRT) {\n            if (this._temporalFramebuffer) {\n                this.pool.releaseFrameBuffer(currentRT);\n            }\n            this._temporalFramebuffer = temporal;\n            this._setFramebuffer(newRT);\n        }\n    }\n    disposeObject(obj, remove = true) {\n        if (obj) {\n            if (remove) {\n                this.removeGPUObject(obj);\n            }\n            if (this.isContextLost()) {\n                obj.destroy();\n            } else {\n                this._disposeObjectList.push(obj);\n            }\n        }\n    }\n    restoreObject(obj) {\n        if (obj && obj.disposed && !this.isContextLost()) {\n            obj.restore();\n            obj.restoreHandler?.(obj);\n        }\n    }\n    enableGPUTimeRecording(enable) {\n        if (enable && !this._gpuTimer) {\n            this._gpuTimer = this.createGPUTimer();\n        } else if (!enable) {\n            this._gpuTimer?.end();\n            this._gpuTimer = null;\n        }\n    }\n    beginFrame() {\n        if (this._beginFrameCounter === 0) {\n            for (const obj of this._disposeObjectList){\n                obj.destroy();\n            }\n            this._disposeObjectList = [];\n        }\n        this._beginFrameCounter++;\n        this._beginFrameTime = this._cpuTimer.now();\n        this.updateFrameInfo();\n        this._poolMap.forEach((pool)=>pool.autoRelease());\n        return this.onBeginFrame();\n    }\n    endFrame() {\n        if (this._beginFrameCounter > 0) {\n            this._beginFrameCounter--;\n            if (this._beginFrameCounter === 0) {\n                this._endFrameTime = this._cpuTimer.now();\n                this._frameInfo.frameCounter++;\n                this.onEndFrame();\n            }\n        }\n    }\n    getVertexAttribFormat(semantic, dataType, componentCount) {\n        return getVertexAttribFormat(semantic, dataType, componentCount);\n    }\n    createInterleavedVertexBuffer(attribFormats, data, options) {\n        if (options && options.usage && options.usage !== 'vertex') {\n            console.error(`createInterleavedVertexBuffer() failed: options.usage must be 'vertex' or not set`);\n            return null;\n        }\n        let size = 0;\n        for (const format of attribFormats){\n            size += getVertexFormatSize(format);\n        }\n        const vertexBufferType = makeVertexBufferType(data.byteLength / size >> 0, ...attribFormats);\n        const opt = Object.assign({\n            usage: 'vertex',\n            dynamic: false,\n            managed: true,\n            storage: false\n        }, options || {});\n        if (opt.storage) {\n            opt.dynamic = false;\n            opt.managed = false;\n        }\n        if (opt.dynamic) {\n            opt.managed = false;\n        }\n        return this.createStructuredBuffer(vertexBufferType, opt, data);\n    }\n    createVertexBuffer(attribFormat, data, options) {\n        if (options && options.usage && options.usage !== 'vertex') {\n            console.error(`createVertexBuffer() failed: options.usage must be 'vertex' or not set`);\n            return null;\n        }\n        const count = getVertexFormatSize(attribFormat);\n        const vertexBufferType = makeVertexBufferType(data.byteLength / count >> 0, attribFormat);\n        const opt = Object.assign({\n            usage: 'vertex',\n            dynamic: false,\n            managed: true,\n            storage: false\n        }, options || {});\n        if (opt.storage) {\n            opt.dynamic = false;\n            opt.managed = false;\n        }\n        if (opt.dynamic) {\n            opt.managed = false;\n        }\n        return this.createStructuredBuffer(vertexBufferType, opt, data);\n    }\n    draw(primitiveType, first, count) {\n        this._frameInfo.drawCalls++;\n        this._draw(primitiveType, first, count);\n    }\n    drawInstanced(primitiveType, first, count, numInstances) {\n        this._frameInfo.drawCalls++;\n        this._drawInstanced(primitiveType, first, count, numInstances);\n    }\n    executeRenderBundle(renderBundle) {\n        this._frameInfo.drawCalls += this._executeRenderBundle(renderBundle);\n    }\n    compute(workgroupCountX, workgroupCountY, workgroupCountZ) {\n        this._frameInfo.computeCalls++;\n        this._compute(workgroupCountX, workgroupCountY, workgroupCountZ);\n    }\n    runNextFrame(f) {\n        if (f) {\n            this._frameInfo.nextFrameCall.push(f);\n        }\n    }\n    async runNextFrameAsync(f) {\n        return new Promise((resolve)=>{\n            if (f) {\n                this._frameInfo.nextFrameCall.push(()=>{\n                    const p = f();\n                    if (p instanceof Promise) {\n                        p.then(()=>resolve());\n                    } else {\n                        resolve();\n                    }\n                });\n            } else {\n                resolve();\n            }\n        });\n    }\n    exitLoop() {\n        if (this._runningLoop !== null) {\n            if (this._runningLoop !== 0) {\n                cancelAnimationFrame(this._runningLoop);\n            } else {\n                this.cancelNextFrame(this._runningLoop);\n            }\n            this._runningLoop = null;\n        }\n    }\n    runLoop(func) {\n        if (this._runningLoop !== null) {\n            console.error('Device.runLoop() can not be nested');\n            return;\n        }\n        if (!func) {\n            console.error('Device.runLoop() argment error');\n            return;\n        }\n        const that = this;\n        that._runLoopFunc = func;\n        (function entry() {\n            if (that._vSync) {\n                that._runningLoop = requestAnimationFrame(entry);\n            } else {\n                that._runningLoop = that.nextFrame(()=>{\n                    if (that._runningLoop !== null) {\n                        entry();\n                    }\n                });\n            }\n            if (that.beginFrame()) {\n                that._runLoopFunc(that);\n                that.endFrame();\n            }\n        })();\n    }\n    pushDeviceStates() {\n        this._stateStack.push({\n            windowOrderReversed: this.isWindingOrderReversed(),\n            framebuffer: this.getFramebuffer(),\n            viewport: this.getViewport(),\n            scissor: this.getScissor(),\n            program: this.getProgram(),\n            renderStateSet: this.getRenderStates(),\n            vertexLayout: this.getVertexLayout(),\n            bindGroups: [\n                this.getBindGroup(0),\n                this.getBindGroup(1),\n                this.getBindGroup(2),\n                this.getBindGroup(3)\n            ]\n        });\n    }\n    popDeviceStates() {\n        if (this._stateStack.length === 0) {\n            console.error('Device.popDeviceStates(): stack is empty');\n        } else {\n            const top = this._stateStack.pop();\n            this.setFramebuffer(top.framebuffer);\n            this.setViewport(top.viewport);\n            this.setScissor(top.scissor);\n            this.setProgram(top.program);\n            this.setRenderStates(top.renderStateSet);\n            this.setVertexLayout(top.vertexLayout);\n            this.setBindGroup(0, ...top.bindGroups[0]);\n            this.setBindGroup(1, ...top.bindGroups[1]);\n            this.setBindGroup(2, ...top.bindGroups[2]);\n            this.setBindGroup(3, ...top.bindGroups[3]);\n            this.reverseVertexWindingOrder(top.windowOrderReversed);\n        }\n    }\n    getGPUObjects() {\n        return this._gpuObjectList;\n    }\n    getGPUObjectById(uid) {\n        for (const list of [\n            this._gpuObjectList.textures,\n            this._gpuObjectList.samplers,\n            this._gpuObjectList.buffers,\n            this._gpuObjectList.framebuffers,\n            this._gpuObjectList.programs,\n            this._gpuObjectList.vertexArrayObjects\n        ]){\n            for (const obj of list){\n                if (obj.uid === uid) {\n                    return obj;\n                }\n            }\n        }\n        return null;\n    }\n    screenToDevice(val) {\n        return this.getFramebuffer() ? val : Math.round(val * this.getScale());\n    }\n    deviceToScreen(val) {\n        return this.getFramebuffer() ? val : Math.round(val / this.getScale());\n    }\n    buildRenderProgram(options) {\n        return this._programBuilder.buildRenderProgram(options);\n    }\n    buildComputeProgram(options) {\n        return this._programBuilder.buildComputeProgram(options);\n    }\n    addGPUObject(obj) {\n        const list = this.getGPUObjectList(obj);\n        if (list && list.indexOf(obj) < 0) {\n            list.push(obj);\n            this.dispatchEvent('gpuobject_added', obj);\n        }\n    }\n    removeGPUObject(obj) {\n        const list = this.getGPUObjectList(obj);\n        if (list) {\n            const index = list.indexOf(obj);\n            if (index >= 0) {\n                list.splice(index, 1);\n                this.dispatchEvent('gpuobject_removed', obj);\n            }\n        }\n    }\n    updateVideoMemoryCost(delta) {\n        this._gpuMemCost += delta;\n    }\n    _onresize() {\n        if (this._canvasClientWidth !== this._canvas.clientWidth || this._canvasClientHeight !== this._canvas.clientHeight) {\n            this._canvasClientWidth = this._canvas.clientWidth;\n            this._canvasClientHeight = this._canvas.clientHeight;\n            this.dispatchEvent('resize', this._canvasClientWidth, this._canvasClientHeight);\n        }\n    }\n    _registerEventHandlers() {\n        const canvas = this._canvas;\n        const that = this;\n        if (window.ResizeObserver) {\n            new window.ResizeObserver(()=>{\n                that._onresize();\n            }).observe(canvas, {});\n        } else {\n            if (window.MutationObserver) {\n                new MutationObserver(function(mutations) {\n                    if (mutations.length > 0) {\n                        that._onresize();\n                    }\n                }).observe(canvas, {\n                    attributes: true,\n                    attributeFilter: [\n                        'style'\n                    ]\n                });\n            }\n            window.addEventListener('resize', ()=>{\n                this._onresize();\n            });\n        }\n    }\n    updateFrameInfo() {\n        this._frameInfo.drawCalls = 0;\n        this._frameInfo.computeCalls = 0;\n        const now = this._beginFrameTime;\n        if (this._frameInfo.frameTimestamp === 0) {\n            this._frameInfo.frameTimestamp = now;\n            this._frameInfo.elapsedTimeCPU = 0;\n            this._frameInfo.elapsedTimeGPU = 0;\n            this._frameInfo.elapsedFrame = 0;\n            this._frameInfo.elapsedOverall = 0;\n            this._frameInfo.FPS = 0;\n            this._fpsCounter.time = now;\n            this._fpsCounter.frame = this._frameInfo.frameCounter;\n            if (this._gpuTimer) {\n                this._gpuTimer.begin();\n            }\n        } else {\n            this._frameInfo.elapsedFrame = now - this._frameInfo.frameTimestamp;\n            this._frameInfo.elapsedOverall += this._frameInfo.elapsedFrame;\n            let gpuTime = 0;\n            let cpuTime = 0;\n            if (this._endFrameTime !== 0) {\n                gpuTime = now - this._endFrameTime;\n                cpuTime = this._endFrameTime - this._frameInfo.frameTimestamp;\n            }\n            this._frameInfo.frameTimestamp = now;\n            if (now >= this._fpsCounter.time + 1000) {\n                this._frameInfo.FPS = (this._frameInfo.frameCounter - this._fpsCounter.frame) * 1000 / (now - this._fpsCounter.time);\n                this._fpsCounter.time = now;\n                this._fpsCounter.frame = this._frameInfo.frameCounter;\n                this._frameInfo.elapsedTimeGPU = gpuTime;\n                this._frameInfo.elapsedTimeCPU = cpuTime;\n            }\n        }\n        const tmp = this._frameInfo.nextFrameCall;\n        this._frameInfo.nextFrameCall = this._frameInfo.nextFrameCallNext;\n        this._frameInfo.nextFrameCallNext = tmp;\n        for (const f of this._frameInfo.nextFrameCallNext){\n            f();\n        }\n        this._frameInfo.nextFrameCallNext.length = 0;\n    }\n    getGPUObjectList(obj) {\n        let list = null;\n        if (obj.isTexture()) {\n            list = this._gpuObjectList.textures;\n        } else if (obj.isSampler()) {\n            list = this._gpuObjectList.samplers;\n        } else if (obj.isBuffer()) {\n            list = this._gpuObjectList.buffers;\n        } else if (obj.isFramebuffer()) {\n            list = this._gpuObjectList.framebuffers;\n        } else if (obj.isProgram()) {\n            list = this._gpuObjectList.programs;\n        } else if (obj.isVertexLayout()) {\n            list = this._gpuObjectList.vertexArrayObjects;\n        } else if (obj.isBindGroup()) {\n            list = this._gpuObjectList.bindGroups;\n        }\n        return list;\n    }\n    invalidateAll() {\n        for (const list of [\n            this._gpuObjectList.buffers,\n            this._gpuObjectList.textures,\n            this._gpuObjectList.samplers,\n            this._gpuObjectList.programs,\n            this._gpuObjectList.framebuffers,\n            this._gpuObjectList.vertexArrayObjects,\n            this._gpuObjectList.bindGroups\n        ]){\n            for (const obj of list){\n                this.disposeObject(obj, false);\n            }\n        }\n        if (this.isContextLost()) {\n            for (const obj of this._disposeObjectList){\n                obj.destroy();\n            }\n            this._disposeObjectList = [];\n        }\n    }\n    reloadAll() {\n        for (const list of [\n            this._gpuObjectList.buffers,\n            this._gpuObjectList.textures,\n            this._gpuObjectList.samplers,\n            this._gpuObjectList.programs,\n            this._gpuObjectList.framebuffers,\n            this._gpuObjectList.vertexArrayObjects,\n            this._gpuObjectList.bindGroups\n        ]){\n            // obj.reload() may change the list, so make a copy first\n            for (const obj of list.slice()){\n                obj.reload();\n            }\n        }\n        return;\n    }\n    parseTextureOptions(options) {\n        const noMipmapFlag = options?.mipmapping === false ? GPUResourceUsageFlags.TF_NO_MIPMAP : 0;\n        const writableFlag = options?.writable ? GPUResourceUsageFlags.TF_WRITABLE : 0;\n        const dynamicFlag = options?.dynamic ? GPUResourceUsageFlags.DYNAMIC : 0;\n        if (noMipmapFlag && options?.samplerOptions) {\n            options.samplerOptions.mipFilter = 'none';\n        }\n        return noMipmapFlag | writableFlag | dynamicFlag;\n    }\n    parseBufferOptions(options, defaultUsage) {\n        const usage = options?.usage || defaultUsage;\n        let usageFlag;\n        switch(usage){\n            case 'uniform':\n                usageFlag = GPUResourceUsageFlags.BF_UNIFORM;\n                options.managed = false;\n                options.dynamic = options.dynamic ?? true;\n                break;\n            case 'vertex':\n                usageFlag = GPUResourceUsageFlags.BF_VERTEX;\n                break;\n            case 'index':\n                usageFlag = GPUResourceUsageFlags.BF_INDEX;\n                break;\n            case 'read':\n                usageFlag = GPUResourceUsageFlags.BF_READ;\n                options.managed = false;\n                break;\n            case 'write':\n                usageFlag = GPUResourceUsageFlags.BF_WRITE;\n                options.managed = false;\n                break;\n            case 'pack-pixel':\n                usageFlag = GPUResourceUsageFlags.BF_PACK_PIXEL;\n                options.managed = false;\n                break;\n            case 'unpack-pixel':\n                usageFlag = GPUResourceUsageFlags.BF_UNPACK_PIXEL;\n                options.managed = false;\n                break;\n            default:\n                usageFlag = 0;\n                break;\n        }\n        const storageFlag = options?.storage ?? false ? GPUResourceUsageFlags.BF_STORAGE : 0;\n        const dynamicFlag = options?.dynamic ?? false ? GPUResourceUsageFlags.DYNAMIC : 0;\n        const managedFlag = dynamicFlag === 0 && (options?.managed ?? true) ? GPUResourceUsageFlags.MANAGED : 0;\n        return usageFlag | storageFlag | dynamicFlag | managedFlag;\n    }\n}\n\nexport { BaseDevice };\n//# sourceMappingURL=device.js.map\n","import { PBPrimitiveType } from './builder/types.js';\n\n/**\n * Structured buffer data\n * @public\n */ class StructuredBufferData {\n    /** @internal */ _cache;\n    /** @internal */ _buffer;\n    /** @internal */ _size;\n    /** @internal */ _uniformMap;\n    /** @internal */ _uniformPositions;\n    /**\n   * Creates a new structured buffer data\n   * @param layout - Layout of the structure\n   * @param buffer - Buffer that holds the data\n   */ constructor(layout, buffer){\n        this._size = layout.byteSize + 15 & -16;\n        if (this._size <= 0) {\n            throw new Error(`UniformBuffer(): invalid uniform buffer byte size: ${this._size}`);\n        }\n        // this._cache = new ArrayBuffer(size);\n        this._uniformMap = {};\n        this._uniformPositions = {};\n        this._cache = buffer instanceof ArrayBuffer ? buffer : null;\n        this._buffer = buffer instanceof ArrayBuffer ? null : buffer;\n        this.init(layout, 0, '');\n    }\n    /** The buffer size in bytes */ get byteLength() {\n        return this._size;\n    }\n    /** Get the data cache buffer */ get buffer() {\n        return this._cache;\n    }\n    /** Get all the uniform datas */ get uniforms() {\n        return this._uniformMap;\n    }\n    /**\n   * Sets the value of a structure member\n   * @param name - Name of the member\n   * @param value - Value to set\n   */ set(name, value) {\n        if (value !== undefined) {\n            const view = this._uniformMap[name];\n            if (view) {\n                if (this._cache) {\n                    if (typeof value === 'number') {\n                        view[0] = value;\n                    } else if (value?._v) {\n                        view.set(value._v);\n                    } else if (typeof value?.length === 'number') {\n                        view.set(value.length > view.length ? value.subarray(0, view.length) : value);\n                    } else {\n                        throw new Error('invalid uniform value');\n                    }\n                } else {\n                    const size = this._uniformPositions[name][1];\n                    if (typeof value === 'number') {\n                        view[0] = value;\n                        this._buffer.bufferSubData(this._uniformPositions[name][0], view);\n                    } else if (value['BYTES_PER_ELEMENT'] && size <= value['byteLength']) {\n                        const arr = value;\n                        this._buffer.bufferSubData(this._uniformPositions[name][0], arr, 0, size / arr.BYTES_PER_ELEMENT >> 0);\n                    } else {\n                        throw new Error('invalid uniform value');\n                    }\n                }\n            } else {\n                const proto = Object.getPrototypeOf(value);\n                if (proto === Object.getPrototypeOf({})) {\n                    this.setStruct(name, value);\n                } else {\n                    throw new Error('invalid uniform value');\n                }\n            }\n        }\n    }\n    /** @internal */ setStruct(name, value) {\n        for(const k in value){\n            this.set(`${name}.${k}`, value[k]);\n        }\n    }\n    /** @internal */ init(layout, offset, prefix) {\n        for (const entry of layout.entries){\n            if (entry.subLayout) {\n                offset = this.init(entry.subLayout, offset, `${prefix}${entry.name}.`);\n            } else {\n                const name = `${prefix}${entry.name}`;\n                if (this._uniformPositions[name]) {\n                    throw new Error(`UniformBuffer(): duplicate uniform name: ${name}`);\n                }\n                if (entry.offset < offset || entry.byteSize < 0) {\n                    throw new Error('UniformBuffer(): invalid layout');\n                }\n                this._uniformPositions[name] = [\n                    entry.offset,\n                    entry.byteSize\n                ];\n                let viewCtor = null;\n                switch(entry.type){\n                    case PBPrimitiveType.F32:\n                        viewCtor = Float32Array;\n                        break;\n                    case PBPrimitiveType.U32:\n                    case PBPrimitiveType.BOOL:\n                        viewCtor = Uint32Array;\n                        break;\n                    case PBPrimitiveType.I32:\n                        viewCtor = Int32Array;\n                        break;\n                    case PBPrimitiveType.U16:\n                    case PBPrimitiveType.U16_NORM:\n                    case PBPrimitiveType.F16:\n                        viewCtor = Uint16Array;\n                        break;\n                    case PBPrimitiveType.I16:\n                    case PBPrimitiveType.I16_NORM:\n                        viewCtor = Int16Array;\n                        break;\n                    case PBPrimitiveType.U8:\n                    case PBPrimitiveType.U8_NORM:\n                        viewCtor = Uint8Array;\n                        break;\n                    case PBPrimitiveType.I8:\n                    case PBPrimitiveType.I8_NORM:\n                        viewCtor = Int8Array;\n                        break;\n                }\n                if (!viewCtor) {\n                    throw new Error(`UniformBuffer(): invalid data type for uniform: ${name}`);\n                }\n                if (entry.byteSize % viewCtor.BYTES_PER_ELEMENT) {\n                    throw new Error(`UniformBuffer(): invalid byte size for uniform: ${name}`);\n                }\n                if (this._cache) {\n                    this._uniformMap[name] = new viewCtor(this._cache, entry.offset, entry.byteSize / viewCtor.BYTES_PER_ELEMENT);\n                } else {\n                    this._uniformMap[name] = new viewCtor(1);\n                }\n                offset = entry.offset + entry.byteSize;\n            }\n        }\n        return offset;\n    }\n}\n\nexport { StructuredBufferData };\n//# sourceMappingURL=uniformdata.js.map\n","import { genDefaultName } from '@zephyr3d/device';\nimport { Disposable } from '@zephyr3d/base';\n\nlet _uniqueId = 0;\nclass WebGPUObject extends Disposable {\n    _device;\n    _object;\n    _uid;\n    _cid;\n    _name;\n    _queueState;\n    _restoreHandler;\n    constructor(device){\n        super();\n        this._device = device;\n        this._object = null;\n        this._uid = ++_uniqueId;\n        this._cid = 1;\n        this._name = genDefaultName(this);\n        this._queueState = 0;\n        this._restoreHandler = null;\n        this._device.addGPUObject(this);\n    }\n    get device() {\n        return this._device;\n    }\n    get object() {\n        return this._object;\n    }\n    get uid() {\n        return this._uid;\n    }\n    get cid() {\n        return this._cid;\n    }\n    get restoreHandler() {\n        return this._restoreHandler;\n    }\n    set restoreHandler(handler) {\n        this._restoreHandler = handler;\n    }\n    get name() {\n        return this._name;\n    }\n    set name(val) {\n        if (val !== this._name) {\n            const lastName = this._name;\n            this._name = val;\n            this._device.dispatchEvent('gpuobject_rename', this, lastName);\n        }\n    }\n    get queueState() {\n        return this._queueState;\n    }\n    set queueState(val) {\n        this._queueState = val;\n    }\n    isVertexLayout() {\n        return false;\n    }\n    isFramebuffer() {\n        return false;\n    }\n    isSampler() {\n        return false;\n    }\n    isTexture() {\n        return false;\n    }\n    isTexture2D() {\n        return false;\n    }\n    isTexture2DArray() {\n        return false;\n    }\n    isTexture3D() {\n        return false;\n    }\n    isTextureCube() {\n        return false;\n    }\n    isTextureVideo() {\n        return false;\n    }\n    isProgram() {\n        return false;\n    }\n    isBuffer() {\n        return false;\n    }\n    isBindGroup() {\n        return false;\n    }\n    reload() {\n        if (this.disposed) {\n            this._device.restoreObject(this);\n            this._cid++;\n        }\n    }\n    destroy() {\n        throw new Error('Abstract function call: dispose()');\n    }\n    restore() {\n        throw new Error('Abstract function call: restore()');\n    }\n    onDispose() {\n        super.onDispose();\n        this._device.disposeObject(this, true);\n    }\n}\n\nexport { WebGPUObject };\n//# sourceMappingURL=gpuobject_webgpu.js.map\n","import { WebGPUObject } from './gpuobject_webgpu.js';\n\nclass WebGPUProgram extends WebGPUObject {\n    static _hashCounter = 0;\n    _type;\n    _vs;\n    _fs;\n    _cs;\n    _label;\n    _hash;\n    _error;\n    _bindGroupLayouts;\n    _vertexAttributes;\n    _csModule;\n    _vsModule;\n    _fsModule;\n    _pipelineLayout;\n    constructor(device, params){\n        super(device);\n        this._type = params.type;\n        this._label = params.label ?? `Program ${this.uid}`;\n        this._bindGroupLayouts = [\n            ...params.params.bindGroupLayouts\n        ];\n        this._error = '';\n        if (params.type === 'render') {\n            const renderParams = params.params;\n            this._vs = renderParams.vs;\n            this._fs = renderParams.fs;\n            this._vertexAttributes = renderParams.vertexAttributes ? renderParams.vertexAttributes.join(':') : '';\n        } else {\n            const computeParams = params.params;\n            this._cs = computeParams.source;\n        }\n        this._load();\n        this._hash = String(++WebGPUProgram._hashCounter);\n    }\n    get type() {\n        return this._type;\n    }\n    get label() {\n        return this._label;\n    }\n    getCompileError() {\n        return this._error;\n    }\n    getShaderSource(kin) {\n        switch(kin){\n            case 'vertex':\n                return this._vs;\n            case 'fragment':\n                return this._fs;\n            case 'compute':\n                return this._cs;\n        }\n    }\n    getBindingInfo(name) {\n        for(let group = 0; group < this._bindGroupLayouts.length; group++){\n            const layout = this._bindGroupLayouts[group];\n            const bindName = layout.nameMap?.[name] ?? name;\n            for(let binding = 0; binding < layout.entries.length; binding++){\n                const bindingPoint = layout.entries[binding];\n                if (bindingPoint.name === bindName) {\n                    return {\n                        group: group,\n                        binding: binding,\n                        type: bindingPoint.type\n                    };\n                }\n            }\n        }\n        return null;\n    }\n    get bindGroupLayouts() {\n        return this._bindGroupLayouts;\n    }\n    get vertexAttributes() {\n        return this._vertexAttributes;\n    }\n    get hash() {\n        return this._hash;\n    }\n    getPipelineLayout() {\n        return this._pipelineLayout;\n    }\n    getShaderModule() {\n        return {\n            vsModule: this._vsModule,\n            fsModule: this._fsModule,\n            csModule: this._csModule,\n            pipelineLayout: this._pipelineLayout\n        };\n    }\n    get fsModule() {\n        return this._fsModule;\n    }\n    destroy() {\n        this._vsModule = null;\n        this._fsModule = null;\n        this._pipelineLayout = null;\n        this._object = null;\n    }\n    restore() {\n        if (!this._object) {\n            this._load();\n        }\n    }\n    isProgram() {\n        return true;\n    }\n    createUniformBuffer(uniform) {\n        const type = this.getBindingInfo(uniform)?.type;\n        return type ? this.device.createStructuredBuffer(type, {\n            usage: 'uniform'\n        }) : null;\n    }\n    _load() {\n        if (this._type === 'render') {\n            this._vsModule = this.createShaderModule(this._vs);\n            this._fsModule = this.createShaderModule(this._fs);\n        } else {\n            this._csModule = this.createShaderModule(this._cs);\n        }\n        this._pipelineLayout = this.createPipelineLayout(this._bindGroupLayouts);\n        this._object = {};\n    }\n    createPipelineLayout(bindGroupLayouts) {\n        const layouts = [];\n        bindGroupLayouts.forEach((val)=>{\n            layouts.push(this._device.fetchBindGroupLayout(val)[1]);\n        });\n        return this._device.device.createPipelineLayout({\n            bindGroupLayouts: layouts\n        });\n    }\n    createShaderModule(code) {\n        let sm = this._device.device.createShaderModule({\n            label: this._label,\n            code\n        });\n        if (sm) {\n            const func = sm.compilationInfo || sm.getCompilationInfo;\n            if (!func) {\n                return sm;\n            }\n            func.call(sm).then((compilationInfo)=>{\n                let err = false;\n                if (compilationInfo?.messages?.length > 0) {\n                    let msg = '';\n                    for (const message of compilationInfo.messages){\n                        if (message.type === 'error') {\n                            err = true;\n                        }\n                        msg += `Line ${message.lineNum}:${message.linePos} - ${code.slice(message.offset, message.offset + message.length)}\\n`;\n                        msg += `${message.message}\\n`;\n                        if (message.type === 'error') {\n                            err = true;\n                            console.error(msg);\n                        } else if (message.type === 'warning') {\n                            console.warn(msg);\n                        } else {\n                            console.info(msg);\n                        }\n                        this._error += msg;\n                    }\n                }\n                if (err) {\n                    sm = null;\n                }\n            });\n        }\n        return sm;\n    }\n    use() {\n        this._device.setProgram(this);\n    }\n}\n\nexport { WebGPUProgram };\n//# sourceMappingURL=gpuprogram_webgpu.js.map\n","class UploadRingBuffer {\n    _device;\n    _bufferList;\n    _defaultSize;\n    _unmappedBufferList;\n    constructor(device, defaultSize = 64 * 1024){\n        this._device = device;\n        this._bufferList = [];\n        this._defaultSize = defaultSize;\n        this._unmappedBufferList = [];\n    }\n    uploadBuffer(src, dst, srcOffset, dstOffset, uploadSize, allowOverlap) {\n        const size = uploadSize + 3 & -4;\n        const mappedBuffer = this.fetchBufferMapped(size, !!allowOverlap);\n        if (src) {\n            const mappedRange = mappedBuffer.mappedRange; //mappedBuffer.buffer.getMappedRange(mappedBuffer.offset, size);\n            new Uint8Array(mappedRange, mappedBuffer.offset, size).set(new Uint8Array(src, srcOffset, uploadSize));\n        }\n        const upload = {\n            mappedBuffer: {\n                ...mappedBuffer\n            },\n            uploadSize: size,\n            uploadBuffer: dst,\n            uploadOffset: dstOffset\n        };\n        mappedBuffer.offset += size;\n        mappedBuffer.offset = mappedBuffer.offset + 7 & -8;\n        return upload;\n    }\n    beginUploads() {\n        for(let i = this._bufferList.length - 1; i >= 0; i--){\n            const buffer = this._bufferList[i];\n            if (buffer.used) {\n                buffer.buffer.unmap();\n                this._unmappedBufferList.push(buffer);\n                this._bufferList.splice(i, 1);\n                buffer.mappedRange = null;\n            }\n        }\n        return this._unmappedBufferList.length;\n    }\n    endUploads() {\n        for (const buffer of this._unmappedBufferList){\n            buffer.buffer.mapAsync(GPUMapMode.WRITE).then(()=>{\n                buffer.offset = 0;\n                buffer.used = false;\n                buffer.mappedRange = buffer.buffer.getMappedRange();\n                this._bufferList.push(buffer);\n            });\n        }\n        this._unmappedBufferList = [];\n    }\n    purge() {\n        for(let i = this._bufferList.length - 1; i >= 0; i--){\n            const buffer = this._bufferList[i];\n            if (buffer.mappedRange) {\n                buffer.buffer.unmap();\n                buffer.buffer.destroy();\n            }\n        }\n        this._bufferList = [];\n        for (const buffer of this._unmappedBufferList){\n            buffer.buffer.destroy();\n        }\n        this._unmappedBufferList = [];\n    }\n    fetchBufferMapped(size, allowOverlap) {\n        for (const buffer of this._bufferList){\n            if (allowOverlap || buffer.size - buffer.offset >= size) {\n                buffer.used = true;\n                return buffer;\n            }\n        }\n        const bufferSize = Math.max(size, this._defaultSize) + 3 & -4;\n        const buf = this._device.device.createBuffer({\n            label: `StagingRingBuffer${this._bufferList.length}:${bufferSize}`,\n            size: bufferSize,\n            usage: GPUBufferUsage.MAP_WRITE | GPUBufferUsage.COPY_SRC,\n            mappedAtCreation: true\n        });\n        this._bufferList.push({\n            buffer: buf,\n            size: bufferSize,\n            offset: 0,\n            used: true,\n            mappedRange: buf.getMappedRange()\n        });\n        return this._bufferList[this._bufferList.length - 1];\n    }\n}\n\nexport { UploadRingBuffer };\n//# sourceMappingURL=uploadringbuffer.js.map\n","import { GPUResourceUsageFlags } from '@zephyr3d/device';\nimport { WebGPUObject } from './gpuobject_webgpu.js';\nimport { UploadRingBuffer } from './uploadringbuffer.js';\n\nclass WebGPUBuffer extends WebGPUObject {\n    _size;\n    _usage;\n    _gpuUsage;\n    _memCost;\n    _ringBuffer;\n    _pendingUploads;\n    constructor(device, usage, data){\n        super(device);\n        this._object = null;\n        this._memCost = 0;\n        this._usage = usage;\n        this._gpuUsage = 0;\n        this._size = typeof data === 'number' ? data : data.byteLength;\n        if (this._size <= 0) {\n            throw new Error('can not create buffer with zero size');\n        }\n        this._ringBuffer = new UploadRingBuffer(device, this._size + 15 & -16);\n        this._pendingUploads = [];\n        this.load(typeof data === 'number' ? null : data);\n    }\n    get hash() {\n        return this._object ? this._device.gpuGetObjectHash(this._object) : 0;\n    }\n    get byteLength() {\n        return this._size;\n    }\n    get usage() {\n        return this._usage;\n    }\n    get gpuUsage() {\n        return this._gpuUsage;\n    }\n    searchInsertPosition(dstByteOffset) {\n        let left = 0;\n        let right = this._pendingUploads.length - 1;\n        let insertIndex = this._pendingUploads.length;\n        while(left <= right){\n            const mid = Math.floor((left + right) / 2);\n            const upload = this._pendingUploads[mid];\n            if (upload.uploadOffset < dstByteOffset) {\n                left = mid + 1;\n            } else {\n                insertIndex = mid;\n                right = mid - 1;\n            }\n        }\n        return insertIndex;\n    }\n    bufferSubData(dstByteOffset, data, srcOffset, srcLength) {\n        srcOffset = Number(srcOffset) || 0;\n        dstByteOffset = Number(dstByteOffset) || 0;\n        srcLength = Number(srcLength) || data.length - srcOffset;\n        if (srcOffset + srcLength > data.length) {\n            throw new Error('bufferSubData() failed: source buffer is too small');\n        }\n        if (dstByteOffset + srcLength * data.BYTES_PER_ELEMENT > this.byteLength) {\n            throw new Error('bufferSubData() failed: dest buffer is too small');\n        }\n        const uploadSize = srcLength * data.BYTES_PER_ELEMENT;\n        if ((dstByteOffset & 3) !== 0 || (uploadSize & 3) !== 0) {\n            throw new Error('bufferSubData() failed: destination byte offset or upload size must be 4 bytes aligned');\n        }\n        const uploadOffset = data.byteOffset + srcOffset * data.BYTES_PER_ELEMENT;\n        const insertIndex = this.searchInsertPosition(dstByteOffset);\n        if (insertIndex < this._pendingUploads.length) {\n            const upload = this._pendingUploads[insertIndex];\n            if (upload.uploadOffset < dstByteOffset + uploadSize && upload.uploadOffset + upload.uploadSize > dstByteOffset) {\n                // Flush if overlapped\n                this._device.bufferUpload(this);\n            }\n        }\n        let commit = false;\n        if (this._pendingUploads.length === 0) {\n            this.pushUpload(dstByteOffset, uploadSize, 0);\n            commit = true;\n        } else {\n            let start = dstByteOffset;\n            let end = dstByteOffset + uploadSize;\n            while(insertIndex < this._pendingUploads.length){\n                const upload = this._pendingUploads[insertIndex];\n                const uploadStart = upload.uploadOffset;\n                const uploadEnd = uploadStart + upload.uploadSize;\n                if (uploadStart < end && uploadEnd > start) {\n                    start = Math.min(start, uploadStart);\n                    end = Math.max(end, uploadEnd);\n                    this._pendingUploads.splice(insertIndex, 1);\n                } else {\n                    break;\n                }\n            }\n            this.pushUpload(start, end - start, insertIndex);\n        }\n        new Uint8Array(this._pendingUploads[0].mappedBuffer.mappedRange, dstByteOffset, uploadSize).set(new Uint8Array(data.buffer, uploadOffset, uploadSize));\n        if (commit) {\n            this._device.bufferUpload(this);\n        }\n    }\n    async getBufferSubData(dstBuffer, offsetInBytes, sizeInBytes) {\n        let sourceBuffer = this;\n        offsetInBytes = Number(offsetInBytes) || 0;\n        sizeInBytes = Number(sizeInBytes) || this.byteLength - offsetInBytes;\n        if (offsetInBytes < 0 || offsetInBytes + sizeInBytes > this.byteLength) {\n            throw new Error('data query range out of bounds');\n        }\n        if (dstBuffer && dstBuffer.byteLength < sizeInBytes) {\n            throw new Error('no enough space for querying buffer data');\n        }\n        if (!(this._usage & (GPUResourceUsageFlags.BF_READ | GPUResourceUsageFlags.BF_PACK_PIXEL))) {\n            if (this._gpuUsage & GPUBufferUsage.COPY_SRC) {\n                sourceBuffer = this._device.createBuffer(sizeInBytes, {\n                    usage: 'read'\n                });\n                this.sync();\n                this._device.copyBuffer(this, sourceBuffer, offsetInBytes, 0, sizeInBytes);\n            } else {\n                throw new Error('getBufferSubData() failed: buffer does not have BF_READ or BF_PACK_PIXEL flag set');\n            }\n        } else {\n            this.sync();\n        }\n        const buffer = sourceBuffer.object;\n        await buffer.mapAsync(GPUMapMode.READ);\n        const range = buffer.getMappedRange();\n        dstBuffer = dstBuffer || new Uint8Array(sizeInBytes);\n        dstBuffer.set(new Uint8Array(range, offsetInBytes, sizeInBytes));\n        buffer.unmap();\n        if (sourceBuffer !== this) {\n            sourceBuffer.dispose();\n        }\n        return dstBuffer;\n    }\n    restore() {\n        if (!this._device.isContextLost()) {\n            this.load();\n        }\n    }\n    destroy() {\n        if (this._object) {\n            this._object.destroy();\n            this._object = null;\n            this._gpuUsage = 0;\n            this._memCost = 0;\n        }\n    }\n    isBuffer() {\n        return true;\n    }\n    beginSyncChanges(encoder) {\n        if (this._pendingUploads.length > 0) {\n            const cmdEncoder = encoder || this._device.device.createCommandEncoder();\n            for (const upload of this._pendingUploads){\n                cmdEncoder.copyBufferToBuffer(upload.mappedBuffer.buffer, upload.mappedBuffer.offset, this._object, upload.uploadOffset, upload.uploadSize);\n            }\n            if (!encoder) {\n                this._device.device.queue.submit([\n                    cmdEncoder.finish()\n                ]);\n            }\n            this._pendingUploads.length = 0;\n            this._ringBuffer.beginUploads();\n        }\n    }\n    endSyncChanges() {\n        if (this._usage & GPUResourceUsageFlags.DYNAMIC) {\n            this._ringBuffer.endUploads();\n        } else {\n            this._ringBuffer.purge();\n        }\n    }\n    load(data) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        this._memCost = 0;\n        if (!this._device.isContextLost()) {\n            if (!this._object) {\n                this._gpuUsage = 0;\n                let label = '';\n                if (this._usage & GPUResourceUsageFlags.BF_VERTEX) {\n                    this._gpuUsage |= GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST | GPUBufferUsage.COPY_SRC;\n                    label += '[vertex]';\n                }\n                if (this._usage & GPUResourceUsageFlags.BF_INDEX) {\n                    this._gpuUsage |= GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST | GPUBufferUsage.COPY_SRC;\n                    label += '[index]';\n                }\n                if (this._usage & GPUResourceUsageFlags.BF_UNIFORM) {\n                    this._gpuUsage |= GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST | GPUBufferUsage.COPY_SRC;\n                    label += '[uniform]';\n                }\n                if (this._usage & GPUResourceUsageFlags.BF_STORAGE) {\n                    this._gpuUsage |= GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST | GPUBufferUsage.COPY_SRC;\n                    label += '[storage]';\n                }\n                if (this._usage & (GPUResourceUsageFlags.BF_READ | GPUResourceUsageFlags.BF_PACK_PIXEL)) {\n                    this._gpuUsage |= GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ;\n                    label += '[mapRead]';\n                }\n                if (this._usage & (GPUResourceUsageFlags.BF_WRITE | GPUResourceUsageFlags.BF_UNPACK_PIXEL)) {\n                    this._gpuUsage |= GPUBufferUsage.COPY_SRC | GPUBufferUsage.MAP_WRITE;\n                    label += '[mapWrite]';\n                }\n                if (data) {\n                    this._object = this._device.gpuCreateBuffer({\n                        label: label,\n                        size: data.byteLength + 15 & -16,\n                        usage: this._gpuUsage,\n                        mappedAtCreation: true\n                    });\n                    const range = this._object.getMappedRange();\n                    new data.constructor(range).set(data);\n                    this._object.unmap();\n                } else {\n                    this._object = this._device.gpuCreateBuffer({\n                        label: label,\n                        size: this.byteLength + 15 & -16,\n                        usage: this._gpuUsage\n                    });\n                }\n                const memCost = this.byteLength;\n                this._device.updateVideoMemoryCost(memCost - this._memCost);\n                this._memCost = memCost;\n            }\n        }\n    }\n    sync() {\n        if (this._pendingUploads) {\n            this._device.flushUploads();\n        }\n    }\n    pushUpload(dstByteOffset, byteSize, insertIndex) {\n        const bufferMapped = this._ringBuffer.fetchBufferMapped(byteSize, true);\n        this._pendingUploads.splice(insertIndex, 0, {\n            mappedBuffer: {\n                buffer: bufferMapped.buffer,\n                size: bufferMapped.size,\n                offset: dstByteOffset,\n                used: bufferMapped.used,\n                mappedRange: bufferMapped.mappedRange\n            },\n            uploadSize: byteSize,\n            uploadOffset: dstByteOffset,\n            uploadBuffer: this._object\n        });\n    }\n}\n\nexport { WebGPUBuffer };\n//# sourceMappingURL=buffer_webgpu.js.map\n","import { PBPrimitiveTypeInfo, PBPrimitiveType, GPUResourceUsageFlags, StructuredBufferData } from '@zephyr3d/device';\nimport { WebGPUBuffer } from './buffer_webgpu.js';\n\nconst typeU8Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC2_NORM);\nconst typeU8Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U8VEC4_NORM);\nconst typeI8Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC2_NORM);\nconst typeI8Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I8VEC4_NORM);\nconst typeU16Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC2);\nconst typeU16Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC4);\nconst typeI16Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC2);\nconst typeI16Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC4);\nconst typeU16Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC2_NORM);\nconst typeU16Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16VEC4_NORM);\nconst typeI16Vec2_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC2_NORM);\nconst typeI16Vec4_Norm = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I16VEC4_NORM);\nconst typeF16Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F16VEC2);\nconst typeF16Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F16VEC4);\nconst typeF32 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32);\nconst typeF32Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32VEC2);\nconst typeF32Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32VEC3);\nconst typeF32Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.F32VEC4);\nconst typeU32 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32);\nconst typeU32Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC2);\nconst typeU32Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC3);\nconst typeU32Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32VEC4);\nconst typeI32 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32);\nconst typeI32Vec2 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC2);\nconst typeI32Vec3 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC3);\nconst typeI32Vec4 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.I32VEC4);\nconst vertexFormatTable = {\n    [typeU8Vec2_Norm.typeId]: 'unorm8x2',\n    [typeU8Vec4_Norm.typeId]: 'unorm8x4',\n    [typeI8Vec2_Norm.typeId]: 'snorm8x2',\n    [typeI8Vec4_Norm.typeId]: 'snorm8x4',\n    [typeU16Vec2.typeId]: 'uint16x2',\n    [typeU16Vec4.typeId]: 'uint16x4',\n    [typeI16Vec2.typeId]: 'sint16x2',\n    [typeI16Vec4.typeId]: 'sint16x4',\n    [typeU16Vec2_Norm.typeId]: 'unorm16x2',\n    [typeU16Vec4_Norm.typeId]: 'unorm16x4',\n    [typeI16Vec2_Norm.typeId]: 'snorm16x2',\n    [typeI16Vec4_Norm.typeId]: 'snorm16x4',\n    [typeF16Vec2.typeId]: 'float16x2',\n    [typeF16Vec4.typeId]: 'float16x4',\n    [typeF32.typeId]: 'float32',\n    [typeF32Vec2.typeId]: 'float32x2',\n    [typeF32Vec3.typeId]: 'float32x3',\n    [typeF32Vec4.typeId]: 'float32x4',\n    [typeU32.typeId]: 'uint32',\n    [typeU32Vec2.typeId]: 'uint32x2',\n    [typeU32Vec3.typeId]: 'uint32x3',\n    [typeU32Vec4.typeId]: 'uint32x4',\n    [typeI32.typeId]: 'sint32',\n    [typeI32Vec2.typeId]: 'sint32x2',\n    [typeI32Vec3.typeId]: 'sint32x3',\n    [typeI32Vec4.typeId]: 'sint32x4'\n};\nclass WebGPUStructuredBuffer extends WebGPUBuffer {\n    _structure;\n    _data;\n    constructor(device, structure, usage, source){\n        if (!structure?.isStructType()) {\n            throw new Error('invalid structure type');\n        }\n        if (usage & GPUResourceUsageFlags.BF_INDEX) {\n            throw new Error('structured buffer must not have Index usage flag');\n        }\n        if (usage & (GPUResourceUsageFlags.BF_READ | GPUResourceUsageFlags.BF_WRITE | GPUResourceUsageFlags.BF_PACK_PIXEL | GPUResourceUsageFlags.BF_UNPACK_PIXEL)) {\n            throw new Error('structured buffer must not have Read or Write usage flags');\n        }\n        if (usage & GPUResourceUsageFlags.BF_VERTEX) {\n            if (structure.structMembers.length !== 1 || !structure.structMembers[0].type.isArrayType()) {\n                throw new Error('structured buffer for vertex usage must have only one array member');\n            }\n        }\n        if (usage & GPUResourceUsageFlags.BF_UNIFORM || usage & GPUResourceUsageFlags.BF_STORAGE) {\n            usage |= GPUResourceUsageFlags.DYNAMIC;\n        }\n        const layout = structure.toBufferLayout(0, structure.layout);\n        if (source && layout.byteSize !== source.byteLength) {\n            throw new Error(`create structured buffer failed: invalid source size: ${source.byteLength}, should be ${layout.byteSize}`);\n        }\n        super(device, usage, source || layout.byteSize);\n        this._data = new StructuredBufferData(layout, this);\n        this._structure = structure;\n    }\n    set(name, value) {\n        this._data.set(name, value);\n    }\n    get structure() {\n        return this._structure;\n    }\n    set structure(st) {\n        if (st && !st.isCompatibleType(this._structure)) {\n            const layout = st.toBufferLayout(0, st.layout);\n            if (layout.byteSize > this.byteLength) {\n                throw new Error(`set structure type failed: new structure type is too large: ${layout.byteSize}`);\n            }\n            this._data = new StructuredBufferData(layout, this);\n            this._structure = st;\n        }\n    }\n    static getGPUVertexFormat(type) {\n        return vertexFormatTable[type.typeId];\n    }\n}\n\nexport { WebGPUStructuredBuffer };\n//# sourceMappingURL=structuredbuffer_webgpu.js.map\n","import { GPUResourceUsageFlags } from '@zephyr3d/device';\nimport { WebGPUStructuredBuffer } from './structuredbuffer_webgpu.js';\nimport { WebGPUObject } from './gpuobject_webgpu.js';\n\nclass WebGPUBindGroup extends WebGPUObject {\n    _layout;\n    _layoutDesc;\n    _entries;\n    _bindGroup;\n    _buffers;\n    _textures;\n    _createdBuffers;\n    _gpuId;\n    _videoTextures;\n    _dynamicOffsets;\n    _resources;\n    constructor(device, layout){\n        super(device);\n        this._device = device;\n        this._layout = layout;\n        this._layoutDesc = null;\n        this._entries = null;\n        this._bindGroup = null;\n        this._dynamicOffsets = null;\n        this._gpuId = 0;\n        this._resources = {};\n        this._buffers = [];\n        this._textures = [];\n        this._createdBuffers = [];\n        this._videoTextures = null;\n        for (const entry of this._layout.entries){\n            if (entry.buffer && entry.buffer.hasDynamicOffset) {\n                if (!this._dynamicOffsets) {\n                    this._dynamicOffsets = [];\n                }\n                this._dynamicOffsets[entry.buffer.dynamicOffsetIndex] = 0;\n            }\n        }\n    }\n    get bindGroup() {\n        if (!this._bindGroup) {\n            this._bindGroup = this._create();\n        }\n        return this._bindGroup;\n    }\n    get layoutDescriptor() {\n        if (!this._bindGroup) {\n            this._bindGroup = this._create();\n        }\n        return this._layoutDesc;\n    }\n    get entries() {\n        if (!this._bindGroup) {\n            this._bindGroup = this._create();\n        }\n        return this._entries;\n    }\n    getGPUId() {\n        return `${this._uid}:${this._gpuId}`;\n    }\n    get bufferList() {\n        return this._buffers;\n    }\n    get textureList() {\n        return this._textures;\n    }\n    invalidate() {\n        this._bindGroup = null;\n        this._gpuId++;\n    }\n    getLayout() {\n        return this._layout;\n    }\n    getDynamicOffsets() {\n        return this._dynamicOffsets;\n    }\n    getBuffer(name, nocreate = true) {\n        return this._getBuffer(name, GPUResourceUsageFlags.BF_UNIFORM | GPUResourceUsageFlags.BF_STORAGE, nocreate);\n    }\n    setBuffer(name, buffer, offset, bindOffset, bindSize) {\n        const bindName = this._layout.nameMap?.[name] ?? name;\n        for (const entry of this._layout.entries){\n            if (entry.name === bindName) {\n                if (!entry.buffer) {\n                    console.error(`setBuffer() failed: resource '${name}' is not buffer`);\n                } else {\n                    bindOffset = bindOffset ?? 0;\n                    bindSize = bindSize ?? (buffer ? Math.max(0, buffer.byteLength - bindOffset) : 0);\n                    const info = this._resources[entry.name];\n                    const bufferUsage = entry.buffer.type === 'uniform' ? GPUResourceUsageFlags.BF_UNIFORM : GPUResourceUsageFlags.BF_STORAGE;\n                    if (!buffer || !(buffer.usage & bufferUsage)) {\n                        console.error(`setBuffer() failed: buffer resource '${name}' must be type '${entry.buffer.type}'`);\n                    } else if (buffer !== info?.[0] || bindOffset !== info?.[1] || bindSize !== info?.[2]) {\n                        this._resources[entry.name] = [\n                            buffer,\n                            bindOffset,\n                            bindSize\n                        ];\n                        this.invalidate();\n                    }\n                    if (entry.buffer.hasDynamicOffset) {\n                        this._dynamicOffsets[entry.buffer.dynamicOffsetIndex] = offset ?? 0;\n                    }\n                }\n                return;\n            }\n        }\n        console.error(`setBuffer() failed: no buffer resource named '${name}'`);\n    }\n    setValue(name, value) {\n        const mappedName = this._layout.nameMap?.[name];\n        if (mappedName) {\n            this.setValue(mappedName, {\n                [name]: value\n            });\n        } else {\n            const buffer = this._getBuffer(name, GPUResourceUsageFlags.BF_UNIFORM | GPUResourceUsageFlags.BF_STORAGE, false);\n            if (buffer) {\n                if (!(buffer instanceof WebGPUStructuredBuffer)) {\n                    throw new Error(`BindGroup.setValue() failed: '${name}' is not structured buffer`);\n                }\n                if (value?.BYTES_PER_ELEMENT) {\n                    buffer.bufferSubData(0, value);\n                } else {\n                    for(const k in value){\n                        buffer.set(k, value[k]);\n                    }\n                }\n            } else {\n                console.error(`setValue() failed: no uniform buffer named '${name}'`);\n            }\n        }\n    }\n    setRawData(name, byteOffset, data, srcPos, srcLength) {\n        const mappedName = this._layout.nameMap?.[name];\n        if (mappedName) {\n            this.setRawData(mappedName, byteOffset, data, srcPos, srcLength);\n        } else {\n            const buffer = this._getBuffer(name, GPUResourceUsageFlags.BF_UNIFORM | GPUResourceUsageFlags.BF_STORAGE, false);\n            if (buffer) {\n                buffer.bufferSubData(byteOffset, data, srcPos, srcLength);\n            } else {\n                console.error(`set(): no uniform buffer named '${name}'`);\n            }\n        }\n    }\n    getTexture(name) {\n        const entry = this._findTextureLayout(name);\n        if (entry) {\n            const t = this._resources[name];\n            return t ? t[0] : null;\n        } else {\n            throw new Error(`getTexture() failed:${name} is not a texture`);\n        }\n    }\n    setTextureView(name, value, level, face, mipCount, sampler) {\n        if (!value) {\n            throw new Error(`WebGPUBindGroup.setTextureView() failed: invalid texture uniform value: ${value}`);\n        } else {\n            const entry = this._findTextureLayout(name);\n            if (entry) {\n                if (entry.externalTexture) {\n                    throw new Error(`WebGPUBindGroup.setTextureView() failed: video texture does not have view`);\n                } else if (value.isTextureVideo()) {\n                    throw new Error(`WebGPUBindGroup.setTextureView() failed: invalid texture type`);\n                }\n                const t = this._resources[name];\n                const view = value.getView(level, face, mipCount);\n                if (!t || t[1] !== view) {\n                    this._resources[name] = [\n                        value,\n                        view\n                    ];\n                    this.invalidate();\n                }\n                if (entry.texture?.autoBindSampler) {\n                    const samplerEntry = this._findSamplerLayout(entry.texture.autoBindSampler);\n                    if (!samplerEntry || !samplerEntry.sampler) {\n                        throw new Error(`WebGPUBindGroup.setTextureView() failed: sampler entry not found: ${entry.texture.autoBindSampler}`);\n                    }\n                    const s = !sampler || sampler.compare ? value.getDefaultSampler(false) : sampler;\n                    if (s.object !== this._resources[entry.texture.autoBindSampler]) {\n                        this._resources[entry.texture.autoBindSampler] = s.object;\n                        this.invalidate();\n                    }\n                }\n                if (entry.texture?.autoBindSamplerComparison) {\n                    const samplerEntry = this._findSamplerLayout(entry.texture.autoBindSamplerComparison);\n                    if (!samplerEntry || !samplerEntry.sampler) {\n                        throw new Error(`WebGPUBindGroup.setTextureView() failed: sampler entry not found: ${entry.texture.autoBindSamplerComparison}`);\n                    }\n                    const s = !sampler || !sampler.compare ? value.getDefaultSampler(true) : sampler;\n                    if (s.object !== this._resources[entry.texture.autoBindSamplerComparison]) {\n                        this._resources[entry.texture.autoBindSamplerComparison] = s.object;\n                        this.invalidate();\n                    }\n                }\n            } else {\n                throw new Error(`WebGPUBindGroup.setView() failed: no texture uniform named '${name}'`);\n            }\n        }\n    }\n    setTexture(name, value, sampler) {\n        if (!value) {\n            throw new Error(`WebGPUBindGroup.setTexture() failed: invalid texture uniform value: ${value}`);\n        } else {\n            const entry = this._findTextureLayout(name);\n            if (entry) {\n                const t = this._resources[name];\n                if (entry.externalTexture) {\n                    if (!value.isTextureVideo()) {\n                        throw new Error(`WebGPUBindGroup.setTexture() failed: invalid texture type of resource '${name}'`);\n                    }\n                    if (!t || t !== value) {\n                        if (t) {\n                            t.removeBindGroupReference(this);\n                        }\n                        if (value) {\n                            value.addBindGroupReference(this);\n                        }\n                        this._resources[name] = value;\n                        this.invalidate();\n                        this._videoTextures = [];\n                        for (const entry of this._layout.entries){\n                            if (entry.externalTexture) {\n                                const tex = this._resources[entry.name];\n                                if (tex && this._videoTextures.indexOf(tex) < 0) {\n                                    this._videoTextures.push(tex);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    if (value.isTextureVideo()) {\n                        throw new Error(`WebGPUBindGroup.setTexture() failed: invalid texture type of resource '${name}'`);\n                    }\n                    const view = value.getDefaultView();\n                    if (!entry.externalTexture && !view) {\n                        throw new Error('WebGPUBindGroup.setTexture() failed: create texture view failed');\n                    }\n                    if (!t || t[0] !== value) {\n                        this._resources[name] = [\n                            value,\n                            view\n                        ];\n                        this.invalidate();\n                    }\n                }\n                const autoBindSampler = entry.texture?.autoBindSampler || entry.externalTexture?.autoBindSampler;\n                if (autoBindSampler) {\n                    const samplerEntry = this._findSamplerLayout(autoBindSampler);\n                    if (!samplerEntry || !samplerEntry.sampler) {\n                        throw new Error(`WebGPUBindGroup.setTexture() failed: sampler entry not found: ${autoBindSampler}`);\n                    }\n                    const s = !sampler || sampler.compare ? value.getDefaultSampler(false) : sampler;\n                    if (s.object !== this._resources[autoBindSampler]) {\n                        this._resources[autoBindSampler] = s.object;\n                        this.invalidate();\n                    }\n                }\n                const autoBindSamplerComparison = entry.texture?.autoBindSamplerComparison;\n                if (autoBindSamplerComparison) {\n                    const samplerEntry = this._findSamplerLayout(autoBindSamplerComparison);\n                    if (!samplerEntry || !samplerEntry.sampler) {\n                        throw new Error(`WebGPUBindGroup.setTexture() failed: sampler entry not found: ${autoBindSamplerComparison}`);\n                    }\n                    const s = !sampler || !sampler.compare ? value.getDefaultSampler(true) : sampler;\n                    if (s.object !== this._resources[autoBindSamplerComparison]) {\n                        this._resources[autoBindSamplerComparison] = s.object;\n                        this.invalidate();\n                    }\n                }\n            } else {\n                throw new Error(`WebGPUBindGroup.setTexture() failed: no texture uniform named '${name}'`);\n            }\n        }\n    }\n    setSampler(name, value) {\n        const sampler = value?.object;\n        if (!sampler) {\n            console.error(`WebGPUBindGroup.setSampler() failed: invalid sampler uniform value: ${value}`);\n        } else if (this._resources[name] !== sampler) {\n            if (!this._findSamplerLayout(name)) {\n                console.error(`WebGPUBindGroup.setSampler() failed: no sampler uniform named '${name}'`);\n            } else {\n                this._resources[name] = sampler;\n                this.invalidate();\n            }\n        }\n    }\n    destroy() {\n        this.invalidate();\n        this._resources = {};\n        this._buffers = [];\n        this._textures = [];\n        this._videoTextures = null;\n        this._object = null;\n        for (const buffer of this._createdBuffers){\n            buffer.dispose();\n        }\n        this._createdBuffers = [];\n    }\n    restore() {\n        this.invalidate();\n        this._object = {};\n    }\n    isBindGroup() {\n        return true;\n    }\n    /** @internal */ updateVideoTextures() {\n        this._videoTextures?.forEach((t)=>{\n            if (t.updateVideoFrame()) {\n                this.invalidate();\n            }\n        });\n    }\n    /** @internal */ _findTextureLayout(name) {\n        for (const entry of this._layout.entries){\n            if ((entry.texture || entry.storageTexture || entry.externalTexture) && entry.name === name) {\n                return entry;\n            }\n        }\n        return null;\n    }\n    /** @internal */ _findSamplerLayout(name) {\n        for (const entry of this._layout.entries){\n            if (entry.sampler && entry.name === name) {\n                return entry;\n            }\n        }\n        return null;\n    }\n    /** @internal */ _getBuffer(name, usage, nocreate = false) {\n        const info = this._getBufferInfo(name, usage, nocreate);\n        return info?.[0] ?? null;\n    }\n    /** @internal */ _getBufferInfo(name, usage, nocreate = false) {\n        const bindName = this._layout.nameMap?.[name] ?? name;\n        for (const entry of this._layout.entries){\n            if (entry.buffer && entry.name === bindName) {\n                const bufferUsage = entry.buffer.type === 'uniform' ? GPUResourceUsageFlags.BF_UNIFORM : GPUResourceUsageFlags.BF_STORAGE;\n                if (!(usage & bufferUsage)) {\n                    return null;\n                }\n                let buffer = this._resources[entry.name];\n                if (!nocreate && buffer?.[0]?.disposed) {\n                    buffer[0] = null;\n                    this.invalidate();\n                }\n                if ((!buffer || !buffer[0]) && !nocreate) {\n                    const options = {\n                        usage: bufferUsage === GPUResourceUsageFlags.BF_UNIFORM ? 'uniform' : null,\n                        storage: bufferUsage === GPUResourceUsageFlags.BF_STORAGE,\n                        dynamic: true\n                    };\n                    const gpuBuffer = this._device.createStructuredBuffer(entry.type, options);\n                    buffer = [\n                        gpuBuffer,\n                        0,\n                        gpuBuffer.byteLength\n                    ];\n                    this._resources[entry.name] = buffer;\n                    this._createdBuffers.push(gpuBuffer);\n                }\n                return buffer;\n            }\n        }\n        return null;\n    }\n    /** @internal */ _create() {\n        let bindGroup = null;\n        this._layoutDesc = null;\n        this._entries = null;\n        this._textures = [];\n        this._buffers = [];\n        const entries = [];\n        let resourceOk = true;\n        for (const entry of this._layout.entries){\n            const ge = {\n                binding: entry.binding\n            };\n            if (entry.buffer) {\n                const buffer = this._getBufferInfo(entry.name, entry.buffer.type === 'uniform' ? GPUResourceUsageFlags.BF_UNIFORM : GPUResourceUsageFlags.BF_STORAGE, true);\n                if (!buffer) {\n                    throw new Error(`Uniform buffer '${entry.name}' not exists, maybe you forgot settings some uniform values`);\n                }\n                if (this._buffers.indexOf(buffer[0]) < 0) {\n                    this._buffers.push(buffer[0]);\n                }\n                ge.resource = {\n                    buffer: buffer[0].object,\n                    offset: buffer[1],\n                    size: buffer[2]\n                };\n                resourceOk = resourceOk && !!buffer[0].object;\n            } else if (entry.texture || entry.storageTexture) {\n                const t = this._resources[entry.name];\n                if (!t) {\n                    console.error(`Missing texture in bind group: ${entry.name}`);\n                    resourceOk = false;\n                } else {\n                    if (this._textures.indexOf(t[0]) < 0) {\n                        this._textures.push(t[0]);\n                    }\n                    ge.resource = t[1];\n                    resourceOk = resourceOk && !!t[1];\n                }\n            } else if (entry.externalTexture) {\n                const t = this._resources[entry.name];\n                ge.resource = t.object;\n                resourceOk = resourceOk && !!t.object;\n            } else if (entry.sampler) {\n                const sampler = this._resources[entry.name];\n                ge.resource = sampler;\n                resourceOk = resourceOk && !!sampler;\n            }\n            entries.push(ge);\n        }\n        if (!resourceOk) {\n            return null;\n        }\n        const [desc, layout] = this._device.fetchBindGroupLayout(this._layout);\n        const descriptor = {\n            layout: layout,\n            entries\n        };\n        if (layout.label) {\n            descriptor.label = `${layout.label}.bindgroup`;\n        }\n        bindGroup = this._device.gpuCreateBindGroup(descriptor);\n        if (!bindGroup) {\n            console.error('Create bindgroup failed');\n        }\n        this._layoutDesc = desc;\n        this._entries = entries;\n        return bindGroup;\n    }\n}\n\nexport { WebGPUBindGroup };\n//# sourceMappingURL=bindgroup_webgpu.js.map\n","const textureWrappingMap = {\n    repeat: 'repeat',\n    'mirrored-repeat': 'mirror-repeat',\n    clamp: 'clamp-to-edge'\n};\nconst textureFilterMap = {\n    nearest: 'nearest',\n    linear: 'linear',\n    none: undefined\n};\nconst compareFuncMap = {\n    always: 'always',\n    le: 'less-equal',\n    ge: 'greater-equal',\n    lt: 'less',\n    gt: 'greater',\n    eq: 'equal',\n    ne: 'not-equal',\n    never: 'never'\n};\nconst stencilOpMap = {\n    keep: 'keep',\n    replace: 'replace',\n    zero: 'zero',\n    invert: 'invert',\n    incr: 'increment-clamp',\n    decr: 'decrement-clamp',\n    'incr-wrap': 'increment-wrap',\n    'decr-wrap': 'decrement-wrap'\n};\nconst primitiveTypeMap = {\n    'triangle-list': 'triangle-list',\n    'triangle-strip': 'triangle-strip',\n    'triangle-fan': null,\n    'line-list': 'line-list',\n    'line-strip': 'line-strip',\n    'point-list': 'point-list'\n};\nconst faceModeMap = {\n    back: 'back',\n    front: 'front',\n    none: 'none'\n};\nconst blendEquationMap = {\n    add: 'add',\n    subtract: 'subtract',\n    'reverse-subtract': 'reverse-subtract',\n    min: 'min',\n    max: 'max'\n};\nconst blendFuncMap = {\n    'const-color': 'constant',\n    'const-alpha': 'constant',\n    'dst-color': 'dst',\n    'dst-alpha': 'dst-alpha',\n    'inv-const-color': 'one-minus-constant',\n    'inv-const-alpha': 'one-minus-constant',\n    'inv-dst-color': 'one-minus-dst',\n    'inv-dst-alpha': 'one-minus-dst-alpha',\n    'src-color': 'src',\n    'src-alpha': 'src-alpha',\n    'inv-src-color': 'one-minus-src',\n    'inv-src-alpha': 'one-minus-src-alpha',\n    'src-alpha-saturate': 'src-alpha-saturated',\n    one: 'one',\n    zero: 'zero'\n};\nconst vertexFormatToHash = {\n    float32: '0',\n    float32x2: '1',\n    float32x3: '2',\n    float32x4: '3',\n    uint32: '4',\n    uint32x2: '5',\n    uint32x3: '6',\n    uint32x4: '7',\n    sint32: '8',\n    sint32x2: '9',\n    sint32x3: 'a',\n    sint32x4: 'b',\n    uint16x2: 'c',\n    uint16x4: 'd',\n    unorm16x2: 'e',\n    unorm16x4: 'f',\n    sint16x2: 'g',\n    sint16x4: 'h',\n    snorm16x2: 'i',\n    snorm16x4: 'j',\n    uint8x2: 'k',\n    uint8x4: 'l',\n    unorm8x2: 'm',\n    unorm8x4: 'n',\n    sint8x2: 'o',\n    sint8x4: 'p',\n    snorm8x2: 'q',\n    snorm8x4: 'r'\n};\nconst textureFormatMap = {\n    ['unknown']: null,\n    ['rgba8unorm']: 'rgba8unorm',\n    ['rgba8snorm']: 'rgba8snorm',\n    ['bgra8unorm']: 'bgra8unorm',\n    ['dxt1']: 'bc1-rgba-unorm',\n    ['dxt3']: 'bc2-rgba-unorm',\n    ['dxt5']: 'bc3-rgba-unorm',\n    ['dxt1-srgb']: 'bc1-rgba-unorm-srgb',\n    ['dxt3-srgb']: 'bc2-rgba-unorm-srgb',\n    ['dxt5-srgb']: 'bc3-rgba-unorm-srgb',\n    ['bc4']: 'bc4-r-unorm',\n    ['bc4-signed']: 'bc4-r-snorm',\n    ['bc5']: 'bc5-rg-unorm',\n    ['bc5-signed']: 'bc5-rg-snorm',\n    ['bc6h']: 'bc6h-rgb-ufloat',\n    ['bc6h-signed']: 'bc6h-rgb-float',\n    ['bc7']: 'bc7-rgba-unorm',\n    ['bc7-srgb']: 'bc7-rgba-unorm-srgb',\n    ['astc-4x4']: 'astc-4x4-unorm',\n    ['astc-4x4-srgb']: 'astc-4x4-unorm-srgb',\n    ['astc-5x4']: 'astc-5x4-unorm',\n    ['astc-5x4-srgb']: 'astc-5x4-unorm-srgb',\n    ['astc-5x5']: 'astc-5x5-unorm',\n    ['astc-5x5-srgb']: 'astc-5x5-unorm-srgb',\n    ['astc-6x5']: 'astc-6x5-unorm',\n    ['astc-6x5-srgb']: 'astc-6x5-unorm-srgb',\n    ['astc-6x6']: 'astc-6x6-unorm',\n    ['astc-6x6-srgb']: 'astc-6x6-unorm-srgb',\n    ['astc-8x5']: 'astc-8x5-unorm',\n    ['astc-8x5-srgb']: 'astc-8x5-unorm-srgb',\n    ['astc-8x6']: 'astc-8x6-unorm',\n    ['astc-8x6-srgb']: 'astc-8x6-unorm-srgb',\n    ['astc-8x8']: 'astc-8x8-unorm',\n    ['astc-8x8-srgb']: 'astc-8x8-unorm-srgb',\n    ['astc-10x5']: 'astc-10x5-unorm',\n    ['astc-10x5-srgb']: 'astc-10x5-unorm-srgb',\n    ['astc-10x6']: 'astc-10x6-unorm',\n    ['astc-10x6-srgb']: 'astc-10x6-unorm-srgb',\n    ['astc-10x8']: 'astc-10x8-unorm',\n    ['astc-10x8-srgb']: 'astc-10x8-unorm-srgb',\n    ['astc-10x10']: 'astc-10x10-unorm',\n    ['astc-10x10-srgb']: 'astc-10x10-unorm-srgb',\n    ['astc-12x10']: 'astc-12x10-unorm',\n    ['astc-12x10-srgb']: 'astc-12x10-unorm-srgb',\n    ['astc-12x12']: 'astc-12x12-unorm',\n    ['astc-12x12-srgb']: 'astc-12x12-unorm-srgb',\n    ['r8unorm']: 'r8unorm',\n    ['r8snorm']: 'r8snorm',\n    ['r16f']: 'r16float',\n    ['r32f']: 'r32float',\n    ['r8ui']: 'r8uint',\n    ['r8i']: 'r8sint',\n    ['r16ui']: 'r16uint',\n    ['r16i']: 'r16sint',\n    ['r32ui']: 'r32uint',\n    ['r32i']: 'r32sint',\n    ['rg8unorm']: 'rg8unorm',\n    ['rg8snorm']: 'rg8snorm',\n    ['rg16f']: 'rg16float',\n    ['rg32f']: 'rg32float',\n    ['rg8ui']: 'rg8uint',\n    ['rg8i']: 'rg8sint',\n    ['rg16ui']: 'rg16uint',\n    ['rg16i']: 'rg16sint',\n    ['rg32ui']: 'rg32uint',\n    ['rg32i']: 'rg32sint',\n    ['rgba8unorm-srgb']: 'rgba8unorm-srgb',\n    ['bgra8unorm-srgb']: 'bgra8unorm-srgb',\n    ['rgba16f']: 'rgba16float',\n    ['rgba32f']: 'rgba32float',\n    ['rgba8ui']: 'rgba8uint',\n    ['rgba8i']: 'rgba8sint',\n    ['rgba16ui']: 'rgba16uint',\n    ['rgba16i']: 'rgba16sint',\n    ['rgba32ui']: 'rgba32uint',\n    ['rgba32i']: 'rgba32sint',\n    ['rg11b10uf']: 'rg11b10ufloat',\n    ['d16']: 'depth16unorm',\n    ['d24']: 'depth24plus',\n    ['d32f']: 'depth32float',\n    ['d32fs8']: 'depth32float-stencil8',\n    ['d24s8']: 'depth24plus-stencil8'\n};\nfunction zip(keys, values) {\n    const ret = {};\n    const len = keys.length;\n    for(let i = 0; i < len; i++){\n        ret[keys[i]] = values[i];\n    }\n    return ret;\n}\nconst textureFormatInvMap = zip(Object.values(textureFormatMap), Object.keys(textureFormatMap));\nconst hashToVertexFormat = zip(Object.values(vertexFormatToHash), Object.keys(vertexFormatToHash));\n\nexport { blendEquationMap, blendFuncMap, compareFuncMap, faceModeMap, hashToVertexFormat, primitiveTypeMap, stencilOpMap, textureFilterMap, textureFormatInvMap, textureFormatMap, textureWrappingMap, vertexFormatToHash };\n//# sourceMappingURL=constants_webgpu.js.map\n","import { Vector4 } from '@zephyr3d/base';\n\nclass WebGPUClearQuad {\n    static _clearPrograms = {};\n    static _clearStateSet = null;\n    static _defaultClearColor = new Vector4(0, 0, 0, 1);\n    static drawClearQuad(renderPass, clearColor, clearDepth, clearStencil) {\n        if (!this._clearStateSet) {\n            this.initClearQuad(renderPass);\n        }\n        const hash = renderPass.getFrameBufferInfo().clearHash;\n        const program = this.getClearProgram(renderPass.getDevice(), hash);\n        const bClearColor = !!clearColor;\n        const bClearDepth = !(clearDepth === null || clearDepth === undefined);\n        const bClearStencil = !(clearStencil === null || clearStencil === undefined);\n        program.bindGroup.setValue('clearDepth', clearDepth ?? 1);\n        program.bindGroup.setValue('clearColor', clearColor ?? this._defaultClearColor);\n        this._clearStateSet.useDepthState().enableWrite(bClearDepth);\n        this._clearStateSet.useColorState().setColorMask(bClearColor, bClearColor, bClearColor, bClearColor);\n        this._clearStateSet.useStencilState().enable(bClearStencil).setReference(bClearStencil ? clearStencil : 0);\n        renderPass.getDevice().commandQueue.draw(program.program, null, this._clearStateSet, [\n            program.bindGroup\n        ], null, 'triangle-strip', 0, 4, 1);\n    }\n    static getClearProgram(device, hash) {\n        let programInfo = this._clearPrograms[hash];\n        if (!programInfo) {\n            const colorAttachments = hash.split('');\n            const program = device.buildRenderProgram({\n                label: `ClearQuad-${hash}`,\n                vertex (pb) {\n                    this.clearDepth = pb.float().uniform(0);\n                    this.coords = [\n                        pb.vec2(-1, 1),\n                        pb.vec2(1, 1),\n                        pb.vec2(-1, -1),\n                        pb.vec2(1, -1)\n                    ];\n                    pb.main(function() {\n                        this.$builtins.position = pb.vec4(this.coords.at(this.$builtins.vertexIndex), this.clearDepth, 1);\n                    });\n                },\n                fragment (pb) {\n                    this.clearColor = pb.vec4().uniform(0);\n                    if (colorAttachments.length === 0) {\n                        this.$outputs.outColor = pb.vec4();\n                        pb.main(function() {\n                            this.$outputs.outColor = this.clearColor;\n                        });\n                    } else {\n                        for(let i = 0; i < colorAttachments.length; i++){\n                            this.$outputs[`outColor${i}`] = colorAttachments[i] === 'f' ? pb.vec4() : colorAttachments[i] === 'i' ? pb.ivec4() : pb.uvec4();\n                        }\n                        pb.main(function() {\n                            for(let i = 0; i < colorAttachments.length; i++){\n                                this.$outputs[`outColor${i}`] = colorAttachments[i] === 'f' ? this.clearColor : colorAttachments[i] === 'i' ? pb.ivec4(this.clearColor) : pb.uvec4(this.clearColor);\n                            }\n                        });\n                    }\n                }\n            });\n            const bindGroup = device.createBindGroup(program.bindGroupLayouts[0]);\n            programInfo = {\n                program,\n                bindGroup\n            };\n            this._clearPrograms[hash] = programInfo;\n        }\n        return programInfo;\n    }\n    static initClearQuad(renderPass) {\n        this._clearStateSet = renderPass.getDevice().createRenderStateSet();\n        this._clearStateSet.useDepthState().enableTest(false);\n        this._clearStateSet.useRasterizerState().setCullMode('none');\n        this._clearStateSet.useStencilState().enable(true).setFrontOp('replace', 'replace', 'replace').setBackOp('replace', 'replace', 'replace').setFrontCompareFunc('always').setBackCompareFunc('always');\n    }\n}\nclass WebGPUMipmapGenerator {\n    static _frameBufferInfo = null;\n    static _mipmapGenerationProgram = null;\n    static _mipmapGenerationStateSet = null;\n    static getMipmapGenerationBindGroupLayout(device) {\n        if (!this._mipmapGenerationProgram) {\n            this.initMipmapGeneration(device);\n        }\n        return this._mipmapGenerationProgram.bindGroupLayouts[0];\n    }\n    static generateMipmap(device, tex, cmdEncoder) {\n        if (!tex.isRenderable()) {\n            return;\n        }\n        if (!this._mipmapGenerationProgram) {\n            this.initMipmapGeneration(device);\n        }\n        const encoder = cmdEncoder ?? device.device.createCommandEncoder();\n        const miplevels = tex.mipLevelCount;\n        const numLayers = tex.isTextureCube() ? 6 : tex.isTexture2DArray() ? tex.depth : 1;\n        tex.setMipmapDirty(false);\n        for(let face = 0; face < numLayers; face++){\n            for(let level = 1; level < miplevels; level++){\n                this.generateMiplevel(device, encoder, tex, tex.object, tex.gpuFormat, level, level, face);\n            }\n        }\n        if (!cmdEncoder) {\n            device.device.queue.submit([\n                encoder.finish()\n            ]);\n        }\n    }\n    static generateMipmapsForBindGroups(device, bindGroups) {\n        for (const bindGroup of bindGroups){\n            if (bindGroup) {\n                for (const tex of bindGroup.textureList){\n                    if (!tex.disposed && tex.isMipmapDirty()) {\n                        WebGPUMipmapGenerator.generateMipmap(device, tex);\n                    }\n                }\n            }\n        }\n    }\n    static generateMiplevel(device, commandEncoder, srcTex, dstTex, format, dstLevel, srcLevel, face) {\n        const renderPassEncoder = this.beginMipmapGenerationPass(commandEncoder, dstTex, format, dstLevel, face);\n        renderPassEncoder.setBindGroup(0, srcTex.getMipmapGenerationBindGroup(srcLevel, face).bindGroup);\n        const pipeline = device.pipelineCache.fetchRenderPipeline(this._mipmapGenerationProgram, null, this._mipmapGenerationStateSet, 'triangle-strip', this._frameBufferInfo);\n        if (pipeline) {\n            renderPassEncoder.setPipeline(pipeline);\n            renderPassEncoder.draw(4, 1, 0);\n        }\n        renderPassEncoder.end();\n    }\n    static beginMipmapGenerationPass(encoder, texture, format, level, face) {\n        const passDesc = {\n            colorAttachments: [\n                {\n                    view: texture.createView({\n                        dimension: '2d',\n                        baseMipLevel: level || 0,\n                        mipLevelCount: 1,\n                        baseArrayLayer: face || 0,\n                        arrayLayerCount: 1\n                    }),\n                    loadOp: 'clear',\n                    clearValue: [\n                        0,\n                        0,\n                        0,\n                        0\n                    ],\n                    storeOp: 'store'\n                }\n            ]\n        };\n        this._frameBufferInfo = {\n            frameBuffer: null,\n            colorFormats: [\n                format\n            ],\n            depthFormat: null,\n            sampleCount: 1,\n            hash: null,\n            clearHash: null\n        };\n        this._frameBufferInfo.hash = `${this._frameBufferInfo.colorFormats.join('-')}:${this._frameBufferInfo.depthFormat}:${this._frameBufferInfo.sampleCount}`;\n        const renderPassEncoder = encoder.beginRenderPass(passDesc);\n        renderPassEncoder.insertDebugMarker('MipmapGeneration');\n        return renderPassEncoder;\n    }\n    static initMipmapGeneration(device) {\n        this._mipmapGenerationProgram = device.buildRenderProgram({\n            label: 'MipmapGeneration',\n            vertex (pb) {\n                this.$outputs.outUV = pb.vec2();\n                this.coords = [\n                    pb.vec2(-1, 1),\n                    pb.vec2(1, 1),\n                    pb.vec2(-1, -1),\n                    pb.vec2(1, -1)\n                ];\n                this.uv = [\n                    pb.vec2(0, 0),\n                    pb.vec2(1, 0),\n                    pb.vec2(0, 1),\n                    pb.vec2(1, 1)\n                ];\n                pb.main(function() {\n                    this.$builtins.position = pb.vec4(this.coords.at(this.$builtins.vertexIndex), 0, 1);\n                    this.$outputs.outUV = this.uv.at(this.$builtins.vertexIndex);\n                });\n            },\n            fragment (pb) {\n                this.$outputs.color = pb.vec4();\n                this.tex = pb.tex2D().uniform(0);\n                pb.main(function() {\n                    this.$outputs.color = pb.textureSampleLevel(this.tex, this.$inputs.outUV, 0);\n                });\n            }\n        });\n        this._mipmapGenerationStateSet = device.createRenderStateSet();\n        this._mipmapGenerationStateSet.useDepthState().enableTest(false).enableWrite(false);\n        this._mipmapGenerationStateSet.useRasterizerState().setCullMode('none');\n    }\n}\n\nexport { WebGPUClearQuad, WebGPUMipmapGenerator };\n//# sourceMappingURL=utils_webgpu.js.map\n","import { WebGPUObject } from './gpuobject_webgpu.js';\nimport { isSRGBTextureFormat, isFloatTextureFormat, isIntegerTextureFormat, isSignedTextureFormat, isCompressedTextureFormat, hasDepthChannel, GPUResourceUsageFlags, getTextureFormatBlockWidth, getTextureFormatBlockHeight, getTextureFormatBlockSize } from '@zephyr3d/device';\nimport { UploadRingBuffer } from './uploadringbuffer.js';\nimport { textureFormatMap } from './constants_webgpu.js';\nimport { WebGPUMipmapGenerator } from './utils_webgpu.js';\n\nclass WebGPUBaseTexture extends WebGPUObject {\n    _target;\n    _hash;\n    _memCost;\n    _views;\n    _defaultView;\n    _mipmapDirty;\n    _flags;\n    _width;\n    _height;\n    _depth;\n    _format;\n    _renderable;\n    _fb;\n    _gpuFormat;\n    _mipLevelCount;\n    _samplerOptions;\n    _ringBuffer;\n    _mipBindGroups;\n    _pendingUploads;\n    constructor(device, target){\n        super(device);\n        this._target = target;\n        this._flags = 0;\n        this._width = 0;\n        this._height = 0;\n        this._depth = 0;\n        this._renderable = false;\n        this._fb = false;\n        this._format = 'unknown';\n        this._gpuFormat = null;\n        this._mipLevelCount = 0;\n        this._samplerOptions = null;\n        this._memCost = 0;\n        this._mipmapDirty = false;\n        this._mipBindGroups = [];\n        this._views = [];\n        this._defaultView = null;\n        this._ringBuffer = new UploadRingBuffer(device);\n        this._pendingUploads = [];\n    }\n    get hash() {\n        return this._object ? this._device.gpuGetObjectHash(this._object) : 0;\n    }\n    get target() {\n        return this._target;\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get depth() {\n        return this._depth;\n    }\n    get memCost() {\n        return this._memCost;\n    }\n    get format() {\n        return this._format;\n    }\n    get mipLevelCount() {\n        return this._mipLevelCount;\n    }\n    get gpuFormat() {\n        return this._gpuFormat;\n    }\n    get samplerOptions() {\n        return this._samplerOptions;\n    }\n    set samplerOptions(options) {\n        const params = this.getTextureCaps().getTextureFormatInfo(this._format);\n        this._samplerOptions = options ? Object.assign({}, this._getSamplerOptions(params, !!options.compare), options) : null;\n    }\n    isTexture() {\n        return true;\n    }\n    isFilterable() {\n        if (!this.getTextureCaps().getTextureFormatInfo(this._format)?.filterable) {\n            return false;\n        }\n        return true;\n    }\n    /** @internal */ clearPendingUploads() {\n        if (this._pendingUploads.length > 0) {\n            this._pendingUploads = [];\n            this.beginSyncChanges(null);\n            this.endSyncChanges();\n        }\n    }\n    isMipmapDirty() {\n        return this._mipmapDirty;\n    }\n    setMipmapDirty(b) {\n        this._mipmapDirty = b;\n    }\n    destroy() {\n        if (this._object) {\n            if (!this.isTextureVideo()) {\n                this._object.destroy();\n            }\n            this._object = null;\n            this._device.updateVideoMemoryCost(-this._memCost);\n            this._memCost = 0;\n            this._ringBuffer.purge();\n            this._views = [];\n            for (const face of this._mipBindGroups){\n                for (const level of face){\n                    level?.dispose();\n                }\n            }\n            this._mipBindGroups = [];\n        }\n    }\n    restore() {\n        if (!this._object && !this._device.isContextLost()) {\n            this.init();\n        }\n    }\n    getTextureCaps() {\n        return this._device.getDeviceCaps().textureCaps;\n    }\n    isSRGBFormat() {\n        return isSRGBTextureFormat(this._format);\n    }\n    isFloatFormat() {\n        return isFloatTextureFormat(this._format);\n    }\n    isIntegerFormat() {\n        return isIntegerTextureFormat(this._format);\n    }\n    isSignedFormat() {\n        return isSignedTextureFormat(this._format);\n    }\n    isCompressedFormat() {\n        return isCompressedTextureFormat(this._format);\n    }\n    isDepth() {\n        return hasDepthChannel(this._format);\n    }\n    isRenderable() {\n        return this._renderable;\n    }\n    getView(level, face, mipCount) {\n        level = Number(level) || 0;\n        face = Number(face) || 0;\n        mipCount = Number(mipCount) || 0;\n        if (!this._views[face]) {\n            this._views[face] = [];\n        }\n        if (!this._views[face][level]) {\n            this._views[face][level] = [];\n        }\n        if (!this._views[face][level][mipCount]) {\n            this._views[face][level][mipCount] = this.createView(level, face, mipCount);\n        }\n        return this._views[face][level][mipCount];\n    }\n    getDefaultView() {\n        if (!this._defaultView && this._object && !this.isTextureVideo()) {\n            this._defaultView = this._device.gpuCreateTextureView(this._object, {\n                dimension: this.isTextureCube() ? 'cube' : this.isTexture3D() ? '3d' : this.isTexture2DArray() ? '2d-array' : '2d',\n                arrayLayerCount: this.isTextureCube() ? 6 : this.isTexture2DArray() ? this._depth : 1,\n                aspect: hasDepthChannel(this.format) ? 'depth-only' : 'all'\n            });\n        }\n        return this._defaultView;\n    }\n    copyPixelDataToBuffer(x, y, w, h, layer, level, buffer) {\n        if (this.isTextureVideo()) {\n            throw new Error('copyPixelDataToBuffer() failed: can not copy pixel data of video texture');\n        }\n        this.sync();\n        WebGPUBaseTexture.copyTexturePixelsToBuffer(this._device.device, this.object, this.format, x, y, w, h, layer, level, buffer);\n    }\n    generateMipmaps() {\n        this._mipmapDirty = true;\n        this._device.textureUpload(this);\n    }\n    beginSyncChanges(encoder) {\n        if (!this.isTextureVideo() && this._pendingUploads.length > 0 && this._object) {\n            const cmdEncoder = encoder || this._device.device.createCommandEncoder();\n            for (const u of this._pendingUploads){\n                if (u.mappedBuffer) {\n                    const upload = u;\n                    cmdEncoder.copyBufferToTexture({\n                        buffer: upload.mappedBuffer.buffer,\n                        offset: upload.mappedBuffer.offset,\n                        bytesPerRow: upload.bufferStride,\n                        rowsPerImage: upload.uploadHeight\n                    }, {\n                        texture: this._object,\n                        origin: {\n                            x: upload.uploadOffsetX,\n                            y: upload.uploadOffsetY,\n                            z: upload.uploadOffsetZ\n                        },\n                        mipLevel: upload.mipLevel\n                    }, {\n                        width: upload.uploadWidth,\n                        height: upload.uploadHeight,\n                        depthOrArrayLayers: upload.uploadDepth\n                    });\n                } else if (u.image) {\n                    const upload = u;\n                    // FIXME: copy image cannot be queued into the command buffer\n                    const copyView = {\n                        texture: this._object,\n                        origin: {\n                            x: upload.offsetX,\n                            y: upload.offsetY,\n                            z: upload.offsetZ\n                        },\n                        mipLevel: upload.mipLevel,\n                        premultipliedAlpha: false\n                    };\n                    this._device.device.queue.copyExternalImageToTexture({\n                        source: upload.image,\n                        origin: {\n                            x: upload.srcX,\n                            y: upload.srcY\n                        }\n                    }, copyView, {\n                        width: upload.width,\n                        height: upload.height,\n                        depthOrArrayLayers: upload.depth\n                    });\n                }\n            }\n            this._pendingUploads.length = 0;\n            if (!encoder) {\n                this._device.device.queue.submit([\n                    cmdEncoder.finish()\n                ]);\n            }\n            this._ringBuffer.beginUploads();\n        }\n    }\n    endSyncChanges() {\n        if (this._flags & GPUResourceUsageFlags.DYNAMIC) {\n            this._ringBuffer.endUploads();\n        } else {\n            this._ringBuffer.purge();\n        }\n    }\n    getDefaultSampler(shadow) {\n        const params = this.getTextureCaps().getTextureFormatInfo(this._format);\n        return this._device.createSampler(!this._samplerOptions || !this._samplerOptions.compare !== !shadow ? this._getSamplerOptions(params, shadow) : this._samplerOptions);\n    }\n    /** @internal */ sync() {\n        this._device.flush();\n    /*\n    if (this._pendingUploads) {\n      if (this._device.isTextureUploading(this as WebGPUBaseTexture)) {\n        this._device.currentPass.end();\n      } else {\n        this.beginSyncChanges(null);\n        this.endSyncChanges();\n      }\n    }\n    */ }\n    /** @internal */ _calcMipLevelCount(format, width, height, _depth) {\n        if (hasDepthChannel(format) || this.isTexture3D() || this.isTextureVideo()) {\n            return 1;\n        }\n        if (this._flags & GPUResourceUsageFlags.TF_NO_MIPMAP) {\n            return 1;\n        }\n        const params = this.getTextureCaps().getTextureFormatInfo(format);\n        if (!params || !params.renderable) {\n            return 1;\n        }\n        return Math.floor(Math.log2(Math.max(width, height))) + 1;\n    }\n    /** @internal */ allocInternal(format, width, height, depth, numMipLevels) {\n        if (this.isTextureVideo()) {\n            return;\n        }\n        if (numMipLevels === 0) {\n            numMipLevels = this._calcMipLevelCount(format, width, height, depth);\n        } else if (numMipLevels !== 1) {\n            let size = Math.max(width, height);\n            if (this.isTexture3D()) {\n                size = Math.max(size, depth);\n            }\n            const autoMipLevelCount = Math.floor(Math.log2(size)) + 1; //this._calcMipLevelCount(format, width, height, depth);\n            //const autoMipLevelCount = this._calcMipLevelCount(format, width, height, depth);\n            if (!Number.isInteger(numMipLevels) || numMipLevels < 0 || numMipLevels > autoMipLevelCount) {\n                numMipLevels = autoMipLevelCount;\n            }\n        }\n        if (this._object && (this._format !== format || this._width !== width || this._height !== height || this._depth !== depth, this._mipLevelCount !== numMipLevels)) {\n            const obj = this._object;\n            this._device.runNextFrame(()=>{\n                obj.destroy();\n            });\n            this._object = null;\n        }\n        if (!this._object) {\n            this._format = format;\n            this._width = width;\n            this._height = height;\n            this._depth = depth;\n            this._mipLevelCount = numMipLevels;\n            if (!this._device.isContextLost()) {\n                this._gpuFormat = textureFormatMap[this._format];\n                const params = this.getTextureCaps().getTextureFormatInfo(this._format);\n                this._renderable = params.renderable && !(this._flags & GPUResourceUsageFlags.TF_WRITABLE);\n                this._object = this._device.gpuCreateTexture({\n                    size: {\n                        width: this._width,\n                        height: this._height,\n                        depthOrArrayLayers: this.isTextureCube() ? 6 : this._depth\n                    },\n                    format: this._gpuFormat,\n                    mipLevelCount: this._mipLevelCount,\n                    sampleCount: 1,\n                    dimension: this.isTexture3D() ? '3d' : '2d',\n                    usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.COPY_SRC | (this._renderable && !this.isTexture3D() ? GPUTextureUsage.RENDER_ATTACHMENT : 0) | (this._flags & GPUResourceUsageFlags.TF_WRITABLE ? GPUTextureUsage.STORAGE_BINDING : 0)\n                });\n                const memCost = this.getTextureCaps().calcMemoryUsage(this._format, this._width * this._height * (this.isTextureCube() ? 6 : this._depth));\n                this._device.updateVideoMemoryCost(memCost - this._memCost);\n                this._memCost = memCost;\n            }\n        }\n    }\n    static calculateBufferSizeForCopy(width, height, format) {\n        const blockWidth = getTextureFormatBlockWidth(format);\n        const blockHeight = getTextureFormatBlockHeight(format);\n        const blockSize = getTextureFormatBlockSize(format);\n        const blocksPerRow = Math.ceil(width / blockWidth);\n        const blocksPerCol = Math.ceil(height / blockHeight);\n        const rowStride = blocksPerRow * blockSize;\n        const bufferStride = rowStride + 255 & -256;\n        const size = blocksPerCol * rowStride;\n        const sizeAligned = blocksPerCol * bufferStride;\n        return {\n            size,\n            sizeAligned,\n            strideAligned: bufferStride,\n            stride: rowStride,\n            numRows: blocksPerCol\n        };\n    }\n    /** @internal */ static copyTexturePixelsToBuffer(device, texture, format, x, y, w, h, layer, level, buffer) {\n        if (!(buffer.gpuUsage & GPUBufferUsage.COPY_DST)) {\n            console.error('copyTexturePixelsToBuffer() failed: destination buffer does not have COPY_DST usage set');\n            return;\n        }\n        const { size, sizeAligned, stride, strideAligned, numRows } = this.calculateBufferSizeForCopy(w, h, format);\n        if (buffer.byteLength < size) {\n            console.error(`copyTexturePixelsToBuffer() failed: destination buffer size is ${buffer.byteLength}, should be at least ${size}`);\n            return;\n        }\n        const tmpBuffer = device.createBuffer({\n            size: sizeAligned,\n            usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.COPY_SRC\n        });\n        const encoder = device.createCommandEncoder();\n        encoder.copyTextureToBuffer({\n            texture: texture,\n            mipLevel: level ?? 0,\n            origin: {\n                x: x,\n                y: y,\n                z: layer ?? 0\n            }\n        }, {\n            buffer: tmpBuffer,\n            offset: 0,\n            bytesPerRow: strideAligned\n        }, {\n            width: w,\n            height: h,\n            depthOrArrayLayers: 1\n        });\n        if (size !== sizeAligned) {\n            for(let i = 0; i < numRows; i++){\n                encoder.copyBufferToBuffer(tmpBuffer, i * strideAligned, buffer.object, i * stride, stride);\n            }\n        } else {\n            encoder.copyBufferToBuffer(tmpBuffer, 0, buffer.object, 0, size);\n        }\n        device.queue.submit([\n            encoder.finish()\n        ]);\n        tmpBuffer.destroy();\n    }\n    /** @internal */ uploadRaw(pixels, width, height, depth, offsetX, offsetY, offsetZ, miplevel) {\n        if (this.isTextureVideo()) {\n            console.error('BaseTexture.uploadRaw(): Cannot upload to video texture');\n            return;\n        }\n        const data = new Uint8Array(pixels.buffer, pixels.byteOffset, pixels.byteLength);\n        const info = this.getTextureCaps().getTextureFormatInfo(this._format);\n        const blockWidth = info.blockWidth || 1;\n        const blockHeight = info.blockHeight || 1;\n        const blocksPerRow = Math.ceil(width / blockWidth);\n        const blocksPerCol = Math.ceil(height / blockHeight);\n        const rowStride = blocksPerRow * info.size;\n        if (rowStride * blocksPerCol * depth > data.byteLength) {\n            throw new Error(`WebGPUTexture.update() invalid data size: ${data.byteLength}`);\n        }\n        if (!this._device.isTextureUploading(this)) {\n            this.clearPendingUploads();\n            //this._device.textureUpload(this as WebGPUBaseTexture);\n            const destination = {\n                texture: this._object,\n                mipLevel: miplevel,\n                origin: {\n                    x: offsetX,\n                    y: offsetY,\n                    z: offsetZ\n                }\n            };\n            const dataLayout = {\n                bytesPerRow: rowStride,\n                rowsPerImage: blockHeight * blocksPerCol\n            };\n            const size = {\n                width: blockWidth * blocksPerRow,\n                height: blockHeight * blocksPerCol,\n                depthOrArrayLayers: depth\n            };\n            this._device.device.queue.writeTexture(destination, data, dataLayout, size);\n        } else {\n            const bufferStride = rowStride + 255 & -256; // align to 256 bytes\n            const uploadSize = bufferStride * blocksPerCol * depth;\n            const upload = this._ringBuffer.uploadBuffer(null, null, 0, 0, uploadSize);\n            const mappedRange = upload.mappedBuffer.mappedRange;\n            const src = new Uint8Array(data);\n            const dst = new Uint8Array(mappedRange, upload.mappedBuffer.offset, uploadSize);\n            if (uploadSize === data.byteLength) {\n                dst.set(new Uint8Array(data));\n            } else {\n                for(let d = 0; d < depth; d++){\n                    const srcLayerOffset = d * rowStride * blocksPerRow;\n                    const dstLayerOffset = d * bufferStride * blocksPerCol;\n                    for(let i = 0; i < blocksPerCol; i++){\n                        dst.set(src.subarray(srcLayerOffset + i * rowStride, srcLayerOffset + (i + 1) * rowStride), dstLayerOffset + i * bufferStride);\n                    }\n                }\n            }\n            this._pendingUploads.push({\n                mappedBuffer: upload.mappedBuffer,\n                uploadOffsetX: offsetX,\n                uploadOffsetY: offsetY,\n                uploadOffsetZ: offsetZ,\n                uploadWidth: blockWidth * blocksPerRow,\n                uploadHeight: blockHeight * blocksPerCol,\n                uploadDepth: depth,\n                bufferStride: bufferStride,\n                mipLevel: miplevel\n            });\n            this._device.textureUpload(this);\n        }\n    }\n    /** @internal */ uploadImageData(data, srcX, srcY, width, height, destX, destY, miplevel, layer) {\n        if (this.isTextureVideo()) {\n            console.error('BaseTexture.uploadImageData(): Cannot upload to video texture');\n            return;\n        }\n        if (!this._device.isTextureUploading(this) && this._device.device.queue.copyExternalImageToTexture) {\n            this.clearPendingUploads();\n            const copyView = {\n                texture: this._object,\n                origin: {\n                    x: destX,\n                    y: destY,\n                    z: layer ?? 0\n                },\n                mipLevel: miplevel ?? 0,\n                premultipliedAlpha: false\n            };\n            this._device.device.queue.copyExternalImageToTexture({\n                source: data\n            }, copyView, {\n                width: width,\n                height: height,\n                depthOrArrayLayers: 1\n            });\n        } else {\n            this._pendingUploads.push({\n                image: data,\n                offsetX: destX,\n                offsetY: destY,\n                offsetZ: layer ?? 0,\n                srcX: srcX ?? 0,\n                srcY: srcY ?? 0,\n                srcZ: 0,\n                width: width,\n                height: height,\n                depth: 1,\n                mipLevel: miplevel ?? 0\n            });\n            this._device.textureUpload(this);\n        }\n    }\n    getMipmapGenerationBindGroup(level, face) {\n        const faceGroups = this._mipBindGroups;\n        let levelGroups = faceGroups[face];\n        if (!levelGroups) {\n            levelGroups = [];\n            faceGroups[face] = levelGroups;\n        }\n        let levelGroup = levelGroups[level];\n        if (!levelGroup) {\n            levelGroup = this._device.createBindGroup(WebGPUMipmapGenerator.getMipmapGenerationBindGroupLayout(this._device));\n            levelGroup.setTextureView('tex', this, level - 1, face, 1);\n            levelGroups[level] = levelGroup;\n        }\n        return levelGroup;\n    }\n    /** @internal */ _getSamplerOptions(params, shadow) {\n        const comparison = this.isDepth() && shadow;\n        const filterable = params.filterable || comparison;\n        const magFilter = filterable ? 'linear' : 'nearest';\n        const minFilter = params.filterable ? 'linear' : 'nearest';\n        const mipFilter = this._mipLevelCount > 1 ? filterable ? 'linear' : 'nearest' : 'none';\n        return {\n            addressU: 'clamp',\n            addressV: 'clamp',\n            addressW: 'clamp',\n            magFilter,\n            minFilter,\n            mipFilter,\n            compare: comparison ? 'lt' : null\n        };\n    }\n    /** @internal */ _markAsCurrentFB(b) {\n        this._fb = b;\n    }\n    /** @internal */ _isMarkedAsCurrentFB() {\n        return this._fb;\n    }\n}\n\nexport { WebGPUBaseTexture };\n//# sourceMappingURL=basetexture_webgpu.js.map\n","import { GPUResourceUsageFlags, linearTextureFormatToSRGB } from '@zephyr3d/device';\nimport { WebGPUBaseTexture } from './basetexture_webgpu.js';\n\nclass WebGPUTexture2D extends WebGPUBaseTexture {\n    constructor(device){\n        super(device, '2d');\n    }\n    isTexture2D() {\n        return true;\n    }\n    init() {\n        this.loadEmpty(this._format, this._width, this._height, this._mipLevelCount);\n    }\n    update(data, xOffset, yOffset, width, height) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        if (!this._object) {\n            this.allocInternal(this._format, this._width, this._height, 1, this._mipLevelCount);\n        }\n        this.uploadRaw(data, width, height, 1, xOffset, yOffset, 0, 0);\n        if (this._mipLevelCount > 1) {\n            this.generateMipmaps();\n        }\n    }\n    updateFromElement(data, destX, destY, srcX, srcY, width, height) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        if (!this._object) {\n            this.allocInternal(this._format, this._width, this._height, 1, this._mipLevelCount);\n        }\n        if (data instanceof HTMLCanvasElement || this._device.isTextureUploading(this)) {\n            // Copy the pixel values out in case the canvas content may be changed later\n            const cvs = document.createElement('canvas');\n            cvs.width = width;\n            cvs.height = height;\n            const ctx = cvs.getContext('2d');\n            ctx.drawImage(data, srcX, srcY, width, height, 0, 0, width, height);\n            const imageData = ctx.getImageData(0, 0, width, height);\n            this.update(imageData.data, destX, destY, width, height);\n            cvs.width = 0;\n            cvs.height = 0;\n        } else {\n            this.uploadImageData(data, srcX, srcY, width, height, destX, destY, 0, 0);\n        }\n    }\n    async readPixels(x, y, w, h, faceOrLayer, mipLevel, buffer) {\n        if (faceOrLayer !== 0) {\n            throw new Error(`Texture2D.readPixels(): parameter faceOrLayer must be 0`);\n        }\n        if (mipLevel >= this.mipLevelCount || mipLevel < 0) {\n            throw new Error(`Texture2D.readPixels(): invalid miplevel: ${mipLevel}`);\n        }\n        const { size } = WebGPUBaseTexture.calculateBufferSizeForCopy(w, h, this.format);\n        if (buffer.byteLength < size) {\n            throw new Error(`Texture2D.readPixels() failed: destination buffer size is ${buffer.byteLength}, should be at least ${size}`);\n        }\n        const tmpBuffer = this._device.createBuffer(size, {\n            usage: 'read'\n        });\n        await this.copyPixelDataToBuffer(x, y, w, h, 0, mipLevel, tmpBuffer);\n        await tmpBuffer.getBufferSubData(new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength), 0, size);\n        tmpBuffer.dispose();\n    }\n    readPixelsToBuffer(x, y, w, h, faceOrLayer, mipLevel, buffer) {\n        if (faceOrLayer !== 0) {\n            throw new Error(`Texture2D.readPixels(): parameter faceOrLayer must be 0`);\n        }\n        if (mipLevel >= this.mipLevelCount || mipLevel < 0) {\n            throw new Error(`Texture2D.readPixels(): invalid miplevel: ${mipLevel}`);\n        }\n        this.copyPixelDataToBuffer(x, y, w, h, 0, mipLevel, buffer);\n    }\n    loadFromElement(element, sRGB, creationFlags) {\n        this._flags = Number(creationFlags) || 0;\n        const format = sRGB ? 'rgba8unorm-srgb' : 'rgba8unorm';\n        this.loadImage(element, format);\n    }\n    createEmpty(format, width, height, creationFlags) {\n        this._flags = Number(creationFlags) || 0;\n        this.loadEmpty(format, width, height, 0);\n    }\n    createView(level, face, mipCount) {\n        return this._object ? this._device.gpuCreateTextureView(this._object, {\n            dimension: '2d',\n            baseMipLevel: level ?? 0,\n            mipLevelCount: mipCount || this._mipLevelCount - (level ?? 0),\n            baseArrayLayer: 0,\n            arrayLayerCount: 1\n        }) : null;\n    }\n    createWithMipmapData(data, sRGB, creationFlags) {\n        if (data.isCubemap || data.isVolume) {\n            console.error('loading 2d texture with mipmap data failed: data is not 2d texture');\n        } else {\n            this._flags = Number(creationFlags) || 0;\n            if (this._flags & GPUResourceUsageFlags.TF_WRITABLE) {\n                console.error(new Error('webgl device does not support storage texture'));\n            } else {\n                this.loadLevels(data, sRGB);\n            }\n        }\n    }\n    /** @internal */ loadEmpty(format, width, height, numMipLevels) {\n        this.allocInternal(format, width, height, 1, numMipLevels);\n        if (this._mipLevelCount > 1 && !this._device.isContextLost()) {\n            this.generateMipmaps();\n        }\n    }\n    /** @internal */ loadLevels(levels, sRGB) {\n        let format = sRGB ? linearTextureFormatToSRGB(levels.format) : levels.format;\n        let swizzle = false;\n        if (format === 'bgra8unorm') {\n            format = 'rgba8unorm';\n            swizzle = true;\n        } else if (this._format === 'bgra8unorm-srgb') {\n            format = 'rgba8unorm-srgb';\n            swizzle = true;\n        }\n        const width = levels.width;\n        const height = levels.height;\n        const mipLevelCount = levels.mipLevels;\n        if (levels.isCompressed) {\n            if (!this.getTextureCaps().supportS3TCSRGB || !this.getTextureCaps().supportS3TC) {\n                console.error('No s3tc compression format support');\n                return;\n            }\n        }\n        this.allocInternal(format, width, height, 1, mipLevelCount);\n        if (!this._device.isContextLost()) {\n            for(let i = 0; i < levels.mipDatas[0].length; i++){\n                if (swizzle) {\n                    // convert bgra to rgba\n                    for(let j = 0; j < levels.mipDatas[0][i].width * levels.mipDatas[0][i].height; j++){\n                        const t = levels.mipDatas[0][i].data[j * 4];\n                        levels.mipDatas[0][i].data[j * 4] = levels.mipDatas[0][i].data[j * 4 + 2];\n                        levels.mipDatas[0][i].data[j * 4 + 2] = t;\n                    }\n                }\n                this.uploadRaw(levels.mipDatas[0][i].data, levels.mipDatas[0][i].width, levels.mipDatas[0][i].height, 1, 0, 0, 0, i);\n            }\n        }\n    }\n    /** @internal */ loadImage(element, format) {\n        this.allocInternal(format, Number(element.width), Number(element.height), 1, 0);\n        if (!this._device.isContextLost()) {\n            this.updateFromElement(element, 0, 0, 0, 0, this._width, this._height);\n            if (this._mipLevelCount > 1) {\n                this.generateMipmaps();\n            }\n        }\n    }\n}\n\nexport { WebGPUTexture2D };\n//# sourceMappingURL=texture2d_webgpu.js.map\n","import { GPUResourceUsageFlags } from '@zephyr3d/device';\nimport { WebGPUBaseTexture } from './basetexture_webgpu.js';\n\nclass WebGPUTexture2DArray extends WebGPUBaseTexture {\n    constructor(device){\n        super(device, '2darray');\n    }\n    isTexture2DArray() {\n        return true;\n    }\n    init() {\n        this.loadEmpty(this._format, this._width, this._height, this._depth, this._mipLevelCount);\n    }\n    update(data, xOffset, yOffset, zOffset, width, height, depth) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        if (!this._object) {\n            this.allocInternal(this._format, this._width, this._height, this._depth, this._mipLevelCount);\n        }\n        this.uploadRaw(data, width, height, depth, xOffset, yOffset, zOffset, 0);\n        if (this._mipLevelCount > 1) {\n            this.generateMipmaps();\n        }\n    }\n    updateFromElement(data, destX, destY, destZ, srcX, srcY, width, height) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        if (!this._object) {\n            this.allocInternal(this._format, this._width, this._height, this._depth, this._mipLevelCount);\n        }\n        if (data instanceof HTMLCanvasElement || this._device.isTextureUploading(this)) {\n            // Copy the pixel values out in case the canvas content may be changed later\n            const cvs = document.createElement('canvas');\n            cvs.width = width;\n            cvs.height = height;\n            const ctx = cvs.getContext('2d');\n            ctx.drawImage(data, srcX, srcY, width, height, 0, 0, width, height);\n            const imageData = ctx.getImageData(0, 0, width, height);\n            this.update(imageData.data, destX, destY, destZ, width, height, 1);\n            cvs.width = 0;\n            cvs.height = 0;\n        } else {\n            this.uploadImageData(data, srcX, srcY, width, height, destX, destY, 0, destZ);\n        }\n    }\n    createEmpty(format, width, height, depth, creationFlags) {\n        this._flags = Number(creationFlags) || 0;\n        this.loadEmpty(format, width, height, depth, 0);\n    }\n    createWithMipmapData(data, creationFlags) {\n        if (!data.arraySize) {\n            console.error('Texture2DArray.createWithMipmapData() failed: Data is not texture array');\n        } else {\n            this._flags = Number(creationFlags) || 0;\n            if (this._flags & GPUResourceUsageFlags.TF_WRITABLE) {\n                console.error('Texture2DArray.createWithMipmapData() failed: Webgl device does not support storage texture');\n            } else {\n                this.loadLevels(data);\n            }\n        }\n    }\n    createView(level, face, mipCount) {\n        return this._object ? this._device.gpuCreateTextureView(this._object, {\n            dimension: '2d',\n            baseMipLevel: level ?? 0,\n            mipLevelCount: mipCount || this._mipLevelCount - (level ?? 0),\n            baseArrayLayer: face ?? 0,\n            arrayLayerCount: 1\n        }) : null;\n    }\n    async readPixels(x, y, w, h, layer, mipLevel, buffer) {\n        if (layer < 0 || layer >= this._depth) {\n            throw new Error(`Texture2DArray.readPixels(): invalid layer: ${layer}`);\n        }\n        if (mipLevel < 0 || mipLevel >= this.mipLevelCount) {\n            throw new Error(`Texture2DArray.readPixels(): invalid miplevel: ${mipLevel}`);\n        }\n        const { size } = WebGPUBaseTexture.calculateBufferSizeForCopy(w, h, this.format);\n        if (buffer.byteLength < size) {\n            throw new Error(`Texture2D.readPixels() failed: destination buffer size is ${buffer.byteLength}, should be at least ${size}`);\n        }\n        const tmpBuffer = this._device.createBuffer(size, {\n            usage: 'read'\n        });\n        await this.copyPixelDataToBuffer(x, y, w, h, layer, mipLevel, tmpBuffer);\n        await tmpBuffer.getBufferSubData(new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength), 0, size);\n        tmpBuffer.dispose();\n    }\n    readPixelsToBuffer(x, y, w, h, layer, mipLevel, buffer) {\n        if (layer < 0 || layer >= this._depth) {\n            throw new Error(`Texture2DArray.readPixelsToBuffer(): invalid layer: ${layer}`);\n        }\n        if (mipLevel < 0 || mipLevel >= this.mipLevelCount) {\n            throw new Error(`Texture2DArray.readPixelsToBuffer(): invalid miplevel: ${mipLevel}`);\n        }\n        this.copyPixelDataToBuffer(x, y, w, h, layer, mipLevel, buffer);\n    }\n    loadEmpty(format, width, height, depth, numMipLevels) {\n        this.allocInternal(format, width, height, depth, numMipLevels);\n        if (this._mipLevelCount > 1 && !this._device.isContextLost()) {\n            this.generateMipmaps();\n        }\n    }\n    loadLevels(levels) {\n        const format = levels.format;\n        const width = levels.width;\n        const height = levels.height;\n        const depth = levels.arraySize;\n        const mipLevelCount = levels.mipLevels === 1 && !(this._flags & GPUResourceUsageFlags.TF_NO_MIPMAP) ? this._calcMipLevelCount(levels.format, width, height, depth) : levels.mipLevels;\n        if (levels.isCompressed) {\n            if (!this.getTextureCaps().supportS3TCSRGB || !this.getTextureCaps().supportS3TC) {\n                console.error('Texture2DArray.loadLevels(): No s3tc compression format support');\n                return;\n            }\n        }\n        this.allocInternal(format, width, height, levels.arraySize, mipLevelCount);\n        if (!this._device.isContextLost()) {\n            for(let layer = 0; layer < levels.arraySize; layer++){\n                if (levels.mipDatas[layer].length !== levels.mipLevels) {\n                    console.error(`Texture2DArray.loadLevels() failed: Invalid texture data`);\n                    return;\n                }\n                for(let i = 0; i < levels.mipLevels; i++){\n                    this.uploadRaw(levels.mipDatas[layer][i].data, levels.mipDatas[layer][i].width, levels.mipDatas[layer][i].height, 1, 0, 0, layer, i);\n                }\n            }\n            if (levels.mipLevels !== this.mipLevelCount) {\n                this.generateMipmaps();\n            }\n        }\n    }\n}\n\nexport { WebGPUTexture2DArray };\n//# sourceMappingURL=texture2darray_webgpu.js.map\n","import { GPUResourceUsageFlags } from '@zephyr3d/device';\nimport { WebGPUBaseTexture } from './basetexture_webgpu.js';\n\nclass WebGPUTexture3D extends WebGPUBaseTexture {\n    constructor(device){\n        super(device, '3d');\n    }\n    isTexture3D() {\n        return true;\n    }\n    init() {\n        this.loadEmpty(this._format, this._width, this._height, this._depth, this._mipLevelCount);\n    }\n    update(data, xOffset, yOffset, zOffset, width, height, depth) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        if (!this._object) {\n            this.allocInternal(this._format, this._width, this._height, this._depth, this._mipLevelCount);\n        }\n        this.uploadRaw(data, width, height, depth, xOffset, yOffset, zOffset, 0);\n    }\n    createEmpty(format, width, height, depth, creationFlags) {\n        this._flags = Number(creationFlags) || 0;\n        this.loadEmpty(format, width, height, depth, 0);\n    }\n    createView(_level, face, _mipCount) {\n        return this._object ? this._device.gpuCreateTextureView(this._object, {\n            dimension: '2d',\n            baseMipLevel: 0,\n            mipLevelCount: 1,\n            baseArrayLayer: face,\n            arrayLayerCount: 1\n        }) : null;\n    }\n    async readPixels(x, y, w, h, layer, mipLevel, buffer) {\n        if (mipLevel !== 0) {\n            throw new Error(`Texture3D.readPixels(): parameter mipLevel must be 0`);\n        }\n        const { size } = WebGPUBaseTexture.calculateBufferSizeForCopy(w, h, this.format);\n        if (buffer.byteLength < size) {\n            throw new Error(`Texture2D.readPixels() failed: destination buffer size is ${buffer.byteLength}, should be at least ${size}`);\n        }\n        const tmpBuffer = this._device.createBuffer(size, {\n            usage: 'read'\n        });\n        await this.copyPixelDataToBuffer(x, y, w, h, layer, 0, tmpBuffer);\n        await tmpBuffer.getBufferSubData(new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength), 0, size);\n        tmpBuffer.dispose();\n    }\n    readPixelsToBuffer(x, y, w, h, layer, mipLevel, buffer) {\n        if (mipLevel !== 0) {\n            throw new Error(`Texture3D.readPixelsToBuffer(): parameter mipLevel must be 0`);\n        }\n        this.copyPixelDataToBuffer(x, y, w, h, layer, 0, buffer);\n    }\n    createWithMipmapData(data, creationFlags) {\n        if (!data.arraySize) {\n            console.error('Texture2DArray.createWithMipmapData() failed: Data is not texture array');\n        } else {\n            this._flags = Number(creationFlags) || 0;\n            if (this._flags & GPUResourceUsageFlags.TF_WRITABLE) {\n                console.error('Texture2DArray.createWithMipmapData() failed: Webgl device does not support storage texture');\n            } else {\n                this.loadLevels(data);\n            }\n        }\n    }\n    loadLevels(levels) {\n        const format = levels.format;\n        const width = levels.width;\n        const height = levels.height;\n        const depth = levels.depth;\n        const mipLevelCount = levels.mipLevels === 1 && !(this._flags & GPUResourceUsageFlags.TF_NO_MIPMAP) ? this._calcMipLevelCount(levels.format, width, height, depth) : levels.mipLevels;\n        if (levels.isCompressed) {\n            if (!this.getTextureCaps().supportS3TCSRGB || !this.getTextureCaps().supportS3TC) {\n                console.error('Texture3D.loadLevels(): No s3tc compression format support');\n                return;\n            }\n        }\n        this.allocInternal(format, width, height, depth, mipLevelCount);\n        if (!this._device.isContextLost()) {\n            for(let layer = 0; layer < depth; layer++){\n                if (levels.mipDatas[layer].length !== levels.mipLevels) {\n                    console.error(`Texture3D.loadLevels() failed: Invalid texture data`);\n                    return;\n                }\n                for(let i = 0; i < levels.mipLevels; i++){\n                    this.uploadRaw(levels.mipDatas[layer][i].data, levels.mipDatas[layer][i].width, levels.mipDatas[layer][i].height, 1, 0, 0, layer, i);\n                }\n            }\n            if (levels.mipLevels !== this.mipLevelCount) {\n                this.generateMipmaps();\n            }\n        }\n    }\n    loadEmpty(format, width, height, depth, numMipLevels) {\n        this.allocInternal(format, width, height, depth, numMipLevels);\n        if (this._mipLevelCount > 1 && !this._device.isContextLost()) {\n            this.generateMipmaps();\n        }\n    }\n}\n\nexport { WebGPUTexture3D };\n//# sourceMappingURL=texture3d_webgpu.js.map\n","import { GPUResourceUsageFlags, linearTextureFormatToSRGB } from '@zephyr3d/device';\nimport { WebGPUBaseTexture } from './basetexture_webgpu.js';\n\nclass WebGPUTextureCube extends WebGPUBaseTexture {\n    constructor(device){\n        super(device, 'cube');\n    }\n    init() {\n        this.loadEmpty(this._format, this._width, this._mipLevelCount);\n    }\n    update(data, xOffset, yOffset, width, height, face) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        if (!this._object) {\n            this.allocInternal(this._format, this._width, this._height, 1, this._mipLevelCount);\n        }\n        this.uploadRaw(data, width, height, 1, xOffset, yOffset, face, 0);\n        if (this._mipLevelCount > 1) {\n            this.generateMipmaps();\n        }\n    }\n    updateFromElement(data, destX, destY, face, srcX, srcY, width, height) {\n        if (this._device.isContextLost()) {\n            return;\n        }\n        if (!this._object) {\n            this.allocInternal(this._format, this._width, this._height, 1, this._mipLevelCount);\n        }\n        if (data instanceof HTMLCanvasElement || this._device.isTextureUploading(this)) {\n            // Copy the pixel values out in case the canvas content may be changed later\n            const cvs = document.createElement('canvas');\n            cvs.width = width;\n            cvs.height = height;\n            const ctx = cvs.getContext('2d');\n            ctx.drawImage(data, srcX, srcY, width, height, 0, 0, width, height);\n            const imageData = ctx.getImageData(0, 0, width, height);\n            this.update(imageData.data, destX, destY, width, height, face);\n            cvs.width = 0;\n            cvs.height = 0;\n        } else {\n            this.uploadImageData(data, srcX, srcY, width, height, destX, destY, 0, face);\n        }\n    }\n    createEmpty(format, size, creationFlags) {\n        this._flags = Number(creationFlags) || 0;\n        if (this._flags & GPUResourceUsageFlags.TF_WRITABLE) {\n            console.error(new Error('storage texture can not be cube texture'));\n        } else {\n            this.loadEmpty(format, size, 0);\n        }\n    }\n    isTextureCube() {\n        return true;\n    }\n    createView(level, face, mipCount) {\n        return this._object ? this._device.gpuCreateTextureView(this._object, {\n            format: this._gpuFormat,\n            dimension: '2d',\n            baseMipLevel: level ?? 0,\n            mipLevelCount: mipCount || this._mipLevelCount - (level ?? 0),\n            baseArrayLayer: face ?? 0,\n            arrayLayerCount: 1,\n            aspect: 'all'\n        }) : null;\n    }\n    async readPixels(x, y, w, h, face, mipLevel, buffer) {\n        if (mipLevel < 0 || mipLevel >= this.mipLevelCount) {\n            throw new Error(`TextureCube.readPixels(): invalid miplevel: ${mipLevel}`);\n        }\n        const { size } = WebGPUBaseTexture.calculateBufferSizeForCopy(w, h, this.format);\n        if (buffer.byteLength < size) {\n            throw new Error(`Texture2D.readPixels() failed: destination buffer size is ${buffer.byteLength}, should be at least ${size}`);\n        }\n        const tmpBuffer = this._device.createBuffer(size, {\n            usage: 'read'\n        });\n        await this.copyPixelDataToBuffer(x, y, w, h, face, mipLevel, tmpBuffer);\n        await tmpBuffer.getBufferSubData(new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength), 0, size);\n        tmpBuffer.dispose();\n    }\n    readPixelsToBuffer(x, y, w, h, face, mipLevel, buffer) {\n        if (mipLevel < 0 || mipLevel >= this.mipLevelCount) {\n            throw new Error(`TextureCube.readPixelsToBuffer(): invalid miplevel: ${mipLevel}`);\n        }\n        this.copyPixelDataToBuffer(x, y, w, h, face, mipLevel, buffer);\n    }\n    createWithMipmapData(data, sRGB, creationFlags) {\n        if (!data.isCubemap) {\n            console.error('loading cubmap with mipmap data failed: data is not cubemap');\n        } else {\n            this._flags = Number(creationFlags) || 0;\n            if (this._flags & GPUResourceUsageFlags.TF_WRITABLE) {\n                console.error('webgl device does not support storage texture');\n            } else {\n                this.loadLevels(data, sRGB);\n            }\n        }\n    }\n    /** @internal */ loadEmpty(format, size, mipLevelCount) {\n        this.allocInternal(format, size, size, 1, mipLevelCount);\n        if (this._mipLevelCount > 1 && !this._device.isContextLost()) {\n            this.generateMipmaps();\n        }\n    }\n    /** @internal */ /*\n  private loadImages(images: HTMLImageElement[], format: TextureFormat): void {\n    const width = images[0].width;\n    const height = images[0].height;\n    if (images.length !== 6) {\n      console.error(new Error('cubemap face list must have 6 images'));\n      return;\n    }\n    for (let i = 1; i < 6; i++) {\n      if (images[i].width !== width || images[i].height !== height) {\n        console.error(new Error('cubemap face images must have identical sizes'));\n        return;\n      }\n    }\n    if (width === 0 || height === 0) {\n      return;\n    }\n    this.allocInternal(format, width, height, 1, 0);\n    if (!this._device.isContextLost()) {\n      const w = this._width;\n      const h = this._height;\n      for (let face = 0; face < 6; face++) {\n        createImageBitmap(images[face], {\n          premultiplyAlpha: 'none'\n        }).then((bmData) => {\n          this.updateFromElement(bmData, 0, 0, face, 0, 0, w, h);\n        });\n      }\n      if (this._mipLevelCount > 1) {\n        this.generateMipmaps();\n      }\n    }\n  }\n  */ /** @internal */ loadLevels(levels, sRGB) {\n        const format = sRGB ? linearTextureFormatToSRGB(levels.format) : levels.format;\n        const width = levels.width;\n        const height = levels.height;\n        //const mipLevelCount = levels.mipLevels;\n        const mipLevelCount = levels.mipLevels === 1 && !(this._flags & GPUResourceUsageFlags.TF_NO_MIPMAP) ? this._calcMipLevelCount(levels.format, width, height, 1) : levels.mipLevels;\n        if (levels.isCompressed) {\n            if (!this.getTextureCaps().supportS3TCSRGB || !this.getTextureCaps().supportS3TC) {\n                console.error('TextureCube.loadLevels(): No s3tc compression format support');\n                return;\n            }\n        }\n        this.allocInternal(format, width, height, 1, mipLevelCount);\n        if (!this._device.isContextLost()) {\n            for(let face = 0; face < 6; face++){\n                if (levels.mipDatas[face].length !== levels.mipLevels) {\n                    console.error(`TextureCube.loadLevels() failed: Invalid texture data`);\n                    return;\n                }\n                for(let i = 0; i < levels.mipLevels; i++){\n                    this.uploadRaw(levels.mipDatas[face][i].data, levels.mipDatas[face][i].width, levels.mipDatas[face][i].height, 1, 0, 0, face, i);\n                }\n            }\n        }\n        if (levels.mipLevels !== this.mipLevelCount) {\n            this.generateMipmaps();\n        }\n    }\n}\n\nexport { WebGPUTextureCube };\n//# sourceMappingURL=texturecube_webgpu.js.map\n","import { WebGPUBaseTexture } from './basetexture_webgpu.js';\n\nclass WebGPUTextureVideo extends WebGPUBaseTexture {\n    _source;\n    _refBindGroups;\n    constructor(device, element){\n        super(device, '2d');\n        this._source = element;\n        this._width = 0;\n        this._height = 0;\n        this._refBindGroups = [];\n        this.loadFromElement();\n    }\n    isTextureVideo() {\n        return true;\n    }\n    addBindGroupReference(bindGroup) {\n        this._refBindGroups.push(bindGroup);\n    }\n    removeBindGroupReference(bindGroup) {\n        const index = this._refBindGroups.indexOf(bindGroup);\n        if (index >= 0) {\n            this._refBindGroups.splice(index, 1);\n        }\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get source() {\n        return this._source;\n    }\n    restore() {\n        if (!this._object && !this._device.isContextLost()) {\n            this.loadElement(this._source);\n        }\n    }\n    updateVideoFrame() {\n        if (this._source.readyState > 2) {\n            const videoFrame = new window.VideoFrame(this._source);\n            videoFrame.close();\n            this._object = this._device.gpuImportExternalTexture(this._source);\n            return true;\n        }\n        return false;\n    }\n    createView(_level, _face, _mipCount) {\n        return null;\n    }\n    init() {\n        this.loadFromElement();\n    }\n    readPixels(_x, _y, _w, _h, _faceOrLayer, _mipLevel, _buffer) {\n        throw new Error(`Video texture does not support readPixels()`);\n    }\n    readPixelsToBuffer(_x, _y, _w, _h, _faceOrLayer, _mipLevel, _buffer) {\n        throw new Error(`Video texture does not support readPixelsToBuffer()`);\n    }\n    /** @internal */ loadFromElement() {\n        this.loadElement(this._source);\n    }\n    /** @internal */ loadElement(element) {\n        this._format = 'rgba8unorm';\n        this._width = element.videoWidth;\n        this._height = element.videoHeight;\n        this._depth = 1;\n        this._mipLevelCount = 1;\n        if (!this._device.isContextLost()) {\n            if (element.readyState > 2) {\n                this._object = this._device.gpuImportExternalTexture(element);\n                const that = this;\n                this._device.runNextFrame(function updateVideoFrame() {\n                    if (!that.disposed) {\n                        if (that._source.readyState > 2) {\n                            const videoFrame = new window.VideoFrame(that._source);\n                            videoFrame.close();\n                            that._object = that._device.gpuImportExternalTexture(that._source);\n                            for (const bindGroup of that._refBindGroups){\n                                bindGroup.invalidate();\n                            }\n                        }\n                        that._device.runNextFrame(updateVideoFrame);\n                    }\n                });\n            }\n        }\n        return !!this._object;\n    }\n}\n\nexport { WebGPUTextureVideo };\n//# sourceMappingURL=texturevideo_webgpu.js.map\n","class WebGPUFramebufferCaps {\n    maxDrawBuffers;\n    maxColorAttachmentBytesPerSample;\n    supportRenderMipmap;\n    supportMultisampledFramebuffer;\n    supportFloatBlending;\n    supportDepth32float;\n    supportDepth32floatStencil8;\n    constructor(device){\n        this.maxDrawBuffers = device.device.limits.maxColorAttachments;\n        this.maxColorAttachmentBytesPerSample = device.device.limits.maxColorAttachmentBytesPerSample;\n        this.supportRenderMipmap = true;\n        this.supportMultisampledFramebuffer = true;\n        this.supportFloatBlending = device.device.features.has('float32-blendable');\n        this.supportDepth32float = true;\n        this.supportDepth32floatStencil8 = device.device.features.has('depth32float-stencil8');\n    }\n}\nclass WebGPUMiscCaps {\n    supportOversizedViewport;\n    supportBlendMinMax;\n    support32BitIndex;\n    supportDepthClamp;\n    maxBindGroups;\n    maxTexCoordIndex;\n    constructor(device){\n        this.supportOversizedViewport = false;\n        this.supportBlendMinMax = true;\n        this.support32BitIndex = true;\n        this.supportDepthClamp = device.device.features.has('depth-clip-control');\n        this.maxBindGroups = 4;\n        this.maxTexCoordIndex = 8;\n    }\n}\nclass WebGPUShaderCaps {\n    supportFragmentDepth;\n    supportStandardDerivatives;\n    supportShaderTextureLod;\n    supportHighPrecisionFloat;\n    supportHighPrecisionInt;\n    maxUniformBufferSize;\n    uniformBufferOffsetAlignment;\n    maxStorageBufferSize;\n    storageBufferOffsetAlignment;\n    constructor(device){\n        this.supportFragmentDepth = true;\n        this.supportStandardDerivatives = true;\n        this.supportShaderTextureLod = true;\n        this.supportHighPrecisionFloat = true;\n        this.maxUniformBufferSize = device.device.limits.maxUniformBufferBindingSize || 65536;\n        this.uniformBufferOffsetAlignment = device.device.limits.minUniformBufferOffsetAlignment || 256;\n        this.maxStorageBufferSize = device.device.limits.maxStorageBufferBindingSize || 128 * 1024 * 1024;\n        this.storageBufferOffsetAlignment = device.device.limits.minStorageBufferOffsetAlignment || 256;\n    }\n}\nclass WebGPUTextureCaps {\n    _textureFormatInfos;\n    maxTextureSize;\n    maxCubeTextureSize;\n    npo2Mipmapping;\n    npo2Repeating;\n    supportS3TC;\n    supportS3TCSRGB;\n    supportBPTC;\n    supportRGTC;\n    supportASTC;\n    supportDepthTexture;\n    support3DTexture;\n    supportSRGBTexture;\n    supportFloatTexture;\n    supportLinearFloatTexture;\n    supportHalfFloatTexture;\n    supportLinearHalfFloatTexture;\n    supportAnisotropicFiltering;\n    supportFloatColorBuffer;\n    supportHalfFloatColorBuffer;\n    supportFloatBlending;\n    constructor(device){\n        this.supportAnisotropicFiltering = true;\n        this.supportDepthTexture = true;\n        this.support3DTexture = true;\n        this.supportSRGBTexture = true;\n        this.supportFloatTexture = true;\n        this.supportFloatColorBuffer = true;\n        this.supportHalfFloatColorBuffer = true;\n        this.supportFloatBlending = true;\n        this.supportS3TC = device.device.features.has('texture-compression-bc');\n        this.supportS3TCSRGB = this.supportS3TC;\n        this.supportBPTC = this.supportS3TC;\n        this.supportRGTC = this.supportS3TC;\n        this.supportASTC = device.device.features.has('texture-compression-astc');\n        this.supportHalfFloatTexture = true;\n        this.maxTextureSize = device.device.limits.maxTextureDimension2D;\n        this.maxCubeTextureSize = device.device.limits.maxTextureDimension2D;\n        this.npo2Mipmapping = true;\n        this.npo2Repeating = true;\n        this._textureFormatInfos = {\n            ['rgba8unorm']: {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: true,\n                compressed: false,\n                writable: true,\n                blockWidth: 1,\n                blockHeight: 1,\n                size: 4\n            },\n            ['rgba8snorm']: {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: false,\n                writable: true,\n                blockWidth: 1,\n                blockHeight: 1,\n                size: 4\n            },\n            ['bgra8unorm']: {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: true,\n                compressed: false,\n                writable: false,\n                blockWidth: 1,\n                blockHeight: 1,\n                size: 4\n            }\n        };\n        if (this.supportASTC) {\n            for (const k of [\n                '4x4',\n                '5x4',\n                '5x5',\n                '6x5',\n                '6x6',\n                '8x5',\n                '8x6',\n                '8x8',\n                '10x5',\n                '10x6',\n                '10x8',\n                '10x10',\n                '12x10',\n                '12x12'\n            ]){\n                const [w, h] = k.split('x').map((val)=>Number(val));\n                this._textureFormatInfos[`astc-${k}`] = {\n                    gpuSampleType: 'float',\n                    filterable: true,\n                    renderable: false,\n                    compressed: true,\n                    writable: false,\n                    size: 16,\n                    blockWidth: w,\n                    blockHeight: h\n                };\n                this._textureFormatInfos[`astc-${k}-srgb`] = {\n                    gpuSampleType: 'float',\n                    filterable: true,\n                    renderable: false,\n                    compressed: true,\n                    size: 16,\n                    writable: false,\n                    blockWidth: w,\n                    blockHeight: h\n                };\n            }\n        }\n        if (this.supportS3TC) {\n            this._textureFormatInfos['dxt1'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 8,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['dxt3'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['dxt5'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n        }\n        if (this.supportRGTC) {\n            this._textureFormatInfos['bc4'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 8,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['bc4-signed'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 8,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n        }\n        this._textureFormatInfos['bc5'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: false,\n            compressed: true,\n            writable: false,\n            size: 16,\n            blockWidth: 4,\n            blockHeight: 4\n        };\n        this._textureFormatInfos['bc5-signed'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: false,\n            compressed: true,\n            writable: false,\n            size: 16,\n            blockWidth: 4,\n            blockHeight: 4\n        };\n        if (this.supportBPTC) {\n            this._textureFormatInfos['bc6h'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['bc6h-signed'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['bc7'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['bc7-srgb'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n        }\n        if (this.supportS3TCSRGB) {\n            this._textureFormatInfos['dxt1-srgb'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 8,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['dxt3-srgb'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n            this._textureFormatInfos['dxt5-srgb'] = {\n                gpuSampleType: 'float',\n                filterable: true,\n                renderable: false,\n                compressed: true,\n                writable: false,\n                size: 16,\n                blockWidth: 4,\n                blockHeight: 4\n            };\n        }\n        this._textureFormatInfos['r8unorm'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 1\n        };\n        this._textureFormatInfos['r8snorm'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: false,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 1\n        };\n        this._textureFormatInfos['r16f'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['r32f'] = {\n            gpuSampleType: 'unfilterable-float',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['r8ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 1\n        };\n        this._textureFormatInfos['r8i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 1\n        };\n        this._textureFormatInfos['r16ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['r16i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['r32ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['r32i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['rg8unorm'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['rg8snorm'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: false,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['rg16f'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['rg32f'] = {\n            gpuSampleType: 'unfilterable-float',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 8\n        };\n        this._textureFormatInfos['rg8ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['rg8i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['rg16ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['rg16i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['rg32ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 8\n        };\n        this._textureFormatInfos['rg32i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 8\n        };\n        this._textureFormatInfos['rgba8unorm-srgb'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['bgra8unorm-srgb'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['rgba16f'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 8\n        };\n        this._textureFormatInfos['rgba32f'] = {\n            gpuSampleType: 'unfilterable-float',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 16\n        };\n        this._textureFormatInfos['rgba8ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['rgba8i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['rgba16ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 8\n        };\n        this._textureFormatInfos['rgba16i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 8\n        };\n        this._textureFormatInfos['rgba32ui'] = {\n            gpuSampleType: 'uint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 16\n        };\n        this._textureFormatInfos['rgba32i'] = {\n            gpuSampleType: 'sint',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: true,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 16\n        };\n        this._textureFormatInfos['rg11b10uf'] = {\n            gpuSampleType: 'float',\n            filterable: true,\n            renderable: device.device.features.has('rg11b10ufloat-renderable'),\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['d16'] = {\n            gpuSampleType: 'depth',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 2\n        };\n        this._textureFormatInfos['d24'] = {\n            gpuSampleType: 'depth',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['d32f'] = {\n            gpuSampleType: 'depth',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this._textureFormatInfos['d32fs8'] = {\n            gpuSampleType: 'depth',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 8\n        };\n        this._textureFormatInfos['d24s8'] = {\n            gpuSampleType: 'depth',\n            filterable: false,\n            renderable: true,\n            compressed: false,\n            writable: false,\n            blockWidth: 1,\n            blockHeight: 1,\n            size: 4\n        };\n        this.supportLinearFloatTexture = this._textureFormatInfos['r32f'].filterable && this._textureFormatInfos['rg32f'].filterable && this._textureFormatInfos['rgba32f'].filterable;\n        this.supportLinearHalfFloatTexture = this._textureFormatInfos['r16f'].filterable && this._textureFormatInfos['rg16f'].filterable && this._textureFormatInfos['rgba16f'].filterable;\n    }\n    calcMemoryUsage(format, numPixels) {\n        return this._textureFormatInfos[format] ? this._textureFormatInfos[format].size * numPixels : 0;\n    }\n    getTextureFormatInfo(format) {\n        return this._textureFormatInfos[format];\n    }\n}\n\nexport { WebGPUFramebufferCaps, WebGPUMiscCaps, WebGPUShaderCaps, WebGPUTextureCaps };\n//# sourceMappingURL=capabilities_webgpu.js.map\n","import { VertexData, getVertexAttribFormat, getVertexAttribName, PBPrimitiveTypeInfo, PBPrimitiveType } from '@zephyr3d/device';\nimport { vertexFormatToHash } from './constants_webgpu.js';\nimport { WebGPUObject } from './gpuobject_webgpu.js';\nimport { WebGPUStructuredBuffer } from './structuredbuffer_webgpu.js';\n\nclass WebGPUVertexLayout extends WebGPUObject {\n    static _hashCounter = 0;\n    static _defaultBuffers = [];\n    _vertexData;\n    _hash;\n    _layouts;\n    constructor(device, options){\n        super(device);\n        this._vertexData = new VertexData();\n        for (const vb of options.vertexBuffers){\n            this._vertexData.setVertexBuffer(vb.buffer, vb.stepMode);\n        }\n        if (options.indexBuffer) {\n            this._vertexData.setIndexBuffer(options.indexBuffer);\n        }\n        this._hash = String(++WebGPUVertexLayout._hashCounter);\n        this._layouts = {};\n    }\n    destroy() {\n        this._object = null;\n    }\n    restore() {\n        this._object = {};\n    }\n    setDrawOffset(buffer, byteOffset) {\n        for (const info of this._vertexData.vertexBuffers){\n            if (info?.buffer === buffer) {\n                info.drawOffset = byteOffset;\n            }\n        }\n    }\n    get hash() {\n        return this._hash;\n    }\n    get vertexBuffers() {\n        return this._vertexData.vertexBuffers;\n    }\n    get indexBuffer() {\n        return this._vertexData.indexBuffer;\n    }\n    getDrawOffset() {\n        return this._vertexData.getDrawOffset();\n    }\n    getVertexBuffer(semantic) {\n        return this._vertexData.getVertexBuffer(semantic);\n    }\n    getVertexBufferInfo(semantic) {\n        return this._vertexData.getVertexBufferInfo(semantic);\n    }\n    getIndexBuffer() {\n        return this._vertexData.getIndexBuffer();\n    }\n    getLayouts(attributes) {\n        if (!attributes) {\n            return null;\n        }\n        let layout = this._layouts[attributes];\n        if (!layout) {\n            layout = this.calcHash(attributes);\n            this._layouts[attributes] = layout;\n        }\n        return layout;\n    }\n    getDefaultBuffer(attrib, numVertices) {\n        let buffer = WebGPUVertexLayout._defaultBuffers[0];\n        if (buffer) {\n            const n = Math.floor(buffer.byteLength / 4 * 4);\n            if (n < numVertices) {\n                buffer = null;\n            }\n        }\n        if (!buffer) {\n            buffer = this._device.createVertexBuffer(getVertexAttribFormat(getVertexAttribName(attrib), 'f32', 4), new Float32Array(numVertices * 4));\n            WebGPUVertexLayout._defaultBuffers.unshift(buffer);\n        }\n        return buffer;\n    }\n    calcHash(attribHash) {\n        const layouts = [];\n        const layoutVertexBuffers = [];\n        const vertexBuffers = this._vertexData.vertexBuffers;\n        const attributes = attribHash.split(':').map((val)=>Number(val));\n        for(let idx = 0; idx < attributes.length; idx++){\n            const attrib = attributes[idx];\n            let bufferInfo = vertexBuffers[attrib];\n            let buffer = bufferInfo?.buffer;\n            if (!buffer) {\n                console.warn(`No vertex buffer set for location <${getVertexAttribName(attrib)}>`);\n                buffer = this.getDefaultBuffer(attrib, this._vertexData.numVertices);\n                bufferInfo = {\n                    buffer,\n                    offset: 0,\n                    drawOffset: 0,\n                    type: new PBPrimitiveTypeInfo(PBPrimitiveType.F32VEC4),\n                    stride: 4 * 4,\n                    stepMode: 'vertex'\n                };\n            }\n            const gpuFormat = WebGPUStructuredBuffer.getGPUVertexFormat(bufferInfo.type);\n            if (!gpuFormat) {\n                throw new Error('Invalid vertex buffer format');\n            }\n            const index = layoutVertexBuffers.findIndex((val)=>val.buffer === buffer);\n            const stride = bufferInfo.stride;\n            let layout = index >= 0 ? layouts[index] : `${stride}-${Number(bufferInfo.stepMode === 'instance')}`;\n            layout += `-${vertexFormatToHash[gpuFormat]}-${bufferInfo.offset}-${idx}`;\n            if (index >= 0) {\n                layouts[index] = layout;\n            } else {\n                layouts.push(layout);\n                layoutVertexBuffers.push(bufferInfo);\n            }\n        }\n        return {\n            layoutHash: layouts.join(':'),\n            buffers: layoutVertexBuffers\n        };\n    }\n    bind() {\n        this._device.setVertexLayout(this);\n    }\n    draw(primitiveType, first, count) {\n        this.bind();\n        this._device.draw(primitiveType, first, count);\n    }\n    drawInstanced(primitiveType, first, count, numInstances) {\n        this.bind();\n        this._device.drawInstanced(primitiveType, first, count, numInstances);\n    }\n}\n\nexport { WebGPUVertexLayout };\n//# sourceMappingURL=vertexlayout_webgpu.js.map\n","class WebGPURenderState {\n    static _defaultState;\n    _hash;\n    static get defaultState() {\n        return this._defaultState;\n    }\n    constructor(){\n        this._hash = null;\n    }\n    get hash() {\n        return this._getHash(this.constructor);\n    }\n    invalidateHash() {\n        this._hash = null;\n    }\n    _getHash(ctor) {\n        if (this === ctor.defaultState) {\n            return '';\n        } else {\n            if (this._hash === null) {\n                this._hash = this.computeHash();\n            }\n            return this._hash;\n        }\n    }\n}\nclass WebGPUColorState extends WebGPURenderState {\n    static _defaultState = new WebGPUColorState();\n    _redMask;\n    _greenMask;\n    _blueMask;\n    _alphaMask;\n    constructor(){\n        super();\n        this._redMask = this._greenMask = this._blueMask = this._alphaMask = true;\n    }\n    clone() {\n        return new WebGPUColorState().setColorMask(this._redMask, this._greenMask, this._blueMask, this._alphaMask);\n    }\n    get redMask() {\n        return this._redMask;\n    }\n    set redMask(val) {\n        if (this._redMask !== !!val) {\n            this._redMask = !!val;\n            this.invalidateHash();\n        }\n    }\n    get greenMask() {\n        return this._greenMask;\n    }\n    set greenMask(val) {\n        if (this._greenMask !== !!val) {\n            this._greenMask = !!val;\n            this.invalidateHash();\n        }\n    }\n    get blueMask() {\n        return this._blueMask;\n    }\n    set blueMask(val) {\n        if (this._blueMask !== !!val) {\n            this._blueMask = !!val;\n            this.invalidateHash();\n        }\n    }\n    get alphaMask() {\n        return this._alphaMask;\n    }\n    set alphaMask(val) {\n        if (this._alphaMask !== !!val) {\n            this._alphaMask = !!val;\n            this.invalidateHash();\n        }\n    }\n    setColorMask(r, g, b, a) {\n        this.redMask = r;\n        this.greenMask = g;\n        this.blueMask = b;\n        this.alphaMask = a;\n        return this;\n    }\n    computeHash() {\n        let val = 0;\n        if (this.redMask) {\n            val += 1 << 0;\n        }\n        if (this.greenMask) {\n            val += 1 << 1;\n        }\n        if (this.blueMask) {\n            val += 1 << 2;\n        }\n        if (this.alphaMask) {\n            val += 1 << 3;\n        }\n        return String(val);\n    }\n}\nclass WebGPUBlendingState extends WebGPURenderState {\n    static _defaultState = new WebGPUBlendingState();\n    _enabled;\n    _alphaToCoverageEnabled;\n    _srcBlendRGB;\n    _dstBlendRGB;\n    _srcBlendAlpha;\n    _dstBlendAlpha;\n    _rgbEquation;\n    _alphaEquation;\n    constructor(){\n        super();\n        this._enabled = false;\n        this._alphaToCoverageEnabled = false;\n        this._srcBlendRGB = 'one';\n        this._dstBlendRGB = 'zero';\n        this._srcBlendAlpha = 'one';\n        this._dstBlendAlpha = 'zero';\n        this._rgbEquation = 'add';\n        this._alphaEquation = 'add';\n    }\n    clone() {\n        const other = new WebGPUBlendingState();\n        other.enable(this._enabled);\n        other.enableAlphaToCoverage(this._alphaToCoverageEnabled);\n        other.setBlendFuncRGB(this._srcBlendRGB, this._dstBlendRGB);\n        other.setBlendFuncAlpha(this._srcBlendAlpha, this._dstBlendAlpha);\n        other.setBlendEquation(this._rgbEquation, this._alphaEquation);\n        return other;\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(val) {\n        if (this._enabled !== !!val) {\n            this._enabled = !!val;\n            this.invalidateHash();\n        }\n    }\n    get alphaToCoverageEnabled() {\n        return this._alphaToCoverageEnabled;\n    }\n    set alphaToCoverageEnabled(val) {\n        if (this._alphaToCoverageEnabled !== !!val) {\n            this._alphaToCoverageEnabled = !!val;\n            this.invalidateHash();\n        }\n    }\n    get srcBlendRGB() {\n        return this._srcBlendRGB;\n    }\n    set srcBlendRGB(val) {\n        if (this._srcBlendRGB !== val) {\n            this._srcBlendRGB = val;\n            this.invalidateHash();\n        }\n    }\n    get srcBlendAlpha() {\n        return this._srcBlendAlpha;\n    }\n    set srcBlendAlpha(val) {\n        if (this._srcBlendAlpha !== val) {\n            this._srcBlendAlpha = val;\n            this.invalidateHash();\n        }\n    }\n    get dstBlendRGB() {\n        return this._dstBlendRGB;\n    }\n    set dstBlendRGB(val) {\n        if (this._dstBlendRGB !== val) {\n            this._dstBlendRGB = val;\n            this.invalidateHash();\n        }\n    }\n    get dstBlendAlpha() {\n        return this._dstBlendAlpha;\n    }\n    set dstBlendAlpha(val) {\n        if (this._dstBlendAlpha !== val) {\n            this._dstBlendAlpha = val;\n            this.invalidateHash();\n        }\n    }\n    get rgbEquation() {\n        return this._rgbEquation;\n    }\n    set rgbEquation(val) {\n        if (this._rgbEquation !== val) {\n            this._rgbEquation = val;\n            this.invalidateHash();\n        }\n    }\n    get alphaEquation() {\n        return this._alphaEquation;\n    }\n    set alphaEquation(val) {\n        if (this._alphaEquation !== val) {\n            this._alphaEquation = val;\n            this.invalidateHash();\n        }\n    }\n    enable(b) {\n        this.enabled = b;\n        return this;\n    }\n    enableAlphaToCoverage(b) {\n        this.alphaToCoverageEnabled = b;\n        return this;\n    }\n    setBlendFunc(src, dest) {\n        this.srcBlendRGB = src;\n        this.dstBlendRGB = dest;\n        this.srcBlendAlpha = src;\n        this.dstBlendAlpha = dest;\n        return this;\n    }\n    setBlendFuncRGB(src, dest) {\n        this.srcBlendRGB = src;\n        this.dstBlendRGB = dest;\n        return this;\n    }\n    setBlendFuncAlpha(src, dest) {\n        this.srcBlendAlpha = src;\n        this.dstBlendAlpha = dest;\n        return this;\n    }\n    setBlendEquation(rgb, alpha) {\n        this.rgbEquation = rgb;\n        this.alphaEquation = alpha;\n        return this;\n    }\n    computeHash() {\n        return this._enabled ? `${this._srcBlendRGB}-${this._srcBlendAlpha}-${this._dstBlendRGB}-${this._dstBlendAlpha}-${this._rgbEquation}-${this._alphaEquation}-${Number(!!this._alphaToCoverageEnabled)}` : `${Number(!!this._alphaToCoverageEnabled)}`;\n    }\n}\nclass WebGPURasterizerState extends WebGPURenderState {\n    static _defaultState = new WebGPURasterizerState();\n    _cullMode;\n    _depthClampEnabled;\n    constructor(){\n        super();\n        this._cullMode = 'back';\n        this._depthClampEnabled = false;\n    }\n    clone() {\n        return new WebGPURasterizerState().setCullMode(this._cullMode).enableDepthClamp(this._depthClampEnabled);\n    }\n    get cullMode() {\n        return this._cullMode;\n    }\n    set cullMode(val) {\n        if (this._cullMode !== val) {\n            this._cullMode = val;\n            this.invalidateHash();\n        }\n    }\n    setCullMode(mode) {\n        this.cullMode = mode;\n        return this;\n    }\n    get depthClampEnabled() {\n        return this._depthClampEnabled;\n    }\n    set depthClampEnabled(val) {\n        this.enableDepthClamp(val);\n    }\n    enableDepthClamp(enable) {\n        if (this._depthClampEnabled !== !!enable) {\n            this._depthClampEnabled = !!enable;\n            this.invalidateHash();\n        }\n        return this;\n    }\n    computeHash() {\n        return `${this._cullMode}-${this._depthClampEnabled ? 1 : 0}`;\n    }\n}\nclass WebGPUDepthState extends WebGPURenderState {\n    static _defaultState = new WebGPUDepthState();\n    _testEnabled;\n    _writeEnabled;\n    _compareFunc;\n    _depthBias;\n    _depthBiasSlopeScale;\n    constructor(){\n        super();\n        this._testEnabled = true;\n        this._writeEnabled = true;\n        this._compareFunc = 'le';\n        this._depthBias = 0;\n        this._depthBiasSlopeScale = 0;\n    }\n    clone() {\n        const other = new WebGPUDepthState();\n        other.enableTest(this._testEnabled);\n        other.enableWrite(this._writeEnabled);\n        other.setCompareFunc(this._compareFunc);\n        other.setDepthBias(this._depthBias);\n        other.setDepthBiasSlopeScale(this._depthBiasSlopeScale);\n        return other;\n    }\n    get testEnabled() {\n        return this._testEnabled;\n    }\n    set testEnabled(val) {\n        if (this._testEnabled !== !!val) {\n            this._testEnabled = val;\n            this.invalidateHash();\n        }\n    }\n    get writeEnabled() {\n        return this._writeEnabled;\n    }\n    set writeEnabled(val) {\n        if (this._writeEnabled !== !!val) {\n            this._writeEnabled = val;\n            this.invalidateHash();\n        }\n    }\n    get compareFunc() {\n        return this._compareFunc;\n    }\n    set compareFunc(val) {\n        if (this._compareFunc !== val) {\n            this._compareFunc = val;\n            this.invalidateHash();\n        }\n    }\n    get depthBias() {\n        return this._depthBias;\n    }\n    set depthBias(value) {\n        this.setDepthBias(value);\n    }\n    setDepthBias(value) {\n        if (this._depthBias !== value) {\n            this._depthBias = value;\n            this.invalidateHash();\n        }\n        return this;\n    }\n    get depthBiasSlopeScale() {\n        return this._depthBiasSlopeScale;\n    }\n    set depthBiasSlopeScale(value) {\n        this.setDepthBiasSlopeScale(value);\n    }\n    setDepthBiasSlopeScale(value) {\n        if (this._depthBiasSlopeScale !== value) {\n            this._depthBiasSlopeScale = value;\n            this.invalidateHash();\n        }\n        return this;\n    }\n    enableTest(b) {\n        this.testEnabled = b;\n        return this;\n    }\n    enableWrite(b) {\n        this.writeEnabled = b;\n        return this;\n    }\n    setCompareFunc(func) {\n        this.compareFunc = func;\n        return this;\n    }\n    computeHash() {\n        return `${Number(this._testEnabled)}-${Number(this._writeEnabled)}-${this._compareFunc}-${this._depthBias}-${this._depthBiasSlopeScale}`;\n    }\n}\nclass WebGPUStencilState extends WebGPURenderState {\n    static _defaultState = new WebGPUStencilState();\n    _enabled;\n    _writeMask;\n    _failOp;\n    _failOpBack;\n    _zFailOp;\n    _zFailOpBack;\n    _passOp;\n    _passOpBack;\n    _func;\n    _funcBack;\n    _ref;\n    _readMask;\n    constructor(){\n        super();\n        this._enabled = false;\n        this._failOp = this.failOpBack = 'keep';\n        this._zFailOp = this.zFailOpBack = 'keep';\n        this._passOp = this.passOpBack = 'keep';\n        this._func = this.funcBack = 'always';\n        this._ref = 0;\n        this._writeMask = 0xffffffff;\n        this._readMask = 0xffffffff;\n    }\n    clone() {\n        const other = new WebGPUStencilState();\n        other.enable(this._enabled);\n        other.setWriteMask(this._writeMask);\n        other.setFrontOp(this._failOp, this._zFailOp, this._passOp);\n        other.setBackOp(this._failOpBack, this._zFailOpBack, this._passOpBack);\n        other.setFrontCompareFunc(this._func);\n        other.setBackCompareFunc(this._funcBack);\n        other.setReference(this._ref);\n        other.setReadMask(this._readMask);\n        return other;\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(val) {\n        if (this._enabled !== !!val) {\n            this._enabled = !!val;\n            this.invalidateHash();\n        }\n    }\n    get writeMask() {\n        return this._writeMask;\n    }\n    set writeMask(val) {\n        if (this._writeMask !== val) {\n            this._writeMask = val;\n            this.invalidateHash();\n        }\n    }\n    get failOp() {\n        return this._failOp;\n    }\n    set failOp(val) {\n        if (this._failOp !== val) {\n            this._failOp = val;\n            this.invalidateHash();\n        }\n    }\n    get failOpBack() {\n        return this._failOpBack;\n    }\n    set failOpBack(val) {\n        if (this._failOpBack !== val) {\n            this._failOpBack = val;\n            this.invalidateHash();\n        }\n    }\n    get zFailOp() {\n        return this._zFailOp;\n    }\n    set zFailOp(val) {\n        if (this._zFailOp !== val) {\n            this._zFailOp = val;\n            this.invalidateHash();\n        }\n    }\n    get zFailOpBack() {\n        return this._zFailOpBack;\n    }\n    set zFailOpBack(val) {\n        if (this._zFailOpBack !== val) {\n            this._zFailOpBack = val;\n            this.invalidateHash();\n        }\n    }\n    get passOp() {\n        return this._passOp;\n    }\n    set passOp(val) {\n        if (this._passOp !== val) {\n            this._passOp = val;\n            this.invalidateHash();\n        }\n    }\n    get passOpBack() {\n        return this._passOpBack;\n    }\n    set passOpBack(val) {\n        if (this._passOpBack !== val) {\n            this._passOpBack = val;\n            this.invalidateHash();\n        }\n    }\n    get func() {\n        return this._func;\n    }\n    set func(val) {\n        if (this._func !== val) {\n            this._func = val;\n            this.invalidateHash();\n        }\n    }\n    get funcBack() {\n        return this._funcBack;\n    }\n    set funcBack(val) {\n        if (this._funcBack !== val) {\n            this._funcBack = val;\n            this.invalidateHash();\n        }\n    }\n    get ref() {\n        return this._ref;\n    }\n    set ref(val) {\n        if (this._ref !== val) {\n            this._ref = val;\n            this.invalidateHash();\n        }\n    }\n    get readMask() {\n        return this._readMask;\n    }\n    set readMask(val) {\n        if (this._readMask !== val) {\n            this._readMask = val;\n            this.invalidateHash();\n        }\n    }\n    enable(b) {\n        this.enabled = b;\n        return this;\n    }\n    setWriteMask(mask) {\n        this.writeMask = mask;\n        return this;\n    }\n    setFrontOp(fail, zfail, pass) {\n        this.failOp = fail;\n        this.zFailOp = zfail;\n        this.passOp = pass;\n        return this;\n    }\n    setBackOp(fail, zfail, pass) {\n        this.failOpBack = fail;\n        this.zFailOpBack = zfail;\n        this.passOpBack = pass;\n        return this;\n    }\n    setFrontCompareFunc(func) {\n        this.func = func;\n        return this;\n    }\n    setBackCompareFunc(func) {\n        this.funcBack = func;\n        return this;\n    }\n    setReference(ref) {\n        this.ref = ref;\n        return this;\n    }\n    setReadMask(mask) {\n        this.readMask = mask;\n        return this;\n    }\n    computeHash() {\n        return this._enabled ? `${this.sideHash(false)}-${this.sideHash(true)}-${this.readMask.toString(16)}-${this.writeMask.toString(16)}-${this.ref.toString(16)}` : '';\n    }\n    sideHash(back) {\n        return back ? `${this._failOpBack}-${this._zFailOpBack}-${this._passOpBack}-${this._funcBack}` : `${this._failOp}-${this._zFailOp}-${this._passOp}-${this._func}`;\n    }\n}\nclass WebGPURenderStateSet {\n    _device;\n    colorState;\n    blendingState;\n    rasterizerState;\n    depthState;\n    stencilState;\n    constructor(device){\n        this._device = device;\n        this.colorState = null;\n        this.blendingState = null;\n        this.rasterizerState = null;\n        this.depthState = null;\n        this.stencilState = null;\n    }\n    clone() {\n        const newStateSet = new WebGPURenderStateSet(this._device);\n        newStateSet.colorState = this.colorState?.clone() ?? null;\n        newStateSet.blendingState = this.blendingState?.clone() ?? null;\n        newStateSet.rasterizerState = this.rasterizerState?.clone() ?? null;\n        newStateSet.depthState = this.depthState?.clone() ?? null;\n        newStateSet.stencilState = this.stencilState?.clone() ?? null;\n        return newStateSet;\n    }\n    copyFrom(stateSet) {\n        this.colorState = stateSet.colorState;\n        this.blendingState = stateSet.blendingState;\n        this.rasterizerState = stateSet.rasterizerState;\n        this.depthState = stateSet.depthState;\n        this.stencilState = stateSet.stencilState;\n    }\n    get hash() {\n        return `${this.colorState?.hash || ''}:${this.blendingState?.hash || ''}:${this.rasterizerState?.hash || ''}:${this.depthState?.hash || ''}:${this.stencilState?.hash || ''}`;\n    }\n    useColorState(state) {\n        return this.colorState = state ?? this.colorState ?? new WebGPUColorState();\n    }\n    defaultColorState() {\n        this.colorState = null;\n    }\n    useBlendingState(state) {\n        return this.blendingState = state ?? this.blendingState ?? new WebGPUBlendingState();\n    }\n    defaultBlendingState() {\n        this.blendingState = null;\n    }\n    useRasterizerState(state) {\n        return this.rasterizerState = state ?? this.rasterizerState ?? new WebGPURasterizerState();\n    }\n    defaultRasterizerState() {\n        this.rasterizerState = null;\n    }\n    useDepthState(state) {\n        return this.depthState = state ?? this.depthState ?? new WebGPUDepthState();\n    }\n    defaultDepthState() {\n        this.depthState = null;\n    }\n    useStencilState(state) {\n        return this.stencilState = state ?? this.stencilState ?? new WebGPUStencilState();\n    }\n    defaultStencilState() {\n        this.stencilState = null;\n    }\n    apply(_force) {\n        this._device.setRenderStates(this);\n    }\n}\n\nexport { WebGPUBlendingState, WebGPUColorState, WebGPUDepthState, WebGPURasterizerState, WebGPURenderState, WebGPURenderStateSet, WebGPUStencilState };\n//# sourceMappingURL=renderstates_webgpu.js.map\n","import { primitiveTypeMap, faceModeMap, compareFuncMap, stencilOpMap, blendEquationMap, blendFuncMap } from './constants_webgpu.js';\nimport { PBPrimitiveTypeInfo, PBPrimitiveType } from '@zephyr3d/device';\nimport { WebGPURasterizerState, WebGPUBlendingState, WebGPUDepthState, WebGPUStencilState, WebGPUColorState } from './renderstates_webgpu.js';\n\nconst typeU16 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16);\nconst stencilFormats = [\n    'stencil8',\n    'depth24plus-stencil8',\n    'depth24unorm-stencil8',\n    'depth32float-stencil8'\n];\nconst depthFormats = [\n    'depth16unorm',\n    'depth24plus',\n    'depth24plus-stencil8',\n    'depth32float',\n    'depth24unorm-stencil8',\n    'depth32float-stencil8'\n];\nclass PipelineCache {\n    _device;\n    _renderPipelines;\n    _computePipelines;\n    constructor(device){\n        this._device = device;\n        this._renderPipelines = {};\n        this._computePipelines = {};\n    }\n    wipeCache() {\n        this._renderPipelines = {};\n        this._computePipelines = {};\n    }\n    fetchComputePipeline(program) {\n        const hash = this.getComputePipelineHash(program);\n        let pipeline = this._computePipelines[hash];\n        if (pipeline === undefined) {\n            const shaderModule = program.getShaderModule();\n            const desc = {\n                layout: shaderModule.pipelineLayout,\n                compute: {\n                    module: shaderModule.csModule,\n                    entryPoint: 'main'\n                }\n            };\n            pipeline = this._device.gpuCreateComputePipeline(desc);\n            this._computePipelines[hash] = pipeline;\n        }\n        return pipeline;\n    }\n    fetchRenderPipeline(program, vertexData, stateSet, primitiveType, frameBufferInfo) {\n        if (!frameBufferInfo.hash) {\n            return null;\n        }\n        if (!program.vertexAttributes) {\n            // no vertex data needed for this pipeline\n            vertexData = null;\n        }\n        const hash = this.getRenderPipelineHash(frameBufferInfo.hash, program, vertexData, stateSet, primitiveType);\n        let pipeline = this._renderPipelines[hash];\n        if (pipeline === undefined) {\n            const bufferLayouts = vertexData ? this._device.fetchVertexLayout(vertexData.getLayouts(program.vertexAttributes).layoutHash) : null;\n            const shaderModule = program.getShaderModule();\n            const vertex = {\n                module: shaderModule.vsModule,\n                entryPoint: 'main'\n            };\n            if (bufferLayouts) {\n                vertex.buffers = bufferLayouts;\n            }\n            const primitiveState = this.createPrimitiveState(vertexData, stateSet, primitiveType);\n            const depthStencilState = this.createDepthStencilState(frameBufferInfo.depthFormat, stateSet);\n            const colorTargetStates = frameBufferInfo.colorFormats.map((val)=>this.createColorTargetState(stateSet, val));\n            const desc = {\n                label: hash,\n                layout: shaderModule.pipelineLayout,\n                vertex,\n                primitive: primitiveState,\n                depthStencil: depthStencilState,\n                multisample: this.createMultisampleState(frameBufferInfo.sampleCount, stateSet),\n                fragment: {\n                    module: shaderModule.fsModule,\n                    entryPoint: 'main',\n                    targets: colorTargetStates\n                }\n            };\n            pipeline = this._device.gpuCreateRenderPipeline(desc);\n            this._renderPipelines[hash] = pipeline;\n        }\n        return pipeline;\n    }\n    createPrimitiveState(vertexData, stateSet, primitiveType) {\n        const topology = primitiveTypeMap[primitiveType];\n        if (!topology) {\n            throw new Error(`createPrimitiveState() failed: invalid primitive type: ${primitiveType}`);\n        }\n        const rasterizerState = stateSet?.rasterizerState || WebGPURasterizerState.defaultState;\n        const cullMode = faceModeMap[rasterizerState.cullMode];\n        if (!cullMode) {\n            throw new Error(`createPrimitiveState() failed: invalid cull mode: ${rasterizerState.cullMode}`);\n        }\n        const frontFace = this._device.isWindingOrderReversed() ? 'cw' : 'ccw';\n        const state = {\n            topology,\n            frontFace,\n            cullMode\n        };\n        if (this._device.device.features.has('depth-clip-control')) {\n            state.unclippedDepth = rasterizerState.depthClampEnabled;\n        }\n        if (topology === 'triangle-strip' || topology === 'line-strip') {\n            state.stripIndexFormat = vertexData?.getIndexBuffer()?.indexType === typeU16 ? 'uint16' : 'uint32';\n        }\n        return state;\n    }\n    createMultisampleState(sampleCount, stateSet) {\n        return {\n            count: sampleCount,\n            alphaToCoverageEnabled: sampleCount > 1 && (stateSet?.blendingState ?? WebGPUBlendingState.defaultState).alphaToCoverageEnabled\n        };\n    }\n    createDepthStencilState(depthFormat, stateSet) {\n        if (!depthFormat) {\n            return undefined;\n        }\n        const depthState = stateSet?.depthState || WebGPUDepthState.defaultState;\n        const stencilState = stateSet?.stencilState || WebGPUStencilState.defaultState;\n        const hasStencil = stencilFormats.indexOf(depthFormat) >= 0;\n        const hasDepth = depthFormats.indexOf(depthFormat) >= 0;\n        const depthWriteEnabled = hasDepth ? depthState.writeEnabled : false;\n        const depthCompare = hasDepth && depthState.testEnabled ? compareFuncMap[depthState.compareFunc] : 'always';\n        const state = {\n            format: depthFormat,\n            depthWriteEnabled,\n            depthCompare\n        };\n        if (depthState.depthBias !== 0 || depthState.depthBiasSlopeScale !== 0) {\n            state.depthBias = depthState.depthBias;\n            state.depthBiasSlopeScale = depthState.depthBiasSlopeScale;\n        }\n        if (hasStencil) {\n            const stencilFront = stencilState.enabled ? this.createStencilFaceState(stencilState.func, stencilState.failOp, stencilState.zFailOp, stencilState.passOp) : undefined;\n            const stencilBack = stencilState.enabled ? this.createStencilFaceState(stencilState.funcBack, stencilState.failOpBack, stencilState.zFailOpBack, stencilState.passOpBack) : undefined;\n            const stencilReadMask = stencilState.enabled ? stencilState.readMask : undefined;\n            const stencilWriteMask = stencilState.enabled ? stencilState.writeMask : undefined;\n            state.stencilFront = stencilFront;\n            state.stencilBack = stencilBack;\n            state.stencilReadMask = stencilReadMask;\n            state.stencilWriteMask = stencilWriteMask;\n        }\n        return state;\n    }\n    createStencilFaceState(func, failOp, zFailOp, passOp) {\n        return {\n            compare: compareFuncMap[func],\n            failOp: stencilOpMap[failOp],\n            depthFailOp: stencilOpMap[zFailOp],\n            passOp: stencilOpMap[passOp]\n        };\n    }\n    createColorTargetState(stateSet, format) {\n        const blendingState = stateSet?.blendingState || WebGPUBlendingState.defaultState;\n        const colorState = stateSet?.colorState || WebGPUColorState.defaultState;\n        const r = colorState.redMask ? GPUColorWrite.RED : 0;\n        const g = colorState.greenMask ? GPUColorWrite.GREEN : 0;\n        const b = colorState.blueMask ? GPUColorWrite.BLUE : 0;\n        const a = colorState.alphaMask ? GPUColorWrite.ALPHA : 0;\n        const state = {\n            format: format,\n            writeMask: r | g | b | a\n        };\n        if (blendingState.enabled) {\n            state.blend = this.createBlendState(blendingState);\n        }\n        return state;\n    }\n    createBlendState(blendingState) {\n        return {\n            color: this.createBlendComponent(blendingState.rgbEquation, blendingState.srcBlendRGB, blendingState.dstBlendRGB),\n            alpha: this.createBlendComponent(blendingState.alphaEquation, blendingState.srcBlendAlpha, blendingState.dstBlendAlpha)\n        };\n    }\n    createBlendComponent(op, srcFunc, dstFunc) {\n        const operation = blendEquationMap[op];\n        if (!operation) {\n            throw new Error(`createBlendComponent() failed: invalid blend op: ${op}`);\n        }\n        const srcFactor = blendFuncMap[srcFunc];\n        if (!srcFactor) {\n            throw new Error(`createBlendComponent() failed: invalid source blend func ${srcFunc}`);\n        }\n        const dstFactor = blendFuncMap[dstFunc];\n        if (!dstFactor) {\n            throw new Error(`createBlendComponent() failed: invalid dest blend func ${dstFunc}`);\n        }\n        return {\n            operation,\n            srcFactor,\n            dstFactor\n        };\n    }\n    getRenderPipelineHash(fbHash, program, vertexData, stateSet, primitiveType) {\n        const programHash = program.hash;\n        const vertexHash = vertexData?.getLayouts(program.vertexAttributes).layoutHash || '';\n        const stateHash = stateSet?.hash || '';\n        return `${programHash}:${vertexHash}:${fbHash}:${primitiveType}:${stateHash}:${Number(this._device.isWindingOrderReversed())}`;\n    }\n    getComputePipelineHash(program) {\n        return program.hash;\n    }\n}\n\nexport { PipelineCache };\n//# sourceMappingURL=pipeline_cache.js.map\n","import { WebGPUObject } from './gpuobject_webgpu.js';\n\nclass WebGPUFrameBuffer extends WebGPUObject {\n    _options;\n    _width;\n    _height;\n    _bindFlag;\n    _hash;\n    _msaaColorTextures;\n    _msaaDepthTexture;\n    constructor(device, colorAttachments, depthAttachment, opt){\n        super(device);\n        if (colorAttachments.length > 0 && colorAttachments.findIndex((val)=>!val) >= 0) {\n            throw new Error('WebGPUFramebuffer(): invalid color attachments');\n        }\n        this._object = null;\n        this._options = {\n            colorAttachments: colorAttachments?.length > 0 ? colorAttachments.map((value)=>({\n                    texture: value,\n                    face: 0,\n                    layer: 0,\n                    level: 0,\n                    generateMipmaps: true\n                })) : null,\n            depthAttachment: depthAttachment ? {\n                texture: depthAttachment,\n                face: 0,\n                layer: 0,\n                level: 0,\n                generateMipmaps: false\n            } : null,\n            sampleCount: opt?.sampleCount ?? 1,\n            ignoreDepthStencil: opt?.ignoreDepthStencil ?? false\n        };\n        if (!this._options.colorAttachments && !this._options.depthAttachment) {\n            throw new Error('WebGPUFramebuffer(): colorAttachments or depthAttachment must be specified');\n        }\n        this._width = this._options.colorAttachments ? this._options.colorAttachments[0].texture.width : this._options.depthAttachment.texture.width;\n        this._height = this._options.colorAttachments ? this._options.colorAttachments[0].texture.height : this._options.depthAttachment.texture.height;\n        if (this._options.colorAttachments && this._options.colorAttachments.findIndex((val)=>val.texture.width !== this._width || val.texture.height !== this._height) >= 0 || this._options.depthAttachment && (this._options.depthAttachment.texture.width !== this._width || this._options.depthAttachment.texture.height !== this._height)) {\n            throw new Error('WebGPUFramebuffer(): attachment textures must have same width and height');\n        }\n        this._bindFlag = 0;\n        this._msaaColorTextures = null;\n        this._msaaDepthTexture = null;\n        const colorAttachmentHash = this._options.colorAttachments?.map((tex)=>tex.texture.format).join(':') ?? '';\n        const depthAttachmentHash = this._options.depthAttachment?.texture.format ?? '';\n        this._hash = `${colorAttachmentHash}-${depthAttachmentHash}-${this._options.sampleCount ?? 1}`;\n        this._init();\n    }\n    getOptions() {\n        return this._options;\n    }\n    get bindFlag() {\n        return this._bindFlag;\n    }\n    getHash() {\n        return this._hash;\n    }\n    getWidth() {\n        const attachment = this._options.colorAttachments?.[0] ?? this._options.depthAttachment;\n        return attachment ? Math.max(attachment.texture.width >> attachment.level, 1) : 0;\n    }\n    getHeight() {\n        const attachment = this._options.colorAttachments?.[0] ?? this._options.depthAttachment;\n        return attachment ? Math.max(attachment.texture.height >> attachment.level, 1) : 0;\n    }\n    restore() {\n        if (this._options?.depthAttachment?.texture?.disposed) {\n            this._options.depthAttachment.texture.reload();\n        }\n        if (this._options?.colorAttachments) {\n            for (const k of this._options.colorAttachments){\n                if (k?.texture?.disposed) {\n                    k.texture.reload();\n                }\n            }\n        }\n        if (!this._device.isContextLost()) {\n            this._init();\n        }\n    }\n    destroy() {\n        this._object = null;\n        if (this._msaaColorTextures) {\n            for (const tex of this._msaaColorTextures){\n                tex.destroy();\n            }\n            this._msaaColorTextures = null;\n        }\n        if (this._msaaDepthTexture) {\n            this._msaaDepthTexture.destroy();\n            this._msaaDepthTexture = null;\n        }\n    }\n    setColorAttachmentGenerateMipmaps(index, generateMipmaps) {\n        const k = this._options.colorAttachments?.[index];\n        if (k) {\n            k.generateMipmaps = !!generateMipmaps;\n        }\n    }\n    getColorAttachmentGenerateMipmaps(index) {\n        return this._options.colorAttachments?.[index]?.generateMipmaps;\n    }\n    setColorAttachmentCubeFace(index, face) {\n        const k = this._options.colorAttachments?.[index];\n        if (k && k.face !== face) {\n            k.face = face;\n            this._bindFlag++;\n        }\n    }\n    getColorAttachmentCubeFace(index) {\n        return this._options.colorAttachments?.[index].face;\n    }\n    setColorAttachmentMipLevel(index, level) {\n        const k = this._options.colorAttachments?.[index];\n        if (k && k.level !== level) {\n            k.level = level;\n            this._bindFlag++;\n        }\n    }\n    getColorAttachmentMipLevel(index) {\n        return this._options.colorAttachments?.[index].level;\n    }\n    setColorAttachmentLayer(index, layer) {\n        const k = this._options.colorAttachments?.[index];\n        if (k && k.layer !== layer) {\n            k.layer = layer;\n            this._bindFlag++;\n        }\n    }\n    getColorAttachmentLayer(index) {\n        return this._options.colorAttachments?.[index].layer;\n    }\n    setDepthAttachmentCubeFace(face) {\n        const k = this._options.depthAttachment;\n        if (k && k.face !== face) {\n            k.face = face;\n            this._bindFlag++;\n        }\n    }\n    getDepthAttachmentCubeFace() {\n        return this._options.depthAttachment?.face;\n    }\n    setDepthAttachmentLayer(layer) {\n        const k = this._options.depthAttachment;\n        if (k && k.layer !== layer) {\n            k.layer = layer;\n            this._bindFlag++;\n        }\n    }\n    getDepthAttachmentLayer() {\n        return this._options.depthAttachment?.layer;\n    }\n    getDepthAttachment() {\n        return this._options?.depthAttachment?.texture || null;\n    }\n    getColorAttachments() {\n        return this._options?.colorAttachments?.map((val)=>val?.texture || null) || [];\n    }\n    getColorAttachment(index) {\n        return this.getColorAttachments()[index] ?? null;\n    }\n    getMSAADepthAttachment() {\n        return this._msaaDepthTexture;\n    }\n    getMSAAColorAttacments() {\n        return this._msaaColorTextures;\n    }\n    getColorFormats() {\n        return this._options?.colorAttachments?.map((val)=>val?.texture?.gpuFormat || null);\n    }\n    getDepthFormat() {\n        return this._options.depthAttachment?.texture?.gpuFormat || null;\n    }\n    bind() {\n        throw new Error('no bind operatation for WebGPU');\n    }\n    unbind() {\n        throw new Error('no unbind operatation for WebGPU');\n    }\n    _init() {\n        if (this._options.sampleCount > 1) {\n            this._msaaColorTextures = [];\n            for (const colorAttachment of this._options.colorAttachments){\n                const msaaTexture = this.device.gpuCreateTexture({\n                    size: {\n                        width: this._width,\n                        height: this._height,\n                        depthOrArrayLayers: 1\n                    },\n                    format: colorAttachment.texture.gpuFormat,\n                    mipLevelCount: 1,\n                    sampleCount: this._options.sampleCount,\n                    dimension: '2d',\n                    usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.RENDER_ATTACHMENT\n                });\n                this._msaaColorTextures.push(msaaTexture);\n            }\n            if (this._options.depthAttachment) {\n                const msaaDepthTexture = this.device.gpuCreateTexture({\n                    size: {\n                        width: this._width,\n                        height: this._height,\n                        depthOrArrayLayers: 1\n                    },\n                    format: this._options.depthAttachment.texture.gpuFormat,\n                    mipLevelCount: 1,\n                    sampleCount: this._options.sampleCount,\n                    dimension: '2d',\n                    usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.RENDER_ATTACHMENT\n                });\n                this._msaaDepthTexture = msaaDepthTexture;\n            }\n        }\n        this._object = {};\n    }\n    isFramebuffer() {\n        return true;\n    }\n    getSampleCount() {\n        return this._options.sampleCount;\n    }\n}\n\nexport { WebGPUFrameBuffer };\n//# sourceMappingURL=framebuffer_webgpu.js.map\n","import { PBPrimitiveTypeInfo, PBPrimitiveType, GPUResourceUsageFlags } from '@zephyr3d/device';\nimport { WebGPUBuffer } from './buffer_webgpu.js';\n\nconst typeU16 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16);\nconst typeU32 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U32);\nclass WebGPUIndexBuffer extends WebGPUBuffer {\n    indexType;\n    length;\n    constructor(device, data, usage){\n        if (!(data instanceof Uint16Array) && !(data instanceof Uint32Array)) {\n            throw new Error('invalid index data');\n        }\n        super(device, GPUResourceUsageFlags.BF_INDEX | usage, data);\n        this.indexType = data instanceof Uint16Array ? typeU16 : typeU32;\n        this.length = data.length;\n    }\n}\n\nexport { WebGPUIndexBuffer };\n//# sourceMappingURL=indexbuffer_webgpu.js.map\n","import { ShaderType } from '@zephyr3d/device';\nimport { textureFormatMap } from './constants_webgpu.js';\n\nclass BindGroupCache {\n    _device;\n    _bindGroupLayoutCache;\n    constructor(device){\n        this._device = device;\n        this._bindGroupLayoutCache = {};\n    }\n    fetchBindGroupLayout(desc) {\n        const hash = desc ? this.getLayoutHash(desc) : '';\n        let bgl = this._bindGroupLayoutCache[hash];\n        if (!bgl) {\n            bgl = this.createBindGroupLayout(desc);\n            if (bgl) {\n                this._bindGroupLayoutCache[hash] = bgl;\n            } else {\n                throw new Error(`fetchBindGroupLayout() failed: hash: ${hash}`);\n            }\n        }\n        return bgl;\n    }\n    getLayoutHash(desc) {\n        let hash = '';\n        for (const entry of desc.entries){\n            let s = `${entry.binding}:${entry.visibility}:`;\n            if (entry.buffer) {\n                s += `b:${entry.buffer.type}:${entry.buffer.hasDynamicOffset}:${entry.buffer.minBindingSize}`;\n            } else if (entry.sampler) {\n                s += `s${entry.sampler.type}:`;\n            } else if (entry.texture) {\n                s += `t${entry.texture.sampleType}-${entry.texture.viewDimension}-${Number(!!entry.texture.multisampled)}:`;\n            } else if (entry.storageTexture) {\n                s += `k${entry.storageTexture.access}-${entry.storageTexture.format}-${entry.storageTexture.viewDimension}:`;\n            } else if (entry.externalTexture) {\n                s += `v:`;\n            }\n            hash = `${hash} ${s}`;\n        }\n        return hash;\n    }\n    createBindGroupLayout(desc) {\n        const layoutDescriptor = {\n            entries: desc?.entries.map((entry)=>{\n                const binding = entry.binding;\n                const visibility = (entry.visibility & ShaderType.Vertex ? GPUShaderStage.VERTEX : 0) | (entry.visibility & ShaderType.Fragment ? GPUShaderStage.FRAGMENT : 0) | (entry.visibility & ShaderType.Compute ? GPUShaderStage.COMPUTE : 0);\n                const buffer = entry.buffer ? {\n                    type: entry.buffer.type,\n                    hasDynamicOffset: entry.buffer.hasDynamicOffset,\n                    // minBindingSize: entry.buffer.uniformLayout.byteSize\n                    minBindingSize: Number(entry.buffer.minBindingSize) || 0\n                } : undefined;\n                const sampler = entry.sampler ? {\n                    type: entry.sampler.type\n                } : undefined;\n                const texture = entry.texture ? {\n                    sampleType: entry.texture.sampleType,\n                    viewDimension: entry.texture.viewDimension\n                } : undefined;\n                const storageTexture = entry.storageTexture ? {\n                    access: entry.storageTexture.access,\n                    viewDimension: entry.storageTexture.viewDimension,\n                    format: textureFormatMap[entry.storageTexture.format]\n                } : undefined;\n                const externalTexture = entry.externalTexture ? {} : undefined;\n                const t = {\n                    binding,\n                    visibility\n                };\n                if (buffer) {\n                    t.buffer = buffer;\n                } else if (sampler) {\n                    t.sampler = sampler;\n                } else if (texture) {\n                    t.texture = texture;\n                } else if (storageTexture) {\n                    t.storageTexture = storageTexture;\n                } else if (externalTexture) {\n                    t.externalTexture = externalTexture;\n                }\n                return t;\n            }) || []\n        };\n        if (desc?.label) {\n            layoutDescriptor.label = desc.label;\n        }\n        return [\n            layoutDescriptor,\n            this._device.device.createBindGroupLayout(layoutDescriptor)\n        ];\n    }\n}\n\nexport { BindGroupCache };\n//# sourceMappingURL=bindgroup_cache.js.map\n","import { hashToVertexFormat } from './constants_webgpu.js';\n\nclass VertexLayoutCache {\n    _layouts;\n    constructor(){\n        this._layouts = {};\n    }\n    fetchVertexLayout(hash) {\n        let layouts = this._layouts[hash];\n        if (!layouts) {\n            layouts = [];\n            hash.split(':').forEach((l)=>{\n                const parts = l.split('-');\n                const layout = {\n                    arrayStride: Number(parts[0]),\n                    stepMode: Number(parts[1]) ? 'instance' : 'vertex',\n                    attributes: []\n                };\n                for(let i = 2; i < parts.length; i += 3){\n                    layout.attributes.push({\n                        format: hashToVertexFormat[parts[i]],\n                        offset: Number(parts[i + 1]),\n                        shaderLocation: Number(parts[i + 2])\n                    });\n                }\n                layouts.push(layout);\n            });\n            this._layouts[hash] = layouts;\n        }\n        return layouts;\n    }\n}\n\nexport { VertexLayoutCache };\n//# sourceMappingURL=vertexlayout_cache.js.map\n","import { WebGPUObject } from './gpuobject_webgpu.js';\nimport { textureWrappingMap, textureFilterMap, compareFuncMap } from './constants_webgpu.js';\n\nclass WebGPUTextureSampler extends WebGPUObject {\n    _options;\n    constructor(device, options){\n        super(device);\n        this._options = Object.assign({\n            addressU: 'clamp',\n            addressV: 'clamp',\n            addressW: 'clamp',\n            magFilter: 'nearest',\n            minFilter: 'nearest',\n            mipFilter: 'none',\n            lodMin: 0,\n            lodMax: 32,\n            compare: null,\n            maxAnisotropy: 1\n        }, options || {});\n        this._load();\n    }\n    get hash() {\n        return this._object ? this._device.gpuGetObjectHash(this._object) : 0;\n    }\n    get addressModeU() {\n        return this._options.addressU;\n    }\n    get addressModeV() {\n        return this._options.addressV;\n    }\n    get addressModeW() {\n        return this._options.addressW;\n    }\n    get magFilter() {\n        return this._options.magFilter;\n    }\n    get minFilter() {\n        return this._options.minFilter;\n    }\n    get mipFilter() {\n        return this._options.mipFilter;\n    }\n    get lodMin() {\n        return this._options.lodMin;\n    }\n    get lodMax() {\n        return this._options.lodMax;\n    }\n    get compare() {\n        return this._options.compare;\n    }\n    get maxAnisotropy() {\n        return this._options.maxAnisotropy;\n    }\n    destroy() {\n        this._object = null;\n    }\n    restore() {\n        if (!this._device.isContextLost()) {\n            this._load();\n        }\n    }\n    _load() {\n        this._object = this._device.gpuCreateSampler({\n            addressModeU: textureWrappingMap[this._options.addressU],\n            addressModeV: textureWrappingMap[this._options.addressV],\n            addressModeW: textureWrappingMap[this._options.addressW],\n            magFilter: textureFilterMap[this._options.magFilter],\n            minFilter: textureFilterMap[this._options.minFilter],\n            mipmapFilter: textureFilterMap[this._options.mipFilter],\n            lodMinClamp: this._options.lodMin,\n            lodMaxClamp: this._options.lodMax,\n            compare: compareFuncMap[this._options.compare] || undefined,\n            maxAnisotropy: this._options.maxAnisotropy\n        });\n        return !!this._object;\n    }\n    isSampler() {\n        return true;\n    }\n}\n\nexport { WebGPUTextureSampler };\n//# sourceMappingURL=sampler_webgpu.js.map\n","import { WebGPUTextureSampler } from './sampler_webgpu.js';\n\nclass SamplerCache {\n    _device;\n    _samplers;\n    constructor(device){\n        this._device = device;\n        this._samplers = {};\n    }\n    fetchSampler(options) {\n        const hash = this.hash(options);\n        let sampler = this._samplers[hash];\n        if (!sampler) {\n            sampler = this.createSampler(options);\n            this._samplers[hash] = sampler;\n        }\n        return sampler;\n    }\n    hash(options) {\n        const addressU = options.addressU ? String(options.addressU) : '';\n        const addressV = options.addressV ? String(options.addressV) : '';\n        const addressW = options.addressW ? String(options.addressW) : '';\n        const magFilter = options.magFilter ? String(options.magFilter) : '';\n        const minFilter = options.minFilter ? String(options.minFilter) : '';\n        const mipFilter = options.mipFilter ? String(options.mipFilter) : '';\n        const lodMin = options.lodMin ? String(options.lodMin) : '';\n        const lodMax = options.lodMax ? String(options.lodMax) : '';\n        const compare = options.compare ? String(options.compare) : '';\n        const maxAnisotropy = options.maxAnisotropy ? String(options.maxAnisotropy) : '';\n        return `${addressU}:${addressV}:${addressW}:${magFilter}:${minFilter}:${mipFilter}:${lodMin}:${lodMax}:${compare}:${maxAnisotropy}`;\n    }\n    createSampler(options) {\n        return new WebGPUTextureSampler(this._device, options);\n    }\n}\n\nexport { SamplerCache };\n//# sourceMappingURL=sampler_cache.js.map\n","import { PBPrimitiveTypeInfo, PBPrimitiveType, isIntegerTextureFormat, isSignedTextureFormat, hasStencilChannel } from '@zephyr3d/device';\nimport { textureFormatInvMap } from './constants_webgpu.js';\nimport { WebGPUClearQuad } from './utils_webgpu.js';\n\nconst VALIDATION_NEED_NEW_PASS = 1 << 0;\nconst VALIDATION_FAILED = 1 << 1;\nconst typeU16 = PBPrimitiveTypeInfo.getCachedTypeInfo(PBPrimitiveType.U16);\nclass WebGPURenderPass {\n    _device;\n    _renderCommandEncoder;\n    _renderPassEncoder;\n    _fbBindFlag;\n    _currentViewport;\n    _currentScissor;\n    _frameBufferInfo;\n    constructor(device){\n        this._device = device;\n        this._renderCommandEncoder = this._device.device.createCommandEncoder();\n        this._renderPassEncoder = null;\n        this._fbBindFlag = null;\n        this._currentViewport = null;\n        this._currentScissor = null;\n        this._frameBufferInfo = this.createFrameBufferInfo(null);\n    }\n    get active() {\n        return !!this._renderPassEncoder;\n    }\n    createFrameBufferInfo(fb) {\n        const info = !fb ? {\n            frameBuffer: null,\n            colorFormats: [\n                this._device.backbufferFormat\n            ],\n            depthFormat: this._device.backbufferDepthFormat,\n            sampleCount: this._device.sampleCount,\n            hash: null,\n            clearHash: 'f'\n        } : {\n            frameBuffer: fb,\n            colorFormats: fb.getColorAttachments().map((val)=>val.gpuFormat),\n            depthFormat: fb.getDepthAttachment()?.gpuFormat,\n            sampleCount: fb.getOptions().sampleCount,\n            hash: null,\n            clearHash: fb.getColorAttachments().map((val)=>{\n                const fmt = textureFormatInvMap[val.gpuFormat];\n                return isIntegerTextureFormat(fmt) ? isSignedTextureFormat(fmt) ? 'i' : 'u' : 'f';\n            }).join('')\n        };\n        info.hash = `${info.colorFormats.join('-')}:${info.depthFormat}:${info.sampleCount}`;\n        return info;\n    }\n    setFramebuffer(fb) {\n        if (this._frameBufferInfo.frameBuffer !== fb) {\n            this.end();\n            this._frameBufferInfo = this.createFrameBufferInfo(fb);\n            this.setViewport(null);\n            this.setScissor(null);\n        }\n    }\n    getFramebuffer() {\n        return this._frameBufferInfo.frameBuffer;\n    }\n    setViewport(vp) {\n        if (!vp || !Array.isArray(vp) && vp.default) {\n            this._currentViewport = {\n                x: 0,\n                y: 0,\n                width: this._device.deviceToScreen(this._device.drawingBufferWidth),\n                height: this._device.deviceToScreen(this._device.drawingBufferHeight),\n                default: true\n            };\n        } else {\n            if (Array.isArray(vp)) {\n                this._currentViewport = {\n                    x: vp[0],\n                    y: vp[1],\n                    width: vp[2],\n                    height: vp[3],\n                    default: false\n                };\n            } else {\n                this._currentViewport = Object.assign({\n                    default: false\n                }, vp);\n            }\n        }\n        const vx = this._device.screenToDevice(this._currentViewport.x);\n        const vy = this._device.screenToDevice(this._currentViewport.y);\n        const vw = this._device.screenToDevice(this._currentViewport.width);\n        const vh = this._device.screenToDevice(this._currentViewport.height);\n        /*\n    if (vx < 0 || vy < 0 || vw > this._device.drawingBufferWidth || vh > this._device.drawingBufferHeight) {\n      console.error(\n        `** VIEWPORT ERROR **: (${vx}, ${vy}, ${vw}, ${vh}) => (0, 0, ${this._device.drawingBufferWidth}, ${this._device.drawingBufferHeight})`\n      );\n    }\n    */ if (this._renderPassEncoder) {\n            this._renderPassEncoder.setViewport(vx, this._device.drawingBufferHeight - vy - vh, vw, vh, 0, 1);\n        }\n    }\n    getViewport() {\n        return Object.assign({}, this._currentViewport);\n    }\n    setScissor(scissor) {\n        const backBufferWidth = this._device.deviceToScreen(this._device.drawingBufferWidth);\n        const backBufferHeight = this._device.deviceToScreen(this._device.drawingBufferHeight);\n        if (scissor === null || scissor === undefined || !Array.isArray(scissor) && scissor.default) {\n            this._currentScissor = {\n                x: 0,\n                y: 0,\n                width: backBufferWidth,\n                height: backBufferHeight,\n                default: true\n            };\n        } else {\n            if (Array.isArray(scissor)) {\n                this._currentScissor = {\n                    x: scissor[0],\n                    y: scissor[1],\n                    width: scissor[2],\n                    height: scissor[3],\n                    default: false\n                };\n            } else {\n                this._currentScissor = Object.assign({\n                    default: false\n                }, scissor);\n            }\n        }\n        let vx = this._device.screenToDevice(this._currentScissor.x);\n        let vy = this._device.screenToDevice(this._currentScissor.y);\n        let vw = this._device.screenToDevice(this._currentScissor.width);\n        let vh = this._device.screenToDevice(this._currentScissor.height);\n        // Clip scissor region to screen\n        if (vx < 0) {\n            vw += vx;\n            vx = 0;\n        }\n        if (vy < 0) {\n            vh += vy;\n            vy = 0;\n        }\n        vw = Math.min(this._device.screenToDevice(backBufferWidth) - vx, vw);\n        vh = Math.min(this._device.screenToDevice(backBufferHeight) - vy, vh);\n        if (vw < 0 || vh < 0) {\n            vx = 0;\n            vy = 0;\n            vw = 0;\n            vh = 0;\n        }\n        if (this._renderPassEncoder) {\n            this._renderPassEncoder.setScissorRect(vx, this._device.drawingBufferHeight - vy - vh, vw, vh);\n        }\n    }\n    getScissor() {\n        return Object.assign({}, this._currentScissor);\n    }\n    executeRenderBundle(renderBundle) {\n        if (!this.active) {\n            this.begin();\n        }\n        this._renderPassEncoder.executeBundles([\n            renderBundle\n        ]);\n    }\n    draw(program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances) {\n        const validation = this.validateDraw(program, bindGroups);\n        if (validation & VALIDATION_FAILED) {\n            return;\n        }\n        if (validation & VALIDATION_NEED_NEW_PASS) {\n            this.end();\n        }\n        if (!this.active) {\n            this.begin();\n        }\n        this.drawInternal(this._renderPassEncoder, program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances);\n    }\n    clear(color, depth, stencil) {\n        if (!this._currentScissor) {\n            this.end();\n            this.begin(color, depth, stencil);\n        } else {\n            if (!this._renderPassEncoder) {\n                this.begin();\n            }\n            this._renderPassEncoder.insertDebugMarker('clear');\n            WebGPUClearQuad.drawClearQuad(this, color, depth, stencil);\n            this._renderPassEncoder.insertDebugMarker('end clear');\n        }\n    }\n    getDevice() {\n        return this._device;\n    }\n    getFrameBufferInfo() {\n        return this._frameBufferInfo;\n    }\n    begin(color, depth, stencil) {\n        if (this.active) {\n            console.error('WebGPURenderPass.begin() failed: begin() has already been called');\n            return;\n        }\n        this._renderCommandEncoder = this._device.device.createCommandEncoder();\n        const frameBuffer = this._frameBufferInfo.frameBuffer;\n        if (!frameBuffer) {\n            const mainPassDesc = this._device.defaultRenderPassDesc;\n            const colorAttachmentDesc = this._device.defaultRenderPassDesc.colorAttachments[0];\n            if (this._frameBufferInfo.sampleCount > 1) {\n                colorAttachmentDesc.resolveTarget = this._device.context.getCurrentTexture().createView();\n            } else {\n                colorAttachmentDesc.view = this._device.context.getCurrentTexture().createView();\n            }\n            colorAttachmentDesc.loadOp = color ? 'clear' : 'load';\n            colorAttachmentDesc.clearValue = color;\n            const depthAttachmentDesc = this._device.defaultRenderPassDesc.depthStencilAttachment;\n            depthAttachmentDesc.depthLoadOp = typeof depth === 'number' ? 'clear' : 'load';\n            depthAttachmentDesc.depthClearValue = depth;\n            depthAttachmentDesc.stencilLoadOp = typeof stencil === 'number' ? 'clear' : 'load';\n            depthAttachmentDesc.stencilClearValue = stencil;\n            this._renderPassEncoder = this._renderCommandEncoder.beginRenderPass(mainPassDesc);\n        } else {\n            const depthAttachmentTexture = frameBuffer.getDepthAttachment();\n            let depthTextureView;\n            if (depthAttachmentTexture) {\n                depthAttachmentTexture._markAsCurrentFB(true);\n                const attachment = frameBuffer.getOptions().depthAttachment;\n                const layer = depthAttachmentTexture.isTexture2DArray() || depthAttachmentTexture.isTexture3D() ? attachment.layer : depthAttachmentTexture.isTextureCube() ? attachment.face : 0;\n                depthTextureView = depthAttachmentTexture.getView(0, layer ?? 0, 1);\n            }\n            this._fbBindFlag = frameBuffer.bindFlag;\n            const passDesc = {\n                label: `customRenderPass:${this._frameBufferInfo.hash}`,\n                colorAttachments: frameBuffer.getOptions().colorAttachments?.map((attachment, index)=>{\n                    const tex = attachment.texture;\n                    if (tex) {\n                        tex._markAsCurrentFB(true);\n                        const layer = tex.isTexture2DArray() || tex.isTexture3D() ? attachment.layer : tex.isTextureCube() ? attachment.face : 0;\n                        if (frameBuffer.getOptions().sampleCount === 1) {\n                            return {\n                                view: tex.getView(attachment.level ?? 0, layer ?? 0, 1),\n                                loadOp: color ? 'clear' : 'load',\n                                clearValue: color,\n                                storeOp: 'store'\n                            };\n                        } else {\n                            const msaaTexture = frameBuffer.getMSAAColorAttacments()[index];\n                            const msaaView = this._device.gpuCreateTextureView(msaaTexture, {\n                                dimension: '2d',\n                                baseMipLevel: attachment.level ?? 0,\n                                mipLevelCount: 1,\n                                baseArrayLayer: 0,\n                                arrayLayerCount: 1\n                            });\n                            return {\n                                view: msaaView,\n                                resolveTarget: tex.getView(attachment.level ?? 0, layer ?? 0, 1),\n                                loadOp: color ? 'clear' : 'load',\n                                clearValue: color,\n                                storeOp: 'store'\n                            };\n                        }\n                    } else {\n                        return null;\n                    }\n                }) ?? [],\n                depthStencilAttachment: depthAttachmentTexture ? frameBuffer.getOptions().sampleCount === 1 ? {\n                    view: depthTextureView,\n                    depthLoadOp: typeof depth === 'number' ? 'clear' : 'load',\n                    depthClearValue: depth,\n                    depthStoreOp: 'store',\n                    stencilLoadOp: hasStencilChannel(depthAttachmentTexture.format) ? typeof stencil === 'number' ? 'clear' : 'load' : undefined,\n                    stencilClearValue: stencil,\n                    stencilStoreOp: hasStencilChannel(depthAttachmentTexture.format) ? 'store' : undefined\n                } : {\n                    view: frameBuffer.getMSAADepthAttachment().createView(),\n                    depthLoadOp: typeof depth === 'number' ? 'clear' : 'load',\n                    depthClearValue: depth,\n                    depthStoreOp: 'store',\n                    stencilLoadOp: hasStencilChannel(depthAttachmentTexture.format) ? typeof stencil === 'number' ? 'clear' : 'load' : undefined,\n                    stencilClearValue: stencil,\n                    stencilStoreOp: hasStencilChannel(depthAttachmentTexture.format) ? 'store' : undefined\n                } : undefined\n            };\n            this._renderPassEncoder = this._renderCommandEncoder.beginRenderPass(passDesc);\n        }\n        this.setViewport(this._currentViewport);\n        this.setScissor(this._currentScissor);\n    }\n    end() {\n        if (!this.active) {\n            return;\n        }\n        // finish current render pass command\n        if (this._renderPassEncoder) {\n            this._renderPassEncoder.end();\n            this._renderPassEncoder = null;\n        }\n        // render commands\n        if (this._renderCommandEncoder) {\n            this._device.device.queue.submit([\n                this._renderCommandEncoder.finish()\n            ]);\n            this._renderCommandEncoder = null;\n        }\n        // unmark render target flags and generate render target mipmaps if needed\n        if (this._frameBufferInfo.frameBuffer) {\n            const options = this._frameBufferInfo.frameBuffer.getOptions();\n            if (options.colorAttachments) {\n                for (const attachment of options.colorAttachments){\n                    attachment.texture._markAsCurrentFB(false);\n                    if (attachment.generateMipmaps && attachment.texture.mipLevelCount > 1) {\n                        attachment.texture.generateMipmaps();\n                    }\n                }\n            }\n            options.depthAttachment?.texture?._markAsCurrentFB(false);\n        }\n    }\n    capture(renderBundleEncoder, program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances) {\n        this.drawInternal(this._renderPassEncoder, program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances, renderBundleEncoder);\n    }\n    drawInternal(renderPassEncoder, program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances, renderBundleEncoder) {\n        if (this.setBindGroupsForRender(renderPassEncoder, program, bindGroups, bindGroupOffsets, renderBundleEncoder)) {\n            const pipeline = this._device.pipelineCache.fetchRenderPipeline(program, vertexData, stateSet, primitiveType, this._frameBufferInfo);\n            if (pipeline) {\n                renderPassEncoder.setPipeline(pipeline);\n                renderBundleEncoder?.setPipeline(pipeline);\n                const stencilState = stateSet?.stencilState;\n                if (stencilState) {\n                    renderPassEncoder.setStencilReference(stencilState.ref);\n                }\n                if (vertexData) {\n                    const vertexBuffers = vertexData.getLayouts(program.vertexAttributes)?.buffers;\n                    vertexBuffers?.forEach((val, index)=>{\n                        renderPassEncoder.setVertexBuffer(index, val.buffer.object, val.drawOffset);\n                        renderBundleEncoder?.setVertexBuffer(index, val.buffer.object, val.drawOffset);\n                    });\n                    const indexBuffer = vertexData.getIndexBuffer();\n                    if (indexBuffer) {\n                        renderPassEncoder.setIndexBuffer(indexBuffer.object, indexBuffer.indexType === typeU16 ? 'uint16' : 'uint32');\n                        renderBundleEncoder?.setIndexBuffer(indexBuffer.object, indexBuffer.indexType === typeU16 ? 'uint16' : 'uint32');\n                        renderPassEncoder.drawIndexed(count, numInstances, first);\n                        renderBundleEncoder?.drawIndexed(count, numInstances, first);\n                    } else {\n                        renderPassEncoder.draw(count, numInstances, first);\n                        renderBundleEncoder?.draw(count, numInstances, first);\n                    }\n                } else {\n                    renderPassEncoder.draw(count, numInstances, first);\n                    renderBundleEncoder?.draw(count, numInstances, first);\n                }\n            }\n        }\n    }\n    validateDraw(program, bindGroups) {\n        let validation = 0;\n        if (bindGroups) {\n            for(let i = 0; i < program.bindGroupLayouts.length; i++){\n                const bindGroup = bindGroups[i];\n                if (bindGroup) {\n                    if (bindGroup.bindGroup) {\n                        for (const ubo of bindGroup.bufferList){\n                            if (ubo.disposed) {\n                                validation |= VALIDATION_FAILED;\n                            }\n                        }\n                        for (const tex of bindGroup.textureList){\n                            if (tex.disposed) {\n                                validation |= VALIDATION_FAILED;\n                            }\n                            if (tex._isMarkedAsCurrentFB()) {\n                                console.error('bind resource texture can not be current render target');\n                                validation |= VALIDATION_FAILED;\n                            }\n                        }\n                    }\n                } else {\n                    console.error(`Missing bind group (${i}) when drawing with program '${program.name}'`);\n                    return VALIDATION_FAILED;\n                }\n            }\n        }\n        if (this._frameBufferInfo.frameBuffer && this._frameBufferInfo.frameBuffer.bindFlag !== this._fbBindFlag) {\n            validation |= VALIDATION_NEED_NEW_PASS;\n        }\n        return validation;\n    }\n    setBindGroupsForRender(renderPassEncoder, program, bindGroups, bindGroupOffsets, renderBundleEncoder) {\n        if (bindGroups) {\n            for(let i = 0; i < 4; i++){\n                if (i < program.bindGroupLayouts.length) {\n                    const bindGroup = bindGroups[i].bindGroup;\n                    if (!bindGroup) {\n                        return false;\n                    }\n                    const bindGroupOffset = bindGroups[i].getDynamicOffsets() ?? bindGroupOffsets?.[i];\n                    if (bindGroupOffset) {\n                        renderPassEncoder.setBindGroup(i, bindGroup, bindGroupOffset);\n                        renderBundleEncoder?.setBindGroup(i, bindGroup, bindGroupOffset);\n                    } else {\n                        renderPassEncoder.setBindGroup(i, bindGroup);\n                        renderBundleEncoder?.setBindGroup(i, bindGroup);\n                    }\n                } else {\n                    renderPassEncoder.setBindGroup(i, this._device.emptyBindGroup);\n                    renderBundleEncoder?.setBindGroup(i, this._device.emptyBindGroup);\n                }\n            }\n        }\n        return true;\n    }\n}\n\nexport { WebGPURenderPass };\n//# sourceMappingURL=renderpass_webgpu.js.map\n","const VALIDATION_FAILED = 1 << 0;\nclass WebGPUComputePass {\n    _device;\n    _computeCommandEncoder;\n    _computePassEncoder;\n    constructor(device){\n        this._device = device;\n        this._computeCommandEncoder = this._device.device.createCommandEncoder();\n        this._computePassEncoder = null;\n    }\n    get active() {\n        return !!this._computePassEncoder;\n    }\n    compute(program, bindGroups, bindGroupOffsets, workgroupCountX, workgroupCountY, workgroupCountZ) {\n        const validation = this.validateCompute(program, bindGroups);\n        if (validation & VALIDATION_FAILED) {\n            return;\n        }\n        if (!this.active) {\n            this.begin();\n        }\n        this.setBindGroupsForCompute(this._computePassEncoder, program, bindGroups, bindGroupOffsets);\n        const pipeline = this._device.pipelineCache.fetchComputePipeline(program);\n        if (pipeline) {\n            this._computePassEncoder.setPipeline(pipeline);\n            this._computePassEncoder.dispatchWorkgroups(workgroupCountX, workgroupCountY, workgroupCountZ);\n        }\n    }\n    setBindGroupsForCompute(computePassEncoder, program, bindGroups, bindGroupOffsets) {\n        if (bindGroups) {\n            for(let i = 0; i < 4; i++){\n                if (i < program.bindGroupLayouts.length) {\n                    const bindGroup = bindGroups[i].bindGroup;\n                    if (!bindGroup) {\n                        return false;\n                    }\n                    const bindGroupOffset = bindGroupOffsets?.[i];\n                    if (bindGroupOffset) {\n                        computePassEncoder.setBindGroup(i, bindGroup, bindGroupOffset);\n                    } else {\n                        computePassEncoder.setBindGroup(i, bindGroup);\n                    }\n                } else {\n                    computePassEncoder.setBindGroup(i, this._device.emptyBindGroup);\n                }\n            }\n        }\n        return true;\n    }\n    begin() {\n        if (this.active) {\n            console.error('WebGPUComputePass.begin() failed: WebGPUComputePass.begin() has already been called');\n            return;\n        }\n        this._computeCommandEncoder = this._device.device.createCommandEncoder();\n        this._computePassEncoder = this._computeCommandEncoder.beginComputePass();\n    }\n    end() {\n        if (this.active) {\n            this._computePassEncoder.end();\n            this._computePassEncoder = null;\n            this._device.device.queue.submit([\n                this._computeCommandEncoder.finish()\n            ]);\n            this._computeCommandEncoder = null;\n        }\n    }\n    validateCompute(program, bindGroups) {\n        let validation = 0;\n        if (bindGroups) {\n            for(let i = 0; i < program.bindGroupLayouts.length; i++){\n                const bindGroup = bindGroups[i];\n                if (bindGroup) {\n                    if (bindGroup.bindGroup) {\n                        for (const ubo of bindGroup.bufferList){\n                            if (ubo.disposed) {\n                                validation |= VALIDATION_FAILED;\n                            }\n                        }\n                        for (const tex of bindGroup.textureList){\n                            if (tex.disposed) {\n                                validation |= VALIDATION_FAILED;\n                            }\n                        }\n                    }\n                } else {\n                    console.error(`Missing bind group (${i}) when compute with program '${program.name}'`);\n                    return VALIDATION_FAILED;\n                }\n            }\n        }\n        return validation;\n    }\n}\n\nexport { WebGPUComputePass };\n//# sourceMappingURL=computepass_webgpu.js.map\n","import { WebGPURenderPass } from './renderpass_webgpu.js';\nimport { WebGPUComputePass } from './computepass_webgpu.js';\nimport { WebGPUMipmapGenerator } from './utils_webgpu.js';\n\nclass CommandQueueImmediate {\n    _renderPass;\n    _computePass;\n    _bufferUploads;\n    _textureUploads;\n    _device;\n    _drawcallCounter;\n    constructor(device){\n        this._device = device;\n        this._bufferUploads = new Map();\n        this._textureUploads = new Map();\n        this._renderPass = new WebGPURenderPass(device);\n        this._computePass = new WebGPUComputePass(device);\n        this._drawcallCounter = 0;\n    }\n    isBufferUploading(buffer) {\n        return !!this._bufferUploads.has(buffer);\n    }\n    isTextureUploading(tex) {\n        return !!this._textureUploads.has(tex);\n    }\n    flushUploads() {\n        if (this._bufferUploads.size > 0 || this._textureUploads.size > 0) {\n            this._drawcallCounter = 0;\n            const bufferUploads = this._bufferUploads;\n            this._bufferUploads = new Map();\n            const textureUploads = this._textureUploads;\n            this._textureUploads = new Map();\n            const uploadCommandEncoder = this._device.device.createCommandEncoder();\n            bufferUploads.forEach((_, buffer)=>buffer.beginSyncChanges(uploadCommandEncoder));\n            textureUploads.forEach((_, tex)=>{\n                tex.beginSyncChanges(uploadCommandEncoder);\n                if (!tex.disposed && tex.isMipmapDirty()) {\n                    WebGPUMipmapGenerator.generateMipmap(this._device, tex, uploadCommandEncoder);\n                }\n            });\n            this._device.device.queue.submit([\n                uploadCommandEncoder.finish()\n            ]);\n            bufferUploads.forEach((_, buffer)=>buffer.endSyncChanges());\n            textureUploads.forEach((_, tex)=>tex.endSyncChanges());\n        }\n    }\n    get currentPass() {\n        return this._renderPass.active ? this._renderPass : this._computePass.active ? this._computePass : null;\n    }\n    beginFrame() {}\n    endFrame() {\n        this.flush();\n    }\n    flush() {\n        this.flushUploads();\n        if (this._renderPass.active) {\n            this._renderPass.end();\n        }\n        if (this._computePass.active) {\n            this._computePass.end();\n        }\n    }\n    setFramebuffer(fb) {\n        if (this._renderPass.active) {\n            this.flushUploads();\n        }\n        this._renderPass.setFramebuffer(fb);\n    }\n    getFramebuffer() {\n        return this._renderPass.getFramebuffer();\n    }\n    getFramebufferInfo() {\n        return this._renderPass.getFrameBufferInfo();\n    }\n    executeRenderBundle(renderBundle) {\n        if (this._computePass.active) {\n            this.flushUploads();\n            this._computePass.end();\n        }\n        this._renderPass.executeRenderBundle(renderBundle);\n    }\n    bufferUpload(buffer) {\n        if (this._bufferUploads.has(buffer)) {\n            if (this._drawcallCounter > this._bufferUploads.get(buffer)) {\n                this.flush();\n            }\n        } else {\n            this._bufferUploads.set(buffer, this._drawcallCounter);\n        }\n    }\n    textureUpload(tex) {\n        if (this._textureUploads.has(tex)) {\n            if (this._drawcallCounter > this._textureUploads.get(tex)) {\n                this.flush();\n            }\n        } else {\n            this._textureUploads.set(tex, this._drawcallCounter);\n        }\n    }\n    copyBuffer(srcBuffer, dstBuffer, srcOffset, dstOffset, bytes) {\n        this.flush();\n        const copyCommandEncoder = this._device.device.createCommandEncoder();\n        copyCommandEncoder.copyBufferToBuffer(srcBuffer.object, srcOffset, dstBuffer.object, dstOffset, bytes);\n        this._device.device.queue.submit([\n            copyCommandEncoder.finish()\n        ]);\n    }\n    compute(program, bindGroups, bindGroupOffsets, workgroupCountX, workgroupCountY, workgroupCountZ) {\n        this._drawcallCounter++;\n        if (this._renderPass.active) {\n            this.flushUploads();\n            this._renderPass.end();\n        }\n        this._computePass.compute(program, bindGroups, bindGroupOffsets, workgroupCountX, workgroupCountY, workgroupCountZ);\n    }\n    draw(program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances) {\n        if (this._computePass.active) {\n            this.flushUploads();\n            this._computePass.end();\n        }\n        this._drawcallCounter++;\n        this._renderPass.draw(program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances);\n    }\n    capture(renderBundleEncoder, program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances) {\n        this._drawcallCounter++;\n        if (this._computePass.active) {\n            this.flushUploads();\n            this._computePass.end();\n        }\n        this._renderPass.capture(renderBundleEncoder, program, vertexData, stateSet, bindGroups, bindGroupOffsets, primitiveType, first, count, numInstances);\n    }\n    setViewport(vp) {\n        this._renderPass.setViewport(vp);\n    }\n    getViewport() {\n        return this._renderPass.getViewport();\n    }\n    setScissor(scissor) {\n        this._renderPass.setScissor(scissor);\n    }\n    getScissor() {\n        return this._renderPass.getScissor();\n    }\n    clear(color, depth, stencil) {\n        this._renderPass.clear(color, depth, stencil);\n    }\n    finish() {\n        return this._device.device.queue.onSubmittedWorkDone();\n    }\n}\n\nexport { CommandQueueImmediate };\n//# sourceMappingURL=commandqueue.js.map\n","import { BaseDevice, getTextureFormatBlockSize } from '@zephyr3d/device';\nimport { WebGPUProgram } from './gpuprogram_webgpu.js';\nimport { WebGPUBindGroup } from './bindgroup_webgpu.js';\nimport { WebGPUTexture2D } from './texture2d_webgpu.js';\nimport { WebGPUTexture2DArray } from './texture2darray_webgpu.js';\nimport { WebGPUTexture3D } from './texture3d_webgpu.js';\nimport { WebGPUTextureCube } from './texturecube_webgpu.js';\nimport { WebGPUTextureVideo } from './texturevideo_webgpu.js';\nimport { WebGPUTextureCaps, WebGPUFramebufferCaps, WebGPUMiscCaps, WebGPUShaderCaps } from './capabilities_webgpu.js';\nimport { WebGPUVertexLayout } from './vertexlayout_webgpu.js';\nimport { PipelineCache } from './pipeline_cache.js';\nimport { WebGPURenderStateSet, WebGPUBlendingState, WebGPUColorState, WebGPURasterizerState, WebGPUDepthState, WebGPUStencilState } from './renderstates_webgpu.js';\nimport { WebGPUBuffer } from './buffer_webgpu.js';\nimport { WebGPUFrameBuffer } from './framebuffer_webgpu.js';\nimport { WebGPUIndexBuffer } from './indexbuffer_webgpu.js';\nimport { BindGroupCache } from './bindgroup_cache.js';\nimport { VertexLayoutCache } from './vertexlayout_cache.js';\nimport { SamplerCache } from './sampler_cache.js';\nimport { CommandQueueImmediate } from './commandqueue.js';\nimport { WebGPUStructuredBuffer } from './structuredbuffer_webgpu.js';\nimport { textureFormatInvMap } from './constants_webgpu.js';\nimport { WebGPUBaseTexture } from './basetexture_webgpu.js';\n\nclass WebGPUDevice extends BaseDevice {\n    _context;\n    _dpr;\n    _device;\n    _adapter;\n    _deviceCaps;\n    _reverseWindingOrder;\n    _canRender;\n    _backBufferFormat;\n    _depthFormat;\n    _defaultMSAAColorTexture;\n    _defaultMSAAColorTextureView;\n    _defaultDepthTexture;\n    _defaultDepthTextureView;\n    _pipelineCache;\n    _bindGroupCache;\n    _vertexLayoutCache;\n    _samplerCache;\n    _currentProgram;\n    _currentVertexData;\n    _currentStateSet;\n    _currentBindGroups;\n    _currentBindGroupOffsets;\n    _commandQueue;\n    _gpuObjectHashCounter;\n    _gpuObjectHasher;\n    _defaultRenderPassDesc;\n    _sampleCount;\n    _emptyBindGroup;\n    _captureRenderBundle;\n    _adapterInfo;\n    constructor(backend, cvs, options){\n        super(cvs, backend);\n        this._dpr = Math.max(1, Math.floor(options?.dpr ?? window.devicePixelRatio));\n        this._device = null;\n        this._adapter = null;\n        this._context = null;\n        this._reverseWindingOrder = false;\n        this._defaultMSAAColorTexture = null;\n        this._defaultMSAAColorTextureView = null;\n        this._defaultDepthTexture = null;\n        this._defaultDepthTextureView = null;\n        this._pipelineCache = null;\n        this._bindGroupCache = null;\n        this._vertexLayoutCache = null;\n        this._currentProgram = null;\n        this._currentVertexData = null;\n        this._currentStateSet = null;\n        this._currentBindGroups = [];\n        this._currentBindGroupOffsets = [];\n        this._defaultRenderPassDesc = null;\n        this._sampleCount = options?.msaa ? 4 : 1;\n        this._deviceCaps = null;\n        this._gpuObjectHasher = new WeakMap();\n        this._gpuObjectHashCounter = 1;\n        this._emptyBindGroup = null;\n        this._captureRenderBundle = null;\n        this._samplerCache = new SamplerCache(this);\n        this._adapterInfo = {};\n    }\n    get context() {\n        return this._context;\n    }\n    getFrameBufferSampleCount() {\n        return this.getFramebuffer()?.getSampleCount() ?? this._sampleCount;\n    }\n    get device() {\n        return this._device;\n    }\n    get adapter() {\n        return this._adapter;\n    }\n    get commandQueue() {\n        return this._commandQueue;\n    }\n    get drawingBufferWidth() {\n        return this.getDrawingBufferWidth();\n    }\n    get drawingBufferHeight() {\n        return this.getDrawingBufferHeight();\n    }\n    get clientWidth() {\n        return this.canvas.clientWidth;\n    }\n    get clientHeight() {\n        return this.canvas.clientHeight;\n    }\n    get pipelineCache() {\n        return this._pipelineCache;\n    }\n    get backbufferFormat() {\n        return this._backBufferFormat;\n    }\n    get backbufferDepthFormat() {\n        return this._depthFormat;\n    }\n    get defaultDepthTexture() {\n        return this._defaultDepthTexture;\n    }\n    get defaultDepthTextureView() {\n        return this._defaultDepthTextureView;\n    }\n    get defaultMSAAColorTextureView() {\n        return this._defaultMSAAColorTextureView;\n    }\n    get defaultRenderPassDesc() {\n        return this._defaultRenderPassDesc;\n    }\n    get sampleCount() {\n        return this._sampleCount;\n    }\n    get currentPass() {\n        return this._commandQueue.currentPass;\n    }\n    get emptyBindGroup() {\n        return this._emptyBindGroup;\n    }\n    getScale() {\n        return this._dpr;\n    }\n    getAdapterInfo() {\n        return this._adapterInfo;\n    }\n    isContextLost() {\n        return false;\n    }\n    getDeviceCaps() {\n        return this._deviceCaps;\n    }\n    getDrawingBufferWidth() {\n        return this.getFramebuffer()?.getWidth() || this.canvas.width;\n    }\n    getDrawingBufferHeight() {\n        return this.getFramebuffer()?.getHeight() || this.canvas.height;\n    }\n    getBackBufferWidth() {\n        return this.canvas.width;\n    }\n    getBackBufferHeight() {\n        return this.canvas.height;\n    }\n    async initContext() {\n        if (!navigator.gpu) {\n            throw new Error('No browser support for WebGPU');\n        }\n        this._adapter = await navigator.gpu.requestAdapter();\n        if (!this._adapter) {\n            throw new Error('WebGPU: requestAdapter() failed');\n        }\n        this._adapterInfo = this._adapter['requestAdapterInfo'] ? await this._adapter['requestAdapterInfo']() : {};\n        this._device = await this._adapter.requestDevice({\n            requiredFeatures: [\n                ...this._adapter.features\n            ],\n            requiredLimits: {\n                ...this._adapter.limits\n            }\n        });\n        console.info('WebGPU device features:');\n        for (const feature of this._device.features){\n            console.info(` - ${feature}`);\n        }\n        this.device.lost.then((info)=>{\n            console.error(`WebGPU device was lost: ${info.message}`);\n            this._canRender = false;\n        });\n        this._emptyBindGroup = this.device.createBindGroup({\n            layout: this.device.createBindGroupLayout({\n                entries: []\n            }),\n            entries: []\n        });\n        this._context = this.canvas.getContext('webgpu') || null;\n        if (!this._context) {\n            this._canRender = false;\n            throw new Error('WebGPU: getContext() failed');\n        }\n        this.canvas.width = this.canvas.clientWidth;\n        this.canvas.height = this.canvas.clientHeight;\n        this._deviceCaps = {\n            textureCaps: new WebGPUTextureCaps(this),\n            framebufferCaps: new WebGPUFramebufferCaps(this),\n            miscCaps: new WebGPUMiscCaps(this),\n            shaderCaps: new WebGPUShaderCaps(this)\n        };\n        this.configure();\n        this._pipelineCache = new PipelineCache(this);\n        this._bindGroupCache = new BindGroupCache(this);\n        this._vertexLayoutCache = new VertexLayoutCache();\n        this._commandQueue = new CommandQueueImmediate(this);\n        this._canRender = true;\n        this.setViewport(null);\n        this.setScissor(null);\n        this.on('resize', ()=>{\n            const width = Math.max(1, Math.round(this.canvas.clientWidth * this._dpr));\n            const height = Math.max(1, Math.round(this.canvas.clientHeight * this._dpr));\n            if (width !== this.canvas.width || height !== this.canvas.height) {\n                this.canvas.width = width;\n                this.canvas.height = height;\n                this.createDefaultRenderAttachments();\n                this.setViewport(null);\n                this.setScissor(null);\n            }\n        });\n        this.dispatchEvent('resize', this.canvas.clientWidth, this.canvas.clientHeight);\n    }\n    nextFrame(callback) {\n        this._commandQueue.finish().then(callback);\n        return 0;\n    }\n    cancelNextFrame(_handle) {\n        return;\n    }\n    clearFrameBuffer(clearColor, clearDepth, clearStencil) {\n        this._commandQueue.clear(clearColor, clearDepth, clearStencil);\n    }\n    // factory\n    createGPUTimer() {\n        // throw new Error('not implemented');\n        return null;\n    }\n    createRenderStateSet() {\n        return new WebGPURenderStateSet(this);\n    }\n    createBlendingState() {\n        return new WebGPUBlendingState();\n    }\n    createColorState() {\n        return new WebGPUColorState();\n    }\n    createRasterizerState() {\n        return new WebGPURasterizerState();\n    }\n    createDepthState() {\n        return new WebGPUDepthState();\n    }\n    createStencilState() {\n        return new WebGPUStencilState();\n    }\n    createSampler(options) {\n        return this.fetchSampler(options);\n    }\n    createTextureFromMipmapData(data, sRGB, options) {\n        if (!data) {\n            console.error(`Device.createTextureFromMipmapData() failed: invalid data`);\n            return null;\n        }\n        if (data.isCubemap) {\n            const tex = new WebGPUTextureCube(this);\n            tex.createWithMipmapData(data, sRGB, this.parseTextureOptions(options));\n            tex.samplerOptions = options?.samplerOptions ?? null;\n            return tex;\n        } else if (data.isVolume) {\n            const tex = new WebGPUTexture3D(this);\n            tex.createWithMipmapData(data, this.parseTextureOptions(options));\n            tex.samplerOptions = options?.samplerOptions ?? null;\n            return tex;\n        } else if (data.isArray) {\n            const tex = new WebGPUTexture2DArray(this);\n            tex.createWithMipmapData(data, this.parseTextureOptions(options));\n            tex.samplerOptions = options?.samplerOptions ?? null;\n            return tex;\n        } else {\n            const tex = new WebGPUTexture2D(this);\n            tex.createWithMipmapData(data, sRGB, this.parseTextureOptions(options));\n            tex.samplerOptions = options?.samplerOptions ?? null;\n            return tex;\n        }\n    }\n    createTexture2D(format, width, height, options) {\n        const tex = options?.texture ?? new WebGPUTexture2D(this);\n        if (!tex.isTexture2D()) {\n            console.error('createTexture2D() failed: options.texture must be 2d texture');\n            return null;\n        }\n        tex.createEmpty(format, width, height, this.parseTextureOptions(options));\n        tex.samplerOptions = options?.samplerOptions ?? null;\n        return tex;\n    }\n    createTexture2DFromImage(element, sRGB, options) {\n        const tex = options?.texture ?? new WebGPUTexture2D(this);\n        if (!tex.isTexture2D()) {\n            console.error('createTexture2DFromImage() failed: options.texture must be 2d texture');\n            return null;\n        }\n        tex.loadFromElement(element, sRGB, this.parseTextureOptions(options));\n        tex.samplerOptions = options?.samplerOptions ?? null;\n        return tex;\n    }\n    createTexture2DArray(format, width, height, depth, options) {\n        const tex = options?.texture ?? new WebGPUTexture2DArray(this);\n        if (!tex.isTexture2DArray()) {\n            console.error('createTexture2DArray() failed: options.texture must be 2d array texture');\n            return null;\n        }\n        tex.createEmpty(format, width, height, depth, this.parseTextureOptions(options));\n        tex.samplerOptions = options?.samplerOptions ?? null;\n        return tex;\n    }\n    createTexture2DArrayFromImages(elements, sRGB, options) {\n        if (!elements || elements.length === 0) {\n            console.error('createTexture2DArrayFromImages() failed: Invalid image elements');\n            return null;\n        }\n        let width = 0;\n        let height = 0;\n        for (const element of elements){\n            if (width === 0 || height === 0) {\n                width = element.width;\n                height = element.height;\n            } else if (width !== element.width || height !== element.height) {\n                console.error('createTexture2DArrayFromImages() failed: Image elements must have the same size');\n                return null;\n            }\n        }\n        if (options?.texture && !options.texture.isTexture2DArray()) {\n            console.error('createTexture2DArrayFromImages() failed: options.texture must be 2d array texture');\n            return null;\n        }\n        let tex = options?.texture;\n        if (tex) {\n            if (tex.depth !== elements.length) {\n                console.error('createTexture2DArrayFromImages() failed: Layer count of options.texture not match the given image elements');\n                return null;\n            }\n            if (tex.width !== width || tex.height !== height) {\n                console.error('createTexture2DArrayFromImages() failed: Size of options.texture not match the given image elements');\n                return null;\n            }\n        } else {\n            tex = this.createTexture2DArray(sRGB ? 'rgba8unorm-srgb' : 'rgba8unorm', width, height, elements.length, options);\n            for(let i = 0; i < elements.length; i++){\n                tex.updateFromElement(elements[i], 0, 0, i, 0, 0, width, height);\n            }\n        }\n        tex.samplerOptions = options?.samplerOptions ?? null;\n        return tex;\n    }\n    createTexture3D(format, width, height, depth, options) {\n        const tex = options?.texture ?? new WebGPUTexture3D(this);\n        if (!tex.isTexture3D()) {\n            console.error('createTexture3D() failed: options.texture must be 3d texture');\n            return null;\n        }\n        tex.createEmpty(format, width, height, depth, this.parseTextureOptions(options));\n        tex.samplerOptions = options?.samplerOptions ?? null;\n        return tex;\n    }\n    createCubeTexture(format, size, options) {\n        const tex = options?.texture ?? new WebGPUTextureCube(this);\n        if (!tex.isTextureCube()) {\n            console.error('createCubeTexture() failed: options.texture must be cube texture');\n            return null;\n        }\n        tex.createEmpty(format, size, this.parseTextureOptions(options));\n        tex.samplerOptions = options?.samplerOptions ?? null;\n        return tex;\n    }\n    createTextureVideo(el, samplerOptions) {\n        const tex = new WebGPUTextureVideo(this, el);\n        tex.samplerOptions = samplerOptions ?? null;\n        return tex;\n    }\n    copyFramebufferToTexture2D(src, index, dst, level) {\n        if (!src?.isFramebuffer() || !dst?.isTexture2D()) {\n            console.error('copyFramebufferToTexture2D(): invalid texture');\n            return;\n        }\n        const srcTex = src.getColorAttachments()?.[index];\n        if (!srcTex || !srcTex.isTexture2D()) {\n            console.error('copyFramebufferToTexture2D(): Color attachment is not a 2D texture');\n            return;\n        }\n        this.copyTexture2D(srcTex, src.getColorAttachmentMipLevel(index), dst, level);\n    }\n    copyTexture2D(src, srcLevel, dst, dstLevel) {\n        if (!src?.isTexture2D() || !dst?.isTexture2D()) {\n            console.error('CopyTexture2D(): invalid texture');\n            return;\n        }\n        if (!Number.isInteger(srcLevel) || srcLevel < 0 || srcLevel >= src.mipLevelCount) {\n            console.error('CopyTexture2D(): invalid source mipmap level');\n            return;\n        }\n        if (!Number.isInteger(dstLevel) || dstLevel < 0 || dstLevel >= dst.mipLevelCount) {\n            console.error('CopyTexture2D(): invalid destination mipmap level');\n            return;\n        }\n        const srcWidth = Math.max(src.width >> srcLevel, 1);\n        const srcHeight = Math.max(src.height >> srcLevel, 1);\n        const dstWidth = Math.max(dst.width >> dstLevel, 1);\n        const dstHeight = Math.max(dst.height >> dstLevel, 1);\n        if (srcWidth !== dstWidth || srcHeight !== dstHeight) {\n            console.error('Source texture and destination texture must have same size');\n            return;\n        }\n        if (src.format !== dst.format) {\n            console.error('CopyTexture2D(): Source texture and destination texture must have same format');\n            return;\n        }\n        this.flush();\n        const srcTex = src;\n        const dstTex = dst;\n        const commandEncoder = this._device.createCommandEncoder();\n        commandEncoder.copyTextureToTexture({\n            texture: srcTex.object,\n            mipLevel: srcLevel,\n            origin: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        }, {\n            texture: dstTex.object,\n            mipLevel: dstLevel,\n            origin: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        }, {\n            width: srcWidth,\n            height: srcHeight,\n            depthOrArrayLayers: 1\n        });\n        this._device.queue.submit([\n            commandEncoder.finish()\n        ]);\n    }\n    createGPUProgram(params) {\n        return new WebGPUProgram(this, params);\n    }\n    createBindGroup(layout) {\n        return new WebGPUBindGroup(this, layout);\n    }\n    createBuffer(sizeInBytes, options) {\n        return new WebGPUBuffer(this, this.parseBufferOptions(options), sizeInBytes);\n    }\n    copyBuffer(sourceBuffer, destBuffer, srcOffset, dstOffset, bytes) {\n        this._commandQueue.copyBuffer(sourceBuffer, destBuffer, srcOffset, dstOffset, bytes);\n    }\n    createIndexBuffer(data, options) {\n        return new WebGPUIndexBuffer(this, data, this.parseBufferOptions(options, 'index'));\n    }\n    createStructuredBuffer(structureType, options, data) {\n        return new WebGPUStructuredBuffer(this, structureType, this.parseBufferOptions(options), data);\n    }\n    createVertexLayout(options) {\n        return new WebGPUVertexLayout(this, options);\n    }\n    createFrameBuffer(colorAttachments, depthAttachement, options) {\n        return new WebGPUFrameBuffer(this, colorAttachments, depthAttachement, options);\n    }\n    setBindGroup(index, bindGroup, dynamicOffsets) {\n        this._currentBindGroups[index] = bindGroup;\n        this._currentBindGroupOffsets[index] = dynamicOffsets ?? bindGroup?.getDynamicOffsets() ?? null;\n    }\n    getBindGroup(index) {\n        return [\n            this._currentBindGroups[index],\n            this._currentBindGroupOffsets[index]\n        ];\n    }\n    // render related\n    setViewport(vp) {\n        this._commandQueue.setViewport(vp);\n    }\n    getViewport() {\n        return this._commandQueue.getViewport();\n    }\n    setScissor(scissor) {\n        this._commandQueue.setScissor(scissor);\n    }\n    getScissor() {\n        return this._commandQueue.getScissor();\n    }\n    setProgram(program) {\n        this._currentProgram = program;\n    }\n    getProgram() {\n        return this._currentProgram;\n    }\n    setVertexLayout(vertexData) {\n        this._currentVertexData = vertexData;\n    }\n    getVertexLayout() {\n        return this._currentVertexData;\n    }\n    setRenderStates(stateSet) {\n        this._currentStateSet = stateSet;\n    }\n    getRenderStates() {\n        return this._currentStateSet;\n    }\n    getFramebuffer() {\n        return this._commandQueue.getFramebuffer() ?? null;\n    }\n    reverseVertexWindingOrder(reverse) {\n        this._reverseWindingOrder = !!reverse;\n    }\n    isWindingOrderReversed() {\n        return this._reverseWindingOrder;\n    }\n    /** @internal */ isBufferUploading(buffer) {\n        return this._commandQueue.isBufferUploading(buffer);\n    }\n    /** @internal */ isTextureUploading(tex) {\n        return this._commandQueue.isTextureUploading(tex);\n    }\n    /** @internal */ getFramebufferInfo() {\n        return this._commandQueue.getFramebufferInfo();\n    }\n    /** @internal */ gpuGetObjectHash(obj) {\n        return this._gpuObjectHasher.get(obj);\n    }\n    /** @internal */ gpuCreateTexture(desc) {\n        const tex = this._device.createTexture(desc);\n        if (tex) {\n            this._gpuObjectHasher.set(tex, ++this._gpuObjectHashCounter);\n        }\n        return tex;\n    }\n    /** @internal */ gpuImportExternalTexture(el) {\n        const tex = this._device.importExternalTexture({\n            source: el\n        });\n        if (tex) {\n            this._gpuObjectHasher.set(tex, ++this._gpuObjectHashCounter);\n        }\n        return tex;\n    }\n    /** @internal */ gpuCreateSampler(desc) {\n        const sampler = this._device.createSampler(desc);\n        if (sampler) {\n            this._gpuObjectHasher.set(sampler, ++this._gpuObjectHashCounter);\n        }\n        return sampler;\n    }\n    /** @internal */ gpuCreateBindGroup(desc) {\n        const bindGroup = this._device.createBindGroup(desc);\n        if (bindGroup) {\n            this._gpuObjectHasher.set(bindGroup, ++this._gpuObjectHashCounter);\n        }\n        return bindGroup;\n    }\n    /** @internal */ gpuCreateBuffer(desc) {\n        const buffer = this._device.createBuffer(desc);\n        if (buffer) {\n            this._gpuObjectHasher.set(buffer, ++this._gpuObjectHashCounter);\n        }\n        return buffer;\n    }\n    /** @internal */ gpuCreateTextureView(texture, desc) {\n        const view = texture?.createView(desc);\n        if (view) {\n            this._gpuObjectHasher.set(view, ++this._gpuObjectHashCounter);\n        }\n        return view;\n    }\n    /** @internal */ gpuCreateRenderPipeline(desc) {\n        const pipeline = this._device.createRenderPipeline(desc);\n        if (pipeline) {\n            this._gpuObjectHasher.set(pipeline, ++this._gpuObjectHashCounter);\n        }\n        return pipeline;\n    }\n    /** @internal */ gpuCreateComputePipeline(desc) {\n        const pipeline = this._device.createComputePipeline(desc);\n        if (pipeline) {\n            this._gpuObjectHasher.set(pipeline, ++this._gpuObjectHashCounter);\n        }\n        return pipeline;\n    }\n    /** @internal */ fetchVertexLayout(hash) {\n        return this._vertexLayoutCache.fetchVertexLayout(hash);\n    }\n    /** @internal */ fetchSampler(options) {\n        return this._samplerCache.fetchSampler(options);\n    }\n    /** @internal */ fetchBindGroupLayout(desc) {\n        return this._bindGroupCache.fetchBindGroupLayout(desc);\n    }\n    flush() {\n        this._commandQueue.flush();\n    }\n    async readPixels(index, x, y, w, h, buffer) {\n        const fb = this.getFramebuffer();\n        const colorAttachment = fb ? fb.getColorAttachments()[index]?.object : this.context.getCurrentTexture();\n        const texFormat = fb ? fb.getColorAttachments()[index]?.format : textureFormatInvMap[this._backBufferFormat];\n        if (colorAttachment && texFormat) {\n            const pixelSize = getTextureFormatBlockSize(texFormat);\n            const bufferSize = w * h * pixelSize;\n            const stagingBuffer = this.createBuffer(bufferSize, {\n                usage: 'read'\n            });\n            this.readPixelsToBuffer(0, x, y, w, h, stagingBuffer);\n            const data = new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n            await stagingBuffer.getBufferSubData(data);\n            stagingBuffer.dispose();\n        } else {\n            console.error('readPixels() failed: no color attachment0 or unrecoganized color attachment format');\n        }\n    }\n    readPixelsToBuffer(index, x, y, w, h, buffer) {\n        const fb = this.getFramebuffer();\n        const colorAttachment = fb ? fb.getColorAttachments()[index]?.object : this.context.getCurrentTexture();\n        const texFormat = fb ? fb.getColorAttachments()[index]?.format : textureFormatInvMap[this._backBufferFormat];\n        if (colorAttachment && texFormat) {\n            this.flush();\n            WebGPUBaseTexture.copyTexturePixelsToBuffer(this._device, colorAttachment, texFormat, x, y, w, h, 0, 0, buffer);\n        } else {\n            console.error('readPixelsToBuffer() failed: no color attachment0 or unrecoganized color attachment format');\n        }\n    }\n    looseContext() {\n    // not implemented\n    }\n    restoreContext() {\n    // not implemented\n    }\n    beginCapture() {\n        if (this._captureRenderBundle) {\n            throw new Error('Device.beginCapture() failed: device is already capturing draw commands');\n        }\n        const frameBuffer = this.getFramebufferInfo();\n        const desc = {\n            colorFormats: frameBuffer.colorFormats,\n            depthStencilFormat: frameBuffer.depthFormat,\n            sampleCount: frameBuffer.sampleCount\n        };\n        this._captureRenderBundle = {\n            dc: 0,\n            encoder: this._device.createRenderBundleEncoder(desc),\n            renderBundle: null\n        };\n    }\n    endCapture() {\n        if (!this._captureRenderBundle) {\n            throw new Error('Device.endCapture() failed: device is not capturing draw commands');\n        }\n        this._captureRenderBundle.renderBundle = this._captureRenderBundle.encoder.finish();\n        const ret = this._captureRenderBundle;\n        this._captureRenderBundle = null;\n        return ret;\n    }\n    _executeRenderBundle(renderBundle) {\n        this._commandQueue.executeRenderBundle(renderBundle.renderBundle);\n        return renderBundle.dc;\n    }\n    bufferUpload(buffer) {\n        this._commandQueue.bufferUpload(buffer);\n    }\n    textureUpload(tex) {\n        this._commandQueue.textureUpload(tex);\n    }\n    flushUploads() {\n        this._commandQueue.flushUploads();\n    }\n    /** @internal */ _setFramebuffer(rt) {\n        this._commandQueue.setFramebuffer(rt);\n    }\n    /** @internal */ onBeginFrame() {\n        if (this._canRender) {\n            this._commandQueue.beginFrame();\n            return true;\n        } else {\n            return false;\n        }\n    }\n    /** @internal */ onEndFrame() {\n        this._commandQueue.endFrame();\n    }\n    /** @internal */ _draw(primitiveType, first, count) {\n        this._commandQueue.draw(this._currentProgram, this._currentVertexData, this._currentStateSet, this._currentBindGroups, this._currentBindGroupOffsets, primitiveType, first, count, 1);\n        if (this._captureRenderBundle) {\n            this._captureRenderBundle.dc++;\n            this._commandQueue.capture(this._captureRenderBundle.encoder, this._currentProgram, this._currentVertexData, this._currentStateSet, this._currentBindGroups, this._currentBindGroupOffsets, primitiveType, first, count, 1);\n        }\n    }\n    /** @internal */ _drawInstanced(primitiveType, first, count, numInstances) {\n        this._commandQueue.draw(this._currentProgram, this._currentVertexData, this._currentStateSet, this._currentBindGroups, this._currentBindGroupOffsets, primitiveType, first, count, numInstances);\n        if (this._captureRenderBundle) {\n            this._captureRenderBundle.dc++;\n            this._commandQueue.capture(this._captureRenderBundle.encoder, this._currentProgram, this._currentVertexData, this._currentStateSet, this._currentBindGroups, this._currentBindGroupOffsets, primitiveType, first, count, numInstances);\n        }\n    }\n    /** @internal */ _compute(workgroupCountX, workgroupCountY, workgroupCountZ) {\n        this._commandQueue.compute(this._currentProgram, this._currentBindGroups, this._currentBindGroupOffsets, workgroupCountX, workgroupCountY, workgroupCountZ);\n    }\n    configure() {\n        this._backBufferFormat = navigator.gpu.getPreferredCanvasFormat();\n        this._depthFormat = this._deviceCaps.framebufferCaps.supportDepth32floatStencil8 ? 'depth32float-stencil8' : 'depth24plus-stencil8';\n        this._context.configure({\n            device: this._device,\n            format: this._backBufferFormat,\n            usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC,\n            alphaMode: 'opaque',\n            colorSpace: 'srgb'\n        });\n        this.createDefaultRenderAttachments();\n    }\n    createDefaultRenderAttachments() {\n        const width = Math.max(1, this.canvas.width);\n        const height = Math.max(1, this.canvas.height);\n        this._defaultMSAAColorTexture?.destroy();\n        this._defaultMSAAColorTexture = null;\n        this._defaultMSAAColorTextureView = null;\n        this._defaultDepthTexture?.destroy();\n        this._defaultDepthTexture = null;\n        this._defaultDepthTextureView = null;\n        if (this._sampleCount > 1) {\n            this._defaultMSAAColorTexture = this.gpuCreateTexture({\n                size: {\n                    width,\n                    height,\n                    depthOrArrayLayers: 1\n                },\n                format: this._backBufferFormat,\n                dimension: '2d',\n                mipLevelCount: 1,\n                sampleCount: this._sampleCount,\n                usage: GPUTextureUsage.RENDER_ATTACHMENT\n            });\n            this._defaultMSAAColorTextureView = this._defaultMSAAColorTexture.createView();\n        }\n        this._defaultDepthTexture = this.gpuCreateTexture({\n            size: {\n                width,\n                height,\n                depthOrArrayLayers: 1\n            },\n            format: this._depthFormat,\n            dimension: '2d',\n            mipLevelCount: 1,\n            sampleCount: this._sampleCount,\n            usage: GPUTextureUsage.RENDER_ATTACHMENT\n        });\n        this._defaultDepthTextureView = this._defaultDepthTexture.createView();\n        this._defaultRenderPassDesc = {\n            label: `mainRenderPass:${this._sampleCount}`,\n            colorAttachments: [\n                {\n                    view: this._sampleCount > 1 ? this._defaultMSAAColorTextureView : null,\n                    resolveTarget: undefined,\n                    loadOp: 'clear',\n                    clearValue: [\n                        0,\n                        0,\n                        0,\n                        0\n                    ],\n                    storeOp: 'store'\n                }\n            ],\n            depthStencilAttachment: {\n                view: this._defaultDepthTextureView,\n                depthLoadOp: 'clear',\n                depthClearValue: 1,\n                depthStoreOp: 'store',\n                stencilLoadOp: 'clear',\n                stencilClearValue: 0,\n                stencilStoreOp: 'store'\n            }\n        };\n    }\n}\n\nexport { WebGPUDevice };\n//# sourceMappingURL=device.js.map\n","import { WebGPUDevice } from './device.js';\nimport { makeObservable } from '@zephyr3d/base';\n\n/**\n * The WebGPU backend\n * @public\n */ const backendWebGPU = {\n    typeName () {\n        return 'webgpu';\n    },\n    supported () {\n        return !!window.GPU && navigator.gpu instanceof window.GPU;\n    },\n    async createDevice (cvs, options) {\n        try {\n            const factory = makeObservable(WebGPUDevice)();\n            const device = new factory(this, cvs, options);\n            await device.initContext();\n            device.setViewport();\n            device.setScissor();\n            return device;\n        } catch (err) {\n            console.error(err);\n            return null;\n        }\n    }\n};\n\nexport { backendWebGPU };\n//# sourceMappingURL=index.js.map\n","import { Vector4 } from '@zephyr3d/base';\nimport { backendWebGPU } from '@zephyr3d/backend-webgpu';\n\n(async function () {\n  if (!backendWebGPU.supported()) {\n    alert('Error: Browser does not support WebGPU.');\n    return;\n  }\n  /** @type HTMLCanvasElement */\n  const canvas = document.querySelector('#canvas');\n  const device = await backendWebGPU.createDevice(canvas);\n  const spriteProgram = device.buildRenderProgram({\n    label: 'spriteRender',\n    vertex(pb) {\n      this.$inputs.pos = pb.vec2().attrib('position');\n      this.$inputs.instPos = pb.vec2().attrib('texCoord0');\n      this.$inputs.instVel = pb.vec2().attrib('texCoord1');\n      pb.main(\n        /** @this {*} */ function () {\n          this.angle = pb.neg(pb.atan2(this.$inputs.instVel.x, this.$inputs.instVel.y));\n          this.c = pb.cos(this.angle);\n          this.s = pb.sin(this.angle);\n          this.x = pb.sub(pb.mul(this.$inputs.pos.x, this.c), pb.mul(this.$inputs.pos.y, this.s));\n          this.y = pb.add(pb.mul(this.$inputs.pos.x, this.s), pb.mul(this.$inputs.pos.y, this.c));\n          this.$builtins.position = pb.vec4(pb.add(this.$inputs.instPos, pb.vec2(this.x, this.y)), 0, 1);\n        }\n      );\n    },\n    fragment(pb) {\n      this.$outputs.color = pb.vec4();\n      pb.main(function () {\n        this.$outputs.color = pb.vec4(1);\n      });\n    }\n  });\n  const spriteUpdateProgram = device.buildComputeProgram({\n    label: 'spriteUpdate',\n    workgroupSize: [64, 1, 1],\n    compute(pb) {\n      const structParticle = pb.defineStruct([pb.vec2('pos'), pb.vec2('vel')], 'Particle');\n      const structParams = pb.defineStruct(\n        [\n          pb.float('deltaT'),\n          pb.float('rule1Distance'),\n          pb.float('rule2Distance'),\n          pb.float('rule3Distance'),\n          pb.float('rule1Scale'),\n          pb.float('rule2Scale'),\n          pb.float('rule3Scale')\n        ],\n        'SimParams'\n      );\n      this.params = structParams().uniformBuffer(0);\n      this.particlesA = structParticle[0]().storageBuffer(0);\n      this.particlesB = structParticle[0]().storageBuffer(0);\n      pb.main(\n        /** @this {*} */ function () {\n          this.index = this.$builtins.globalInvocationId.x;\n          this.vPos = this.particlesA.at(this.index).pos;\n          this.vVel = this.particlesA.at(this.index).vel;\n          this.cMass = pb.vec2(0);\n          this.cVel = pb.vec2(0);\n          this.colVel = pb.vec2(0);\n          this.cMassCount = pb.uint(0);\n          this.cVelCount = pb.uint(0);\n          this.pos = pb.vec2();\n          this.vel = pb.vec2();\n          this.$for(\n            pb.uint('i'),\n            0,\n            pb.arrayLength(this.particlesA),\n            /** @this {*} */ function () {\n              this.$if(\n                pb.equal(this.i, this.index),\n                /** @this {*} */ function () {\n                  this.$continue();\n                }\n              );\n              this.pos = this.particlesA.at(this.i).pos.xy;\n              this.vel = this.particlesA.at(this.i).vel.xy;\n              this.$if(\n                pb.lessThan(pb.distance(this.pos, this.vPos), this.params.rule1Distance),\n                /** @this {*} */ function () {\n                  this.cMass = pb.add(this.cMass, this.pos);\n                  this.cMassCount = pb.add(this.cMassCount, 1);\n                }\n              );\n              this.$if(\n                pb.lessThan(pb.distance(this.pos, this.vPos), this.params.rule2Distance),\n                /** @this {*} */ function () {\n                  this.colVel = pb.sub(this.colVel, pb.sub(this.pos, this.vPos));\n                }\n              );\n              this.$if(\n                pb.lessThan(pb.distance(this.pos, this.vPos), this.params.rule3Distance),\n                /** @this {*} */ function () {\n                  this.cVel = pb.add(this.cVel, this.vel);\n                  this.cVelCount = pb.add(this.cVelCount, 1);\n                }\n              );\n            }\n          );\n          this.$if(\n            pb.greaterThan(this.cMassCount, 0),\n            /** @this {*} */ function () {\n              this.temp = pb.float(this.cMassCount);\n              this.cMass = pb.sub(pb.div(this.cMass, pb.vec2(this.temp)), this.vPos);\n            }\n          );\n          this.$if(\n            pb.greaterThan(this.cVelCount, 0),\n            /** @this {*} */ function () {\n              this.temp = pb.float(this.cVelCount);\n              this.cVel = pb.div(this.cVel, pb.vec2(this.temp));\n            }\n          );\n          this.vVel = pb.add(this.vVel, pb.mul(this.cMass, this.params.rule1Scale));\n          this.vVel = pb.add(this.vVel, pb.mul(this.colVel, this.params.rule2Scale));\n          this.vVel = pb.add(this.vVel, pb.mul(this.cVel, this.params.rule3Scale));\n          this.vVel = pb.mul(pb.normalize(this.vVel), pb.clamp(pb.length(this.vVel), 0, 0.1));\n          this.vPos = pb.add(this.vPos, pb.mul(this.vVel, this.params.deltaT));\n          this.$if(\n            pb.lessThan(this.vPos.x, -1),\n            /** @this {*} */ function () {\n              this.vPos.x = 1;\n            }\n          );\n          this.$if(\n            pb.greaterThan(this.vPos.x, 1),\n            /** @this {*} */ function () {\n              this.vPos.x = -1;\n            }\n          );\n          this.$if(\n            pb.lessThan(this.vPos.y, -1),\n            /** @this {*} */ function () {\n              this.vPos.y = 1;\n            }\n          );\n          this.$if(\n            pb.greaterThan(this.vPos.y, 1),\n            /** @this {*} */ function () {\n              this.vPos.y = -1;\n            }\n          );\n          this.particlesB.at(this.index).pos = this.vPos;\n          this.particlesB.at(this.index).vel = this.vVel;\n        }\n      );\n    }\n  });\n  const spriteVertexBuffer = device.createVertexBuffer(\n    'position_f32x2',\n    new Float32Array([-0.01, -0.02, 0.01, -0.02, 0.0, 0.02])\n  );\n  const simParams = {\n    deltaT: 0.04,\n    rule1Distance: 0.1,\n    rule2Distance: 0.025,\n    rule3Distance: 0.025,\n    rule1Scale: 0.02,\n    rule2Scale: 0.05,\n    rule3Scale: 0.005\n  };\n  const uniformBuffer = spriteUpdateProgram.createUniformBuffer('params');\n  const numParticles = 1500;\n  const initialParticleData = new Float32Array(numParticles * 4);\n  for (let i = 0; i < numParticles; ++i) {\n    initialParticleData[4 * i + 0] = 2 * (Math.random() - 0.5);\n    initialParticleData[4 * i + 1] = 2 * (Math.random() - 0.5);\n    initialParticleData[4 * i + 2] = 2 * (Math.random() - 0.5) * 0.1;\n    initialParticleData[4 * i + 3] = 2 * (Math.random() - 0.5) * 0.1;\n  }\n  const particleBuffers = [];\n  const particleBindGroups = [];\n  const primitives = [];\n  for (let i = 0; i < 2; i++) {\n    particleBuffers.push(\n      device.createInterleavedVertexBuffer(['tex0_f32x2', 'tex1_f32x2'], initialParticleData, {\n        storage: true\n      })\n    );\n  }\n  for (let i = 0; i < 2; i++) {\n    const bindGroup = device.createBindGroup(spriteUpdateProgram.bindGroupLayouts[0]);\n    bindGroup.setBuffer('params', uniformBuffer);\n    bindGroup.setBuffer('particlesA', particleBuffers[i]);\n    bindGroup.setBuffer('particlesB', particleBuffers[(i + 1) % 2]);\n    particleBindGroups.push(bindGroup);\n\n    const primitive = device.createVertexLayout({\n      vertexBuffers: [\n        {\n          buffer: spriteVertexBuffer,\n          stepMode: 'vertex'\n        },\n        {\n          buffer: particleBuffers[i],\n          stepMode: 'instance'\n        }\n      ]\n    });\n    primitives.push(primitive);\n  }\n\n  function updateSimParams() {\n    for (const k in simParams) {\n      uniformBuffer.set(k, simParams[k]);\n    }\n  }\n  updateSimParams();\n  let t = 0;\n  device.runLoop((device) => {\n    device.setProgram(spriteUpdateProgram);\n    device.setBindGroup(0, particleBindGroups[t % 2]);\n    device.compute(Math.ceil(numParticles / 64), 1, 1);\n\n    device.clearFrameBuffer(new Vector4(0, 0, 0, 1), 1, 0);\n    device.setProgram(spriteProgram);\n    primitives[(t + 1) % 2].drawInstanced('triangle-list', 0, 3, numParticles);\n    t++;\n\n    device.drawText(`Device: ${device.type}`, 30, 30, '#ffffff');\n    device.drawText(`FPS: ${device.frameInfo.FPS.toFixed(2)}`, 30, 50, '#ffff00');\n  });\n})();\n"],"names":["colorNames","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","ASSERT","condition","message","Error","Observable","_listeners","constructor","this","on","type","listener","context","_internalAddEventListener","once","console","error","off","_internalRemoveEventListener","dispatchEvent","args","_invokeLocalListeners","listenerMap","options","l","o","handlers","push","handler","removed","i","length","splice","undefined","handlersCopy","slice","call","CubeFace","IDENT_MATRIX3x3","Float32Array","IDENT_MATRIX4x4","VectorBase","equalsTo","other","epsl","a","b","e","Math","max","abs","toString","elements","map","val","toFixed","name","join","isNaN","Number","setRandom","minValue","maxValue","random","Vector2","arg0","arg1","ArrayBuffer","super","Array","isArray","clone","x","v","y","magnitude","hypot","magnitudeSq","setXY","setAndNormalize","mag","subBy","sub","addBy","add","combineBy","t0","t1","combine","mulBy","mul","divBy","div","scaleBy","f","scale","inplaceNormalize","normalize","inplaceInverse","inverse","inplaceMin","min","inplaceMax","zero","one","axisPX","axisNX","axisPY","axisNY","distance","v1","v2","distanceSq","dx","dy","result","len","dot","cross","Vector3","arg2","z","xy","setXYZ","axisPZ","axisNZ","dz","Vector4","arg3","w","xyz","setXYZW","axisPW","axisNW","Quaternion","Matrix3x3","Matrix4x4","fromRotationMatrix","identity","inplaceConjugate","conjugate","multiplyRight","multiply","multiplyLeft","unitVectorToUnitVector","from","to","fromEulerAngle","order","fromAxisAngle","axis","angle","toAxisAngle","rad","acos","s","sin","toEulerAngles","angles","pitch","atan2","t2","yaw","asin","t3","t4","roll","matrix","toMatrix3x3","m","toMatrix","toMatrix4x4","m03","m13","m23","m30","m31","m32","m33","getDirectionX","getDirectionY","getDirectionZ","getAxisAngle","sign","halfAngle","sinHalf","transform","xx","yy","zz","xz","yz","wx","wy","wz","q","t","slerp","halfCos1","inv","ax","ay","az","aw","bx","by","bz","bw","halfCos","halfSinSqr","EPSILON","halfSin","sqrt","halfTheta","ratioA","ratioB","angleBetween","clamped","r","c","c1","cos","c2","c3","s1","s2","s3","trace","m00","m11","m22","m21","m12","m02","m20","m10","m01","zw","zx","yw","xw","arg4","arg5","arg6","arg7","arg8","set","getRow","row","setRow","setRowXYZ","getCol","col","setCol","setColXYZ","transpose","invert","tmp_0","tmp_1","tmp_2","d","rotationX","rotationY","rotationZ","rotation","n","oneMinusCosine","m1","m2","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","inplaceInvert","vec","transformPoint","transformVector","arg9","arg10","arg11","arg12","arg13","arg14","arg15","setRowXYZW","setColXYZW","ortho","left","right","bottom","top","near","far","reflection","nx","ny","nz","perspective","fovY","aspect","znear","zfar","h","frustum","obliqueProjection","projectionMatrix","clipPlane","obliquePerspective","perspectiveMatrix","nearPlane","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","invertAffine","translation","scaling","compose","rotateLeft","translateLeft","lookAt","eye","target","up","zAxis","xAxis","yAxis","lookAtCubeFace","face","pos","PX","NX","PY","NY","PZ","NZ","a03","a13","a23","a30","a31","a32","a33","b03","b13","b23","b30","b31","b32","b33","multiplyAffine","translateRight","scaleRight","scaleLeft","rotateRight","isOrtho","isPerspective","getNearPlaneWidth","getNearPlane","getNearPlaneHeight","getFarPlaneWidth","getFarPlane","getFarPlaneHeight","getFov","atan","getTanHalfFov","getAspect","getLeftPlane","getRightPlane","getTopPlane","getBottomPlane","setNearFar","inplaceInvertAffine","multiplyRightAffine","multiplyLeftAffine","point","transformPointH","transformPointP","transformPointAffine","transformVectorAffine","transformAffine","det","det_22_33","det_21_33","det_21_32","det_20_33","det_20_32","det_20_31","decompose","sx","sy","sz","rotationMatrix","decomposeLookAt","toDualQuaternion","real","dual","RectsPacker","_bins","_maxBins","_width","_height","width","height","maxBins","Bin","clear","insert","rect","binIndex","freeRects","newRect","findBestFit","numRectsToProcess","splitFreeRect","pruneFreeRects","score","MAX_VALUE","freeRect","areaFit","free","used","j","rect1","rect2","isRectInRect","test","container","Disposable","_disposed","disposed","dispose","onDispose","COMPRESSION_FORMAT_BC1","COMPRESSION_FORMAT_BC2","COMPRESSION_FORMAT_BC3","COMPRESSION_FORMAT_BC4","COMPRESSION_FORMAT_BC5","COMPRESSION_FORMAT_BC6H","COMPRESSION_FORMAT_BC7","COMPRESSION_FORMAT_ASTC","makeTextureFormat","compression","g","depth","stencil","float","integer","signed","srgb","bgr","blockWidth","blockHeight","blockSize","GREEN_BITMASK","DEPTH_BITMASK","STENCIL_BITMASK","textureFormatMap","unknown","r8unorm","r8snorm","r16f","r32f","r8ui","r8i","r16ui","r16i","r32ui","r32i","rg8unorm","rg8snorm","rg16f","rg32f","rg8ui","rg8i","rg16ui","rg16i","rg32ui","rg32i","rgba8unorm","rgba8snorm","bgra8unorm","rgba16f","rgba32f","rgba8ui","rgba8i","rgba16ui","rgba16i","rgba32ui","rgba32i","rg11b10uf","d16","d24","d32f","d24s8","d32fs8","dxt1","dxt3","dxt5","bc4","bc5","bc6h","bc7","linearTextureFormatToSRGB","format","hasDepthChannel","hasStencilChannel","isIntegerTextureFormat","isSignedTextureFormat","getTextureFormatBlockSize","ShaderType","align","alignment","getAlignment","isPrimitiveType","isScalarType","cols","isAtomicI32","isAtomicU32","isArrayType","elementType","isAnyType","member","structMembers","getAlignmentPacked","_type","getSize","isMatrixType","rows","PBPrimitiveTypeInfo","getCachedTypeInfo","resizeType","dimension","size","structAlignment","memberAlignment","getSizePacked","scalarSize","scalarType","PBPrimitiveType","U8","U8_NORM","I8","I8_NORM","F16","I16","I16_NORM","U16","U16_NORM","makePrimitiveType","scalarTypeMask","norm","typeToTypedArray","primitiveTypeMapWebGL","F32","F32VEC2","F32VEC3","F32VEC4","BOOL","BVEC2","BVEC3","BVEC4","I32","I32VEC2","I32VEC3","I32VEC4","U32","U32VEC2","U32VEC3","U32VEC4","MAT2","MAT2x3","MAT2x4","MAT3x2","MAT3","MAT3x4","MAT4x2","MAT4x3","MAT4","primitiveTypeMapWGSL","BITFLAG_ARRAY","BITFLAG_STORAGE","BITFLAG_DEPTH","BITFLAG_INT","BITFLAG_UINT","PBTextureType","BITFLAG_1D","BITFLAG_FLOAT","BITFLAG_2D","BITFLAG_3D","BITFLAG_CUBE","BITFLAG_MULTISAMPLED","BITFLAG_EXTERNAL","textureTypeMapWebGL","TEX_1D","TEX_2D","TEX_CUBE","TEX_EXTERNAL","textureTypeMapWebGL2","ITEX_1D","ITEX_2D","UTEX_1D","UTEX_2D","TEX_2D_ARRAY","ITEX_2D_ARRAY","UTEX_2D_ARRAY","TEX_3D","ITEX_3D","UTEX_3D","ITEX_CUBE","UTEX_CUBE","TEX_DEPTH_2D","TEX_DEPTH_2D_ARRAY","TEX_DEPTH_CUBE","textureTypeMapWGSL","TEX_CUBE_ARRAY","ITEX_CUBE_ARRAY","UTEX_CUBE_ARRAY","TEX_MULTISAMPLED_2D","ITEX_MULTISAMPLED_2D","UTEX_MULTISAMPLED_2D","TEX_STORAGE_1D","TEX_STORAGE_2D","TEX_STORAGE_2D_ARRAY","TEX_STORAGE_3D","TEX_DEPTH_CUBE_ARRAY","TEX_DEPTH_MULTISAMPLED_2D","storageTexelFormatMap","PBSamplerAccessMode","PBAddressSpace","PBTypeInfo","cls","detail","id","typeId","genTypeId","isVoidType","haveAtomicMembers","isStructType","isPointerType","isSamplerType","isTextureType","isHostSharable","isConstructible","isStorable","getConstructorOverloads","_deviceType","isCompatibleType","static","primitiveType","typeinfo","cachedTypes","getCachedOverloads","deviceType","deviceOverloads","cachedCtorOverloads","toTypeName","PBFunctionTypeInfo","isVectorType","scalarTypeInfo","vec2TypeInfo","vec3TypeInfo","typeF32Vec2","typeI32Vec2","typeU32Vec2","typeBVec2","typeF32Vec3","typeI32Vec3","typeU32Vec3","typeBVec3","typeF32Vec4","typeI32Vec4","typeU32Vec4","typeBVec4","colType","typeF32","isInteger","st","normalized","getLayoutAlignment","layout","getLayoutSize","I32_NORM","U32_NORM","varName","typename","toBufferLayout","_offset","PBStructTypeInfo","members","structName","defaultAlignment","defaultSize","calcAlignmentAndSizeSTD140","calcAlignmentAndSizePacked","extends","oldMembers","every","offset","bufferLayout","byteSize","entries","start","subLayout","arraySize","newName","reset","PBArrayTypeInfo","elementAlignment","PBPointerTypeInfo","writable","pointerType","addressSpace","device","mode","PBSamplerTypeInfo","accessMode","PBTextureTypeInfo","textureType","texelFormat","readable","storageTexelFormat","is1DTexture","is2DTexture","is3DTexture","isCubeTexture","isArrayTexture","isStorageTexture","isDepthTexture","isMultisampledTexture","isExternalTexture","isIntTexture","isUIntTexture","returnType","argTypes","argHash","F16VEC2","F16VEC3","F16VEC4","I8VEC2","I8VEC3","I8VEC4","I8VEC2_NORM","I8VEC3_NORM","I8VEC4_NORM","I16VEC2","I16VEC3","I16VEC4","I16VEC2_NORM","I16VEC3_NORM","I16VEC4_NORM","typeAtomicI32","_layout","typeAtomicU32","typeI32","I32VEC2_NORM","I32VEC3_NORM","I32VEC4_NORM","U8VEC2","U8VEC3","U8VEC4","U8VEC2_NORM","U8VEC3_NORM","U8VEC4_NORM","U16VEC2","U16VEC3","U16VEC4","U16VEC2_NORM","U16VEC3_NORM","U16VEC4_NORM","typeU32","U32VEC2_NORM","U32VEC3_NORM","U32VEC4_NORM","typeBool","typeMat2","typeMat2x3","typeMat2x4","typeMat3x2","typeMat3","typeMat3x4","typeMat4x2","typeMat4x3","typeMat4","typeTex1D","typeITex1D","typeUTex1D","typeTex2D","typeITex2D","typeUTex2D","typeTex2DArray","typeITex2DArray","typeUTex2DArray","typeTex3D","typeITex3D","typeUTex3D","typeTexCube","typeITexCube","typeUTexCube","typeTexExternal","typeTexCubeArray","typeITexCubeArray","typeUTexCubeArray","typeTexMultisampled2D","typeITexMultisampled2D","typeUTexMultisampled2D","typeTexStorage1D_rgba8unorm","typeTexStorage1D_rgba8snorm","typeTexStorage1D_bgra8unorm","typeTexStorage1D_rgba8uint","typeTexStorage1D_rgba8sint","typeTexStorage1D_rgba16uint","typeTexStorage1D_rgba16sint","typeTexStorage1D_rgba16float","typeTexStorage1D_rgba32uint","typeTexStorage1D_rgba32sint","typeTexStorage1D_rgba32float","typeTexStorage1D_rg32uint","typeTexStorage1D_rg32sint","typeTexStorage1D_rg32float","typeTexStorage1D_r32uint","typeTexStorage1D_r32sint","typeTexStorage1D_r32float","typeTexStorage2D_rgba8unorm","typeTexStorage2D_rgba8snorm","typeTexStorage2D_bgra8unorm","typeTexStorage2D_rgba8uint","typeTexStorage2D_rgba8sint","typeTexStorage2D_rgba16uint","typeTexStorage2D_rgba16sint","typeTexStorage2D_rgba16float","typeTexStorage2D_rgba32uint","typeTexStorage2D_rgba32sint","typeTexStorage2D_rgba32float","typeTexStorage2D_rg32uint","typeTexStorage2D_rg32sint","typeTexStorage2D_rg32float","typeTexStorage2D_r32uint","typeTexStorage2D_r32sint","typeTexStorage2D_r32float","typeTexStorage2DArray_rgba8unorm","typeTexStorage2DArray_rgba8snorm","typeTexStorage2DArray_rgba8uint","typeTexStorage2DArray_rgba8sint","typeTexStorage2DArray_rgba16uint","typeTexStorage2DArray_rgba16sint","typeTexStorage2DArray_rgba16float","typeTexStorage2DArray_rgba32uint","typeTexStorage2DArray_rgba32sint","typeTexStorage2DArray_rgba32float","typeTexStorage2DArray_rg32uint","typeTexStorage2DArray_rg32sint","typeTexStorage2DArray_rg32float","typeTexStorage2DArray_r32uint","typeTexStorage2DArray_r32sint","typeTexStorage2DArray_r32float","typeTexStorage3D_rgba8unorm","typeTexStorage3D_rgba8snorm","typeTexStorage3D_bgra8unorm","typeTexStorage3D_rgba8uint","typeTexStorage3D_rgba8sint","typeTexStorage3D_rgba16uint","typeTexStorage3D_rgba16sint","typeTexStorage3D_rgba16float","typeTexStorage3D_rgba32uint","typeTexStorage3D_rgba32sint","typeTexStorage3D_rgba32float","typeTexStorage3D_rg32uint","typeTexStorage3D_rg32sint","typeTexStorage3D_rg32float","typeTexStorage3D_r32uint","typeTexStorage3D_r32sint","typeTexStorage3D_r32float","typeTexDepth2D","typeTexDepth2DArray","typeTexDepthCube","typeTexDepthCubeArray","typeTexDepthMultisampled2D","typeSampler","typeSamplerComparison","typeVoid","_other","typeFrexpResult","typeFrexpResultVec2","typeFrexpResultVec3","typeFrexpResultVec4","VERTEX_ATTRIB_POSITION","VERTEX_ATTRIB_NORMAL","VERTEX_ATTRIB_DIFFUSE","VERTEX_ATTRIB_TANGENT","VERTEX_ATTRIB_TEXCOORD0","VERTEX_ATTRIB_TEXCOORD1","VERTEX_ATTRIB_TEXCOORD2","VERTEX_ATTRIB_TEXCOORD3","VERTEX_ATTRIB_TEXCOORD4","VERTEX_ATTRIB_TEXCOORD5","VERTEX_ATTRIB_TEXCOORD6","VERTEX_ATTRIB_TEXCOORD7","VERTEX_ATTRIB_BLEND_WEIGHT","VERTEX_ATTRIB_BLEND_INDICES","vertexAttribFormatMap","position_u8normx2","position_u8normx4","position_i8normx2","position_i8normx4","position_u16x2","position_u16x4","position_i16x2","position_i16x4","position_u16normx2","position_u16normx4","position_i16normx2","position_i16normx4","position_f16x2","position_f16x4","position_f32","position_f32x2","position_f32x3","position_f32x4","position_i32","position_i32x2","position_i32x3","position_i32x4","position_u32","position_u32x2","position_u32x3","position_u32x4","normal_f16x4","normal_f32x3","normal_f32x4","diffuse_u8normx4","diffuse_u16x4","diffuse_u16normx4","diffuse_f16x4","diffuse_f32x3","diffuse_f32x4","diffuse_u32x3","diffuse_u32x4","tangent_f16x4","tangent_f32x3","tangent_f32x4","tex0_u8normx2","tex0_u8normx4","tex0_i8normx2","tex0_i8normx4","tex0_u16x2","tex0_u16x4","tex0_i16x2","tex0_i16x4","tex0_u16normx2","tex0_u16normx4","tex0_i16normx2","tex0_i16normx4","tex0_f16x2","tex0_f16x4","tex0_f32","tex0_f32x2","tex0_f32x3","tex0_f32x4","tex0_i32","tex0_i32x2","tex0_i32x3","tex0_i32x4","tex0_u32","tex0_u32x2","tex0_u32x3","tex0_u32x4","tex1_u8normx2","tex1_u8normx4","tex1_i8normx2","tex1_i8normx4","tex1_u16x2","tex1_u16x4","tex1_i16x2","tex1_i16x4","tex1_u16normx2","tex1_u16normx4","tex1_i16normx2","tex1_i16normx4","tex1_f16x2","tex1_f16x4","tex1_f32","tex1_f32x2","tex1_f32x3","tex1_f32x4","tex1_i32","tex1_i32x2","tex1_i32x3","tex1_i32x4","tex1_u32","tex1_u32x2","tex1_u32x3","tex1_u32x4","tex2_u8normx2","tex2_u8normx4","tex2_i8normx2","tex2_i8normx4","tex2_u16x2","tex2_u16x4","tex2_i16x2","tex2_i16x4","tex2_u16normx2","tex2_u16normx4","tex2_i16normx2","tex2_i16normx4","tex2_f16x2","tex2_f16x4","tex2_f32","tex2_f32x2","tex2_f32x3","tex2_f32x4","tex2_i32","tex2_i32x2","tex2_i32x3","tex2_i32x4","tex2_u32","tex2_u32x2","tex2_u32x3","tex2_u32x4","tex3_u8normx2","tex3_u8normx4","tex3_i8normx2","tex3_i8normx4","tex3_u16x2","tex3_u16x4","tex3_i16x2","tex3_i16x4","tex3_u16normx2","tex3_u16normx4","tex3_i16normx2","tex3_i16normx4","tex3_f16x2","tex3_f16x4","tex3_f32","tex3_f32x2","tex3_f32x3","tex3_f32x4","tex3_i32","tex3_i32x2","tex3_i32x3","tex3_i32x4","tex3_u32","tex3_u32x2","tex3_u32x3","tex3_u32x4","tex4_u8normx2","tex4_u8normx4","tex4_i8normx2","tex4_i8normx4","tex4_u16x2","tex4_u16x4","tex4_i16x2","tex4_i16x4","tex4_u16normx2","tex4_u16normx4","tex4_i16normx2","tex4_i16normx4","tex4_f16x2","tex4_f16x4","tex4_f32","tex4_f32x2","tex4_f32x3","tex4_f32x4","tex4_i32","tex4_i32x2","tex4_i32x3","tex4_i32x4","tex4_u32","tex4_u32x2","tex4_u32x3","tex4_u32x4","tex5_u8normx2","tex5_u8normx4","tex5_i8normx2","tex5_i8normx4","tex5_u16x2","tex5_u16x4","tex5_i16x2","tex5_i16x4","tex5_u16normx2","tex5_u16normx4","tex5_i16normx2","tex5_i16normx4","tex5_f16x2","tex5_f16x4","tex5_f32","tex5_f32x2","tex5_f32x3","tex5_f32x4","tex5_i32","tex5_i32x2","tex5_i32x3","tex5_i32x4","tex5_u32","tex5_u32x2","tex5_u32x3","tex5_u32x4","tex6_u8normx2","tex6_u8normx4","tex6_i8normx2","tex6_i8normx4","tex6_u16x2","tex6_u16x4","tex6_i16x2","tex6_i16x4","tex6_u16normx2","tex6_u16normx4","tex6_i16normx2","tex6_i16normx4","tex6_f16x2","tex6_f16x4","tex6_f32","tex6_f32x2","tex6_f32x3","tex6_f32x4","tex6_i32","tex6_i32x2","tex6_i32x3","tex6_i32x4","tex6_u32","tex6_u32x2","tex6_u32x3","tex6_u32x4","tex7_u8normx2","tex7_u8normx4","tex7_i8normx2","tex7_i8normx4","tex7_u16x2","tex7_u16x4","tex7_i16x2","tex7_i16x4","tex7_u16normx2","tex7_u16normx4","tex7_i16normx2","tex7_i16normx4","tex7_f16x2","tex7_f16x4","tex7_f32","tex7_f32x2","tex7_f32x3","tex7_f32x4","tex7_i32","tex7_i32x2","tex7_i32x3","tex7_i32x4","tex7_u32","tex7_u32x2","tex7_u32x3","tex7_u32x4","blendweights_f16x1","blendweights_f32x1","blendweights_f16x2","blendweights_f32x2","blendweights_f16x3","blendweights_f32x3","blendweights_f16x4","blendweights_f32x4","blendindices_u16x1","blendindices_f16x1","blendindices_f32x1","blendindices_u32x1","blendindices_u16x2","blendindices_f16x2","blendindices_f32x2","blendindices_u32x2","blendindices_u16x3","blendindices_f16x3","blendindices_f32x3","blendindices_u32x3","blendindices_u16x4","blendindices_f16x4","blendindices_f32x4","blendindices_u32x4","vertexAttribNameMap","position","normal","diffuse","tangent","blendIndices","blendWeights","texCoord0","texCoord1","texCoord2","texCoord3","texCoord4","texCoord5","texCoord6","texCoord7","vertexAttribNameRevMap","GPUResourceUsageFlags","getVertexAttribByName","getVertexAttribName","attrib","getVertexFormatSize","fmt","getVertexAttribFormat","semantic","count","loc","k","getVertexBufferStride","vertexBufferType","vertexType","stride","getVertexBufferAttribType","attribName","getVertexBufferAttribTypeBySemantic","makeVertexBufferType","attributes","semanticToAttrib","VertexData","_vertexBuffers","_indexBuffer","_drawOffset","_numVertices","newVertexData","calcNumVertices","vertexBuffers","indexBuffer","numVertices","getDrawOffset","setDrawOffset","getVertexBuffer","buffer","getVertexBufferInfo","getIndexBuffer","setVertexBuffer","stepMode","usage","BF_VERTEX","structure","internalSetVertexBuffer","removeVertexBuffer","info","setIndexBuffer","floor","byteLength","old","drawOffset","CPUTimer","_cpuTimer","_cpuStart","_cpuTime","_ended","window","performance","Date","now","begin","end","ended","elapsed","Pool","_memCost","_memCostThreshold","_device","_id","_freeTextures","_allocatedTextures","WeakMap","_autoReleaseTextures","Set","_freeFramebuffers","_allocatedFramebuffers","_autoReleaseFramebuffers","memCostThreshold","autoRelease","tex","releaseTexture","fb","releaseFrameBuffer","purge","fetchTemporalTexture2D","mipmapping","hash","texture","list","pop","createTexture2D","memCost","refcount","fetchTemporalTexture2DArray","numLayers","createTexture2DArray","fetchTemporalTextureCube","createCubeTexture","fetchTemporalFramebuffer","colorTexOrFormat","depthTexOrFormat","sampleCount","ignoreDepthStencil","attachmentMipLevel","attachmentCubeface","attachmentLayer","colors","colorAttachments","depthAttachment","createTemporalFramebuffer","uid","createFrameBuffer","getColorAttachments","setColorAttachmentMipLevel","setColorAttachmentCubeFace","setColorAttachmentLayer","get","disposeTexture","safeReleaseTexture","retainTexture","disposeFrameBuffer","internalDisposeFrameBuffer","retainFrameBuffer","getDepthAttachment","delete","PBReflection","_builder","_tagList","_attribList","builder","vertexAttributes","getVertexAttributes","hasVertexAttribute","indexOf","tag","getTag","addTag","Object","keys","attribute","setAttrib","exp","getter","getGlobalScope","expValueToString","value","$ast","expValueTypeToString","PBError","PBValueOutOfRange","getMessage","PBTypeCastError","valueType","expectedType","PBParamLengthError","func","PBParamTypeError","param","PBParamValueError","reason","PBOverloadingMatchError","PBReferenceValueRequired","PBPointerValueRequired","PBDeviceNotSupport","feature","PBNonScopedFunctionCall","funcName","PBASTError","ast","text","PBInternalError","desc","currentProgramBuilder","setCurrentProgramBuilder","pb","getCurrentProgramBuilder","BuiltinInputStructNameVS","BuiltinOutputStructNameVS","BuiltinInputStructNameFS","BuiltinOutputStructNameFS","BuiltinInputStructNameCS","DeclareType","ShaderPrecisionType","getBuiltinParamName","shaderType","Vertex","Fragment","Compute","getBuiltinInputStructInstanceName","getBuiltinOutputStructInstanceName","getBuiltinInputStructName","genSamplerName","textureName","comparison","builtinVariables","webgl","stage","pointSize","fragCoord","frontFacing","fragDepth","inOrOut","extension","webgl2","vertexIndex","instanceIndex","webgpu","localInvocationId","globalInvocationId","workGroupId","numWorkGroups","sampleMaskIn","sampleMaskOut","sampleIndex","String","toInt","toUint","unbracket","trim","match","errors","substring","ShaderAST","isReference","isPointer","getType","toWebGL","_indent","_ctx","toWebGL2","toWGSL","ASTExpression","ASTFunctionParameter","paramAST","init","markWritable","ASTPrimitive","warn","$str","isWritable","getAddressSpace","isConstExp","indent","ctx","ASTScope","statements","filter","stmt","ASTCallFunction","isStatement","ASTNakedScope","ASTGlobalScope","uniforms","findFunctions","ASTFunction","precisions","version","body","types","uniform","inputs","input","outputs","output","builtins","extensions","defines","structNames","usedBuiltins","allBuiltins","ASTStructDefine","prefix","ref","constExp","$declareType","UNIFORM","STORAGE","$global","PRIVATE","FUNCTION","$typeinfo","global","ASTLValue","ASTLValueScalar","ASTLValueHash","scope","field","ASTReferenceOf","ASTLValueArray","index","ASTLValueDeclare","readonly","moduleScope","storageAccessMode","decorator","ASTShaderExpConstructor","convertedArgs","arg","getDevice","overloads","overload","convertArgs","ASTScalar","ASTHash","source","ASTCast","sourceValue","castType","ASTAddressOf","ASTUnaryFunc","op","ASTBinaryFunc","ASTArrayIndex","ASTTouch","ASTSelect","first","second","firstType","secondType","ASTAssignment","lvalue","rvalue","ltype","valueTypeLeft","rtype","checkScalarType","valueTypeRight","rhs","lvalueIsPtr","rvalueIsPtr","findIndex","targetType","isBool","isInt","isUint","isFloat","ASTDiscard","ASTBreak","ASTContinue","ASTReturn","retType","funcType","funcArg","byRef","argAddressSpace","argType","UNKNOWN","thisArgs","argsNew","ASTDeclareVar","group","binding","blockName","builtin","$location","mrt","typeReplacement","isBlock","$readonly","isBuiltin","isMainFunc","str","p","qualifier","$inout","paramType","dataType","workgroupSize","retName","retStr","ASTIf","keyword","nextElse","ASTRange","open","reverse","comp","incr","ASTDoWhile","ASTWhile","indent2","sizePrefix","alignPrefix","isRef","constructorCache","Map","makeConstructor","typeFunc","Proxy","prop","ctor","PBShaderExp","dim","arrayType","Proxiable","proxy","$get","$set","$thisProxy","uidExp","$uid","$sampleType","$precision","$memberCache","$attrib","$tags","$_group","$isBuffer","$bindingSize","typeInfo","$qualifier","NONE","DECLARE_TYPE_NONE","getTextureSampleType","$group","DECLARE_TYPE_UNIFORM","uniformBuffer","bindingSize","workgroup","DECLARE_TYPE_WORKGROUP","storage","DECLARE_TYPE_STORAGE","storageReadonly","storageBuffer","storageBufferReadonly","inout","out","attr","DECLARE_TYPE_IN","forEach","sampleType","at","varType","setAt","getCurrentScope","highp","HIGH","mediump","MEDIUM","lowp","LOW","isConstructor","isVector","numComponents","getTypeName","num","elementIndex","element","structInfo","structs","some","dstAST","genTypeList","genMatrixTypeList","matchFunctionOverloadings","bit","MASK_WEBGL1","MASK_WEBGL2","MASK_WEBGPU","overloadings","builtinFunctionsAll","argsNonArray","normalizeExpValue","matchResult","_matchFunctionOverloading","callBuiltinChecked","$callFunction","callBuiltin","genMatrixType","shaderTypeMask","genType","vecOnly","unaryFunc","binaryFunc","MASK_WEBGL","MASK_ALL","add_2","normalizeFunc","mul_2","mod","isIntegerType","radians","degrees","sinh","cosh","tanh","asinh","acosh","atanh","pow","exp2","log","log2","inverseSqrt","ceil","fract","fma","round","trunc","clamp","saturate","mix","step","smoothStep","isnan","isinf","faceForward","reflect","refract","frexp","outerProduct","determinant","lessThan","lessThanEqual","greaterThan","greaterThanEqual","compEqual","compNotEqual","equal","all","notEqual","any","not","neg","or_2","or","compOr","and_2","and","compAnd","compXor","sal","sar","arrayLength","addressOf","$callFunctionNoCheck","select","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","pack4x8snorm","unpack4x8snorm","pack4x8unorm","unpack4x8unorm","pack2x16snorm","unpack2x16snorm","pack2x16unorm","unpack2x16unorm","pack2x16float","unpack2x16float","matrixCompMult","dpdx","dpdy","fwidth","dpdxCoarse","dpdxFine","dpdyCoarse","dpdyFine","textureDimensions","texType","level","textureGather","textureArrayGather","textureGatherCompare","textureArrayGatherCompare","textureLoad","coordType","ivec2","textureArrayLoad","coords","ivec3","textureStore","textureArrayStore","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","sampler","getDefaultSampler","ret","vec4","vec2","textureArraySample","arrayIndex","coordsComposit","vec3","textureSampleBias","textureArraySampleBias","textureSampleCompare","coordsComposite","textureArraySampleCompare","textureSampleLevel","shaderKind","int","textureArraySampleLevel","textureSampleCompareLevel","textureArraySampleCompareLevel","textureSampleGrad","textureArraySampleGrad","storageBarrier","workgroupBarrier","atomicLoad","overloades","atomicStore","StorageTextureFormatMap","rgba8uint","rgba8sint","rgba16uint","rgba16sint","rgba16float","r32float","r32uint","r32sint","rg32float","rg32uint","rg32sint","rgba32float","rgba32uint","rgba32sint","vec_n","vecType","AST","primitiveCtors","uint","bool","uvec2","bvec2","uvec3","bvec3","ivec4","uvec4","bvec4","mat2","mat2x3","mat2x4","mat3x2","mat3","mat3x4","mat4x2","mat4x3","mat4","simpleCtors","tex1D","tex2D","tex3D","texCube","tex2DShadow","texCubeShadow","tex2DArray","tex2DArrayShadow","texExternal","itex1D","itex2D","itex3D","itexCube","itex2DArray","utex1D","utex2D","utex3D","utexCube","utex2DArray","samplerComparison","texStorageCtors","texStorage1D","texStorage2D","texStorage2DArray","texStorage3D","input_prefix","output_prefix_vs","ProgramBuilder","_workgroupSize","_scopeStack","_shaderType","_structInfo","_uniforms","_globalScope","_builtinScope","_inputScope","_outputScope","_inputs","_outputs","_vertexAttributes","_depthRangeCorrection","_emulateDepthClamp","_lastError","_reflection","_autoStructureTypeIndex","_nameMap","lastError","builtinScope","inputScope","outputScope","depthRangeCorrection","emulateDepthClamp","getReflection","queryGlobal","pushScope","unshift","popScope","shift","getCurrentFunctionScope","funcScope","PBFunctionScope","$parent","buildRender","defineInternalStructs","buildRenderSource","buildCompute","buildComputeSource","buildRenderProgram","createGPUProgram","label","params","vs","fs","bindGroupLayouts","buildComputeProgram","$createFunctionIfNotExists","main","$mainFunc","referenceOf","ptr","struct","instanceName","isIdenticalStruct","checkName","generateStructureName","defineHiddenStruct","defineStruct","structType","structDef","internalDefineStruct","defineStructByType","typeCopy","internalDefineStructByType","blockArgs","getFunction","$getFunctions","getBlockName","defineBuiltinStruct","builtinVars","inoutList","findStructType","structInstance","array","typeok","isComposite","discard","tagShaderExp","tagValue","in","location","variable","defineProperty","DECLARE_TYPE_OUT","u","samplerType","autoBindSampler","samplerName","converted","guessExpValueType","findStructConstructor","PBGlobalScope","PBBuiltinScope","PBInputScope","PBOutputScope","generate","compute","mergeUniformsCompute","updateUniformBindings","generateComputeSource","createBindGroupLayouts","err","prototype","vertex","vertexScope","vertexBuiltinScope","vertexInputs","vertexOutputs","fragment","fragScope","fragBuiltinScope","fragInputs","fragOutputs","mergeUniforms","generateRenderSource","$outputs","clamppedDepth","$_usedBuiltins","globalScope","uniformList","block","nameList","ulist","allLists","uname","mask","nameMap","globalScopeVertex","globalScopeFragmet","vertexUniformList","fragUniformList","sharedUniformList","uniformLists","nameListUniform","nameListStorage","maskList","layoutList","scopes","shaderTypes","bindings","fill","layouts","dynamicOffsetIndex","uniformInfo","entry","visibility","isStorage","minBindingSize","hasDynamicOffset","uniformLayout","viewDimension","storageTexture","access","externalTexture","multisampled","autoBindSamplerComparison","SAMPLE","_getFunctionOverload","fn","matches","argInfo","PBScope","$_variables","$_parentScope","$_AST","$_localScope","astScope","parent","$builder","$builtins","$inputs","$getVertexAttrib","$l","$_getLocalScope","$g","$_getGlobalScope","$local","initNonArray","$_declare","$touch","$query","$_declareInternal","key","initType","$_registerVar","$_findOrSetUniform","found","isDepth","samplerExp","samplerNameComp","samplerExpComp","configurable","$localGet","$localSet","PBLocalScope","$_scope","$_builtinVars","that","$getBuiltinVar","$_names","$_aliases","lastName","$_inputStructInfo","$inputStructInfo","$inputStruct","inputStruct","isCompute","outputStruct","$internalCreateFunction","$return","$getCurrentFunctionScope","isMain","currentFunctionScope","astFunc","curIndex","inputArg","funcArgs","PBInsideFunctionScope","retval","findOwnerFunction","retValNonArray","returnValue","$scope","PBNakedScope","$if","astIf","PBIfScope","$choice","$break","$continue","$for","counter","initializerType","initval","astFor","PBForScope","$do","astDoWhile","PBDoWhileScope","$while","astWhile","PBWhileScope","$getMainScope","$isMain","$elseif","astElseIf","$else","astElse","setBuiltinFuncs","makeStorageTextureCtor","FontCanvas","canvas","_realize","_canvas","_context","font","document","createElement","style","getContext","willReadFrequently","textBaseline","textAlign","fillStyle","fillRect","imageSmoothingEnabled","imageSmoothingQuality","Font","_name","_nameScaled","_scale","_size","_family","_top","_bottom","_topScaled","_bottomScaled","_div","_normalizeFont","fetchFont","fontlist","fontCache","fontName","fontNameScaled","family","topScaled","bottomScaled","maxHeight","maxHeightScaled","equalTo","_measureFontHeight","oldFont","oldTextBaseline","oldFillStyle","fontSize","parseInt","fontFamily","testString","metric","measureText","maxWidth","clearRect","fillText","extra","pixels","getImageData","data","infoScaled","TextureAtlasManager","_packer","_binWidth","_binHeight","_rectBorderWidth","_linearSpace","_atlasList","_atlasInfoMap","_atlasRestoreHandler","binWidth","binHeight","rectBorderWidth","linearSpace","atlasTextureRestoreHandler","getAtlasTexture","getAtlasInfo","isEmpty","pushCanvas","rc","atlasX","atlasY","_updateAtlasTextureCanvas","atlasIndex","uMin","vMin","uMax","vMax","pushBitmap","bitmap","_updateAtlasTexture","_createAtlasTexture","update","Uint8Array","restoreHandler","xOffset","yOffset","textureAtlas","updateFromElement","ImageBitmap","originValues","GlyphManager","border","async","getGlyphInfo","char","glyphInfo","_hash","_cacheGlyph","measureStringWidth","charMargin","ch","getCharWidth","clipStringToWidth","sum","actualBoundingBoxRight","_getGlyphBitmap","DrawText","calculateTextMatrix","viewport","getViewport","flipMatrix","setFont","getScale","drawText","color","pushDeviceStates","prepareDrawText","textMatrix","colorValue","toLowerCase","collen","fact","parseColor","textBindGroup","setValue","getFramebuffer","setProgram","textProgram","setVertexLayout","textVertexLayout","setRenderStates","textRenderStates","setBindGroup","drawn","total","GLYPH_COUNT","textOffset","drawTextNoOverflow","flush","popDeviceStates","glyph","glyphManager","textVertexBuffer","bufferSubData","vertexCache","setTexture","draw","base","prepared","createInterleavedVertexBuffer","dynamic","indices","Uint16Array","textIndexBuffer","createIndexBuffer","createVertexLayout","uv","flip","textColor","srgbOut","alpha","rgb","createBindGroup","createRenderStateSet","useBlendingState","enable","setBlendFuncRGB","setBlendFuncAlpha","useDepthState","enableTest","enableWrite","useRasterizerState","setCullMode","BaseDevice","_canvasClientWidth","_canvasClientHeight","_gpuObjectList","_gpuMemCost","_disposeObjectList","_beginFrameTime","_endFrameTime","_frameInfo","_gpuTimer","_runningLoop","_fpsCounter","_runLoopFunc","_backend","_beginFrameCounter","_programBuilder","_poolMap","_defaultPoolKey","_temporalFramebuffer","_vSync","_stateStack","cvs","backend","textures","samplers","buffers","programs","framebuffers","vertexArrayObjects","bindGroups","setAttribute","clientWidth","clientHeight","frameCounter","frameTimestamp","elapsedTimeCPU","elapsedTimeGPU","elapsedFrame","elapsedOverall","FPS","drawCalls","computeCalls","nextFrameCall","nextFrameCallNext","time","frame","Symbol","_registerEventHandlers","videoMemoryUsage","frameInfo","isRendering","typeName","vSync","pool","runLoopFunction","programBuilder","poolExists","has","getPool","setFramebuffer","colorOrRT","newRT","temporal","currentRT","_setFramebuffer","disposeObject","obj","remove","removeGPUObject","isContextLost","destroy","restoreObject","restore","enableGPUTimeRecording","createGPUTimer","beginFrame","updateFrameInfo","onBeginFrame","endFrame","onEndFrame","componentCount","attribFormats","opt","assign","managed","createStructuredBuffer","createVertexBuffer","attribFormat","_draw","drawInstanced","numInstances","_drawInstanced","executeRenderBundle","renderBundle","_executeRenderBundle","workgroupCountX","workgroupCountY","workgroupCountZ","_compute","runNextFrame","runNextFrameAsync","Promise","resolve","then","exitLoop","cancelAnimationFrame","cancelNextFrame","runLoop","requestAnimationFrame","nextFrame","windowOrderReversed","isWindingOrderReversed","framebuffer","scissor","getScissor","program","getProgram","renderStateSet","getRenderStates","vertexLayout","getVertexLayout","getBindGroup","setViewport","setScissor","reverseVertexWindingOrder","getGPUObjects","getGPUObjectById","screenToDevice","deviceToScreen","addGPUObject","getGPUObjectList","updateVideoMemoryCost","delta","_onresize","ResizeObserver","observe","MutationObserver","mutations","attributeFilter","addEventListener","gpuTime","cpuTime","tmp","isTexture","isSampler","isBuffer","isFramebuffer","isProgram","isVertexLayout","isBindGroup","invalidateAll","reloadAll","reload","parseTextureOptions","noMipmapFlag","TF_NO_MIPMAP","writableFlag","TF_WRITABLE","dynamicFlag","DYNAMIC","samplerOptions","mipFilter","parseBufferOptions","defaultUsage","usageFlag","BF_UNIFORM","BF_INDEX","BF_READ","BF_WRITE","BF_PACK_PIXEL","BF_UNPACK_PIXEL","storageFlag","BF_STORAGE","MANAGED","StructuredBufferData","_cache","_buffer","_uniformMap","_uniformPositions","view","_v","subarray","arr","BYTES_PER_ELEMENT","getPrototypeOf","setStruct","viewCtor","Uint32Array","Int32Array","Int16Array","Int8Array","_uniqueId","WebGPUObject","_object","_uid","_cid","_queueState","_restoreHandler","isTexture2D","isTexture2DArray","isTexture3D","isTextureCube","isTextureVideo","object","cid","queueState","WebGPUProgram","_vs","_fs","_cs","_label","_error","_bindGroupLayouts","_csModule","_vsModule","_fsModule","_pipelineLayout","renderParams","computeParams","_load","_hashCounter","getCompileError","getShaderSource","kin","getBindingInfo","bindName","bindingPoint","getPipelineLayout","getShaderModule","vsModule","fsModule","csModule","pipelineLayout","createUniformBuffer","createShaderModule","createPipelineLayout","fetchBindGroupLayout","code","sm","compilationInfo","getCompilationInfo","messages","msg","lineNum","linePos","use","UploadRingBuffer","_bufferList","_defaultSize","_unmappedBufferList","uploadBuffer","src","dst","srcOffset","dstOffset","uploadSize","allowOverlap","mappedBuffer","fetchBufferMapped","mappedRange","upload","uploadOffset","beginUploads","unmap","endUploads","mapAsync","GPUMapMode","WRITE","getMappedRange","bufferSize","buf","createBuffer","GPUBufferUsage","MAP_WRITE","COPY_SRC","mappedAtCreation","WebGPUBuffer","_usage","_gpuUsage","_ringBuffer","_pendingUploads","load","gpuGetObjectHash","gpuUsage","searchInsertPosition","dstByteOffset","insertIndex","mid","srcLength","byteOffset","bufferUpload","commit","pushUpload","uploadStart","uploadEnd","getBufferSubData","dstBuffer","offsetInBytes","sizeInBytes","sourceBuffer","sync","copyBuffer","READ","range","beginSyncChanges","encoder","cmdEncoder","createCommandEncoder","copyBufferToBuffer","queue","submit","finish","endSyncChanges","VERTEX","COPY_DST","INDEX","MAP_READ","gpuCreateBuffer","flushUploads","bufferMapped","typeU8Vec2_Norm","typeU8Vec4_Norm","typeI8Vec2_Norm","typeI8Vec4_Norm","typeU16Vec2","typeU16Vec4","typeI16Vec2","typeI16Vec4","typeU16Vec2_Norm","typeU16Vec4_Norm","typeI16Vec2_Norm","typeI16Vec4_Norm","typeF16Vec2","typeF16Vec4","vertexFormatTable","WebGPUStructuredBuffer","_structure","_data","getGPUVertexFormat","WebGPUBindGroup","_layoutDesc","_entries","_bindGroup","_buffers","_textures","_createdBuffers","_gpuId","_videoTextures","_dynamicOffsets","_resources","bindGroup","_create","layoutDescriptor","getGPUId","bufferList","textureList","invalidate","getLayout","getDynamicOffsets","getBuffer","nocreate","_getBuffer","setBuffer","bindOffset","bindSize","bufferUsage","mappedName","setRawData","srcPos","getTexture","_findTextureLayout","setTextureView","mipCount","getView","samplerEntry","_findSamplerLayout","compare","removeBindGroupReference","addBindGroupReference","getDefaultView","setSampler","updateVideoTextures","updateVideoFrame","_getBufferInfo","gpuBuffer","resourceOk","ge","resource","descriptor","gpuCreateBindGroup","textureWrappingMap","repeat","textureFilterMap","nearest","linear","none","compareFuncMap","always","le","lt","gt","eq","ne","never","stencilOpMap","keep","replace","decr","primitiveTypeMap","faceModeMap","back","front","blendEquationMap","subtract","blendFuncMap","vertexFormatToHash","float32","float32x2","float32x3","float32x4","uint32","uint32x2","uint32x3","uint32x4","sint32","sint32x2","sint32x3","sint32x4","uint16x2","uint16x4","unorm16x2","unorm16x4","sint16x2","sint16x4","snorm16x2","snorm16x4","uint8x2","uint8x4","unorm8x2","unorm8x4","sint8x2","sint8x4","snorm8x2","snorm8x4","zip","values","textureFormatInvMap","hashToVertexFormat","WebGPUClearQuad","drawClearQuad","renderPass","clearColor","clearDepth","clearStencil","_clearStateSet","initClearQuad","getFrameBufferInfo","clearHash","getClearProgram","bClearColor","bClearDepth","bClearStencil","_defaultClearColor","useColorState","setColorMask","useStencilState","setReference","commandQueue","programInfo","_clearPrograms","split","outColor","setFrontOp","setBackOp","setFrontCompareFunc","setBackCompareFunc","WebGPUMipmapGenerator","getMipmapGenerationBindGroupLayout","_mipmapGenerationProgram","initMipmapGeneration","generateMipmap","isRenderable","miplevels","mipLevelCount","setMipmapDirty","generateMiplevel","gpuFormat","generateMipmapsForBindGroups","isMipmapDirty","commandEncoder","srcTex","dstTex","dstLevel","srcLevel","renderPassEncoder","beginMipmapGenerationPass","getMipmapGenerationBindGroup","pipeline","pipelineCache","fetchRenderPipeline","_mipmapGenerationStateSet","_frameBufferInfo","setPipeline","passDesc","createView","baseMipLevel","baseArrayLayer","arrayLayerCount","loadOp","clearValue","storeOp","frameBuffer","colorFormats","depthFormat","beginRenderPass","insertDebugMarker","outUV","WebGPUBaseTexture","_target","_views","_defaultView","_mipmapDirty","_flags","_depth","_format","_renderable","_fb","_gpuFormat","_mipLevelCount","_samplerOptions","_mipBindGroups","getTextureCaps","getTextureFormatInfo","_getSamplerOptions","isFilterable","filterable","clearPendingUploads","getDeviceCaps","textureCaps","isSRGBFormat","isFloatFormat","isIntegerFormat","isSignedFormat","isCompressedFormat","gpuCreateTextureView","copyPixelDataToBuffer","layer","copyTexturePixelsToBuffer","generateMipmaps","textureUpload","copyBufferToTexture","bytesPerRow","bufferStride","rowsPerImage","uploadHeight","origin","uploadOffsetX","uploadOffsetY","uploadOffsetZ","mipLevel","uploadWidth","depthOrArrayLayers","uploadDepth","image","copyView","offsetX","offsetY","offsetZ","premultipliedAlpha","copyExternalImageToTexture","srcX","srcY","shadow","createSampler","_calcMipLevelCount","renderable","allocInternal","numMipLevels","autoMipLevelCount","gpuCreateTexture","GPUTextureUsage","TEXTURE_BINDING","RENDER_ATTACHMENT","STORAGE_BINDING","calcMemoryUsage","calculateBufferSizeForCopy","getTextureFormatBlockWidth","getTextureFormatBlockHeight","blocksPerRow","blocksPerCol","rowStride","sizeAligned","strideAligned","numRows","tmpBuffer","copyTextureToBuffer","uploadRaw","miplevel","isTextureUploading","srcLayerOffset","dstLayerOffset","destination","dataLayout","writeTexture","uploadImageData","destX","destY","srcZ","faceGroups","levelGroups","levelGroup","addressU","addressV","addressW","magFilter","minFilter","_markAsCurrentFB","_isMarkedAsCurrentFB","WebGPUTexture2D","loadEmpty","HTMLCanvasElement","drawImage","imageData","readPixels","faceOrLayer","readPixelsToBuffer","loadFromElement","sRGB","creationFlags","loadImage","createEmpty","createWithMipmapData","isCubemap","isVolume","loadLevels","levels","swizzle","mipLevels","isCompressed","supportS3TCSRGB","supportS3TC","mipDatas","WebGPUTexture2DArray","zOffset","destZ","WebGPUTexture3D","_level","_mipCount","WebGPUTextureCube","WebGPUTextureVideo","_source","_refBindGroups","loadElement","readyState","VideoFrame","close","gpuImportExternalTexture","_face","_x","_y","_w","_h","_faceOrLayer","_mipLevel","videoWidth","videoHeight","WebGPUFramebufferCaps","maxDrawBuffers","maxColorAttachmentBytesPerSample","supportRenderMipmap","supportMultisampledFramebuffer","supportFloatBlending","supportDepth32float","supportDepth32floatStencil8","limits","maxColorAttachments","features","WebGPUMiscCaps","supportOversizedViewport","supportBlendMinMax","support32BitIndex","supportDepthClamp","maxBindGroups","maxTexCoordIndex","WebGPUShaderCaps","supportFragmentDepth","supportStandardDerivatives","supportShaderTextureLod","supportHighPrecisionFloat","supportHighPrecisionInt","maxUniformBufferSize","uniformBufferOffsetAlignment","maxStorageBufferSize","storageBufferOffsetAlignment","maxUniformBufferBindingSize","minUniformBufferOffsetAlignment","maxStorageBufferBindingSize","minStorageBufferOffsetAlignment","WebGPUTextureCaps","_textureFormatInfos","maxTextureSize","maxCubeTextureSize","npo2Mipmapping","npo2Repeating","supportBPTC","supportRGTC","supportASTC","supportDepthTexture","support3DTexture","supportSRGBTexture","supportFloatTexture","supportLinearFloatTexture","supportHalfFloatTexture","supportLinearHalfFloatTexture","supportAnisotropicFiltering","supportFloatColorBuffer","supportHalfFloatColorBuffer","maxTextureDimension2D","gpuSampleType","compressed","numPixels","WebGPUVertexLayout","_vertexData","_layouts","vb","getLayouts","calcHash","getDefaultBuffer","_defaultBuffers","attribHash","layoutVertexBuffers","idx","bufferInfo","layoutHash","bind","WebGPURenderState","defaultState","_defaultState","_getHash","invalidateHash","computeHash","WebGPUColorState","_redMask","_greenMask","_blueMask","_alphaMask","redMask","greenMask","blueMask","alphaMask","WebGPUBlendingState","_enabled","_alphaToCoverageEnabled","_srcBlendRGB","_dstBlendRGB","_srcBlendAlpha","_dstBlendAlpha","_rgbEquation","_alphaEquation","enableAlphaToCoverage","setBlendEquation","enabled","alphaToCoverageEnabled","srcBlendRGB","srcBlendAlpha","dstBlendRGB","dstBlendAlpha","rgbEquation","alphaEquation","setBlendFunc","dest","WebGPURasterizerState","_cullMode","_depthClampEnabled","enableDepthClamp","cullMode","depthClampEnabled","WebGPUDepthState","_testEnabled","_writeEnabled","_compareFunc","_depthBias","_depthBiasSlopeScale","setCompareFunc","setDepthBias","setDepthBiasSlopeScale","testEnabled","writeEnabled","compareFunc","depthBias","depthBiasSlopeScale","WebGPUStencilState","_writeMask","_failOp","_failOpBack","_zFailOp","_zFailOpBack","_passOp","_passOpBack","_func","_funcBack","_ref","_readMask","failOpBack","zFailOpBack","passOpBack","funcBack","setWriteMask","setReadMask","writeMask","failOp","zFailOp","passOp","readMask","fail","zfail","pass","sideHash","WebGPURenderStateSet","colorState","blendingState","rasterizerState","depthState","stencilState","newStateSet","copyFrom","stateSet","state","defaultColorState","defaultBlendingState","defaultRasterizerState","defaultDepthState","defaultStencilState","apply","_force","typeU16","stencilFormats","depthFormats","PipelineCache","_renderPipelines","_computePipelines","wipeCache","fetchComputePipeline","getComputePipelineHash","shaderModule","module","entryPoint","gpuCreateComputePipeline","vertexData","frameBufferInfo","getRenderPipelineHash","bufferLayouts","fetchVertexLayout","primitiveState","createPrimitiveState","depthStencilState","createDepthStencilState","colorTargetStates","createColorTargetState","primitive","depthStencil","multisample","createMultisampleState","targets","gpuCreateRenderPipeline","topology","rs","frontFace","unclippedDepth","stripIndexFormat","indexType","hasStencil","hasDepth","depthWriteEnabled","depthCompare","stencilFront","createStencilFaceState","stencilBack","stencilReadMask","stencilWriteMask","depthFailOp","GPUColorWrite","RED","GREEN","BLUE","ALPHA","blend","createBlendState","createBlendComponent","srcFunc","dstFunc","operation","srcFactor","dstFactor","fbHash","WebGPUFrameBuffer","_options","_bindFlag","_msaaColorTextures","_msaaDepthTexture","colorAttachmentHash","depthAttachmentHash","_init","getOptions","bindFlag","getHash","getWidth","attachment","getHeight","setColorAttachmentGenerateMipmaps","getColorAttachmentGenerateMipmaps","getColorAttachmentCubeFace","getColorAttachmentMipLevel","getColorAttachmentLayer","setDepthAttachmentCubeFace","getDepthAttachmentCubeFace","setDepthAttachmentLayer","getDepthAttachmentLayer","getColorAttachment","getMSAADepthAttachment","getMSAAColorAttacments","getColorFormats","getDepthFormat","unbind","colorAttachment","msaaTexture","msaaDepthTexture","getSampleCount","WebGPUIndexBuffer","BindGroupCache","_bindGroupLayoutCache","getLayoutHash","bgl","createBindGroupLayout","GPUShaderStage","FRAGMENT","COMPUTE","VertexLayoutCache","parts","arrayStride","shaderLocation","WebGPUTextureSampler","lodMin","lodMax","maxAnisotropy","addressModeU","addressModeV","addressModeW","gpuCreateSampler","mipmapFilter","lodMinClamp","lodMaxClamp","SamplerCache","_samplers","fetchSampler","WebGPURenderPass","_renderCommandEncoder","_renderPassEncoder","_fbBindFlag","_currentViewport","_currentScissor","createFrameBufferInfo","active","backbufferFormat","backbufferDepthFormat","vp","default","drawingBufferWidth","drawingBufferHeight","vx","vy","vw","vh","backBufferWidth","backBufferHeight","setScissorRect","executeBundles","bindGroupOffsets","validation","validateDraw","drawInternal","depthAttachmentTexture","depthTextureView","resolveTarget","depthStencilAttachment","depthLoadOp","depthClearValue","depthStoreOp","stencilLoadOp","stencilClearValue","stencilStoreOp","mainPassDesc","defaultRenderPassDesc","colorAttachmentDesc","getCurrentTexture","depthAttachmentDesc","capture","renderBundleEncoder","setBindGroupsForRender","setStencilReference","drawIndexed","ubo","bindGroupOffset","emptyBindGroup","WebGPUComputePass","_computeCommandEncoder","_computePassEncoder","validateCompute","setBindGroupsForCompute","dispatchWorkgroups","computePassEncoder","beginComputePass","CommandQueueImmediate","_renderPass","_computePass","_bufferUploads","_textureUploads","_drawcallCounter","isBufferUploading","bufferUploads","textureUploads","uploadCommandEncoder","_","currentPass","getFramebufferInfo","srcBuffer","bytes","copyCommandEncoder","onSubmittedWorkDone","WebGPUDevice","_dpr","_adapter","_deviceCaps","_reverseWindingOrder","_canRender","_backBufferFormat","_depthFormat","_defaultMSAAColorTexture","_defaultMSAAColorTextureView","_defaultDepthTexture","_defaultDepthTextureView","_pipelineCache","_bindGroupCache","_vertexLayoutCache","_samplerCache","_currentProgram","_currentVertexData","_currentStateSet","_currentBindGroups","_currentBindGroupOffsets","_commandQueue","_gpuObjectHashCounter","_gpuObjectHasher","_defaultRenderPassDesc","_sampleCount","_emptyBindGroup","_captureRenderBundle","_adapterInfo","dpr","devicePixelRatio","msaa","getFrameBufferSampleCount","adapter","getDrawingBufferWidth","getDrawingBufferHeight","defaultDepthTexture","defaultDepthTextureView","defaultMSAAColorTextureView","getAdapterInfo","getBackBufferWidth","getBackBufferHeight","initContext","navigator","gpu","requestAdapter","requestDevice","requiredFeatures","requiredLimits","lost","framebufferCaps","miscCaps","shaderCaps","configure","createDefaultRenderAttachments","callback","_handle","clearFrameBuffer","createBlendingState","createColorState","createRasterizerState","createDepthState","createStencilState","createTextureFromMipmapData","createTexture2DFromImage","createTexture2DArrayFromImages","createTexture3D","createTextureVideo","el","copyFramebufferToTexture2D","copyTexture2D","srcWidth","srcHeight","dstWidth","dstHeight","copyTextureToTexture","destBuffer","structureType","depthAttachement","dynamicOffsets","createTexture","importExternalTexture","createRenderPipeline","createComputePipeline","texFormat","stagingBuffer","looseContext","restoreContext","beginCapture","depthStencilFormat","dc","createRenderBundleEncoder","endCapture","rt","getPreferredCanvasFormat","alphaMode","colorSpace","backendWebGPU","supported","GPU","createDevice","factory","makeObservable","alert","querySelector","spriteProgram","instPos","instVel","spriteUpdateProgram","structParticle","structParams","particlesA","particlesB","vPos","vVel","vel","cMass","cVel","colVel","cMassCount","cVelCount","rule1Distance","rule2Distance","rule3Distance","temp","rule1Scale","rule2Scale","rule3Scale","deltaT","spriteVertexBuffer","simParams","numParticles","initialParticleData","particleBuffers","particleBindGroups","primitives","updateSimParams"],"mappings":"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A5B1D,EA4B8E,MACxE8a,EA5BN,GA4BcW,IAAsBV,EA3BlC,GA2B4CW,KAChDV,EA3BE,GA2BsB,IACtBC,EA3BE,IA2B0B,IAC7BC,EA3BE,IA2BwB,IAC5BC,EA3BE,IA2BoB,IACvBC,EA3BE,KA2BkB,IAElCC,GAzEsB,GAyEeC,GAvEd,GAuEoDC,GA3EtD,GAuFzB,CA0FA,MAAMI,EAAkD,CACtDC,QAAS,EACTC,QAASlB,EACP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFmB,QAASnB,EACP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFoB,KAAMpB,EACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFqB,KAAMrB,EACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFsB,KAAMtB,EACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFuB,IAAKvB,EACH,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFwB,MAAOxB,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFyB,KAAMzB,EACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF0B,MAAO1B,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF2B,KAAM3B,EACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF4B,SAAU5B,EACR,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF6B,SAAU7B,EACR,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF8B,MAAO9B,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF+B,MAAO/B,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFgC,MAAOhC,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFiC,KAAMjC,EACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFkC,OAAQlC,EACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFmC,MAAOnC,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFoC,OAAQpC,EACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFqC,MAAOrC,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFsC,WAAYtC,EACV,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF,kBAAmBA,EACjB,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFuC,WAAYvC,EACV,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFwC,WAAYxC,EACV,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF,kBAAmBA,EACjB,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFyC,QAASzC,EACP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF0C,QAAS1C,EACP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF2C,QAAS3C,EACP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF4C,OAAQ5C,EACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF6C,SAAU7C,EACR,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF8C,QAAS9C,EACP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF+C,SAAU/C,EACR,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEFgD,QAAShD,EACP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEFiD,UAAWjD,EACT,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFkD,IAAKlD,EACH,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFmD,IAAKnD,EACH,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFoD,KAAMpD,EACJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFqD,MAAOrD,EACL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFsD,OAAQtD,EACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAGFuD,KAAMvD,EACJR,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF,YAAaQ,EACXR,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFgE,KAAMxD,EACJP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,YAAaO,EACXP,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEFgE,KAAMzD,EACJN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,YAAaM,EACXN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEFgE,IAAK1D,EACHL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEF,aAAcK,EACZL,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,GAEFgE,IAAK3D,EACHJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,aAAcI,EACZJ,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEFgE,KAAM5D,EACJH,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,cAAeG,EACbH,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEFgE,IAAK7D,EACHF,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYE,EACVF,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYE,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYC,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYC,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYC,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYC,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYC,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYC,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,WAAYC,EACVD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,gBAAiBC,EACfD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,EACA,EACA,IAEF,YAAaC,EACXD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,EACA,IAEF,iBAAkBC,EAChBD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,EACA,IAEF,YAAaC,EACXD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,EACA,IAEF,iBAAkBC,EAChBD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,EACA,IAEF,YAAaC,EACXD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,EACA,IAEF,iBAAkBC,EAChBD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,EACA,IAEF,aAAcC,EACZD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,GACA,IAEF,kBAAmBC,EACjBD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,GACA,IAEF,aAAcC,EACZD,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACA,GACA,GACA,IAEF,kBAAmBC,EACjBD,GACA,GACA,GACA,GACA,GACA,GACA,GAC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eZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAkB,CACvDA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAkB,CACvDA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,eAE/B,OAAW,aAAc6O,IACvB,MAAM,IAAIzO,GAAkB,cAAe,OAE7C,MAAMkZ,EAAU/tD,EAAK,GAAGi0C,KAAK+E,UAC7B,IAAK+U,EAAQnlC,gBACX,MAAM,IAAI+rB,GAAiB,cAAe,OAE5C,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,GAAoB,IAAhBU,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,eAE/B,GAAIsZ,EAAQlgC,cAAe,CACzB,GAAuB,iBAAZ7tB,EAAK,IACd,IAAKuC,OAAOwoB,UAAU/qB,EAAK,IACzB,MAAM,IAAI20C,GAAiB,cAAe,aAEvC,MAAI30C,EAAK,aAAcsjD,IAU5B,MAAM,IAAI3O,GAAiB,cAAe,SAVD,CACzC,MAAM2Z,EAAYtuD,EAAK,GAAGi0C,KAAK+E,UAC/B,IACGsV,EAAUztC,oBACVytC,EAAUxtC,gBACXwtC,EAAUjsC,aAAegH,EAAyBxF,IAElD,MAAM,IAAI8wB,GAAiB,cAAe,SAI9C,CACA30C,EAAK,GAAK61C,EAAG0Y,MAAMvuD,EAAK,GAAI,EAC9B,CACF,KAAmC,WAAxB61C,EAAG4H,YAAYn+C,OACpByuD,EAAQ1/B,sBACVruB,EAAOA,EAAKe,MAAM,EAAG,IAEnBgtD,EAAQ7/B,qBACV6/B,EAAQpgC,UAAW,IAGvB,OAAOu6B,GAAYrS,EAAIzzC,KAASpC,EAClC,GAGFwuD,iBAAkB,CAChB9Q,UAAW,IACN2K,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAsB,CAC3DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,cAAeZ,GAAap+B,GAAkB,CACvDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,oBAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAIzO,GAAkB,mBAAoB,OAElD,MAAMkZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,gBACX,MAAM,IAAI+rB,GAAiB,mBAAoB,OAEjD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,GAAoB,IAAhBU,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,oBAE/B,MAAMga,EAAS5Y,EAAG6Y,MAAM1uD,EAAK,GAAmBA,EAAK,IAErD,OAAOkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAK2e,EADpBzuD,EAAK,IAMnB,OAHI+tD,EAAQ7/B,qBACV6/B,EAAQpgC,UAAW,GAEdu6B,GAAYrS,EAAIzzC,KAASpC,EAEpC,GAGF2uD,aAAc,CACZjR,UAAW,IACN2K,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAA4B,WAAxB61C,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAMwwC,EAAM9vC,EAAK,GACjB,GAAI8vC,aAAewT,GAAa,CAC9B,MAAMyK,EAAUje,EAAImE,KAAK+E,UACrB+U,GAASnlC,iBAAmBmlC,EAAQ7/B,qBACtC6/B,EAAQ9gC,UAAW,EAEvB,CACF,CACA,OAAOi7B,GAAYrS,EAAIzzC,KAASpC,EAClC,GAGF4uD,kBAAmB,CACjBlR,UAAW,IACN2K,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,eAAgBZ,GAAap+B,GAAmB,CACzDA,GACAA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAA4B,WAAxB61C,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAMwwC,EAAM9vC,EAAK,GACjB,GAAI8vC,aAAewT,GAAa,CAC9B,MAAMyK,EAAUje,EAAImE,KAAK+E,UACrB+U,GAASnlC,iBAAmBmlC,EAAQ7/B,qBACtC6/B,EAAQ9gC,UAAW,EAEvB,CACF,CACA,OAAOi7B,GAAYrS,EAAIzzC,KAASpC,EAClC,GAGF6uD,iBAAkB,CAChBnR,UAAW,IACN2K,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,QAECg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAC5DA,OAKNylC,iBAAkB,CAChBpR,UAAW,IACN2K,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,QAC5Dg/B,GAAQ,mBAAoBZ,GAAap+B,GAAkB,CAACA,OAInE0lC,kBAAmB,CACjBrR,UAAW,IACN2K,GAAQ,oBAAqBZ,GAAap+B,GAAkB,CAACA,QAC7Dg/B,GAAQ,oBAAqBZ,GAAap+B,GAAkB,CAACA,QAC7Dg/B,GAAQ,oBAAqBZ,GAAap+B,GAAkB,CAACA,QAC7Dg/B,GAAQ,oBAAqBZ,GAAap+B,GAAkB,CAACA,OAIpE2lC,cAAe,CACbtR,UAAW,IACN2K,GAAQ,gBAAiBZ,GAAap+B,GAAsB,CAC7DA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAsB,CAC7DA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAsB,CAC7DA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAsB,CAC7DA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAkB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAkB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,+BAAgCZ,GAAap+B,GAAsB,CAC5EA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CAACA,GAAoBA,QAC3Eg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CAACA,GAAoBA,QAC3Eg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CAACA,GAAoBA,QAC3Eg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CAACA,GAAsBA,QAC7Eg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,QAECg/B,GAAQ,YAAad,GAAal+B,GAAsB,CAACA,GAAoBA,QAC7Eg/B,GAAQ,YAAad,GAAal+B,GAAsB,CAACA,GAAoBA,QAC7Eg/B,GAAQ,YAAad,GAAal+B,GAAsB,CACzDA,GACAA,QAECg/B,GAAQ,YAAad,GAAal+B,GAAsB,CACzDA,GACAA,QAECg/B,GAAQ,cAAed,GAAal+B,GAAsB,CAC3DA,GACAA,QAECg/B,GAAQ,cAAed,GAAal+B,GAAsB,CAC3DA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,iBAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,gBAAiB,WAE9C,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,gBACX,MAAM,IAAI+rB,GAAiB,gBAAiB,WAE9C,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,GAAIyuD,EAAQ7/B,mBACV,MAAM,IAAIymB,GAAiB,gBAAiB,WAE9C,MAAMsa,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAEpCqf,EAAMjH,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EADxBjvD,EAAK,IAEpB,OAAImvD,EAAIlb,KAAK+E,UAAU9vB,iBAAiBG,IAC/BwsB,EAAGuZ,KAAKD,GAERA,EAIT,GADAtZ,EAAGqZ,kBAAkBpf,GAAK,GACtBie,EAAQlgC,cAAe,CACzB,GAAI7tB,EAAK,aAAcsjD,GAAa,CAClC,MAAMgL,EAAYtuD,EAAK,GAAGi0C,KAAK+E,UAC/B,IACGsV,EAAUztC,oBACVytC,EAAUxtC,gBACXwtC,EAAUjsC,aAAegH,EAAyBhG,IAElD,MAAM,IAAIsxB,GAAiB,gBAAiB,QAEhD,MAAO,GAAuB,iBAAZ30C,EAAK,GACrB,MAAM,IAAI20C,GAAiB,gBAAiB,SAE9C30C,EAAK,GAAK61C,EAAGwZ,KAAKrvD,EAAK,GAAI,EAC7B,CACA,OAAOkoD,GAAYrS,EAAIzzC,KAASpC,EAEpC,GAGFsvD,mBAAoB,CAClB5R,UAAW,IACN2K,GAAQ,gBAAiBZ,GAAap+B,GAAsB,CAC7DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAsB,CAC7DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAkB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,gBAAiBZ,GAAap+B,GAAkB,CACzDA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,sBAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,qBAAsB,WAGnD,IADgB7E,EAAImE,KAAK+E,UACZpwB,gBACX,MAAM,IAAI+rB,GAAiB,qBAAsB,WAEnD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAGpCqf,EAAMjH,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAFxBjvD,EAAK,GACDA,EAAK,IAExB,OAAImvD,EAAIlb,KAAK+E,UAAU9vB,iBAAiBG,IAC/BwsB,EAAGuZ,KAAKD,GAERA,EAEJ,CACLtZ,EAAGqZ,kBAAkBpf,GAAK,GAC1B,MAAM2e,EAASzuD,EAAK,GACduvD,EAAavvD,EAAK,GAClBwvD,EAAiB3Z,EAAG4Z,KAAKhB,EAAgC5Y,EAAGp5B,MAAM8yC,IACxE,OAAOrH,GAAYrS,EAAIzzC,EAAM0tC,EAAK0f,EACpC,CACF,GAGFE,kBAAmB,CACjBhS,UAAW,IACN2K,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,GACAA,QAECg/B,GAAQ,YAAad,GAAal+B,GAAsB,CACzDA,GACAA,GACAA,QAECg/B,GAAQ,cAAed,GAAal+B,GAAsB,CAC3DA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,qBAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,oBAAqB,WAGlD,IADgB7E,EAAImE,KAAK+E,UACZpwB,gBACX,MAAM,IAAI+rB,GAAiB,oBAAqB,WAElD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAC1C,OAAOoY,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,IAGzD,OADA61C,EAAGqZ,kBAAkBpf,GAAK,GACnBoY,GAAYrS,EAAIzzC,KAASpC,EAEpC,GAGF2vD,uBAAwB,CACtBjS,UAAW,IACN2K,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAsB,CACvDA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,0BAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,yBAA0B,WAGvD,IADgB7E,EAAImE,KAAK+E,UACZpwB,gBACX,MAAM,IAAI+rB,GAAiB,yBAA0B,WAEvD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAC1C,OAAOoY,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,GAAIA,EAAK,GACpE,CAAO,GAA4B,WAAxB61C,EAAG4H,YAAYn+C,KAAmB,CAC3Cu2C,EAAGqZ,kBAAkBpf,GAAK,GAC1B,MAAM2e,EAASzuD,EAAK,GACduvD,EAAavvD,EAAK,GAClBwvD,EAAiB3Z,EAAG4Z,KAAKhB,EAAgC5Y,EAAGp5B,MAAM8yC,IACxE,OAAOrH,GAAYrS,EAAIzzC,EAAM0tC,EAAK0f,EAAgBxvD,EAAK,GACzD,CACF,GAGF4vD,qBAAsB,CACpBlS,UAAW,IACN2K,GAAQ,uBAAwBZ,GAAap+B,GAAkB,CAChEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,uBAAwBZ,GAAap+B,GAAkB,CAChEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAkB,CAACA,GAAyBA,QAC5Eg/B,GAAQ,UAAWb,GAAan+B,GAAkB,CAACA,GAA2BA,MAEnFu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,wBAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,uBAAwB,WAErD,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,kBAAoBmlC,EAAQ5/B,iBACvC,MAAM,IAAIwmB,GAAiB,uBAAwB,WAErD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBlvD,EAAK,IAAmB,GAC7D,OAAOkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,IACpD,CAEL,IAAI6vD,EAMJ,OAPAha,EAAGqZ,kBAAkBlvD,EAAK,IAAmB,GAG3C6vD,EADE9B,EAAQ//B,iBAAmB+/B,EAAQ9/B,iBACnB4nB,EAAGuZ,KAAKpvD,EAAK,GAAWA,EAAK,IAE7B61C,EAAG4Z,KAAKzvD,EAAK,GAAWA,EAAK,IAE1CkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAK+f,EACpC,CACF,GAGFC,0BAA2B,CACzBpS,UAAW,IACN2K,GAAQ,uBAAwBZ,GAAap+B,GAAkB,CAChEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,uBAAwBZ,GAAap+B,GAAkB,CAChEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAkB,CACnDA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,6BAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAqBsjD,aAAAA,IACnB,MAAM,IAAI3O,GAAiB,4BAA6B,WAE1D,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,kBAAoBmlC,EAAQ5/B,iBACvC,MAAM,IAAIwmB,GAAiB,4BAA6B,WAE1D,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBlvD,EAAK,IAAmB,GAC7D,OAAOkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC7D,CACL61C,EAAGqZ,kBAAkBlvD,EAAK,IAAmB,GAC7C,MAAM6vD,EAAkBha,EAAGuZ,KAAKpvD,EAAK,GAAW61C,EAAGp5B,MAAMzc,EAAK,IAAYA,EAAK,IAC/E,OAAOkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAK+f,EACpC,CACF,GAGFE,mBAAoB,CAClBrS,UAAW,IACN2K,GAAQ,qBAAsBZ,GAAap+B,GAAsB,CAClEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAsB,CAClEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAsB,CAClEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAsB,CAClEA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAkB,CAC9DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAkB,CAC9DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,QAECg/B,GAAQ,kBAAmBd,GAAal+B,GAAsB,CAC/DA,GACAA,GACAA,QAECg/B,GAAQ,kBAAmBd,GAAal+B,GAAsB,CAC/DA,GACAA,GACAA,QAECg/B,GAAQ,kBAAmBd,GAAal+B,GAAsB,CAC/DA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBd,GAAal+B,GAAsB,CACjEA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBd,GAAal+B,GAAsB,CACjEA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,MAAM8vC,EAAM9vC,EAAK,GACjB,KAAqBsjD,aAAAA,IACnB,MAAM,IAAI3O,GAAiB,qBAAsB,WAEnD,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,gBACX,MAAM,IAAI+rB,GAAiB,qBAAsB,WAEnD,GAA4B,UAAxBkB,EAAG4H,YAAYn+C,MAAsC,WAAlBu2C,EAAGma,WAExC,OAAOna,EAAGmZ,cAAclf,EAAK9vC,EAAK,IAEpC,GAA4B,WAAxB61C,EAAG4H,YAAYn+C,KAAmB,CACpC,GAAIyuD,EAAQ1/B,oBACV,OAAOwnB,EAAGwY,YAAYve,EAAK+F,EAAG0Y,MAAMvuD,EAAK,IAAY,GAChD,CACL,MAAMivD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GACpCke,EACJD,EAAQ5/B,mBACY,iBAAZnuB,EAAK,IACVA,EAAK,aAAcsjD,IAAetjD,EAAK,GAAGi0C,KAAK+E,UAAU9vB,iBAAiBG,KACzEwsB,EAAGoa,IAAIjwD,EAAK,IACZA,EAAK,GACLmvD,EAAMpB,EAAQ1/B,oBAChB65B,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,IACzCkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIguD,GACjD,OAAImB,EAAIlb,KAAK+E,UAAU9vB,iBAAiBG,IAC/BwsB,EAAGuZ,KAAKD,GAERA,CAEX,EAGA,OADAtZ,EAAGqZ,kBAAkBpf,GAAK,GACnBie,EAAQ1/B,oBACX65B,GAAYrS,EAAIzzC,EAAMpC,EAAK,GAAIA,EAAK,GAAI,GACxCkoD,GAAYrS,EAAIzzC,EAAMpC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAErD,GAGFkwD,wBAAyB,CACvBxS,UAAW,IACN2K,GAAQ,qBAAsBZ,GAAap+B,GAAsB,CAClEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAsB,CAClEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAkB,CAC9DA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBZ,GAAap+B,GAAkB,CAC9DA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAsB,CAC1DA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,2BAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,0BAA2B,WAExD,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,gBACX,MAAM,IAAI+rB,GAAiB,0BAA2B,WAExD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GACpCke,EACJD,EAAQ5/B,mBACY,iBAAZnuB,EAAK,IACVA,EAAK,aAAcsjD,IAAetjD,EAAK,GAAGi0C,KAAK+E,UAAU9vB,iBAAiBG,KACzEwsB,EAAGoa,IAAIjwD,EAAK,IACZA,EAAK,GACLmvD,EAAMjH,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,GAAIguD,GAClE,OAAImB,EAAIlb,KAAK+E,UAAU9vB,iBAAiBG,IAC/BwsB,EAAGuZ,KAAKD,GAERA,EAEJ,CACLtZ,EAAGqZ,kBAAkBpf,GAAK,GAC1B,MAAM+f,EAAkBha,EAAG4Z,KAAKzvD,EAAK,GAAW61C,EAAGp5B,MAAMzc,EAAK,KAC9D,OAAOkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAK+f,EAAiB7vD,EAAK,GAC1D,CACF,GAGFmwD,0BAA2B,CACzBzS,UAAW,IACN2K,GAAQ,4BAA6BZ,GAAap+B,GAAkB,CACrEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,4BAA6BZ,GAAap+B,GAAkB,CACrEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,aAAcb,GAAan+B,GAAkB,CACtDA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAkB,CAACA,GAA2BA,MAEnFu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,6BAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,4BAA6B,WAE1D,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,kBAAoBmlC,EAAQ5/B,iBACvC,MAAM,IAAIwmB,GAAiB,4BAA6B,WAE1D,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAC1C,OAAOoY,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,IACpD,CAEL,IAAI6vD,EAMJ,OAPAha,EAAGqZ,kBAAkBlvD,EAAK,IAAmB,GAG3C6vD,EADE9B,EAAQ//B,iBAAmB+/B,EAAQ9/B,iBACnB4nB,EAAGuZ,KAAKpvD,EAAK,GAAWA,EAAK,IAE7B61C,EAAG4Z,KAAKzvD,EAAK,GAAWA,EAAK,IAE1C+tD,EAAQ//B,gBACXk6B,GAAYrS,EAAIzzC,EAAM0tC,EAAK+f,GAC3B3H,GAAYrS,EAAIzzC,EAAM0tC,EAAK+f,EAAiB,EAClD,CACF,GAGFO,+BAAgC,CAC9B1S,UAAW,IACN2K,GAAQ,4BAA6BZ,GAAap+B,GAAkB,CACrEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,4BAA6BZ,GAAap+B,GAAkB,CACrEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,UAAWb,GAAan+B,GAAkB,CACnDA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,kCAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,iCAAkC,WAE/D,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,kBAAoBmlC,EAAQ5/B,iBACvC,MAAM,IAAIwmB,GAAiB,iCAAkC,WAE/D,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAC1C,OAAOoY,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC7D,CACL61C,EAAGqZ,kBAAkBlvD,EAAK,IAAmB,GAC7C,MAAM6vD,EAAkBha,EAAGuZ,KAAKpvD,EAAK,GAAW61C,EAAGp5B,MAAMzc,EAAK,IAAYA,EAAK,IAC/E,OAAOkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAK+f,EACpC,CACF,GAGFQ,kBAAmB,CACjB3S,UAAW,IACN2K,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,cAAeb,GAAan+B,GAAsB,CAC3DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,cAAeb,GAAan+B,GAAsB,CAC3DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,cAAeb,GAAan+B,GAAsB,CAC3DA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,mBAAoBd,GAAal+B,GAAsB,CAChEA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,qBAAsBd,GAAal+B,GAAsB,CAClEA,GACAA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,qBAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,oBAAqB,WAGlD,IADgB7E,EAAImE,KAAK+E,UACZpwB,gBACX,MAAM,IAAI+rB,GAAiB,oBAAqB,WAElD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAC1C,OAAOoY,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAGlE,OADA61C,EAAGqZ,kBAAkBpf,GAAK,GACnBoY,GAAYrS,EAAIzzC,KAASpC,EAEpC,GAGFswD,uBAAwB,CACtB5S,UAAW,IACN2K,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,oBAAqBZ,GAAap+B,GAAsB,CACjEA,GACAA,GACAA,GACAA,GACAA,GACAA,QAECg/B,GAAQ,cAAeb,GAAan+B,GAAsB,CAC3DA,GACAA,GACAA,GACAA,MAGJu/B,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmB,0BAE/B,MAAM3E,EAAM9vC,EAAK,GACjB,KAAM8vC,aAAewT,IACnB,MAAM,IAAI3O,GAAiB,yBAA0B,WAEvD,MAAMoZ,EAAUje,EAAImE,KAAK+E,UACzB,IAAK+U,EAAQnlC,kBAAoBmlC,EAAQ9/B,iBACvC,MAAM,IAAI0mB,GAAiB,yBAA0B,WAEvD,GAA4B,WAAxBkB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAM2vD,EAAUpZ,EAAGqZ,kBAAkBpf,GAAK,GAC1C,OAAOoY,GAAYrS,EAAIzzC,EAAM0tC,EAAKmf,EAASjvD,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACtE,CACL61C,EAAGqZ,kBAAkBpf,GAAK,GAC1B,MAAM+f,EAAkBha,EAAG4Z,KAAKzvD,EAAK,GAAW61C,EAAGp5B,MAAMzc,EAAK,KAC9D,OAAOkoD,GAAYrS,EAAIzzC,EAAM0tC,EAAK+f,EAAiB7vD,EAAK,GAAIA,EAAK,GACnE,CACF,GAEFuwD,eAAgB,CAAE7S,UAAW2K,GAAQ,iBAAkBZ,GAAap+B,GAAmB,KACvFmnC,iBAAkB,CAAE9S,UAAW2K,GAAQ,mBAAoBZ,GAAap+B,GAAmB,KAC3FonC,WAAY,CACVC,WAAY,GACZ9H,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmBryC,GAE/B,MAAMo7C,EAAMx9C,EAAK,GACjB,KAAMw9C,aAAe8F,IACnB,MAAM,IAAI3O,GAAiBvyC,EAAM,OAEnC,GAAIo7C,EAAIvJ,KAAK+E,UAAU3wB,SAAWgB,GAAuBhB,OACvD,OAAOwtB,EAAGyW,qBAAqBlqD,EAAM,CAAC,IAAI+7C,GAAaX,EAAIvJ,OAAQ5qB,IAC9D,GAAIm0B,EAAIvJ,KAAK+E,UAAU3wB,SAAWgB,GAAuBhB,OAC9D,OAAOwtB,EAAGyW,qBAAqBlqD,EAAM,CAAC,IAAI+7C,GAAaX,EAAIvJ,OAAQ5qB,IAEnE,MAAM,IAAIwrB,GAAkBzyC,EAAM,0BAEtC,GAEFuuD,YAAa,CACXD,WAAY,GACZ9H,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmBryC,GAE/B,MAAMU,EAAO9C,EAAK,GACZoG,EAAOpG,EAAK,GAClB,KAAM8C,aAAgBwgD,IACpB,MAAM,IAAI3O,GAAiBvyC,EAAM,OAEnC,GAAIU,EAAKmxC,KAAK+E,UAAU3wB,SAAWgB,GAAuBhB,OAAQ,CAChE,GAAoB,iBAATjiB,EAAmB,CAC5B,IAAK7D,OAAOwoB,UAAU3kB,GACpB,MAAM,IAAIyuC,GAAkBzyC,EAAM,SAEpC,OAAOyzC,EAAGyW,qBACRlqD,EACA,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO,IAAI4J,GAAUz3C,EAAMijB,KAClDA,IAEG,GAAIjjB,aAAgBk9C,GAAa,CACtC,GAAIl9C,EAAK6tC,KAAK+E,UAAU3wB,SAAWgB,GAAiBhB,OAClD,MAAM,IAAIssB,GAAiBvyC,EAAM,SAEnC,OAAOyzC,EAAGyW,qBAAqBlqD,EAAM,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO7tC,EAAK6tC,MAAO5qB,IAE/E,MAAM,IAAIsrB,GAAiBvyC,EAAM,QAErC,CAAO,GAAIU,EAAKmxC,KAAK+E,UAAU3wB,SAAWgB,GAAuBhB,OAAQ,CACvE,GAAoB,iBAATjiB,EAAmB,CAC5B,IAAK7D,OAAOwoB,UAAU3kB,GACpB,MAAM,IAAIyuC,GAAkBzyC,EAAM,SAEpC,OAAOyzC,EAAGyW,qBACRlqD,EACA,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO,IAAI4J,GAAUz3C,EAAMijB,KAClDA,IAEG,GAAIjjB,aAAgBk9C,GAAa,CACtC,GAAIl9C,EAAK6tC,KAAK+E,UAAU3wB,SAAWgB,GAAiBhB,OAClD,MAAM,IAAIssB,GAAiBvyC,EAAM,SAEnC,OAAOyzC,EAAGyW,qBAAqBlqD,EAAM,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO7tC,EAAK6tC,MAAO5qB,IAE/E,MAAM,IAAIsrB,GAAiBvyC,EAAM,SAGnC,MAAM,IAAIyyC,GAAkBzyC,EAAM,0BAEtC,IAIJ,IAAK,MAAMA,IAAQ,CACjB,YACA,YACA,YACA,YACA,YACA,WACA,YACA,kBAEAulD,GAAoBvlD,GAAQ,CAC1BsuD,WAAY,GACZ9H,aAAAA,CAAc/S,EAAoBzzC,KAAiBpC,GACjD,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAI8zC,GAAmBryC,GAE/B,MAAMU,EAAO9C,EAAK,GACZoG,EAAOpG,EAAK,GAClB,KAAM8C,aAAgBwgD,IACpB,MAAM,IAAI3O,GAAiBvyC,EAAM,OAEnC,GAAIU,EAAKmxC,KAAK+E,UAAU3wB,SAAWgB,GAAuBhB,OAAQ,CAChE,GAAoB,iBAATjiB,EAAmB,CAC5B,IAAK7D,OAAOwoB,UAAU3kB,GACpB,MAAM,IAAIyuC,GAAkBzyC,EAAM,SAEpC,OAAOyzC,EAAGyW,qBACRlqD,EACA,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO,IAAI4J,GAAUz3C,EAAMijB,KAClDA,IAEG,GAAIjjB,aAAgBk9C,GAAa,CACtC,GAAIl9C,EAAK6tC,KAAK+E,UAAU3wB,SAAWgB,GAAiBhB,OAClD,MAAM,IAAIssB,GAAiBvyC,EAAM,SAEnC,OAAOyzC,EAAGyW,qBAAqBlqD,EAAM,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO7tC,EAAK6tC,MAAO5qB,IAE/E,MAAM,IAAIsrB,GAAiBvyC,EAAM,QAErC,CAAO,GAAIU,EAAKmxC,KAAK+E,UAAU3wB,SAAWgB,GAAuBhB,OAAQ,CACvE,GAAoB,iBAATjiB,EAAmB,CAC5B,IAAK7D,OAAOwoB,UAAU3kB,GACpB,MAAM,IAAIyuC,GAAkBzyC,EAAM,SAEpC,OAAOyzC,EAAGyW,qBACRlqD,EACA,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO,IAAI4J,GAAUz3C,EAAMijB,KAClDA,IAEG,GAAIjjB,aAAgBk9C,GAAa,CACtC,GAAIl9C,EAAK6tC,KAAK+E,UAAU3wB,SAAWgB,GAAiBhB,OAClD,MAAM,IAAIssB,GAAiBvyC,EAAM,SAEnC,OAAOyzC,EAAGyW,qBAAqBlqD,EAAM,CAAC,IAAI+7C,GAAar7C,EAAKmxC,MAAO7tC,EAAK6tC,MAAO5qB,IAE/E,MAAM,IAAIsrB,GAAiBvyC,EAAM,SAGnC,MAAM,IAAIyyC,GAAkBzyC,EAAM,0BAEtC,GClxGJ,MAAMwuD,GAA0B,CAC9BlyC,WAAY,aACZC,WAAY,aACZkyC,UAAW,UACXC,UAAW,SACXC,WAAY,WACZC,WAAY,UACZC,YAAa,UACbC,SAAU,OACVC,QAAS,QACTC,QAAS,OACTC,UAAW,QACXC,SAAU,SACVC,SAAU,QACVC,YAAa,UACbC,WAAY,WACZC,WAAY,WAOd,SAASC,GAEPC,KACG5xD,GAEH,GAA8B,UAA1BZ,KAAKq+C,YAAYn+C,KAAkB,CACrC,GAAIsyD,EAAQvvC,aAAegH,EAAyBpF,IAClD,MAAM,IAAI00B,GAA0B,yBAEtC,GAAIiZ,EAAQlwC,gBAAkBkwC,EAAQ7wC,OAAS6wC,EAAQjwC,KACrD,MAAM,IAAIg3B,GAA0B,yBAExC,CAEA,GAAoB,IAAhB34C,EAAKW,QAAmC,iBAAZX,EAAK,GACnC,OAAO,IAAIsjD,GAAYtjD,EAAK,GAAI4xD,GAC3B,CACL,MAAMhe,EAAM,IAAI0P,GAAY,GAAIsO,GAkBhC,OAhBEA,EAAQ9wC,gBACQ,IAAhB9gB,EAAKW,QACe,iBAAZX,EAAK,IAAsC,kBAAZA,EAAK,GAI5C4zC,EAAIK,KAAO,IAAI4d,GACbje,EAAI2I,UACJv8C,EAAKiC,IAAKu7C,IACR,GAAmB,iBAARA,EACT,MAAM,IAAI7E,GAAwB,SAEpC,OAAO6E,aAAe8F,GAAc9F,EAAIvJ,KAAOuJ,KARnD5J,EAAIK,KAAO,IAAI4d,GAAc7xD,EAAK,GAAI4xD,GAYjChe,CACT,CACF,CAEA,MAAMke,GAAiB,CACrBr1C,MAAO4M,GACP4mC,IAAK5mC,GACL0oC,KAAM1oC,GACN2oC,KAAM3oC,GACNgmC,KAAMhmC,GACNklC,MAAOllC,GACP4oC,MAAO5oC,GACP6oC,MAAO7oC,GACPomC,KAAMpmC,GACNqlC,MAAOrlC,GACP8oC,MAAO9oC,GACP+oC,MAAO/oC,GACP+lC,KAAM/lC,GACNgpC,MAAOhpC,GACPipC,MAAOjpC,GACPkpC,MAAOlpC,GACPmpC,KAAMnpC,GACNopC,OAAQppC,GACRqpC,OAAQrpC,GACRspC,OAAQtpC,GACRupC,KAAMvpC,GACNwpC,OAAQxpC,GACRypC,OAAQzpC,GACR0pC,OAAQ1pC,GACR2pC,KAAM3pC,IAGF4pC,GAAc,CAClBC,MAAO7pC,GACP8pC,MAAO9pC,GACP+pC,MAAO/pC,GACPgqC,QAAShqC,GACTiqC,YAAajqC,GACbkqC,cAAelqC,GACfmqC,WAAYnqC,GACZoqC,iBAAkBpqC,GAClBqqC,YAAarqC,GACbsqC,OAAQtqC,GACRuqC,OAAQvqC,GACRwqC,OAAQxqC,GACRyqC,SAAUzqC,GACV0qC,YAAa1qC,GACb2qC,OAAQ3qC,GACR4qC,OAAQ5qC,GACR6qC,OAAQ7qC,GACR8qC,SAAU9qC,GACV+qC,YAAa/qC,GACb4lC,QAAS5lC,GACTgrC,kBAAmBhrC,IAarB,MAAMirC,GAAkB,CACtBC,aAAclrC,EAAuB7B,eACrCgtC,aAAcnrC,EAAuB5B,eACrCgtC,kBAAmBprC,EAAuB3B,qBAC1CgtC,aAAcrrC,EAAuB1B,gBCjGvC,MAmCMgtC,GAAe,YACfC,GAAmB,aAo6BlB,MAAMC,GAEX3lB,QAEA4lB,eAEAC,YAAyB,GAEzBC,YAA0Bv0C,EAAW+1B,OAAS/1B,EAAWg2B,SAAWh2B,EAAWi2B,QAE/Eue,YAEAC,UAEAC,aAEAC,cAEAC,YAEAC,aAEAC,QAEAC,SAEAC,kBAEAC,sBAEAC,mBAEAC,WAEAC,YAEAC,wBAEAC,SAKA,WAAA52D,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAK01D,eAAiB,KACtB11D,KAAK61D,YAAc,CAAC,EACpB71D,KAAK81D,UAAY,GACjB91D,KAAK21D,YAAc,GACnB31D,KAAK+1D,aAAe,KACpB/1D,KAAKg2D,cAAgB,KACrBh2D,KAAKi2D,YAAc,KACnBj2D,KAAKk2D,aAAe,KACpBl2D,KAAKm2D,QAAU,GACfn2D,KAAKo2D,SAAW,GAChBp2D,KAAKq2D,kBAAoB,GACzBr2D,KAAKs2D,sBAAwC,WAAhBtoC,EAAO9tB,KACpCF,KAAKu2D,oBAAqB,EAC1Bv2D,KAAKw2D,WAAa,KAClBx2D,KAAKy2D,YAAc,IAAIjjB,GAAaxzC,MACpCA,KAAK02D,wBAA0B,EAC/B12D,KAAK22D,SAAW,EAClB,CAEA,aAAIC,GACF,OAAO52D,KAAKw2D,UACd,CAEA,cAAIrf,GACF,OAAOn3C,KAAK41D,WACd,CAEA,cAAIhF,GACF,OAAO5wD,KAAK41D,cAAgBv0C,EAAW+1B,OACnC,SACAp3C,KAAK41D,cAAgBv0C,EAAWg2B,SAC9B,WACAr3C,KAAK41D,cAAgBv0C,EAAWi2B,QAC9B,UACA,IACV,CAEA5C,cAAAA,GACE,OAAO10C,KAAK+1D,YACd,CAEA,gBAAIc,GACF,OAAO72D,KAAKg2D,aACd,CAEA,cAAIc,GACF,OAAO92D,KAAKi2D,WACd,CAEA,eAAIc,GACF,OAAO/2D,KAAKk2D,YACd,CAEA,wBAAIc,GACF,OAAOh3D,KAAKs2D,qBACd,CACA,qBAAIW,GACF,OAAOj3D,KAAKu2D,kBACd,CACA,qBAAIU,CAAkBn0D,GACpB9C,KAAKu2D,mBAAqBzzD,CAC5B,CAEAo0D,aAAAA,GACE,OAAOl3D,KAAKy2D,WACd,CAEApY,SAAAA,GACE,OAAOr+C,KAAK8vC,OACd,CAEAriB,KAAAA,GACEztB,KAAK01D,eAAiB,KACtB11D,KAAK61D,YAAc,CAAC,EACpB71D,KAAK81D,UAAY,GACjB91D,KAAK21D,YAAc,GACnB31D,KAAK+1D,aAAe,KACpB/1D,KAAKg2D,cAAgB,KACrBh2D,KAAKi2D,YAAc,KACnBj2D,KAAKk2D,aAAe,KACpBl2D,KAAKm2D,QAAU,GACfn2D,KAAKo2D,SAAW,GAChBp2D,KAAKq2D,kBAAoB,GACzBr2D,KAAKs2D,sBAA8C,WAAtBt2D,KAAK8vC,QAAQ5vC,KAC1CF,KAAKy2D,YAAc,IAAIjjB,GAAaxzC,MACpCA,KAAK02D,wBAA0B,EAC/B12D,KAAK22D,SAAW,EAClB,CAMAQ,WAAAA,CAAYn0D,GACV,OAAOhD,KAAKk3D,gBAAgBjjB,IAAIjxC,EAClC,CAEAo0D,SAAAA,CAAU5Z,GACRx9C,KAAK21D,YAAY0B,QAAQ7Z,EAC3B,CAEA8Z,QAAAA,GACE,OAAOt3D,KAAK21D,YAAY4B,OAC1B,CAEA1Q,eAAAA,GACE,OAAO7mD,KAAK21D,YAAY,EAC1B,CAEA6B,uBAAAA,GACE,IAAIC,EAAqBz3D,KAAK6mD,kBAC9B,KAAO4Q,KAAeA,aAAqBC,KACzCD,EAAYA,EAAUE,QAExB,OAAOF,CACT,CAMAG,WAAAA,CAAY72D,GACVy1C,GAAyBx2C,MACzBA,KAAKw2D,WAAa,KAClBx2D,KAAK63D,wBACL,MAAM9H,EAAM/vD,KAAK83D,kBAAkB/2D,GAGnC,OAFAy1C,GAAyB,MACzBx2C,KAAKytB,QACEsiC,CACT,CAMAgI,YAAAA,CAAah3D,GACXy1C,GAAyBx2C,MACzBA,KAAKw2D,WAAa,KAClBx2D,KAAK01D,eAAiB30D,EAAQ2hD,cAC9B1iD,KAAK63D,wBACL,MAAM9H,EAAM/vD,KAAKg4D,mBAAmBj3D,GAGpC,OAFAy1C,GAAyB,MACzBx2C,KAAKytB,QACEsiC,CACT,CAMAkI,kBAAAA,CAAmBl3D,GACjB,MAAMgvD,EAAM/vD,KAAK43D,YAAY72D,GAC7B,OAAOgvD,EACH/vD,KAAK8vC,QAAQooB,iBAAiB,CAC5Bh4D,KAAM,SACNi4D,MAAOp3D,EAAQo3D,MACfC,OAAQ,CACNC,GAAItI,EAAI,GACRuI,GAAIvI,EAAI,GACRwI,iBAAkBxI,EAAI,GACtBlc,iBAAkBkc,EAAI,MAG1B,IACN,CAMAyI,mBAAAA,CAAoBz3D,GAClB,MAAMgvD,EAAM/vD,KAAK+3D,aAAah3D,GAC9B,OAAOgvD,EACH/vD,KAAK8vC,QAAQooB,iBAAiB,CAC5Bh4D,KAAM,UACNk4D,OAAQ,CACNzZ,OAAQoR,EAAI,GACZwI,iBAAkBxI,EAAI,MAG1B,IACN,CAOAza,IAAAA,CAAKtyC,EAAco1D,EAAuBxc,GACxC57C,KAAK00C,iBAAiB+jB,2BAA2Bz1D,EAAMo1D,EAAQxc,EACjE,CAKA8c,IAAAA,CAAK9c,GACH57C,KAAK00C,iBAAiBikB,UAAU/c,EAClC,CAMAqR,SAAAA,CAAUtQ,GACR,GAA0B,WAAtB38C,KAAK8vC,QAAQ5vC,KACf,MAAM,IAAIq5C,GAA0B,uBAEtC,IAAKoD,EAAI9H,KAAK6E,cACZ,MAAM,IAAIH,GAAgCoD,GAE5C,MAAMnI,EAAM,IAAI0P,GAAY,GAAIvH,EAAI9H,KAAK+E,WAEzC,OADApF,EAAIK,KAAO,IAAI4d,GAAiB9V,EAAI9H,MAC7BL,CACT,CAMAokB,WAAAA,CAAYC,GACV,GAA0B,WAAtB74D,KAAK8vC,QAAQ5vC,KACf,MAAM,IAAIq5C,GAA0B,uBAEtC,IAAKsf,EAAIhkB,KAAK+E,UAAUtwB,gBACtB,MAAM,IAAIiwB,GAA8Bsf,GAE1C,MAAM1iB,EAAM,IAAIsc,GAAmBoG,EAAIhkB,MACjCL,EAAM,IAAI0P,GAAY,GAAI/N,EAAIyD,WAEpC,OADApF,EAAIK,KAAOsB,EACJ3B,CACT,CAOAskB,MAAAA,CAAOrsC,EAAoBssC,GACzB,IAAI9U,EAAuB,KAC3B,IAAK,MAAMr4B,IAAM,CAACvK,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAWi2B,SACnE,GAAI1rB,EAAK5rB,KAAK41D,YAAa,CACzB,MAAMjO,EAAa3nD,KAAK61D,YAAYjqC,GAEpC,GADAq4B,EAAO0D,GAAYC,QAAQn7B,GACvBw3B,EACF,KAEJ,CAEF,IAAKA,EACH,MAAM,IAAI1K,GAAyB,SAAU,aAAc,eAAe9sB,gBAE5E,OAAOw3B,EAAKriD,KAAK5B,KAAM+4D,EACzB,CAEAC,iBAAAA,CAAkB32D,EAAqBC,EAAqB22D,GAC1D,GAAIA,GAAa52D,EAAEoqB,YAAcnqB,EAAEmqB,YAAcpqB,EAAEoqB,aAAenqB,EAAEmqB,WAClE,OAAO,EAET,GAAIpqB,EAAE6f,cAAc3gB,SAAWe,EAAE4f,cAAc3gB,OAC7C,OAAO,EAET,IAAK,IAAIq8C,EAAQ,EAAGA,EAAQv7C,EAAE6f,cAAc3gB,OAAQq8C,IAAS,CAC3D,MAAM96C,EAAMT,EAAE6f,cAAc07B,GACtBz7C,EAAQG,EAAE4f,cAAc07B,GAC9B,GAAI96C,EAAIE,OAASb,EAAMa,KACrB,OAAO,EAET,GAAIF,EAAI5C,KAAKmpB,eAAgB,CAC3B,IAAKlnB,EAAMjC,KAAKmpB,eACd,OAAO,EAET,IAAKrpB,KAAKg5D,kBAAkBl2D,EAAI5C,KAAMiC,EAAMjC,MAAM,GAChD,OAAO,CAEJ,MAAA,IAAK4C,EAAI5C,KAAK4pB,iBAAiB3nB,EAAMjC,MAC1C,OAAO,CAEX,CACA,OAAO,CACT,CAEAg5D,qBAAAA,GACE,MAAO,UAAUl5D,KAAK02D,yBACxB,CAEA5iB,mBAAAA,GACE,OAAO9zC,KAAKq2D,iBACd,CAEA8C,kBAAAA,CAAmBj5D,GACjB,IAAK,MAAMi3C,IAAc,CAAC91B,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAWi2B,SAAU,CACrF,IAAIqQ,EAAa3nD,KAAK61D,YAAY1e,GAKlC,GAJKwQ,IACHA,EAAa,CAAEC,QAAS,CAAC,EAAG/L,MAAO,IACnC77C,KAAK61D,YAAY1e,GAAcwQ,GAE7BA,EAAWC,QAAQ1nD,EAAKusB,YAC1B,MAAM,IAAI8sB,GACR,eACA,aACA,4BAA4Br5C,EAAKusB,eAGrCk7B,EAAW9L,MAAM16C,KAAK,IAAIsxD,GAAoBvyD,GAAM,GACtD,CACF,CA0BAk5D,YAAAA,CAAa5sC,EAAwBC,GACnC,MAAMV,EAAS,UACTstC,EAAa,IAAI9sC,GACrBE,GAAc,GACdV,EACAS,EAAQ3pB,IAAKu7C,IACX,KACGA,EAAIjB,UAAU17B,mBACd28B,EAAIjB,UAAUr7B,eACds8B,EAAIjB,UAAU9zB,gBACd+0B,EAAIjB,UAAUv7B,eACdw8B,EAAIjB,UAAUt7B,eAEf,MAAM,IAAIjiB,MAAM,gCAAgCw+C,EAAI3D,SAEtD,MAAO,CACLz3C,KAAMo7C,EAAI3D,KACVv6C,KAAMk+C,EAAIjB,cAIhB,IAAK,MAAMhG,IAAc,CAAC91B,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAWi2B,SAAU,CACrF,IAAIgiB,EAAiC,KACjCrV,EAAuB,KAC3B,MAAM0D,EAAa3nD,KAAK61D,YAAY1e,GACpC,GAAIwQ,EAAY,CACd,GACEjR,KAA2BS,aAAeA,GAC1CwQ,EAAWC,QAAQyR,EAAW5sC,YAE9B,MAAM,IAAI8sB,GACR,eACA,aACA,4BAA4B8f,EAAW5sC,eAG3C,IAAK,MAAMvsB,KAAQynD,EAAW9L,MAC5B,IAAK37C,EAAK0hD,SAAW5hD,KAAKg5D,kBAAkB94D,EAAK05C,UAAWyf,GAAY,GAAQ,CAC9EC,EAAYp5D,EACZ+jD,EAAO0D,EAAWC,QAAQ1nD,EAAK05C,UAAUntB,YACzC,KACF,CAEJ,CACA,GAAI6sC,EAAW,CACb,GAAIA,EAAUp5D,KAAK6rB,SAAWA,EAC5B,MAAM,IAAInsB,MAAM,2BAA2B05D,EAAUp5D,KAAKusB,oCAY5D,OAVI0qB,IAAeT,KAA2BS,aACvCn3C,KAAK61D,YAAYnf,KAA2BS,cAC/Cn3C,KAAK61D,YAAYnf,KAA2BS,YAAc,CAAEyQ,QAAS,CAAC,EAAG/L,MAAO,KAE9E77C,KAAK61D,YAAYnf,KAA2BS,YAAY0E,MAAM7H,QAAQslB,GAAa,IACrFt5D,KAAK61D,YAAYnf,KAA2BS,YAAY0E,MAAM16C,KAAKm4D,GACnEt5D,KAAK61D,YAAYnf,KAA2BS,YAAYyQ,QAAQ0R,EAAU1f,UAAUntB,YAClFw3B,IAGCA,CACT,CACF,CACA,OAAOjkD,KAAKu5D,qBACV9sC,GAAczsB,KAAKk5D,wBACnBntC,EACA/rB,KAAK41D,aACL,KACGppC,EAEP,CAMAgtC,kBAAAA,CAAmBH,GACjB,MAAMI,EAAWJ,EAAWvsC,QAAQusC,EAAW5sC,YAAczsB,KAAKk5D,wBAAyB,IAC3F,IAAK,MAAM/hB,IAAc,CAAC91B,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAWi2B,SAAU,CACrF,IAAIgiB,EAAiC,KACjCrV,EAAuB,KAC3B,MAAM0D,EAAa3nD,KAAK61D,YAAY1e,GACpC,GAAIwQ,EAAY,CACd,GAAIjR,KAA2BS,aAAeA,GAAcwQ,EAAWC,QAAQ6R,EAAShtC,YACtF,MAAM,IAAI8sB,GACR,eACA,aACA,4BAA4BkgB,EAAShtC,eAGzC,IAAK,MAAMvsB,KAAQynD,EAAW9L,MAC5B,IAAK37C,EAAK0hD,SAAW5hD,KAAKg5D,kBAAkB94D,EAAK05C,UAAW6f,GAAU,GAAQ,CAC5EH,EAAYp5D,EACZ+jD,EAAO0D,EAAWC,QAAQ1nD,EAAK05C,UAAUntB,YACzC,KACF,CAEJ,CACA,GAAI6sC,EAAW,CACb,GAAIA,EAAUp5D,KAAK6rB,SAAW0tC,EAAS1tC,OACrC,MAAM,IAAInsB,MAAM,2BAA2B05D,EAAUp5D,KAAKusB,oCAU5D,OARI0qB,IAAeT,KAA2BS,aACvCn3C,KAAK61D,YAAYnf,KAA2BS,cAC/Cn3C,KAAK61D,YAAYnf,KAA2BS,YAAc,CAAEyQ,QAAS,CAAC,EAAG/L,MAAO,KAElF77C,KAAK61D,YAAYnf,KAA2BS,YAAY0E,MAAM16C,KAAKm4D,GACnEt5D,KAAK61D,YAAYnf,KAA2BS,YAAYyQ,QAAQ0R,EAAU1f,UAAUntB,YAClFw3B,GAEGA,CACT,CACF,CACA,OAAOjkD,KAAK05D,2BAA2B15D,KAAK41D,aAAa,EAAO6D,EAClE,CAEAF,oBAAAA,CACE9sC,EACAV,EACAi9B,EACApH,KACGhhD,GAEH,MAAMy4D,EAAa,IAAI9sC,GACrBE,EACAV,EACAnrB,EAAKiC,IAAKu7C,IACR,KACGA,EAAIjB,UAAU17B,mBACd28B,EAAIjB,UAAUr7B,eACds8B,EAAIjB,UAAU9zB,gBACd+0B,EAAIjB,UAAUv7B,eACdw8B,EAAIjB,UAAUt7B,eAEf,MAAM,IAAIjiB,MAAM,gCAAgCw+C,EAAI3D,SAEtD,MAAO,CACLz3C,KAAMo7C,EAAI3D,KACVv6C,KAAMk+C,EAAIjB,cAIhB,OAAOn9C,KAAK05D,2BAA2B1Q,EAAgBpH,EAASyX,EAClE,CAEAK,0BAAAA,CACE1Q,EACApH,EACAyX,GAEA,MAAMP,EAASjV,GACb,YAA8B8V,GAC5B,IAAIp3D,EAUJ,OATyB,IAArBo3D,EAAUp4D,QAAwC,iBAAjBo4D,EAAU,GAC7Cp3D,EAAI,IAAI2hD,GAAYyV,EAAU,GAAIN,IAElC92D,EAAI,IAAI2hD,GAAY,GAAImV,GACxB92D,EAAEsyC,KAAO,IAAI4d,GACXlwD,EAAE46C,UACFwc,EAAU92D,IAAKu7C,GAASA,aAAe8F,GAAc9F,EAAIvJ,KAAOuJ,KAG7D77C,CAET82D,EAAAA,GAEF,IAAK,MAAMliB,IAAc,CAAC91B,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAWi2B,SAC3E,GAAI0R,EAAiB7R,EAAY,CAC/B,IAAIwQ,EAAa3nD,KAAK61D,YAAY1e,GAKlC,GAJKwQ,IACHA,EAAa,CAAEC,QAAS,CAAC,EAAG/L,MAAO,IACnC77C,KAAK61D,YAAY1e,GAAcwQ,GAE7BA,EAAWC,QAAQyR,EAAW5sC,YAChC,MAAM,IAAI8sB,GACR,eACA,aACA,4BAA4B8f,EAAW5sC,eAG3Ck7B,EAAW9L,MAAM16C,KAAK,IAAIsxD,GAAoB4G,EAAYzX,IAC1D+F,EAAWC,QAAQyR,EAAW5sC,YAAcqsC,CAC9C,CAGF,OAAOA,CACT,CAEAc,WAAAA,CAAY52D,GACV,OAAOhD,KAAK+1D,aAAe/1D,KAAK+1D,aAAa8D,cAAc72D,GAAQ,IACrE,CAEA,cAAI2kD,GACF,OAAO3nD,KAAK61D,YAAY71D,KAAK41D,YAC/B,CAEAkE,YAAAA,CAAaf,GACX,MAAO,iBAAiBA,GAC1B,CAEAgB,mBAAAA,CACE5iB,EACAiB,GAEA,MAAM3rB,EACQ,OAAZ2rB,EACIqa,GAA8Btb,GJ17CjC,SAAoCA,GACzC,OAAQA,GACN,KAAK91B,EAAW+1B,OACd,OAAOR,GACT,KAAKv1B,EAAWg2B,SACd,OAAOP,GACT,KAAKz1B,EAAWi2B,QACd,MA/F4B,YAgG9B,QACE,OAAO,KAEb,CIg7CUmb,CAA+Btb,GAC/B4hB,EACQ,OAAZ3gB,EACIqa,GAAsCtb,GACtCsb,GAAuCtb,GACvCY,EACJZ,IAAe91B,EAAW+1B,OACtB,SACAD,IAAe91B,EAAWg2B,SACxB,WACA,UACF2iB,EAAcvH,GAA8B,OAC5C7xD,EAA2F,GAC3F87C,EAAmB,GACzB,IAAK,MAAMpQ,KAAK0tB,EACVA,EAAY1tB,GAAGyL,QAAUA,GAASiiB,EAAY1tB,GAAG8L,UAAYA,IAC/Dx3C,EAAKO,KAAK,CAAE6B,KAAMg3D,EAAY1tB,GAAGtpC,KAAM9C,KAAM85D,EAAY1tB,GAAGpsC,OAC5Dw8C,EAAOv7C,KAAK,YAAY64D,EAAY1tB,GAAGH,eAG3C,MAAM8tB,EAAwB,OAAZ7hB,EAAmBp4C,KAAKm2D,QAAUn2D,KAAKo2D,SACzD,IAAK,MAAM9pB,KAAK2tB,EAAW,CAEzB,KAAM3tB,EAAE,aAAcmmB,IACpB,MAAM,IAAIlZ,GACR,0EAGJ,MAAMr5C,EAAOosC,EAAE,GAAGsI,MAAMgF,UACxB,IAAK15C,EAAKuhB,oBAAsBvhB,EAAK4hB,gBAAkB5hB,EAAKmpB,eAC1D,MAAM,IAAIzpB,MAAM,kCAAkC0sC,EAAE,GAAGsI,MAAM5xC,SAE/DpC,EAAKO,KAAK,CAAE6B,KAAMspC,EAAE,GAAGsI,MAAM5xC,KAAM9C,KAAMA,IACzCw8C,EAAOv7C,KACL,aAAamrC,EAAE,GAAGsI,MAAMA,MAAMiN,cAC5B3hD,EAAKuhB,mBAAqBvhB,EAAKyrB,YAAc,sBAAwB,KAG3E,CACA,GAAI/qB,EAAKW,OAAS,EAAG,CACnB,MAAMqqB,EAAK5rB,KAAKk6D,eAAeztC,EAAY0qB,GAC3C,GAAIvrB,EAGF,OAFAA,EAAGguB,UAAUnsB,MAAMhB,EAAY,UAAW7rB,GAC1CgrB,EAAG8wB,OAASA,EACL,KACF,CACL,MAAM2c,EAAar5D,KAAK05D,2BACtB15D,KAAK41D,aACL,EACA,IAAIrpC,GAAiBE,EAAY,UAAW7rB,IAE9CZ,KAAKk6D,eAAeztC,EAAY0qB,GAAYuF,OAASA,EACrD,MAAMyd,EAAiBn6D,KAAK84D,OAAOrsC,EAAYssC,GAG/C,MAAO,CAACM,EAAYc,EAAgB1tC,EADtB,OAAZ2rB,EAAmBp4C,KAAK84D,OAAOrsC,EAAYgmC,GAAwBtb,IAAegjB,EAEtF,EAEA,OAAO,IAEX,CAEA,qBAAAtC,GACE73D,KAAKm5D,mBAAmB1gC,IACxBz4B,KAAKm5D,mBAAmBzgC,IACxB14B,KAAKm5D,mBAAmBxgC,IACxB34B,KAAKm5D,mBAAmBvgC,GAC1B,CAEQwhC,KAAAA,IAASx5D,GACf,GAAoB,IAAhBA,EAAKW,OACP,MAAM,IAAIg4C,GAA0B,SAEtC34C,EAAOA,EAAKiC,IAAKu7C,GAAQp+C,KAAKyoD,kBAAkBrK,IAChD,IAAIic,GAAS,EACTn6D,EAAmB,KACnBqgD,GAAS,EACTG,GAAU,EACVF,GAAQ,EACRC,GAAS,EACT6Z,GAAc,EAClB,IAAK,MAAMlc,KAAOx9C,EAChB,GAAIw9C,aAAe8F,GAAa,CAC9B,MAAM9C,EAAUhD,EAAIvJ,KAAK+E,UACzB,IAAKwH,EAAQ13B,kBAAmB,CAC9B2wC,GAAS,EACT,KACF,CACKn6D,EAEOkhD,EAAQt3B,iBAAiB5pB,KACnCm6D,GAAS,GAFTn6D,EAAOkhD,CAIX,CAEF,GAAIiZ,EAAQ,CACNn6D,GAAQA,EAAKuhB,mBAAqBvhB,EAAKwhB,gBACzC6+B,EAASrgD,EAAK8pB,gBAAkB9G,EAAgBmB,KAChDq8B,EAAUxgD,EAAK8pB,gBAAkB9G,EAAgBe,IACjDw8B,EAASvgD,EAAK8pB,gBAAkB9G,EAAgB2B,IAChD27B,EAAQtgD,EAAK8pB,gBAAkB9G,EAAgBuB,KACtCvkB,IACTqgD,GAAS,EACTG,GAAU,EACVD,GAAS,EACTD,GAAQ,EACR8Z,GAAc,GAEhB,IAAK,MAAMlc,KAAOx9C,EAAM,CACtB,KAAMw9C,aAAe8F,KAAgBoW,EAAa,CAChDD,GAAS,EACT,KACF,CACmB,iBAARjc,GACTmC,GAAS,GACE,EAANnC,KAAaA,IACZA,EAAM,GACRqC,GAAS,EACTD,EAAQA,GAASpC,IAAO,aAExBqC,EAASA,GAAUrC,GAAO,WAC1BoC,EAAQA,GAASpC,GAAO,cAGJ,kBAARA,IAChBsC,GAAU,EACVF,GAAQ,EACRC,GAAS,EAEb,CACF,CAaA,GAZI4Z,IAAWC,IACT/Z,EACFrgD,EAAO2xB,GACE2uB,EACTtgD,EAAOuwB,GACEgwB,EACTvgD,EAAOuxB,GACEivB,IACTxgD,EAAOwrB,IAET2uC,IAAWn6D,IAERm6D,EACH,MAAM,IAAI9gB,GAAwB,SAEpC,IAAKr5C,EAAKuhB,oBAAsBvhB,EAAK4hB,gBAAkB5hB,EAAKmpB,eAC1D,MAAM,IAAIkwB,GAAwB,SAEpC,MAAM6K,EAAY,IAAI12B,GAAgBxtB,EAAMU,EAAKW,QAC3CizC,EAAM,IAAI0P,GAAY,GAAIE,GAahC,OAZA5P,EAAIK,KAAO,IAAI4d,GACbrO,EACAxjD,EAAKiC,IAAKu7C,IACR,GAAIA,aAAe8F,GACjB,OAAO9F,EAAIvJ,KAEb,IAAK30C,EAAKuhB,oBAAsBvhB,EAAKwhB,eACnC,MAAM,IAAI63B,GAAuB6E,SAAYA,EAAKl+C,GAEpD,OAAO,IAAIuyD,GAAcrU,EAAKl+C,MAG3Bs0C,CACT,CAIA+lB,OAAAA,GACEv6D,KAAK6mD,kBAAkBhS,KAAKmG,WAAW75C,KAAK,IAAIsxD,GAClD,CAEA+H,YAAAA,CAAa/lB,EAA+BgmB,GAC1C,GAAwB,iBAAbA,EACTz6D,KAAKy2D,YAAYxiB,IAAIwmB,EAAUhmB,QAC1B,GAAI5wC,MAAMC,QAAQ22D,GACvBA,EAASjU,QAASvS,GAAQj0C,KAAKw6D,aAAa/lB,EAAQR,SAEpD,IAAK,MAAM3H,KAAK8H,OAAOC,KAAKomB,GAC1Bz6D,KAAKw6D,aAAchd,GACH/I,EAAO+I,GACRlR,GACZmuB,EAASnuB,GAGlB,CAEAouB,GAAGC,EAAkB33D,EAAc43D,GAC7B56D,KAAKm2D,QAAQwE,GAEV36D,KAAKi2D,YAAYjzD,IACpBoxC,OAAOymB,eAAe76D,KAAKi2D,YAAajzD,EAAM,CAC5C+vC,IAAK,WACH,OAAO6nB,CACT,EACA9rD,IAAK,WACH,MAAM,IAAIlP,MAAM,uCAAuCoD,IACzD,KAKJ43D,EAAS/Y,UAAY8Y,EACrBC,EAAS/d,aAAe4V,GAAgBlM,gBACxCvmD,KAAKm2D,QAAQwE,GAAY,CAAC33D,EAAM,IAAIyvD,GAAkB,IAAIA,GAAiBmI,KAC3ExmB,OAAOymB,eAAe76D,KAAKi2D,YAAajzD,EAAM,CAC5C+vC,IAAK,WACH,OAAO6nB,CACT,EACA9rD,IAAK,WACH,MAAM,IAAIlP,MAAM,uCAAuCoD,IACzD,IAEF43D,EAAS5V,MAAMwB,QAAS1jD,GAAQ9C,KAAKw6D,aAAa,IAAMI,EAAU93D,IAEtE,CAEAujD,GAAAA,CAAIsU,EAAkB33D,EAAc43D,GAClC,GAAI56D,KAAKo2D,SAASuE,GAChB,MAAM,IAAI/6D,MAAM,mBAAmB+6D,2BAErCC,EAAS/Y,UAAY8Y,EACrBC,EAAS/d,aAAe4V,GAAgBqI,iBACxC96D,KAAKo2D,SAASuE,GAAY,CAAC33D,EAAM,IAAIyvD,GAAkB,IAAIA,GAAiBmI,KAC5E,IAAK,MAAM5W,IAAQ,CAAChhD,EAAMi2C,OAAO0hB,IAC/BvmB,OAAOymB,eAAe76D,KAAKk2D,aAAclS,EAAM,CAC7CjR,IAAK,WACH,OAAO6nB,CACT,EACA9rD,IAAK,SAA+B7K,GAClCyyC,KACGmQ,kBACAhS,KAAKmG,WAAW75C,KACf,IAAIsxD,GACF,IAAIA,GAAoBmI,EAAS/lB,MACjC5wC,aAAaigD,GAAcjgD,EAAE4wC,KAAO5wC,GAG5C,GAGN,CAEA6rD,iBAAAA,CAAkBlkD,EAAgBgsC,GAChC,MAAMmjB,EAAI/6D,KAAK81D,UAAUzV,UAAWv9C,GAAQA,EAAIouC,SAASsD,MAAQ5oC,GACjE,GAAImvD,EAAI,EACN,OAGF,MAAMC,EAAcpjB,EAAa,aAAe,SAChD,GACE53C,KAAK81D,UAAUiF,GAAG7pB,QAAQ+pB,iBAC1Bj7D,KAAK81D,UAAUiF,GAAG7pB,QAAQ+pB,kBAAoBD,EAE9C,MAAM,IAAIp7D,MAAM,kCAGlB,GADAI,KAAK81D,UAAUiF,GAAG7pB,QAAQ+pB,gBAAkBD,EAClB,WAAtBh7D,KAAK8vC,QAAQ5vC,KAAmB,CAClC,MAAMg7D,EAAczI,GAAmB7mD,EAAE6uC,KAAM7C,GAC/C,IAAK53C,KAAK00C,iBAAiBwmB,GACzB,MAAM,IAAIt7D,MAAM,+BAA+Bs7D,KAEjD,OAAOl7D,KAAK00C,iBAAiBwmB,GAE7B,OAAO,IAEX,CAEAzS,iBAAAA,CAAkB7T,GAChB,GAAI/wC,MAAMC,QAAQ8wC,GAAQ,CACxB,MAAMumB,EAAYvmB,EAAM/xC,IAAKC,GAASe,MAAMC,QAAQhB,GAAO9C,KAAKyoD,kBAAkB3lD,GAAOA,GACzF,OAAO9C,KAAKo6D,SAASe,GAErB,OAAOvmB,CAEX,CAEAwmB,iBAAAA,CAAkBxmB,GAChB,MAAM9xC,EAAM9C,KAAKyoD,kBAAkB7T,GACnC,GAAmB,kBAAR9xC,EACT,OAAO+uB,GACF,GAAmB,iBAAR/uB,EAAkB,CAClC,GAAKK,OAAOwoB,UAAU7oB,GAEf,IAAIA,IAAO,YAAmBA,GAAO,WAC1C,OAAO2tB,GACF,GAAI3tB,GAAO,GAAKA,GAAO,WAC5B,OAAO2uB,GAEP,MAAM,IAAI8nB,GAAyBz2C,EACrC,CAPE,OAAO4oB,GAQJ,OAAI5oB,aAAeohD,GACjBphD,EAAI+xC,MAAM+E,WAAa92C,EAAIq6C,eAD7B,CAGT,CAEA+c,cAAAA,CAAel3D,EAAcm0C,GAC3B,IAAK,MAAMvrB,IAAM,CAACvK,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAWi2B,SACnE,GAAI1rB,EAAKurB,EAAY,CACnB,MAAMwQ,EAAa3nD,KAAK61D,YAAYjqC,GACpC,GAAI+7B,EACF,IAAK,MAAM/7C,KAAK+7C,EAAW9L,MACzB,GAAIjwC,EAAE1L,KAAKusB,aAAezpB,EACxB,OAAO4I,CAIf,CAEF,OAAO,IACT,CAEAyvD,qBAAAA,CAAsBr4D,EAAcm0C,GAClC,IAAK,MAAMvrB,IAAM,CAACvK,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAWi2B,SACnE,GAAI1rB,EAAKurB,EAAY,CACnB,MAAMwQ,EAAa3nD,KAAK61D,YAAYjqC,GACpC,GAAI+7B,GAAcA,EAAWC,UAAU5kD,GACrC,OAAO2kD,EAAWC,QAAQ5kD,EAE9B,CAEF,OAAO,IACT,CAEQg1D,kBAAAA,CAAmBj3D,GACzB,IAeE,OAdAf,KAAKw2D,WAAa,KAClBx2D,KAAK41D,YAAcv0C,EAAWi2B,QAC9Bt3C,KAAK21D,YAAc,GACnB31D,KAAK+1D,aAAe,IAAIuF,GACxBt7D,KAAKg2D,cAAgB,IAAIuF,GACzBv7D,KAAKm2D,QAAU,GACfn2D,KAAKo2D,SAAW,GAChBp2D,KAAKi2D,YAAc,IAAIuF,GACvBx7D,KAAKk2D,aAAe,IAAIuF,GACxBz7D,KAAKy2D,YAAY57C,QACjB7a,KAAK07D,SAAS36D,EAAQ46D,SAEtB37D,KAAK47D,qBAAqB57D,KAAK+1D,cAC/B/1D,KAAK67D,sBAAsB,CAAC77D,KAAK+1D,cAAe,CAAC10C,EAAWi2B,UACrD,CACLt3C,KAAK87D,sBAAsB97D,KAAK+1D,aAAc/1D,KAAKg2D,eACnDh2D,KAAK+7D,uBAAuBh7D,EAAQo3D,OAExC,CAAE,MAAO6D,GACP,OAAIA,aAAeziB,IACjBv5C,KAAKw2D,WAAawF,EAAI/mB,WAAWj1C,KAAK8vC,QAAQ5vC,MAC9CK,QAAQC,MAAMR,KAAKw2D,YACZ,MACEwF,aAAep8D,OACxBI,KAAKw2D,WAAawF,EAAIr5D,WACtBpC,QAAQC,MAAMR,KAAKw2D,YACZ,OAEPx2D,KAAKw2D,WAAapiB,OAAO6nB,UAAUt5D,SAASf,KAAKo6D,GACjDz7D,QAAQC,MAAM,UAAUR,KAAKw2D,cACtB,KAEX,CACF,CAEQsB,iBAAAA,CAAkB/2D,GACxB,IACEf,KAAKw2D,WAAa,KAElBx2D,KAAK41D,YAAcv0C,EAAW+1B,OAC9Bp3C,KAAK21D,YAAc,GACnB31D,KAAK+1D,aAAe,IAAIuF,GACxBt7D,KAAKg2D,cAAgB,IAAIuF,GACzBv7D,KAAKm2D,QAAU,GACfn2D,KAAKo2D,SAAW,GAChBp2D,KAAKi2D,YAAc,IAAIuF,GACvBx7D,KAAKk2D,aAAe,IAAIuF,GACxBz7D,KAAKy2D,YAAY57C,QACjB7a,KAAK07D,SAAS36D,EAAQm7D,QACtB,MAAMC,EAAcn8D,KAAK+1D,aACnBqG,EAAqBp8D,KAAKg2D,cAC1BqG,EAAer8D,KAAKm2D,QACpBmG,EAAgBt8D,KAAKo2D,SAK3Bp2D,KAAK41D,YAAcv0C,EAAWg2B,SAC9Br3C,KAAK21D,YAAc,GACnB31D,KAAK+1D,aAAe,IAAIuF,GACxBt7D,KAAKg2D,cAAgB,IAAIuF,GACzBv7D,KAAKm2D,QAAU,GACfn2D,KAAKo2D,SAAW,GAChBp2D,KAAKi2D,YAAc,IAAIuF,GACvBx7D,KAAKk2D,aAAe,IAAIuF,GACxBz7D,KAAKy2D,YAAY57C,QACjByhD,EAAc9V,QAAQ,CAAC1jD,EAAK86C,KAC1B59C,KAAK06D,GACH9c,EACA96C,EAAI,GACJ,IAAIohD,GAAYphD,EAAI,GAAG8xC,MAAM5xC,KAAMF,EAAI,GAAG8xC,MAAMgF,WAAW3F,OAAOnxC,EAAI,GAAG8xC,MAAMA,MAAMoQ,UAGzFhlD,KAAK07D,SAAS36D,EAAQw7D,UACtB,MAAMC,EAAYx8D,KAAK+1D,aACjB0G,EAAmBz8D,KAAKg2D,cACxB0G,EAAa18D,KAAKm2D,QAClBwG,EAAc38D,KAAKo2D,SAQzB,OAHAp2D,KAAK48D,cAAcT,EAAaK,GAChCx8D,KAAK67D,sBAAsB,CAACM,EAAaK,GAAY,CAACn7C,EAAW+1B,OAAQ/1B,EAAWg2B,WAE7E,CACLr3C,KAAK68D,qBACHx7C,EAAW+1B,OACX+kB,EACAC,EACAC,EAAax5D,IAAKC,GAAQA,EAAI,IAC9Bw5D,EAAcz5D,IAAKC,GAAQA,EAAI,KAEjC9C,KAAK68D,qBACHx7C,EAAWg2B,SACXmlB,EACAC,EACAC,EAAW75D,IAAKC,GAAQA,EAAI,IAC5B65D,EAAY95D,IAAKC,GAAQA,EAAI,KAE/B9C,KAAK+7D,uBAAuBh7D,EAAQo3D,OACpCn4D,KAAKq2D,kBAET,CAAE,MAAO2F,GACP,OAAIA,aAAeziB,IACjBv5C,KAAKw2D,WAAawF,EAAI/mB,WAAWj1C,KAAK8vC,QAAQ5vC,MAC9CK,QAAQC,MAAMR,KAAKw2D,YACZ,MACEwF,aAAep8D,OACxBI,KAAKw2D,WAAawF,EAAIr5D,WACtBpC,QAAQC,MAAMR,KAAKw2D,YACZ,OAEPx2D,KAAKw2D,WAAapiB,OAAO6nB,UAAUt5D,SAASf,KAAKo6D,GACjDz7D,QAAQC,MAAM,UAAUR,KAAKw2D,cACtB,KAEX,CACF,CAEQkF,QAAAA,CAAS9f,GACf57C,KAAKo3D,UAAUp3D,KAAK+1D,cAChB/1D,KAAKu2D,oBAAsBv2D,KAAK41D,cAAgBv0C,EAAW+1B,SAC7Dp3C,KAAK+1D,aAAa+G,SAASC,cAAgB/8D,KAAKqd,QAAQ42B,IAAI,mBAE9D2H,GAAMh6C,KAAK5B,KAAK+1D,aAAc/1D,MAC9BA,KAAKs3D,WAGLt3D,KAAK+1D,aAAalhB,KAAKmG,WAAa,IAC/Bh7C,KAAK+1D,aAAalhB,KAAKmG,WAAWC,OAClCn4C,GAAQA,aAAe2vD,IAAqB3vD,aAAe2vD,OAE3DzyD,KAAK+1D,aAAalhB,KAAKmG,WAAWC,OAClCn4C,KAAUA,aAAe2vD,IAAwB3vD,aAAe2vD,KAGvE,CAEQoK,oBAAAA,CACN1lB,EACAqG,EACAqZ,EACA9a,EACAE,GAEA,MAAM77C,EAAU,CACdF,KAAMi3C,EACN2K,IAAK3K,IAAe91B,EAAWg2B,UAAY4E,EAAQ16C,OAAS,EAC5D86C,QAAS,GACTD,WAAY,IAAIhM,IAChB+L,SAAU,IAAI0a,EAAamG,gBAC3BnhB,MAAO77C,KAAK61D,YAAY1e,IAAa0E,OAAS,GAC9CkG,gBAAiB,IAAI6B,IACrB7H,OAAQA,EACRE,QAASA,EACTmB,OAAQI,EACR3J,iBAAkB7zC,KAAKq2D,kBACvB3T,cAAe,MAEjB,OAAQ1iD,KAAK8vC,QAAQ5vC,MACnB,IAAK,QACH,IAAK,MAAM66D,KAAK/6D,KAAK81D,UACnB,GAAIiF,EAAE7pB,QAAS,CACb,MAAMhxC,EAAO66D,EAAE7pB,QAAQsD,IAAIK,KAAK+E,UAChC,GAAI15C,EAAKspB,iBAAmBtpB,EAAK6uB,iBAAkB,CACjD,GAAkC,eAA9BgsC,EAAE7pB,QAAQ+pB,gBACZ,MAAM,IAAI1hB,GAA0B,4BAEJ,WAA9BwhB,EAAE7pB,QAAQ+pB,kBACR/6D,EAAKwuB,cACPtuB,EAAQ2hD,gBAAgBjzC,IAAIisD,EAAE7pB,QAAQsD,IAAK9hB,IAClCxyB,EAAK0uB,iBACdxuB,EAAQ2hD,gBAAgBjzC,IAAIisD,EAAE7pB,QAAQsD,IAAKrhB,IAGjD,CACF,CAEF,OAAOqqB,EAAM3I,KAAKgF,QAAQ,GAAIz5C,GAChC,IAAK,SACH,IAAK,MAAM26D,KAAK/6D,KAAK81D,UACnB,GAAIiF,EAAE7pB,QAAS,CACb,MAAMhxC,EAAO66D,EAAE7pB,QAAQsD,IAAIK,KAAK+E,UAC5B15C,EAAKspB,iBAAmBtpB,EAAK6uB,kBAAkD,WAA9BgsC,EAAE7pB,QAAQ+pB,kBACzD/6D,EAAKwuB,cACPtuB,EAAQ2hD,gBAAgBjzC,IACtBisD,EAAE7pB,QAAQsD,IACVt0C,EAAK2uB,iBAAmBgE,GAAiBH,IAElCxyB,EAAK0uB,iBACdxuB,EAAQ2hD,gBAAgBjzC,IAAIisD,EAAE7pB,QAAQsD,IAAKrhB,IAGjD,CAEF,OAAOqqB,EAAM3I,KAAKmF,SAAS,GAAI55C,GACjC,IAAK,SACH,OAAOo9C,EAAM3I,KAAKoF,OAAO,GAAI75C,GAC/B,QACE,OAAO,KAEb,CAEA,qBAAA07D,CAA8Bte,EAAsBqZ,GAClD,MAAMz2D,EAAU,CACdF,KAAMmhB,EAAWi2B,QACjBwK,KAAK,EACLzF,QAAS,GACTD,WAAY,IAAIhM,IAChB+L,SAAU,IAAI0a,EAAamG,gBAC3BnhB,MAAO77C,KAAK61D,YAAYx0C,EAAWi2B,UAAUuE,OAAS,GACtDkG,gBAAiB,KACjBhG,OAAQ,GACRE,QAAS,GACTmB,OAAQI,EACR3J,iBAAkB,GAClB6O,cAAe1iD,KAAK01D,gBAEtB,OAAOlY,EAAM3I,KAAKoF,OAAO,GAAI75C,EAC/B,CAEQw7D,oBAAAA,CAAqBqB,GAC3B,MAAMC,EAA4D,GAClE,IAAK,IAAI57D,EAAI,EAAGA,EAAItB,KAAK81D,UAAUv0D,OAAQD,IAAK,CAC9C,MAAMy5D,EAAI/6D,KAAK81D,UAAUx0D,GACzB,GACEy5D,EAAEoC,QACDpC,EAAEoC,MAAM3oB,IAAIqI,eAAiB4V,GAAgB/M,sBAC5CqV,EAAEoC,MAAM3oB,IAAIqI,eAAiB4V,GAAgBzM,sBAC/C,CACA,GAAI+U,EAAEoC,MAAM3oB,IAAI2I,UAAU9zB,gBAAkB0xC,EAAEoC,MAAM3oB,IAAI0Q,UACtD,SAEGgY,EAAYnC,EAAEtZ,SACjByb,EAAYnC,EAAEtZ,OAAS,IAEzB,MAAMjN,EAAM,IAAI0P,GAAY6W,EAAEoC,MAAM3oB,IAAIiG,KAAMsgB,EAAEoC,MAAM3oB,IAAIK,KAAK+E,WAC/DpF,EAAIqI,aAAeke,EAAEoC,MAAM3oB,IAAIqI,aAC/BrI,EAAI0Q,UAAY6V,EAAEoC,MAAM3oB,IAAI0Q,UAC5B1Q,EAAI2Q,aAAe4V,EAAEoC,MAAM3oB,IAAI2Q,aAC/B3Q,EAAIyN,UAAY8Y,EAAEoC,MAAM3oB,IAAIyN,UAC5Bib,EAAYnC,EAAEtZ,OAAOtgD,KAAK,CAAE8gB,OAAQuyB,EAAKsH,QAASx6C,GACpD,CACF,CACA,IAAK,MAAMgrC,KAAK4wB,EACd,GAAIA,EAAY5wB,GAAG/qC,OAAS,EAAG,CAC7B,MAAMs6C,EAAQ,CAAC,SAAU,UACnBuhB,EAAW,CA3kEI,OACA,QA2kEfC,EAAsD,CAC1DH,EAAY5wB,GAAG2O,OAAQn4C,GAAQA,EAAImf,OAAO46B,eAAiB4V,GAAgB/M,sBAC3EwX,EAAY5wB,GAAG2O,OAAQn4C,GAAQA,EAAImf,OAAO46B,eAAiB4V,GAAgBzM,uBAE7E,IAAK,IAAI1kD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,GAAwB,IAApB+7D,EAAM/7D,GAAGC,OACX,SAEF,MAEM+7D,EAAW,CAFKD,EAAM/7D,GAAG25C,OAAQn4C,IAASA,EAAImf,OAAOijC,cACxCmY,EAAM/7D,GAAG25C,OAAQn4C,GAAQA,EAAImf,OAAOijC,WACRriD,IAAKC,GAAQ,CAACA,KAC7D,IAAK,IAAIu/C,EAAI,EAAGA,EAAIib,EAAS/7D,OAAQ8gD,IAAK,CACxC,GAA2B,IAAvBib,EAASjb,GAAG9gD,OACd,SAEF,MAAMg8D,EAAQ,GAAGH,EAAS97D,MAAMgrC,KAAK+V,IAC/B51B,EAAazsB,KAAKk5D,wBAClBttD,EAAI8qC,KAA2B6iB,qBACnC9sC,EACAovB,EAAMv6C,GACN+f,EAAWi2B,SACX,KACGgmB,EAASjb,GAAGx/C,IAAKC,GAAQA,EAAImf,SAE5B67B,IAAWx8C,EAAI,IAAIg8D,EAASjb,GAAGhC,UAAWv9C,IAASA,EAAImf,OAAOggC,WAAa,EAC3EzN,EAAM5oC,IACF,IAANtK,EACFkzC,EAAImR,cAAcxiD,OAAOmpC,GAAI+V,EAAI,EAAIib,EAASjb,GAAG,GAAGpgC,OAAOkjC,aAAe,IAE1E3Q,EAAI0R,cAAc/iD,OAAOmpC,GAAI+V,EAAI,EAAIib,EAASjb,GAAG,GAAGpgC,OAAOkjC,aAAe,GAC1E3Q,EAAIyN,UAAYnE,GAElBmf,EAAYM,GAAS/oB,EACrB,MAAMoJ,EAAQ59C,KAAK81D,UAAUzV,UAAWv9C,GAAQA,EAAIq6D,OAAOn6D,OAASu6D,GACpEv9D,KAAK81D,UAAUlY,GAAO4f,KAAOn8C,EAAWi2B,QACxC,IAAImmB,EAAUz9D,KAAK22D,SAASxzD,OAAOmpC,IAC9BmxB,IACHA,EAAU,CAAC,EACXz9D,KAAK22D,SAASxzD,OAAOmpC,IAAMmxB,GAE7B,IAAI5vC,GAAW,EACf,IAAK,IAAI5d,EAAIqtD,EAASjb,GAAG9gD,OAAS,EAAG0O,GAAK,EAAGA,IAAK,CAChD,MAAM8qD,EAAIuC,EAASjb,GAAGpyC,GAChBukC,EAAMx0C,KAAK81D,UAAUiF,EAAEjf,SAASqhB,MAAM3oB,IAC5CipB,EAAQjpB,EAAIiG,MAAQ8iB,EACpB/oB,EAAIiG,KAAO,GAAG8iB,KAAS/oB,EAAIiG,OAC3B5sB,IAAa2mB,EAAIK,KAAK6F,YACxB,CACI7sB,GACFovC,EAAYM,GAAO1oB,KAAKyF,cAE5B,CACF,CACF,CAEFt6C,KAAK81D,UAAY91D,KAAK81D,UAAU7a,OAAQn4C,IAC9BA,EAAIq6D,OAAUr6D,EAAIq6D,MAAM3oB,IAAI2I,UAAU9zB,gBAAkBvmB,EAAIq6D,MAAM3oB,IAAI0Q,UAclF,CAEA,aAAA0X,CAAsBc,EAAkCC,GACtD,MAAMC,EAAkE,GAClEC,EAAgE,GAChEC,EAAkE,GAIxE,IAAK,IAAIx8D,EAAI,EAAGA,EAAItB,KAAK81D,UAAUv0D,OAAQD,IAAK,CAC9C,MAAMy5D,EAAI/6D,KAAK81D,UAAUx0D,GACzB,GACEy5D,EAAEoC,QACDpC,EAAEoC,MAAM3oB,IAAIqI,eAAiB4V,GAAgB/M,sBAC5CqV,EAAEoC,MAAM3oB,IAAIqI,eAAiB4V,GAAgBzM,sBAC/C,CACA,GAAI+U,EAAEoC,MAAM3oB,IAAI2I,UAAU9zB,gBAAkB0xC,EAAEoC,MAAM3oB,IAAI0Q,UACtD,SAEF,MAAMjhD,KAAO82D,EAAEyC,KAAOn8C,EAAW+1B,QAC3B9xC,KAAOy1D,EAAEyC,KAAOn8C,EAAWg2B,UACjC,GAAIpzC,GAAKqB,EAAG,CACLw4D,EAAkB/C,EAAEtZ,SACvBqc,EAAkB/C,EAAEtZ,OAAS,IAE/B,MAAMjN,EAAM,IAAI0P,GAAY6W,EAAEoC,MAAM3oB,IAAIiG,KAAMsgB,EAAEoC,MAAM3oB,IAAIK,KAAK+E,WAC/DpF,EAAIqI,aAAeke,EAAEoC,MAAM3oB,IAAIqI,aAC/BrI,EAAI0Q,UAAY6V,EAAEoC,MAAM3oB,IAAI0Q,UAC5B1Q,EAAI2Q,aAAe4V,EAAEoC,MAAM3oB,IAAI2Q,aAC/B3Q,EAAIyN,UAAY8Y,EAAEoC,MAAM3oB,IAAIyN,UAC5B6b,EAAkB/C,EAAEtZ,OAAOtgD,KAAK,CAAE8gB,OAAQuyB,EAAKsH,QAASx6C,GAE1D,MAAO,GAAI2C,EAAG,CACP25D,EAAkB7C,EAAEtZ,SACvBmc,EAAkB7C,EAAEtZ,OAAS,IAE/B,MAAMjN,EAAM,IAAI0P,GAAY6W,EAAEoC,MAAM3oB,IAAIiG,KAAMsgB,EAAEoC,MAAM3oB,IAAIK,KAAK+E,WAC/DpF,EAAIqI,aAAeke,EAAEoC,MAAM3oB,IAAIqI,aAC/BrI,EAAI0Q,UAAY6V,EAAEoC,MAAM3oB,IAAI0Q,UAC5B1Q,EAAI2Q,aAAe4V,EAAEoC,MAAM3oB,IAAI2Q,aAC/B3Q,EAAIyN,UAAY8Y,EAAEoC,MAAM3oB,IAAIyN,UAC5B2b,EAAkB7C,EAAEtZ,OAAOtgD,KAAK,CAAE8gB,OAAQuyB,EAAKsH,QAASx6C,GAE1D,MAAO,GAAIgE,EAAG,CACPu4D,EAAgB9C,EAAEtZ,SACrBoc,EAAgB9C,EAAEtZ,OAAS,IAE7B,MAAMjN,EAAM,IAAI0P,GAAY6W,EAAEoC,MAAM3oB,IAAIiG,KAAMsgB,EAAEoC,MAAM3oB,IAAIK,KAAK+E,WAC/DpF,EAAIqI,aAAeke,EAAEoC,MAAM3oB,IAAIqI,aAC/BrI,EAAI0Q,UAAY6V,EAAEoC,MAAM3oB,IAAI0Q,UAC5B1Q,EAAI2Q,aAAe4V,EAAEoC,MAAM3oB,IAAI2Q,aAC/B3Q,EAAIyN,UAAY8Y,EAAEoC,MAAM3oB,IAAIyN,UAC5B4b,EAAgB9C,EAAEtZ,OAAOtgD,KAAK,CAAE8gB,OAAQuyB,EAAKsH,QAASx6C,GAExD,CACF,CACF,CACA,MAAMy8D,EAAe,CAACH,EAAmBC,EAAiBC,GACpDE,EAAkB,CA1sEA,OACE,OACF,QAysElBC,EAAkB,CAxsEA,OACE,OACF,QAusElBC,EAAW,CAAC78C,EAAW+1B,OAAQ/1B,EAAWg2B,SAAUh2B,EAAW+1B,OAAS/1B,EAAWg2B,UACzF,IAAK,IAAI/1C,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,MAAMgrC,KAAKyxB,EAAaz8D,GAC3B,GAAIy8D,EAAaz8D,GAAGgrC,IAAI/qC,OAAS,EAAG,CAClC,MAAM87D,EAAsD,CAC1DU,EAAaz8D,GAAGgrC,GAAG2O,OAChBn4C,GAAQA,EAAImf,OAAO46B,eAAiB4V,GAAgB/M,sBAEvDqY,EAAaz8D,GAAGgrC,GAAG2O,OAChBn4C,GAAQA,EAAImf,OAAO46B,eAAiB4V,GAAgBzM,uBAGnDoX,EAAuB,CAACY,EAAiBC,GACzCE,EAA+B,CAAC,SAAU,UAChD,IAAK,IAAItiD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,GAAwB,IAApBwhD,EAAMxhD,GAAGta,OACX,SAEF,MAEM+7D,EAAW,CAFKD,EAAMxhD,GAAGo/B,OAAQn4C,IAASA,EAAImf,OAAOijC,cACxCmY,EAAMxhD,GAAGo/B,OAAQn4C,GAAQA,EAAImf,OAAOijC,WACRriD,IAAKC,GAAQ,CAACA,KAC7D,IAAK,IAAIu/C,EAAI,EAAGA,EAAIib,EAAS/7D,OAAQ8gD,IAAK,CACxC,GAA2B,IAAvBib,EAASjb,GAAG9gD,OACd,SAEF,MAAMg8D,EAAQ,GAAGH,EAASvhD,GAAGva,MAAMgrC,KAAK+V,IAClC51B,EAAazsB,KAAKk5D,wBAClBttD,EAAI8qC,KAA2B6iB,qBACnC9sC,EACA0xC,EAAWtiD,GACXqiD,EAAS58D,IACT,KACGg8D,EAASjb,GAAGx/C,IAAKC,GAAQA,EAAImf,SAE5B67B,IAAWjiC,EAAI,IAAIyhD,EAASjb,GAAGhC,UAAWv9C,IAASA,EAAImf,OAAOggC,WAAa,EACjF,GAAIic,EAAS58D,GAAK+f,EAAW+1B,OAAQ,CACnC,MAAM5C,EAAM5oC,IACZ,GAAIiQ,EAAI,IAAMiiC,EACZ,MAAM,IAAIl+C,MAAM,qDAER,IAANic,EACF24B,EAAImR,cAAcxiD,OAAOmpC,GAAI+V,EAAI,EAAIib,EAASjb,GAAG,GAAGpgC,OAAOkjC,aAAe,IAE1E3Q,EAAI0R,cAAc/iD,OAAOmpC,GAAI+V,EAAI,EAAIib,EAASjb,GAAG,GAAGpgC,OAAOkjC,aAAe,GAC1E3Q,EAAIyN,UAAYnE,GAElB4f,EAAkBH,GAAS/oB,CAC7B,CACA,GAAI0pB,EAAS58D,GAAK+f,EAAWg2B,SAAU,CACrC,MAAM7C,EAAM5oC,IACF,IAANiQ,EACF24B,EAAImR,cAAcxiD,OAAOmpC,GAAI+V,EAAI,EAAIib,EAASjb,GAAG,GAAGpgC,OAAOkjC,aAAe,IAE1E3Q,EAAI0R,cAAc/iD,OAAOmpC,GAAI+V,EAAI,EAAIib,EAASjb,GAAG,GAAGpgC,OAAOkjC,aAAe,GAC1E3Q,EAAIyN,UAAYnE,GAElB6f,EAAmBJ,GAAS/oB,CAC9B,CACA,MAAMoJ,EAAQ59C,KAAK81D,UAAUzV,UAAWv9C,GAAQA,EAAIq6D,OAAOn6D,OAASu6D,GACpEv9D,KAAK81D,UAAUlY,GAAO4f,KAAOU,EAAS58D,GACtC,IAAIm8D,EAAUz9D,KAAK22D,SAASxzD,OAAOmpC,IAC9BmxB,IACHA,EAAU,CAAC,EACXz9D,KAAK22D,SAASxzD,OAAOmpC,IAAMmxB,GAE7B,IAAI5vC,GAAW,EACf,IAAK,IAAI5d,EAAIqtD,EAASjb,GAAG9gD,OAAS,EAAG0O,GAAK,EAAGA,IAAK,CAChD,MAAM8qD,EAAIuC,EAASjb,GAAGpyC,GAChBukC,EAAMx0C,KAAK81D,UAAUiF,EAAEjf,SAASqhB,MAAM3oB,IAC5CipB,EAAQjpB,EAAIiG,MAAQ8iB,EACpB/oB,EAAIiG,KAAO,GAAG8iB,KAAS/oB,EAAIiG,OAC3B5sB,IAAa2mB,EAAIK,KAAK6F,YACxB,CACI7sB,IACEqwC,EAAS58D,GAAK+f,EAAW+1B,OAC3BsmB,EAAkBH,GAAO1oB,KAAKyF,eAE9BqjB,EAAmBJ,GAAO1oB,KAAKyF,eAGrC,CACF,CACF,CAGJt6C,KAAK81D,UAAY91D,KAAK81D,UAAU7a,OAAQn4C,IAC9BA,EAAIq6D,OAAUr6D,EAAIq6D,MAAM3oB,IAAI2I,UAAU9zB,gBAAkBvmB,EAAIq6D,MAAM3oB,IAAI0Q,UAalF,CAEA,qBAAA2W,CAA8BuC,EAAyBC,GACrDr+D,KAAK81D,UAAY91D,KAAK81D,UAAU7a,OAAQn4C,KAAUA,EAAI06D,MACtD,MAAMc,EAAqBz6D,MAAM4E,KAAa,CAAElH,OXn0ElB,IWm0EgDg9D,KAAK,GACnF,IAAK,MAAMxD,KAAK/6D,KAAK81D,UACnBiF,EAAErZ,QAAU4c,EAASvD,EAAEtZ,SAEzB,IAAK,IAAIngD,EAAI,EAAGA,EAAI88D,EAAO78D,OAAQD,IAAK,CACtC,MAAMk8C,EAAQ4gB,EAAO98D,GACfpB,EAAOm+D,EAAY/8D,GACzB,IAAK,MAAMy5D,KAAK/6D,KAAK81D,UACnB,GAAIiF,EAAEyC,KAAOt9D,EAAM,CACjB,MAAMq7C,EAAYiC,EAAM3I,KAA4B0G,SAC9Cv4C,EAAO+3D,EAAEoC,MAAQpC,EAAEoC,MAAMn6D,KAAO+3D,EAAE7pB,QAAU6pB,EAAE7pB,QAAQsD,IAAIiG,KAAOsgB,EAAElL,QAAQpV,KAC3EmD,EAAQrC,EAAS8E,UAAWv9C,GAAQA,EAAI8xC,MAAM5xC,OAASA,GAC7D,GAAI46C,EAAQ,EACV,MAAM,IAAIh+C,MAAM,0DAA0DoD,KAE3Eu4C,EAASqC,GAA6B8D,QAAUqZ,EAAErZ,OACrD,CAEJ,CACF,CAEQqa,sBAAAA,CAAuB5D,GAC7B,MAAMqG,EAA6B,GAC7BC,EAAqB,CAAC,EAAG,EAAG,EAAG,GACrC,IAAK,MAAMC,KAAe1+D,KAAK81D,UAAW,CACxC,IAAI/pC,EAASyyC,EAAQE,EAAYjd,OAC5B11B,IACHA,EAAS,CACPosC,MAAO,GAAGA,GAAS,aAAauG,EAAYjd,SAC5Cr0B,QAAS,IAEPptB,KAAK22D,SAAS+H,EAAYjd,SAC5B11B,EAAO0xC,QAAUz9D,KAAK22D,SAAS+H,EAAYjd,QAE7C+c,EAAQE,EAAYjd,OAAS11B,GAE/B,MAAM4yC,EAA8B,CAClCjd,QAASgd,EAAYhd,QACrBkd,WAAYF,EAAYlB,KACxBt9D,KAAM,KACN8C,KAAM,IAER,GAAI07D,EAAYvB,MAAO,CACrBwB,EAAMz+D,KAAQw+D,EAAYvB,MAAM3oB,IAAI2I,UAA+Bp5C,MACjE/D,KAAK85D,aAAa4E,EAAYvB,MAAMn6D,OAEtC,MAAM67D,EAAYH,EAAYvB,MAAM3oB,IAAIqI,eAAiB4V,GAAgBzM,qBACzE2Y,EAAM7wB,OAAS,CACb5tC,KAAM2+D,EAAaH,EAAYvB,MAAM3oB,IAAIyN,UAAY,oBAAsB,UAAa,UACxF6c,eAAgBJ,EAAYvB,MAAMvX,YAClCmZ,mBAAoBL,EAAYvB,MAAMvX,YACtCoZ,cAAeL,EAAMz+D,KAAKmsB,eAAe,EAAGsyC,EAAOz+D,KAA0B6rB,QAC7E0yC,mBAAoBC,EAAYvB,MAAMvX,YAAc6Y,EAAmBC,EAAYjd,UAAW,GAEhGkd,EAAM37D,KAAO07D,EAAYvB,MAAMn6D,IAC1B,MAAA,GAAI07D,EAAYxtB,QAAS,CAE9B,GADAytB,EAAMz+D,KAAOw+D,EAAYxtB,QAAQsD,IAAI2I,WAChCwhB,EAAMz+D,KAAKspB,gBACd,MAAM,IAAI5pB,MAAM,kBAElB,GAAI++D,EAAMz+D,KAAK4uB,mBAAoB,CACjC,IAAImwC,EAEFA,EADEN,EAAMz+D,KAAK2uB,iBACG8vC,EAAMz+D,KAAK0uB,gBAAkB,aAAe,WACnD+vC,EAAMz+D,KAAKyuB,cACJ,KACPgwC,EAAMz+D,KAAK0uB,gBACJ,OACP+vC,EAAMz+D,KAAKuuB,cACJ,KAEA,KAElBkwC,EAAMO,eAAiB,CACrBC,OAAQ,aACRF,cAAeA,EACfl+C,OAAQ49C,EAAMz+D,KAAKsuB,mBAEvB,MAAO,GAAImwC,EAAMz+D,KAAK+uB,oBACpB0vC,EAAMS,gBAAkB,CACtBnE,gBAAiByD,EAAYxtB,QAAQ+pB,gBACjCxI,GAAmBiM,EAAYxtB,QAAQsD,IAAIiG,MAAM,GACjD,UAED,CACL,MAAMgM,EACkB,WAAtBzmD,KAAK8vC,QAAQ5vC,KACTw+D,EAAYxtB,QAAQsD,IAAIoQ,YACxB8Z,EAAYxtB,QAAQ+pB,iBAAmB0D,EAAMz+D,KAAK6uB,iBAChD,QACA2vC,EAAYxtB,QAAQsD,IAAIoQ,YAChC,IAAIqa,EAEFA,EADEN,EAAMz+D,KAAK2uB,iBACG8vC,EAAMz+D,KAAK0uB,gBAAkB,aAAe,WACnD+vC,EAAMz+D,KAAKyuB,cACJ,KACPgwC,EAAMz+D,KAAK0uB,gBACJ,OACP+vC,EAAMz+D,KAAKuuB,cACJ,KAEA,KAElBkwC,EAAMztB,QAAU,CACduV,WAAYA,EACZwY,cAAeA,EACfI,cAAc,EACdpE,gBAAiB,KACjBqE,0BAA2B,MAEH,WAAtBt/D,KAAK8vC,QAAQ5vC,MAA6D,WAAxCw+D,EAAYxtB,QAAQ+pB,kBACxD0D,EAAMztB,QAAQ+pB,gBAAkBxI,GAAmBiM,EAAYxtB,QAAQsD,IAAIiG,MAAM,KAG1D,WAAvBz6C,KAAM8vC,QAAQ5vC,MAAqBy+D,EAAMz+D,KAAK6uB,kBACN,eAAxC2vC,EAAYxtB,QAAQ+pB,mBAEpB0D,EAAMztB,QAAQouB,0BAA4B7M,GAAmBiM,EAAYxtB,QAAQsD,IAAIiG,MAAM,GAE/F,CACAkkB,EAAM37D,KAAO07D,EAAYxtB,QAAQsD,IAAIiG,IAChC,KAAA,KAAIikB,EAAY7O,QAerB,MAAM,IAAItW,GAAuB,8BAbjC,GADAolB,EAAMz+D,KAAOw+D,EAAY7O,QAAQ1S,WAC5BwhB,EAAMz+D,KAAKqpB,gBACd,MAAM,IAAI3pB,MAAM,kBAElB++D,EAAM9O,QAAU,CACd3vD,KACEy+D,EAAMz+D,KAAKiuB,aAAexF,EAAoB42C,OACN,UAApCb,EAAY7O,QAAQjL,YAClB,YACA,gBACF,cAER+Z,EAAM37D,KAAO07D,EAAY7O,QAAQpV,IAGnC,CACA1uB,EAAOqB,QAAQjsB,KAAKw9D,EACtB,CACA,IAAK,IAAIr9D,EAAI,EAAGA,EAAIk9D,EAAQj9D,OAAQD,IAC7Bk9D,EAAQl9D,KACXk9D,EAAQl9D,GAAK,CACX62D,MAAO,GAAGA,GAAS,aAAa72D,KAChC8rB,QAAS,KAIf,OAAOoxC,CACT,CAEAgB,oBAAAA,CACEvpB,EACAr1C,GAEA,MAAM0gD,EAAW1gD,EAAKq6C,OAAQn4C,IAC5B,GAAIA,aAAeohD,GAAa,CAC9B,MAAMhkD,EAAO4C,EAAI+xC,KAAK+E,UACtB,GACE15C,EAAKmpB,gBACLrpB,KAAK61D,YAAY71D,KAAK41D,cAAc/Z,MAAMwE,UAAWz0C,GAAMA,EAAE1L,KAAKusB,aAAevsB,EAAKusB,YACpF,EAEF,OAAO,CAEX,CACA,OAAO,IAEHgzC,EAAKz/D,KAAK00C,iBAAiBmlB,cAAc5jB,GAC/C,OAAOwpB,EAAKz/D,KAAK2oD,0BAA0B8W,EAAIne,GAAY,IAC7D,CAEAqH,yBAAAA,CACEL,EACA1nD,GAEA,IAAK,MAAM29C,KAAY+J,EAAc,CACnC,GAAI1nD,EAAKW,SAAWg9C,EAASyC,SAAS3xB,SAAS9tB,OAC7C,SAEF,MAAMoF,EAA8B,GACpC,IAAI+4D,GAAU,EACd,IAAK,IAAIp+D,EAAI,EAAGA,EAAIV,EAAKW,OAAQD,IAAK,CACpC,MAAMq+D,EAAUphB,EAASyC,SAAS3xB,SAAS/tB,GACrC8/C,EACJue,EAAQze,OAASye,EAAQz/D,gBAAgB0tB,GACrC+xC,EAAQz/D,KAAK4tB,YACb6xC,EAAQz/D,KACRk+C,EAAMx9C,EAAKU,GACjB,GAAmB,kBAAR88C,EAAmB,CAC5B,IAAKgD,EAAQ3/B,mBAAqB2/B,EAAQp3B,gBAAkB9G,EAAgBmB,KAAM,CAChFq7C,GAAU,EACV,KACF,CACA/4D,EAAOxF,KAAK,IAAIsxD,GAAcrU,EAAKvsB,IAC9B,MAAA,GAAmB,iBAARusB,EAAkB,CAClC,IACGgD,EAAQ3/B,oBACR2/B,EAAQ1/B,gBACT0/B,EAAQn+B,aAAeC,EAAgBmB,KACvC,CACAq7C,GAAU,EACV,KACF,CACA,GAAIte,EAAQn+B,aAAeC,EAAgBuB,IAAK,CAC9C,IAAKthB,OAAOwoB,UAAUyyB,IAAQA,GAAM,YAAmBA,EAAM,WAAY,CACvEshB,GAAU,EACV,KACF,CACA/4D,EAAOxF,KAAK,IAAIsxD,GAAcrU,EAAK3tB,IACrC,MAAO,GAAI2wB,EAAQn+B,aAAeC,EAAgB2B,IAAK,CACrD,IAAK1hB,OAAOwoB,UAAUyyB,IAAQA,EAAM,GAAKA,EAAM,WAAY,CACzDshB,GAAU,EACV,KACF,CACA/4D,EAAOxF,KAAK,IAAIsxD,GAAcrU,EAAK3sB,UAEnC9qB,EAAOxF,KAAK,IAAIsxD,GAAcrU,EAAKgD,QAEhC,CACL,IAAKA,EAAQt3B,iBAAiBs0B,EAAIvJ,KAAK+E,WAAY,CACjD8lB,GAAU,EACV,KACF,CACA/4D,EAAOxF,KAAKi9C,EAAIvJ,KAClB,CACF,CACA,GAAI6qB,EACF,MAAO,CAACnhB,EAAU53C,EAEtB,CACA,OAAO,IACT,CAEAkiD,aAAAA,CAAc5S,EAAkBr1C,EAA2B00C,GACzD,GAAIt1C,KAAK6mD,oBAAsB7mD,KAAK00C,iBAClC,MAAM,IAAI6E,GAA+BtD,GAE3C,MAAMzB,EAAM,IAAI0P,GAAY,GAAI5O,EAAKlmB,YAGrC,OAFAolB,EAAIK,KAAO,IAAI4d,GAAoBxc,EAAUr1C,EAAM00C,EAAMoB,KAA2B2H,YAAYn+C,MAChGF,KAAK6mD,kBAAkBhS,KAAKmG,WAAW75C,KAAKqzC,EAAIK,MACzCL,CACT,CAEA0Y,oBAAAA,CAAqBjX,EAAkBr1C,EAA2BmgD,GAChE,GAAI/gD,KAAK6mD,oBAAsB7mD,KAAK00C,iBAClC,MAAM,IAAI6E,GAA+BtD,GAE3C,MAAMzB,EAAM,IAAI0P,GAAY,GAAInD,GAShC,OARAvM,EAAIK,KAAO,IAAI4d,GACbxc,EACAr1C,EACA,KACA81C,KAA2B2H,YAAYn+C,KACvC6gD,GAEF/gD,KAAK6mD,kBAAkBhS,KAAKmG,WAAW75C,KAAKqzC,EAAIK,MACzCL,CACT,EAOK,MAAMorB,WAAgBvb,GAE3Bwb,YAEAC,cAEAC,MAEAC,aAGA,WAAAjgE,CAAYkgE,EAAwBC,GAClCt8D,QACA5D,KAAK8/D,cAAgBI,GAAU,KAC/BlgE,KAAK6/D,YAAc,CAAC,EACpB7/D,KAAK+/D,MAAQE,EACbjgE,KAAKggE,aAAe,IACtB,CAEA,YAAIG,GACF,OAAOzpB,IACT,CAEA,aAAI0pB,GACF,OAAO1pB,KAA2BmgB,YACpC,CAEA,WAAIwJ,GACF,OAAO3pB,KAA2BogB,UACpC,CAEA,YAAIgG,GACF,OAAOpmB,KAA2BqgB,WACpC,CAEA,WAAIY,GACF,OAAO33D,KAAK8/D,aACd,CAEA,QAAIjrB,GACF,OAAO70C,KAAK+/D,KACd,CAEA,QAAIlrB,CAAKsB,GACPn2C,KAAK+/D,MAAQ5pB,CACf,CAUAmqB,gBAAAA,CAAiBn0B,GACf,OAAOnsC,KAAKqgE,QAAQC,iBAAiBn0B,EACvC,CAEA,MAAIo0B,GACF,OAAOvgE,KAAKwgE,iBACd,CAEA,MAAIC,GACF,OAAOzgE,KAAK0gE,kBACd,CAEAC,MAAAA,CAAO/F,EAAuBvgB,GAC5B,MAAMumB,EAAelqB,KAA2B+R,kBAAkBpO,GAClEugB,EAAS5d,QAAUh9C,gBAAgBs7D,GACnCt7D,KAAK6gE,UAAUjG,EAAUgG,EAC3B,CAEAE,MAAAA,CAAOtsB,GACLx0C,KAAK60C,KAAKmG,WAAW75C,KAAK,IAAIsxD,GAAaje,EAAIK,MACjD,CAMAksB,MAAAA,CAAO/9D,GACL,OAAOhD,KAAKmgE,SAASjJ,gBAAgBjjB,IAAIjxC,EAC3C,CAEAg+D,iBAAAA,CAAkBpG,EAAuBvgB,GACvC,MAAM4mB,EAAMrG,EAASngB,KACrB,GAAIz6C,KAAK6/D,YAAYoB,GACnB,MAAM,IAAIrhE,MAAM,+BAA+BqhE,MAEjD,KAAMrG,EAAS/lB,gBAAgB4d,IAC7B,MAAM,IAAI7yD,MACR,kCAAkCg7D,EAAS/lB,KAAKlyC,SAC9C+zC,KAA2B2H,YAAYn+C,UAI7C,MAAMymD,EAAUiU,EAASzd,UACzB,GAAIwJ,EAAQr9B,gBAAiB,CAC3B,IAAK+wB,EACH,MAAM,IAAIz6C,MAAM,iEAAiEg7D,EAASngB,SAE5F,KAAMJ,aAAgB6J,IACpB,MAAM,IAAItkD,MAAM,yDAAyDg7D,EAASngB,QAEpF,MAAMymB,EAAW7mB,EAAKxF,KAAK+E,UAC3B,IAAKsnB,EAAS53C,kBAAoBq9B,EAAQ74B,YAAYhE,iBAAiBo3C,EAASpzC,aAC9E,MAAM,IAAIluB,MAAM,0CAA0Cg7D,EAASngB,SAErEmgB,EAASzd,UAAY+jB,CACvB,CAEA,GADAlhE,KAAKmhE,cAAcvG,EAAUqG,GACzB5mB,QACF,OAAO,IAAIoY,GAAkBmI,EAAS/lB,MAEtC,GACEwF,aAAgB6J,IAChB7J,EAAKxF,gBAAgB4d,IACK,IAA1BpY,EAAKxF,KAAKj0C,KAAKW,OACf,CACA,IAAK84C,EAAKxF,KAAK+E,UAAU9vB,iBAAiB8wC,EAAS/lB,KAAK+E,WACtD,MAAM,IAAIL,GAAuBc,EAAMA,EAAKxF,KAAK+E,UAAWghB,EAAS/lB,KAAK+E,WAE5E,OAAO,IAAI6Y,GAAkBmI,EAAS/lB,MAEtC,OAAO,IAAI4d,GACT,IAAIA,GAAqBmI,EAAS/lB,MAClCwF,aAAgB6J,GAAc7J,EAAKxF,KAAOwF,EAIlD,CAEA+mB,kBAAAA,CAAmBxG,GACjB,MAAM53D,EAAO43D,EAASngB,KAChBikB,EAA2B,CAC/Bjd,MAAOmZ,EAASnV,OAChB/D,QAAS,EACT8b,KAAM,GAEJ5C,EAASzd,UAAU3zB,gBACrBk1C,EAAYxtB,QAAU,CACpB+pB,gBAAiB,KACjBzmB,IAAKomB,GAEEA,EAASzd,UAAU5zB,gBAC5Bm1C,EAAY7O,QAAU+K,EAEtB8D,EAAYvB,MAAQ,CAClBn6D,KAAMA,EACN4iD,YAAagV,EAASzV,aACtB3Q,IAAKomB,GAIT,IAAIyG,GAAQ,EACZ,IAAK,MAAMtG,KAAKrkB,KAA2Bof,UACzC,GAAIiF,EAAEtZ,QAAUid,EAAYjd,MAA5B,CAGA,GACEid,EAAYvB,OACZpC,EAAEoC,OACFpC,EAAEoC,MAAMn6D,OAAS07D,EAAYvB,MAAMn6D,MACnC+3D,EAAEoC,MAAM3oB,IAAI2I,UAAUrzB,iBAAiB40C,EAAYvB,MAAM3oB,IAAI2I,WAC7D,CACA4d,EAAEyC,MAAQ9mB,KAA2BS,WACrCyjB,EAAWG,EAAEoC,MAAM3oB,IAEnB6sB,GAAQ,EACR,KACF,CACA,GACE3C,EAAYxtB,SACZ6pB,EAAE7pB,SACFwtB,EAAYxtB,QAAQsD,IAAIiG,OAASsgB,EAAE7pB,QAAQsD,IAAIiG,MAC/CikB,EAAYxtB,QAAQsD,IAAI2I,UAAUrzB,iBAAiBixC,EAAE7pB,QAAQsD,IAAI2I,WACjE,CACA4d,EAAEyC,MAAQ9mB,KAA2BS,WACrCyjB,EAAWG,EAAE7pB,QAAQsD,IAErB6sB,GAAQ,EACR,KACF,CACA,GACE3C,EAAY7O,SACZkL,EAAElL,SACF6O,EAAY7O,QAAQpV,OAASsgB,EAAElL,QAAQpV,MACvCikB,EAAY7O,QAAQ1S,UAAUrzB,iBAAiBixC,EAAElL,QAAQ1S,WACzD,CACA4d,EAAEyC,MAAQ9mB,KAA2BS,WACrCyjB,EAAWG,EAAElL,QAEbwR,GAAQ,EACR,KACF,CApCA,CA0CF,GAJKA,IACH3C,EAAYlB,KAAO9mB,KAA2BS,WAC9CT,KAA2Bof,UAAU30D,KAAKu9D,IAG1CA,EAAYxtB,UACXwtB,EAAaxtB,QAAQsD,IAAI2I,UAAgCruB,oBACV,WAAhD4nB,KAA2B2H,YAAYn+C,KACvC,CAEA,MAAMohE,EAAU1G,EAASzd,UAAU3zB,iBAAmBoxC,EAASzd,UAAUpuB,iBACnEmsC,EAAczI,GAAmBmI,EAASngB,MAAM,GAChD8mB,EAAa7qB,KAChBmZ,QAAQqL,GACRpf,QAAQ4iB,EAAYjd,OACpBgF,WAAWmU,EAAShW,aAGvB,GAFA2c,EAAW3c,YAAcgW,EAAShW,YAClC5kD,KAAK2gE,OAAOY,GACRD,EAAS,CACX,MAAME,EAAkB/O,GAAmBmI,EAASngB,MAAM,GACpDgnB,EAAiB/qB,KACpBue,kBAAkBuM,GAClB1lB,QAAQ4iB,EAAYjd,OACpBgF,WAAWmU,EAAShW,aACvB5kD,KAAK2gE,OAAOc,EACd,CACF,CACA,OAAO7G,CACT,CAEAiG,SAAAA,CAAUjG,EAAuBvgB,GAC/B,GAAIr6C,KAAK6/D,YAAYjF,EAASngB,MAC5B,MAAM,IAAIlB,GAAkBqhB,EAAS/lB,KAAM,8BAE7C,GACE+lB,EAAS/d,eAAiB4V,GAAgB/M,sBAC1CkV,EAAS/d,eAAiB4V,GAAgBzM,qBAC1C,CACA,MAAMhjD,EAAQ43D,EAAS/lB,KAA0B7xC,KACjD,KAAUhD,gBAAYs7D,IACpB,MAAM,IAAI17D,MAAM,0EAA0EoD,KAE5F,KACE43D,EAAS/d,eAAiB4V,GAAgB/M,sBACzCkV,EAASzd,UAAU3zB,iBACnBoxC,EAASzd,UAAU5zB,iBAClBqxC,EAASzd,UAAUzzB,mBAAsBkxC,EAASzd,UAAU1zB,kBAE9D,MAAM,IAAI8vB,GACRqhB,EAAS/lB,KACT,SAAS+lB,EAASzd,UAAU5yB,WAC1BmsB,KAA2B2H,YAAYn+C,sDAI7C,GAAI06D,EAAS/d,eAAiB4V,GAAgBzM,qBAAsB,CAClE,GAAoD,WAAhDtP,KAA2B2H,YAAYn+C,KACzC,MAAM,IAAIq5C,GAA0B,0BAC/B,IAAKqhB,EAASzd,UAAU1zB,iBAC7B,MAAM,IAAI8vB,GACRqhB,EAAS/lB,KACT,SAAS+lB,EAASzd,UAAU5yB,WAC1BmsB,KAA2B2H,YAAYn+C,qDAI/C,CAYA06D,EAAW56D,KAAKohE,mBAAmBxG,GACnC,MAAMzkB,EAAMn2C,KAAKghE,kBAAkBpG,GAInCzkB,EAAIsL,MAAQmZ,EAASnV,OACrBtP,EAAIuL,QAAU,EACdvL,EAAIwL,UAAYjL,KAA2BojB,aAAa92D,GACxD,MAAM9C,EAAO06D,EAASzd,WAEpBj9C,EAAMmpB,gBAAkBuxC,EAAS1V,WACjChlD,EAAKspB,iBACLtpB,EAAKqpB,iBACJrpB,EAAKmpB,iBAA0C,WAAvBnpB,EAAK6oB,OAAOgD,QAA8C,WAAvB7rB,EAAK6oB,OAAOgD,UAEvE/rB,KAAK60C,KAA4B0G,SAASp6C,KAAKg1C,GAElDykB,EAAS5V,MAAMwB,QAAS1jD,IACtB4zC,KAA2B8jB,aAAa,IAAMI,EAAU93D,SAErD,CACL,MAAMqzC,EAAMn2C,KAAKghE,kBAAkBpG,EAAUvgB,GAC7Cr6C,KAAK60C,KAAKmG,WAAW75C,KAAKg1C,EAC5B,CACF,CAEAgrB,aAAAA,CAAcvG,EAAuB53D,GACnC,MAAMi+D,EAAMj+D,GAAQ43D,EAASngB,KACvB15C,EAAe,CACnB2gE,cAAc,EACd3uB,IAAK,WACH,OAAO6nB,CACT,EACA9rD,IAAK,SAAyBhM,GAC5B4zC,KACGmQ,kBACAhS,KAAKmG,WAAW75C,KACf,IAAIsxD,GACF,IAAIA,GAAoBmI,EAAS/lB,MACjC/xC,aAAeohD,GAAcphD,EAAI+xC,KAAO/xC,GAGhD,GAEFsxC,OAAOymB,eAAe76D,KAAMihE,EAAKlgE,GACjCf,KAAK6/D,YAAYoB,GAAOrG,CAC1B,CAEA+G,SAAAA,CAAU3d,GACR,GAAoB,iBAATA,IAAkC,QAAP,IAAcA,KAAQhkD,MAC1D,OAAOA,KAAKgkD,EAGhB,CAEA4d,SAAAA,CAAU5d,EAAcpP,GACtB,OAAgB,MAAZoP,EAAK,IAAcA,KAAQhkD,QAC7BA,KAAKgkD,GAAQpP,GACN,EAGX,CAEU2P,IAAAA,CAAKP,GACb,MAAM+L,EAAM/vD,KAAK2hE,UAAU3d,GAC3B,YAAeviD,IAARsuD,GAAqB/vD,KAAK8/D,cAAgB9/D,KAAK8/D,cAAcrb,WAAWF,KAAKP,GAAQ+L,CAC9F,CAEA,IAAAvL,CAAeR,EAAcpP,GAC3B,GAAgB,MAAZoP,EAAK,GAEP,OADAhkD,KAAKgkD,GAAQpP,GACN,EACF,CACL,IAAI4I,EAAiBx9C,KACrB,KAAOw9C,KAAWwG,KAAQxG,IACxBA,EAAQA,EAAMsiB,cAEhB,GAAItiB,EAEF,OADAA,EAAMwG,GAAQpP,GACP,EAEP,GAAI50C,KAAKugE,GAEP,OADAvgE,KAAKugE,GAAGvc,GAAQpP,GACT,CAGb,CACA,OAAO,CACT,CAEA,eAAA4rB,GAIE,OAHKxgE,KAAKggE,eACRhgE,KAAKggE,aAAe,IAAI6B,GAAa7hE,OAEhCA,KAAKggE,YACd,CAEA,gBAAAU,GACE,OAAO1gE,KAAKmgE,SAASzrB,gBACvB,EAOK,MAAMmtB,WAAqBjC,GAEhCkC,QAEA,WAAA/hE,CAAYy9C,GACV55C,MAAM,KAAM,MACZ5D,KAAK8hE,QAAUtkB,CACjB,CAEU+G,IAAAA,CAAKP,GACb,MAAmB,MAAZA,EAAK,GAAahkD,KAAKgkD,GAAQhkD,KAAK8hE,QAAQH,UAAU3d,EAC/D,CAEA,IAAAQ,CAAeR,EAAcpP,GAC3B,GAAgB,MAAZoP,EAAK,GAEP,OADAhkD,KAAKgkD,GAAQpP,GACN,EAET,KACQ50C,KAAC8hE,mBAAmBxG,KAC1B1mB,aAAiBsP,KAChBtP,EAAMwS,iBACJxS,EAAMuI,UAAU3zB,iBAAmBorB,EAAMC,gBAAgB4d,KAAqB7d,EAAMC,KAAK7xC,QAC3F4xC,EAAMiI,eAAiB4V,GAAgB/M,sBACtC9Q,EAAMiI,eAAiB4V,GAAgBzM,sBAIzC,OADAhmD,KAAKygE,GAAGzc,GAAQpP,GACT,EAGT,QAAYnzC,IADAzB,KAAK8hE,QAAQH,UAAU3d,GACZ,CACrB,MAAM9jD,EAAOw2C,KAA2B0kB,kBAAkBxmB,GAC1D,GAAI10C,EAAK4pB,iBAAiByO,IACxB,MAAM,IAAI34B,MAAM,+BAA+BokD,MAEjD,MAAMxP,EAAM,IAAI0P,GAAYF,EAAM9jD,GAalC,OAZI00C,aAAiBsP,KAAgBlkD,KAAK8hE,QAAQnK,UAChDnjB,EAAIqI,aAAejI,EAAMiI,aACzBrI,EAAI0Q,UAAYtQ,EAAMsQ,UACtB1Q,EAAI2Q,aAAevQ,EAAMuQ,aACzB3Q,EAAIyN,UAAYrN,EAAMqN,UACtBzN,EAAIiR,OAAS7Q,EAAM6Q,OACnBjR,EAAIuQ,QAAUnQ,EAAMmQ,QACpBvQ,EAAIoQ,YAAchQ,EAAMgQ,YACxBpQ,EAAIqQ,WAAajQ,EAAMiQ,WACvBrQ,EAAIP,OAAOW,EAAMoQ,QAEnBhlD,KAAK8hE,QAAQnB,OAAOnsB,EAAKI,IAClB,EAEP,OAAO50C,KAAK8hE,QAAQF,UAAU5d,EAAMpP,EAExC,CAEA4rB,eAAAA,GACE,OAAOxgE,IACT,EA4BK,MAAMu7D,WAAuBqE,GAElC5C,eAEA+E,cACA,WAAAhiE,GACE6D,MAAM,MACN5D,KAAKg9D,eAAiB,IAAI5sB,IAE1B,KADiE,WAAhDsG,KAA2B2H,YAAYn+C,MACzC,CACbF,KAAK+hE,cAAgB,CAAC,EACtB,MAAM99D,EAAIwuD,GAAqB/b,KAA2B2H,YAAYn+C,MACtE,IAAK,MAAMosC,KAAKroC,EAAG,CACjB,MAAMuqC,EAAOvqC,EAAEqoC,GACftsC,KAAK+hE,cAAcz1B,GAAK,IAAI4X,GAAY1V,EAAKxrC,KAAMwrC,EAAKtuC,KAC1D,CACF,CACA,MAAM+D,EAAIwuD,GAAqB/b,KAA2B2H,YAAYn+C,MAChE8hE,EAAOhiE,KACb,IAAK,MAAMssC,KAAK8H,OAAOC,KAAKpwC,GAC1BmwC,OAAOymB,eAAe76D,KAAMssC,EAAG,CAC7ByG,IAAK,WACH,OAAOivB,EAAKC,eAAe31B,EAC7B,EACAx9B,IAAK,SAAU7K,GACb,GAAiB,iBAANA,KAAoBA,aAAaigD,IAC1C,MAAM,IAAItkD,MAAM,mCAElB,MAAM40C,EAAMwtB,EAAKC,eAAe31B,GAChCoK,KACGmQ,kBACAhS,KAAKmG,WAAW75C,KACf,IAAIsxD,GAAkB,IAAIA,GAAoBje,EAAIK,MAAO5wC,aAAaigD,GAAcjgD,EAAE4wC,KAAO5wC,GAEnG,GAGN,CAEA,eAAAu8D,GACE,OAAO,IACT,CAEQyB,cAAAA,CAAej/D,GACrB,MAAMyzC,EAAKC,KACX12C,KAAKg9D,eAAep4D,IAAI5B,GAExB,GADyC,WAAxByzC,EAAG4H,YAAYn+C,KAClB,CACZ,MACMsuC,EADIikB,GAAqBhc,EAAG4H,YAAYn+C,MAC/B8C,GACTojD,EAAQ5X,EAAK4J,QACnB,GAAc,OAAVgO,EACF,OAAO3P,EAAG+gB,0BAA0B/E,GAAwBhc,EAAGU,aAAa3I,EAAKxrC,MAEnF,MAAMypB,EACM,OAAV25B,EACIqM,GAAsChc,EAAGU,YACzCsb,GAAuChc,EAAGU,YAC1CqG,EAAQ/G,EAAGoQ,kBACjB,IAAKrJ,EAAM/wB,KAAgB+wB,EAAM/wB,GAAY+hB,EAAKxrC,MAChD,MAAM,IAAIpD,MAAM,mCAAmCoD,KAErD,OAAOw6C,EAAM/wB,GAAY+hB,EAAKxrC,MAE9B,MAA4B,WAAxByzC,EAAG4H,YAAYn+C,MAA+B,gBAAT8C,GAAmC,kBAATA,EAG1DhD,KAAK+hE,cAAc/+D,GAFnByzC,EAAGkc,KAAK3yD,KAAK+hE,cAAc/+D,GAKxC,EAOK,MAAMw4D,WAAqBoE,GAEhCsC,QACQC,UAER,WAAApiE,GACE6D,MAAM,MACN5D,KAAKkiE,QAAU,CAAC,EAChBliE,KAAKmiE,UAAY,CAAC,CACpB,CAEA7B,gBAAAA,CAAiBv0B,GACf,MAAM/oC,EAAOhD,KAAKkiE,QAAQn2B,GAC1B,OAAO/oC,EAAOhD,KAAKgD,GAAQ,IAC7B,CAEA,eAAAw9D,GACE,OAAO,IACT,CAEUjc,IAAAA,CAAKP,GACb,GAAgB,MAAZA,EAAK,GACP,OAAOhkD,KAAKgkD,GAEVhkD,KAAKmiE,UAAUne,KACjBA,EAAOhkD,KAAKmiE,UAAUne,IAExB,MAAMvN,EAAKz2C,KAAKmgE,SAChB,GAA4B,WAAxB1pB,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAMs1C,EAAQiB,EAAG+gB,0BAA0B/E,GAAwBhc,EAAGU,aAChEuF,EAA2B,WAAlBjG,EAAGma,WAA0B2E,GAAeC,GACrDxyD,EAAO,GAAG05C,IAASsH,IACzB,GAAIxO,EAAO2H,UAA+Bj7B,cAAcm+B,UAAWv9C,GAAQA,EAAIE,OAASA,GAAQ,EAC9F,OAEF,OAAOwyC,EAAM,GAAGkH,IAASsH,IAC3B,CACA,OAAOpgD,MAAM2gD,KAAKP,EACpB,CAEA,IAAAQ,CAAeR,EAAcpP,GAC3B,GAAgB,MAAZoP,EAAK,GACPhkD,KAAKgkD,GAAQpP,MACR,CACL,KAAMA,aAAiBsP,IACrB,MAAM,IAAItkD,MAAM,8BAElB,MAAMgsB,EAAK8qB,KAA2BS,WACtC,GAAIvrB,IAAOvK,EAAW+1B,OACpB,MAAM,IAAIx3C,MAAM,kEAAkEokD,MAEpF,MAAMjY,EAASF,GAAsB+I,EAAMmQ,SAC3C,QAAetjD,IAAXsqC,EACF,MAAM,IAAInsC,MAAM,qEAAqEokD,MAEvF,GAAItN,KAA2B2f,kBAAkBriB,QAAQjI,IAAW,EAAG,CACrE,MAAMq2B,EAAWpiE,KAAKkiE,QAAQttB,EAAMmQ,SACpC,GAAIf,IAASoe,EAAU,CAErB,GADUpiE,KAAKoiE,GACTjlB,UAAUl0B,SAAW2rB,EAAMuI,UAAUl0B,OACzC,MAAM,IAAIrpB,MACR,2FAA2FokD,MAG/FhkD,KAAKmiE,UAAUne,GAAQoe,CACzB,CACA,OAAO,CACT,CACA,KAAMxtB,aAAiBsP,IAAkBtP,EAAMC,gBAAgB4d,IAC7D,MAAM,IAAI7yD,MAAM,+CAA+CokD,MAEjE,MAAM9jD,EAAO00C,EAAMC,KAAK+E,UACxB,IAAK15C,EAAKuhB,mBAAqBvhB,EAAKoiB,gBAAkBpiB,EAAK8pB,gBAAkB9G,EAAgBmB,KAC3F,MAAM,IAAIzkB,MAAM,iDAAiDokD,KAEnEhkD,KAAKkiE,QAAQttB,EAAMmQ,SAAWf,EAC9B,MAAM2W,EAAWjkB,KAA2Byf,QAAQ50D,OAC9CizC,EAAM,IAAI0P,GAAY,GAAGqR,KAAevR,IAAQ9jD,GAAM+zC,OAAOW,EAAMoQ,OACzEtO,KAA2BgkB,GAAGC,EAAU3W,EAAMxP,GAC9CkC,KAA2B2f,kBAAkBl1D,KAAK4qC,GAGE,WAAhD2K,KAA2B2H,YAAYn+C,MACrCw2C,KAA2BwjB,eAAezH,GAA8B7mC,GAAKA,IAC/E8qB,KAA2BqjB,oBAAoBnuC,EAAI,KAGzD,CACA,OAAO,CACT,EAOK,MAAM6vC,WAAsBmE,GACjC,WAAA7/D,GACE6D,MAAM,KACR,CAEA,eAAA48D,GACE,OAAO,IACT,CAEA,IAAAhc,CAAeR,EAAcpP,GAC3B,GAAgB,MAAZoP,EAAK,GACPhkD,KAAKgkD,GAAQpP,MACR,CACL,MAAM6B,EAAKC,KACX,KAAMsN,KAAQhkD,MAAO,CACnB,KACEy2C,EAAGoQ,oBAAsBpQ,EAAG/B,kBACzBE,aAAiBsP,IAAkBtP,EAAMC,gBAAgB4d,IAE5D,MAAM,IAAI7yD,MAAM,+CAA+CokD,KAEjE,MAAM9jD,EAAO00C,EAAMC,KAAK+E,UACxB,IAAK15C,EAAKuhB,mBAAqBvhB,EAAKoiB,gBAAkBpiB,EAAK8pB,gBAAkB9G,EAAgBmB,KAC3F,MAAM,IAAIzkB,MAAM,iDAAiDokD,KAEnE,MAAM2W,EAAWlkB,EAAG2f,SAAS70D,OAU7B,GATAk1C,EAAG4P,IACDsU,EACA3W,EACA,IAAIE,GACF,GAAqB,WAAlBzN,EAAGma,WAA0B4E,GAtrGnB,eAsrGyDxR,IACtE9jD,GACA+zC,OAAOW,EAAMoQ,QAGmC,WAAhDtO,KAA2B2H,YAAYn+C,KAAmB,CAC5D,MAAM0rB,EAAK8qB,KAA2BS,WAClCT,KAA2BwjB,eAAezH,GAA8B7mC,GAAKA,IAC/E8qB,KAA2BqjB,oBAAoBnuC,EAAI,MAEvD,CACF,CACA,GAAI8qB,KAA2BmQ,oBAAsBnQ,KAA2BhC,iBAAkB,CAChG,MAAMyB,EAAMvB,EAAMC,KACZsB,aAAesc,MAAgCtc,EAAIv1C,KAAKW,OAAS,KACrEvB,KAAKgkD,GAAQpP,EAEjB,CACF,CACA,OAAO,CACT,EAOK,MAAM0mB,WAAsBsE,GAEjCyC,kBAEA,WAAAtiE,GACE6D,MAAM,IAAI6uD,IACVzyD,KAAKqiE,kBAAoB,IAC3B,CAEA,oBAAIC,GAIF,OAHKtiE,KAAKqiE,oBACRriE,KAAKqiE,kBAAoBriE,KAAKmgE,SAASpG,oBAAoB/5D,KAAKmgE,SAAShpB,WAAY,OAEhFn3C,KAAKqiE,iBACd,CAEA,gBAAIE,GACF,OAAOviE,KAAKsiE,iBAAiB,EAC/B,CAEA3J,SAAAA,CAAU/c,GACR,MAAMnF,EAAKC,KACX,GAA4B,WAAxBD,EAAG4H,YAAYn+C,KAAmB,CACpC,MAAMsiE,EAAcxiE,KAAKsiE,iBAEnBG,EAAYhsB,EAAGU,aAAe91B,EAAWi2B,QACzCorB,EAAeD,EAAY,KAAOhsB,EAAGsjB,oBAAoBtjB,EAAGU,WAAY,OAC1EurB,GACF1iE,KAAK2gE,OAAO+B,EAAa,IAG3B1iE,KAAK2iE,wBACH,OACAH,EAAc,CAACA,EAAY,IAAM,IACjC,EACA,WAMM/rB,EAAGU,aAAe91B,EAAWg2B,UAAYZ,EAAGwgB,oBAC9Cj3D,KAAKogE,UAAUjoB,UAAY1B,EAAGqU,MAAM9qD,KAAKqgE,QAAQtD,cAAe,EAAG,IAErEnhB,GAAMh6C,KAAK5B,MAEPy2C,EAAGU,aAAe91B,EAAW+1B,SAC3BX,EAAGugB,uBACLh3D,KAAKogE,UAAUv1B,SAAS5jC,EAAIwvC,EAAGvxC,IAC7BuxC,EAAG7xC,IAAI5E,KAAKogE,UAAUv1B,SAAS5jC,EAAGjH,KAAKogE,UAAUv1B,SAASpjC,GAC1D,KAGAgvC,EAAGwgB,oBAGLj3D,KAAK88D,SAASC,cAAgBtmB,EAAGrxC,IAAIpF,KAAKogE,UAAUv1B,SAAS5jC,EAAGjH,KAAKogE,UAAUv1B,SAASpjC,GACxFzH,KAAKogE,UAAUv1B,SAAS5jC,EAAI,IAI3Bw7D,GACHziE,KAAK4iE,QAAQF,EAAa,GAE9B,QAGF1iE,KAAK2iE,wBAAwB,OAAQ,IAAI,EAAM,WACzClsB,EAAGU,aAAe91B,EAAWg2B,UAAYZ,EAAGwgB,oBAC9Cj3D,KAAKogE,UAAUjoB,UAAY1B,EAAGqU,MAAM9qD,KAAKqgE,QAAQtD,cAAe,EAAG,IAErEnhB,GAAMh6C,KAAK5B,MACPy2C,EAAGU,aAAe91B,EAAW+1B,QAAUX,EAAGwgB,oBAC5Cj3D,KAAK88D,SAASC,cAAgBtmB,EAAGrxC,IAC/BqxC,EAAG7xC,IAAI6xC,EAAGrxC,IAAIpF,KAAKogE,UAAUv1B,SAAS5jC,EAAGjH,KAAKogE,UAAUv1B,SAASpjC,GAAI,GACrE,GAEFzH,KAAKogE,UAAUv1B,SAAS5jC,EAAI,EAEhC,EAEJ,CAEAwxD,0BAAAA,CAA2Bz1D,EAAco1D,EAAuBxc,GAC9D57C,KAAK2iE,wBAAwB3/D,EAAMo1D,GAAQ,EAAOxc,EACpD,CAEAie,aAAAA,CAAc72D,GACZ,OAAOhD,KAAM60C,KAA4B2G,cAAcx4C,EACzD,CAEA6/D,wBAAAA,GACE,IAAIrlB,EAAQ9G,KAA2BmQ,kBACvC,KAAOrJ,KAAWA,aAAiBka,KACjCla,EAAQA,EAAMma,QAEhB,OAAOna,CACT,CAEA,uBAAAmlB,CAEE3/D,EACAo1D,EACA0K,EACAlnB,GAEA,MAAMnF,EAAKC,KACiB,WAAxBD,EAAG4H,YAAYn+C,MAAsB4iE,GACvC1K,EAAOj3D,KAAKnB,KAAKuiE,aAAa9P,GAAwBhc,EAAGU,cAE3DihB,EAAO5R,QAAShR,IACd,KAAMA,EAAMX,gBAAgB4d,IAC1B,MAAM,IAAI7yD,MAAM,GAAGoD,oCAErB,IAAImzC,EAA6CX,EAAMX,KACnDW,EAAM+M,SAC4C,WAAhD7L,KAA2B2H,YAAYn+C,OACzCs1C,EAAM2H,UAAY,IAAIvvB,GAAkB4nB,EAAM2H,UAAWv0B,GAAey4B,UAE1ElL,EAAM,IAAIsc,GAAmBjd,EAAMX,OAErCW,EAAMX,KAAO,IAAI4d,GAAyBtc,KAE5C,MAAMmI,EAAYt+C,KAAK65D,cAAc72D,GAC/B+/D,EAAuB/iE,KAAK6iE,2BAC5BG,EAAU,IAAIvQ,GAClBzvD,EACAo1D,EAAOv1D,IAAKC,GAAQA,EAAI+xC,MACxBiuB,EACA,MACA,GAEF,GAAIC,EAAsB,CACxB,MAAME,EAAWjjE,KAAK60C,KAAKmG,WAAWhH,QAAQ+uB,EAAqBluB,MACnE,GAAIouB,EAAW,EACb,MAAM,IAAIrjE,MAAM,kBAElBI,KAAK60C,KAAKmG,WAAWx5C,OAAOyhE,EAAU,EAAGD,QAEzChjE,KAAK60C,KAAKmG,WAAW75C,KAAK6hE,GAE5B,IAAItL,GAAgB13D,KAAMo4D,EAAQ4K,EAASpnB,GAEtConB,EAAQ5zC,aACX4zC,EAAQ5zC,WAAamJ,IAEvByqC,EAAQhiB,SAAW,IAAIx2B,GACrBw4C,EAAQhgE,KACRggE,EAAQ5zC,WACRgpC,EAAOv1D,IAAK2yC,IACV,MAAMW,EAAMX,EAAMX,KAClB,OAAOsB,EAAIiE,oBAAoBqY,GAC3B,CACEvyD,KAAMi2C,EAAIiE,SAASxF,MAAMgF,UACzBsH,MAAO/K,EAAIiE,oBAAoBqY,IAEjC,CACEvyD,KAAMi2C,EAAIiE,SAASR,UACnBsH,OAAO,MAIjB,IAAK,MAAM3C,KAAYD,EACrB,GAAIC,EAASyC,SAAS1xB,UAAY0zC,EAAQhiB,SAAS1xB,QAAS,CAC1D,GAAIivB,EAASnvB,WAAWtF,iBAAiBk5C,EAAQ5zC,YAI/C,YADApvB,KAAK60C,KAAKmG,WAAWx5C,OAAOxB,KAAK60C,KAAKmG,WAAWhH,QAAQgvB,GAAU,GAGnE,MAAM,IAAIpjE,MAAM,iCAAiCoD,IAErD,CAEuB,IAArBs7C,EAAU/8C,QACZ6yC,OAAOymB,eAAe76D,KAAMgD,EAAM,CAChC+vC,IAAK,WAEH,GAAoB,IADP/yC,KAAK65D,cAAc72D,GACvBzB,OACP,MAAM,IAAI3B,MAAM,YAAYoD,eAE9B,MAAO,IAAIpC,KACT,IAAIsiE,EAAwB,KAC5B,GAA4B,WAAxBzsB,EAAG4H,YAAYn+C,KAAmB,CACpC,IAAIu3D,EAAYhhB,EAAGoQ,kBACnB,KAAO4Q,KAAeA,aAAqBC,KACzCD,EAAYA,EAAUE,QAExB,MAAMwL,EAAY1L,EAAU5iB,KAAyBj0C,KAGrDsiE,EAAWzL,EAFC0L,EAASA,EAAS5hE,OAAS,GAAG64C,SACHp3C,KAEzC,CACA,MAAMwlD,GAAgB0a,EAAW,IAAItiE,EAAMsiE,GAAYtiE,GAAMiC,IAAKC,GAChE2zC,EAAGgS,kBAAkB3lD,IAEjBk+C,EAAWvK,EAAG+oB,qBAAqBx8D,EAAMwlD,GAC/C,IAAKxH,EACH,MAAM,IAAIphD,MACR,6CAA6CoD,KAAQwlD,EAClD3lD,IAAKC,GACAA,aAAeohD,GACVphD,EAAI+xC,MAAM+E,WAAWrvB,cAAgB,WAE9BznB,GAGjBG,KAAK,UAGZ,OAAOyzC,KAA2BmS,cAAc7lD,EAAMg+C,EAAS,GAAIA,EAAS,IAEhF,GAGN,EAOK,MAAMoiB,WAA8BxD,GAEzC,WAAA7/D,CAAYmgE,GACVt8D,MAAM,IAAI6uD,GAAgByN,EAC5B,CAKA0C,OAAAA,CAAQS,GACN,MACML,EADgBhjE,KAAKsjE,oBACGzuB,KAC9B,IAAIzlB,EAAyB,KAC7B,MAAMm0C,EAAiB7sB,KAA2B+R,kBAAkB4a,GACpE,GAAIE,QACF,GAA8B,iBAAnBA,GAUT,GATIP,EAAQ5zC,YAER4zC,EAAQ5zC,WAAW3N,mBACnBuhD,EAAQ5zC,WAAW1N,iBAClBshD,EAAQ5zC,WAAWtF,iBAAiB+H,MAErCzC,EAAa4zC,EAAQ5zC,aAGpBA,EACH,GAAIjsB,OAAOwoB,UAAU43C,GACnB,GAAIA,EAAiB,EAAG,CACtB,GAAIA,GAAiB,WACnB,MAAM,IAAI3jE,MAAM,YAAYojE,EAAQhgE,+BAA+BugE,KAErEn0C,EAAaqB,OACR,CACL,GAAI8yC,EAAiB,WACnB,MAAM,IAAI3jE,MAAM,YAAYojE,EAAQhgE,+BAA+BugE,KAErEn0C,EAAam0C,GAAkB,WAAa9yC,GAAUgB,EACxD,MAEArC,EAAa1D,QAIjB0D,EADmC,kBAAnBm0C,EACH1xC,GAEA0xC,EAAe1uB,KAAK+E,eAGnCxqB,EAAamJ,GAEf,GAAInJ,EAAW9F,gBACb,MAAM,IAAI1pB,MAAM,wCAElB,GAAKojE,EAAQ5zC,YAEN,IAAK4zC,EAAQ5zC,WAAWtF,iBAAiBsF,GAC9C,MAAM,IAAIxvB,MACR,YAAYojE,EAAQhgE,6BAClBggE,EAAQ5zC,YAAY7E,WAAWmsB,KAA2B2H,YAAYn+C,OAAS,eAJnF8iE,EAAQ5zC,WAAaA,EAQvB,IAAIo0C,EAAiC,KACrC,GAAID,QACF,GAAIA,aAA0Brf,GAC5Bsf,EAAcD,EAAe1uB,SACxB,CACL,IAAKzlB,EAAW3N,oBAAsB2N,EAAW1N,eAC/C,MAAM,IAAI63B,GAAuBgqB,SAAuBA,EAAgBn0C,GAE1Eo0C,EAAc,IAAI/Q,GAAc8Q,EAAgBn0C,EAClD,CAEFpvB,KAAK60C,KAAKmG,WAAW75C,KAAK,IAAIsxD,GAAc+Q,GAC9C,CAMAC,MAAAA,CAAO7nB,GACL,MAAMqkB,EAAW,IAAIxN,GAErB,OADAzyD,KAAK60C,KAAKmG,WAAW75C,KAAK8+D,GACnB,IAAIyD,GAAa1jE,KAAMigE,EAAUrkB,EAC1C,CAOA+nB,GAAAA,CAAIjkE,EAAiCk8C,GACnC,MAAMgoB,EAAQ,IAAInR,GAChB,KACA/yD,aAAqBwkD,GACjBxkD,EAAUm1C,KACV,IAAI4d,GAAc/yD,EAAgC,iBAAdA,EAAyBgsB,GAAUmG,KAG7E,OADA7xB,KAAK60C,KAAKmG,WAAW75C,KAAKyiE,GACnB,IAAIC,GAAU7jE,KAAM4jE,EAAOhoB,EACpC,CAQAkoB,OAAAA,CACEpkE,EACA4/C,EACAC,GAEA,MAAMpJ,EAAM,IAAIsc,GACd/yD,aAAqBwkD,GAAcxkD,EAAUm1C,KAAOn1C,EACpD4/C,aAAiB4E,GAAc5E,EAAMzK,KAAOyK,EAC5CC,aAAkB2E,GAAc3E,EAAO1K,KAAO0K,GAE1C/K,EAAM,IAAI0P,GAAY,GAAI/N,EAAIyD,WAEpC,OADApF,EAAIK,KAAOsB,EACJ3B,CACT,CAEAuvB,MAAAA,GACE/jE,KAAK60C,KAAKmG,WAAW75C,KAAK,IAAIsxD,GAChC,CAEAuR,SAAAA,GACEhkE,KAAK60C,KAAKmG,WAAW75C,KAAK,IAAIsxD,GAChC,CAQAwR,IAAAA,CACEC,EACA7pB,EACA7K,EACAyT,EACAC,EACAtH,GAEA,MAAMuoB,EAAkBD,EAAQrvB,KAAK+E,UACrC,IAAKuqB,EAAgB1iD,oBAAsB0iD,EAAgBziD,eACzD,MAAM,IAAI63B,GAAkB2qB,EAAQrvB,KAAM,sCAE5C,MAAMuvB,EAAU/pB,aAAgB6J,GAAc7J,EAAKxF,KAAO,IAAI4d,GAAcpY,EAAM8pB,GAC9D,mBAATlhB,GACTrH,EAAOqH,EACPA,GAAO,EACPC,GAAU,GACkB,mBAAZA,GAChBtH,EAAOsH,EACPD,IAASA,EACTC,GAAU,IAEVD,IAASA,EACTC,IAAYA,GAEd,MAAMmhB,EAAS,IAAI5R,GACjByR,EAAQrvB,KACRuvB,EACA50B,aAAe0U,GAAc1U,EAAIqF,KAAO,IAAI4d,GAAcjjB,EAAK20B,GAC/DlhB,EACAC,GAEFljD,KAAK60C,KAAKmG,WAAW75C,KAAKkjE,GAC1B,IAAIC,GAAWtkE,KAAMkkE,EAAS10B,EAAK60B,EAAQzoB,EAC7C,CAMA2oB,GAAAA,CAAI3oB,GACF,GAAuC,UAAnC57C,KAAKmgE,SAAS9hB,YAAYn+C,KAC5B,MAAM,IAAIN,MAAM,kDAElB,MAAM4kE,EAAa,IAAI/R,GAAe,MAEtC,OADAzyD,KAAK60C,KAAKmG,WAAW75C,KAAKqjE,GACnB,IAAIC,GAAezkE,KAAMwkE,EAAY5oB,EAC9C,CAMA8oB,MAAAA,CAAOhlE,EAAiCk8C,GACtC,MAAM+oB,EAAW,IAAIlS,GACnB/yD,aAAqBwkD,GACjBxkD,EAAUm1C,KACV,IAAI4d,GAAc/yD,EAAgC,iBAAdA,EAAyBgsB,GAAUmG,KAE7E7xB,KAAK60C,KAAKmG,WAAW75C,KAAKwjE,GAC1B,IAAIC,GAAa5kE,KAAM2kE,EAAU/oB,EACnC,CAEA,iBAAA0nB,GACE,IAAK,IAAI9lB,EAAiBx9C,KAAMw9C,EAAOA,EAAQA,EAAMma,QACnD,GAAIna,aAAiBka,GACnB,OAAOla,EAGX,OAAO,IACT,CAEAqnB,aAAAA,GACE,IAAK,IAAIrnB,EAAiBx9C,KAAMw9C,EAAOA,EAAQA,EAAMma,QACnD,GAAIna,aAAiBka,IAAmBla,EAAMsnB,UAC5C,OAAOtnB,EAGX,OAAO,IACT,EAOK,MAAMka,WAAwB0L,GAEnCjmB,UAEA,WAAAp9C,CACEmgE,EACA9H,EACAjiB,EACAyF,GAEAh4C,MAAMs8D,GACNlgE,KAAK60C,KAAOsB,EACZ,IAAK,MAAMX,KAAS4iB,EAAQ,CAC1B,GAAIp4D,KAAK6/D,YAAYrqB,EAAMiF,MACzB,MAAM,IAAI76C,MAAM,oDAElBI,KAAKmhE,cAAc3rB,EACrB,CACAkB,KAA2B0gB,UAAUp3D,MACrC47C,GAAMh6C,KAAK5B,MACX02C,KAA2B4gB,UAC7B,CACAwN,OAAAA,GACE,OAAO9kE,KAAM60C,KAAyBsN,UACxC,EAOK,MAAMyiB,WAAqBxB,GAEhC,WAAArjE,CAAYmgE,EAA+B/pB,EAAmByF,GAC5Dh4C,MAAMs8D,GACNlgE,KAAK60C,KAAOsB,EACZO,KAA2B0gB,UAAUp3D,MACrC47C,GAAMh6C,KAAK5B,MACX02C,KAA2B4gB,UAC7B,EAOK,MAAMmN,WAAuBrB,GAElC,WAAArjE,CAAYmgE,EAA+B/pB,EAAmByF,GAC5Dh4C,MAAMs8D,GACNlgE,KAAK60C,KAAOsB,EACZO,KAA2B0gB,UAAUp3D,MACrC47C,GAAMh6C,KAAK5B,MACX02C,KAA2B4gB,UAC7B,CACAoN,MAAAA,CAAOhlE,GACJM,KAAK60C,KAAwBn1C,UAC5BA,aAAqBwkD,GACjBxkD,EAAUm1C,KACV,IAAI4d,GAAc/yD,EAAgC,iBAAdA,EAAyBgsB,GAAUmG,GAC/E,EAOK,MAAMyyC,WAAmBlB,GAE9B,WAAArjE,CACEmgE,EACAgE,EACA93B,EACA+J,EACAyF,GAEAh4C,MAAMs8D,GACNlgE,KAAK60C,KAAOsB,EACZn2C,KAAKmhE,cAAc+C,GACnBxtB,KAA2B0gB,UAAUp3D,MACrC47C,GAAMh6C,KAAK5B,MACX02C,KAA2B4gB,UAC7B,EAOK,MAAMoM,WAAqBN,GAEhC,WAAArjE,CAAYmgE,EAA+B/pB,EAAmByF,GAC5Dh4C,MAAMs8D,GACNlgE,KAAK60C,KAAOsB,EACZO,KAA2B0gB,UAAUp3D,MACrC47C,GAAMh6C,KAAK5B,MACX02C,KAA2B4gB,UAC7B,EAOK,MAAMuM,WAAkBT,GAE7B,WAAArjE,CAAYmgE,EAA+B/pB,EAAmByF,GAC5Dh4C,MAAMs8D,GACNlgE,KAAK60C,KAAOsB,EACZO,KAA2B0gB,UAAUp3D,MACrC47C,GAAMh6C,KAAK5B,MACX02C,KAA2B4gB,UAC7B,CAOAyN,OAAAA,CAAQrlE,EAAiCk8C,GACvC,MAAMopB,EAAY,IAAIvS,GACpB,UACA/yD,aAAqBwkD,GACjBxkD,EAAUm1C,KACV,IAAI4d,GAAc/yD,EAAgC,iBAAdA,EAAyBgsB,GAAUmG,KAG7E,OADC7xB,KAAK60C,KAAmBkO,SAAWiiB,EAC7B,IAAInB,GAAU7jE,KAAK8/D,cAAwCkF,EAAWppB,EAC/E,CAKAqpB,KAAAA,CAAMrpB,GACJ,MAAMspB,EAAU,IAAIzS,GAAU,OAAQ,MACrCzyD,KAAK60C,KAAmBkO,SAAWmiB,EACpC,IAAIrB,GAAU7jE,KAAK8/D,cAAwCoF,EAAStpB,EACtE,EDvtHK,IAAyB9yB,ID8pGzB,SAAyBA,GAC9B,IAAK,MAAMwjB,KAAK8H,OAAOC,KAAKkU,IAC1Bz/B,EAAImzC,UAAU3vB,GAAK,YAAmC1rC,GAEpD,OADsB2nD,KAAsBjc,IAAIkd,eAAiBV,IAC5C9oD,KAAMssC,KAAM1rC,EACnC,CAEJ,CEqjBAukE,CAAgB1P,ID1tHgB3sC,GC2tHhB2sC,GD1tHdrhB,OAAOC,KAAKqe,IAAgBlM,QAASla,IACnCxjB,GAAImzC,UAAU3vB,GAAKuX,GACjB,YAAmCjjD,GACjC,OAAO2xD,GAAM3wD,KAAK5B,KAAM0yD,GAAepmB,MAAO1rC,EAEhD8xD,EAAAA,GAAepmB,MAGnB8H,OAAOC,KAAKwf,IAAarN,QAASla,IAChCxjB,GAAImzC,UAAU3vB,GAAK,SAAgC4T,GACjD,OAAO,IAAIgE,GAAYhE,EAAK2T,GAAYvnB,GAC1C,IAEF8H,OAAOC,KAAK6gB,IAAiB1O,QAASla,IACpCxjB,GAAImzC,UAAU3vB,GAjClB,SAAgCpsC,GAC9B,MAAM+jD,EAAO,CAAC,EACd,IAAK,MAAM3X,KAAK8H,OAAOC,KAAKmd,IAC1BvN,EAAK3X,GAAK,SAAU4T,GAClB,OAAO,IAAIgE,GAAYhE,EAAK,IAAIj2B,GAA2B/pB,EAAMsxD,GAAwBllB,IAC3F,EAEF,OAAO2X,CACT,CAyBuBmhB,CAAuBlQ,GAAgB5oB,MAE5DxjB,GAAImzC,UAAU,WAAgBpY,GAC5B,YAAmCjjD,GACjC,GAAIA,EAAKW,OAAS,EAChB,MAAM,IAAIg4C,GAA0B,cAEtC,GAAoB,IAAhB34C,EAAKW,OAAc,CACrB,GAAuB,iBAAZX,EAAK,GACd,MAAM,IAAI24C,GAAwB,aAAc,QAElD,OAAO,IAAI2K,GAAYtjD,EAAK,GAAIqpB,IAC3B,CACL,MAAMuqB,EAAM,IAAI0P,GAAY,GAAIj6B,IAEhC,OADAuqB,EAAIK,KAAO,IAAI4d,GAA4Bje,EAAI2I,UAAW,IACnD3I,CACT,CACF,EACAvqB,IAEFnB,GAAImzC,UAAU,YAAiBpY,GAC7B,YAAmCjjD,GACjC,GAAIA,EAAKW,OAAS,EAChB,MAAM,IAAIg4C,GAA0B,eAEtC,GAAoB,IAAhB34C,EAAKW,QAAmC,iBAAZX,EAAK,GACnC,OAAO,IAAIsjD,GAAYtjD,EAAK,GAAIqpB,IAC3B,GAAoB,IAAhBrpB,EAAKW,OAAc,CAC5B,MAAMizC,EAAM,IAAI0P,GAAY,GAAIj6B,IAEhC,OADAuqB,EAAIK,KAAO,IAAI4d,GAA4Bje,EAAI2I,UAAW,IACnD3I,CACT,CACA,MAAM4J,EAAMx9C,EAAK,GACjB,GACkB,iBAARw9C,GAAoBj7C,OAAOwoB,UAAUyyB,IAC5CA,aAAe8F,IAAe9F,EAAIvJ,KAAK+E,UAAU3wB,SAAWgB,GAAiBhB,OAC9E,CACA,MAAMurB,EAAM,IAAI0P,GAAY,GAAIj6B,IAIhC,OAHAuqB,EAAIK,KAAO,IAAI4d,GAA4Bje,EAAI2I,UAAW,CACxDiB,aAAe8F,GAAc9F,EAAIvJ,KAAOuJ,IAEnC5J,CACT,CACA,OAAO,IACT,EACAvqB,IEtMG,MAAMo7C,GACXt7C,eAA4C,KAC5CA,gBAAoD,KACpD,iBAAWu7C,GAET,OADAtlE,KAAKulE,WACEvlE,KAAKwlE,OACd,CACA,kBAAWplE,GAET,OADAJ,KAAKulE,WACEvlE,KAAKylE,QACd,CACA,eAAWC,GACT,OAAO1lE,KAAKI,QAAQslE,IACtB,CACA,eAAWA,CAAKA,GACd1lE,KAAKI,QAAQslE,KAAOA,CACtB,CACA,eAAeH,GACRvlE,KAAKwlE,UACRxlE,KAAKwlE,QAAUG,SAASC,cAAc,UACtC5lE,KAAKwlE,QAAQ/qD,MAAQ,IACrBza,KAAKwlE,QAAQ9qD,OAAS,IACtB1a,KAAKwlE,QAAQK,MAAMxzD,KAAO,WAC1BrS,KAAKwlE,QAAQK,MAAMh7B,SAAW,WAE9B7qC,KAAKylE,SAAWzlE,KAAKwlE,QAAQM,WAAW,KAAM,CAC5CC,oBAAoB,IAEtB/lE,KAAKylE,SAASO,aAAe,MAC7BhmE,KAAKylE,SAASQ,UAAY,OAC1BjmE,KAAKylE,SAASS,UAAY,cAC1BlmE,KAAKylE,SAASU,SAAS,EAAG,EAAGnmE,KAAKwlE,QAAQ/qD,MAAOza,KAAKwlE,QAAQ9qD,QAC9D1a,KAAKylE,SAASS,UAAY,UAC1BlmE,KAAKylE,SAASW,uBAAwB,EACtCpmE,KAAKylE,SAASY,sBAAwB,OAE1C,EAOK,MAAMC,GAEXv8C,iBAII,CAAG,EAEPw8C,MAEAC,YAEAC,OAEAC,MAEAC,QAEAC,KAEAC,QAEAC,WAEAC,cAEAC,KAMA,WAAAjnE,CAAYiD,EAAcuC,GACxBvF,KAAK4mE,KAAO,EACZ5mE,KAAK6mE,QAAU,EACf7mE,KAAK0mE,MAAQ,EACb1mE,KAAK8mE,WAAa,EAClB9mE,KAAK+mE,cAAgB,EACrB/mE,KAAK2mE,QAAU,GACf3mE,KAAKymE,OAASlhE,EACdvF,KAAKumE,MAAQvjE,EACbhD,KAAKwmE,YAAc,KACnBxmE,KAAKgnE,KAAOrB,SAASC,cAAc,OAC/B5lE,KAAKumE,OACPvmE,KAAKinE,gBAET,CAOA,gBAAOC,CAAUlkE,EAAcuC,GAC7B,IAAI4hE,EAAWnnE,KAAKonE,UAAUpkE,GACzBmkE,IACHA,EAAW,CAAC,EACZnnE,KAAKonE,UAAUpkE,GAAQmkE,GAEzB,IAAIzB,EAAOyB,EAAS5hE,GAKpB,OAJKmgE,IACHA,EAAO,IAAIY,GAAKtjE,EAAMuC,GACtB4hE,EAAS5hE,GAASmgE,GAEbA,CACT,CAEA,YAAI2B,GACF,OAAOrnE,KAAKumE,KACd,CACA,YAAIc,CAASrkE,GACXhD,KAAKumE,MAAQvjE,EACbhD,KAAKinE,gBACP,CAEA,kBAAIK,GACF,OAAOtnE,KAAKwmE,WACd,CAEA,QAAI5jD,GACF,OAAO5iB,KAAK0mE,KACd,CAEA,UAAIa,GACF,OAAOvnE,KAAK2mE,OACd,CAEA,OAAIn0D,GACF,OAAOxS,KAAK4mE,IACd,CAEA,UAAIr0D,GACF,OAAOvS,KAAK6mE,OACd,CAEA,aAAIW,GACF,OAAOxnE,KAAK8mE,UACd,CAEA,gBAAIW,GACF,OAAOznE,KAAK+mE,aACd,CAEA,aAAIW,GACF,OAAO1nE,KAAK6mE,QAAU7mE,KAAK4mE,KAAO,CACpC,CAEA,mBAAIe,GACF,OAAO3nE,KAAK+mE,cAAgB/mE,KAAK8mE,WAAa,CAChD,CAEAc,OAAAA,CAAQzlE,GACN,OAAOnC,KAAK0mE,QAAUvkE,EAAMukE,OAAS1mE,KAAK2mE,UAAYxkE,EAAMwkE,OAC9D,CAEQkB,kBAAAA,CAAmBR,GAMzB,MAAMS,EAAUzC,GAAWjlE,QAAQslE,KAC7BqC,EAAkB1C,GAAWjlE,QAAQ4lE,aACrCgC,EAAe3C,GAAWjlE,QAAQ8lE,UAExCb,GAAWjlE,QAAQslE,KAAO2B,EAC1BrnE,KAAKgnE,KAAKnB,MAAMH,KAAOL,GAAWjlE,QAAQslE,KAC1C,MAAMuC,EAAWjoE,KAAKgnE,KAAKnB,MAAMoC,SAC3BrlD,EAAOslD,SAASD,EAASzuB,UAAU,EAAGyuB,EAAS1mE,OAAS,IACxDgmE,EAASvnE,KAAKgnE,KAAKnB,MAAMsC,WAEzBC,EAAa,mBACbC,EAAShD,GAAWjlE,QAAQkoE,YAAYF,GAC9C,IAAI51D,EAAaD,EACjBC,EAAM,EACND,EAASqQ,EAAO,EAChB,MAEM2lD,EAAW/lE,KAAKioD,KAAK4d,EAAO5tD,OAFpB,GAGRitD,EAAY9kD,EAHJ,GAIdyiD,GAAWjlE,QAAQooE,UAAU,EAAG,EAAGD,EAAUb,GAC7CrC,GAAWjlE,QAAQ4lE,aAAe,MAClCX,GAAWjlE,QAAQ8lE,UAAY,UAC/Bb,GAAWjlE,QAAQqoE,SAASL,EANVM,KAOlB,MACMC,EADStD,GAAWjlE,QAAQwoE,aAAa,EAAG,EAAGL,EAAUb,GACzCmB,KACtB,IAAK,IAAIvnE,EAAI,EAAGA,EAAIinE,EAAWb,EAAWpmE,IACxC,GAAIqnE,EAAW,EAAJrnE,EAAQ,GAAK,EAAG,CACzBkR,EAAMhQ,KAAKksC,MAAMptC,EAAIinE,GACrB,KACF,CAEF,IAAK,IAAIjnE,EAAIinE,EAAWb,EAAY,EAAGpmE,GAAK,EAAGA,IAC7C,GAAIqnE,EAAW,EAAJrnE,EAAQ,GAAK,EAAG,CACzBiR,EAAS/P,KAAKksC,MAAMptC,EAAIinE,GACxB,KACF,CAQF,OANA/1D,GArBkBk2D,EAsBlBn2D,GAtBkBm2D,EAuBlBrD,GAAWjlE,QAAQslE,KAAOoC,EAC1BzC,GAAWjlE,QAAQ4lE,aAAe+B,EAClC1C,GAAWjlE,QAAQ8lE,UAAY8B,EAExB,CAAEplD,OAAM2kD,SAAQ/0D,MAAKD,SAC9B,CAEA,cAAA00D,GACE,MAAMz4B,EAAOxuC,KAAK6nE,mBAAmB7nE,KAAKumE,OAC1CvmE,KAAKwmE,YAAc,GAAGhkE,KAAKooD,MAAMpc,EAAK5rB,KAAO5iB,KAAKymE,aAAaj4B,EAAK+4B,SACpE,MAAMuB,EAAa9oE,KAAK6nE,mBAAmB7nE,KAAKwmE,aAChDxmE,KAAK0mE,MAAQl4B,EAAK5rB,KAClB5iB,KAAK2mE,QAAUn4B,EAAK+4B,OACpBvnE,KAAK4mE,KAAOp4B,EAAKh8B,IACjBxS,KAAK6mE,QAAUr4B,EAAKj8B,OACpBvS,KAAK8mE,WAAagC,EAAWt2D,IAC7BxS,KAAK+mE,cAAgB+B,EAAWv2D,MAClC,ECvMK,MAAMw2D,GAEXh/C,mBAAwC,KAExCA,oBAAyC,KAEzCi/C,QAEAl5B,QAEAm5B,UAEAC,WAEAC,iBAEAC,aAEAC,WAEAC,cAEAC,qBASA,WAAAxpE,CACEiuB,EACAw7C,EACAC,EACAC,EACAC,GAEA3pE,KAAK8vC,QAAU9hB,EACfhuB,KAAKipE,UAAYO,EACjBxpE,KAAKkpE,WAAaO,EAClBzpE,KAAKmpE,iBAAmBO,EACxB1pE,KAAKopE,eAAiBO,EACtB3pE,KAAKgpE,QAAU,IAAI5uD,EAAYpa,KAAKipE,UAAWjpE,KAAKkpE,YACpDlpE,KAAKqpE,WAAa,GAClBrpE,KAAKspE,cAAgB,CAAC,EACtBtpE,KAAKupE,qBAAuB,IAC9B,CAKA,8BAAIK,GACF,OAAO5pE,KAAKupE,oBACd,CACA,8BAAIK,CAA2BtkE,GAC7BtF,KAAKupE,qBAAuBjkE,CAC9B,CAMAukE,eAAAA,CAAgBjsB,GACd,OAAO59C,KAAKqpE,WAAWzrB,EACzB,CAMAksB,YAAAA,CAAa7I,GACX,OAAOjhE,KAAKspE,cAAcrI,IAAQ,IACpC,CAKA8I,OAAAA,GACE,OAAkC,IAA3B/pE,KAAKqpE,WAAW9nE,MACzB,CAIAsZ,KAAAA,GACE7a,KAAKgpE,QAAQnuD,QACb,IAAK,MAAM61B,KAAO1wC,KAAKqpE,WACrB34B,EAAIp0B,UAENtc,KAAKqpE,WAAa,GAClBrpE,KAAKspE,cAAgB,CAAC,CACxB,CAWAU,UAAAA,CACE/I,EACAnmB,EACA92C,EACAE,EACAuD,EACA2L,GAEA,MAAM62D,EAAKjqE,KAAKgpE,QAAQluD,OAAOrT,EAAI,EAAIzH,KAAKmpE,iBAAkB/1D,EAAI,EAAIpT,KAAKmpE,kBAC3E,GAAIc,EAAI,CACN,MAAMC,EAASD,EAAGjmE,EAAIhE,KAAKmpE,iBACrBgB,EAASF,EAAG/lE,EAAIlE,KAAKmpE,iBAC3BnpE,KAAKoqE,0BAA0BH,EAAGjvD,SAAU8/B,EAAKovB,EAAQC,EAAQ1iE,EAAG2L,EAAGpP,EAAGE,GAC1E,MAAMsqC,EAAkB,CACtB67B,WAAYJ,EAAGjvD,SACfsvD,KAAMJ,EAASlqE,KAAKipE,UACpBsB,KAAMJ,EAASnqE,KAAKkpE,WACpBsB,MAAON,EAAAA,GAAclqE,KAAKipE,UAC1BwB,MAAON,EAAAA,GAAcnqE,KAAKkpE,WAC1BzuD,MAAOhT,EACPiT,OAAQtH,GAGV,OADApT,KAAKspE,cAAcrI,GAAOzyB,EACnBA,CACT,CACA,OAAO,IACT,CAOAk8B,UAAAA,CAAWzJ,EAAa0J,GACtB,MAAMV,EAAKjqE,KAAKgpE,QAAQluD,OACtB6vD,EAAOlwD,MAAQ,EAAIza,KAAKmpE,iBACxBwB,EAAOjwD,OAAS,EAAI1a,KAAKmpE,kBAE3B,GAAIc,EAAI,CACN,MAAMC,EAASD,EAAGjmE,EAAIhE,KAAKmpE,iBACrBgB,EAASF,EAAG/lE,EAAIlE,KAAKmpE,iBAC3BnpE,KAAK4qE,oBAAoBX,EAAGjvD,SAAU2vD,EAAQT,EAAQC,GACtD,MAAM37B,EAAkB,CACtB67B,WAAYJ,EAAGjvD,SACfsvD,KAAMJ,EAASlqE,KAAKipE,UACpBsB,KAAMJ,EAASnqE,KAAKkpE,WACpBsB,MAAON,EAASS,EAAOlwD,OAASza,KAAKipE,UACrCwB,MAAON,EAASQ,EAAOjwD,QAAU1a,KAAKkpE,WACtCzuD,MAAOkwD,EAAOlwD,MACdC,OAAQiwD,EAAOjwD,QAGjB,OADA1a,KAAKspE,cAAcrI,GAAOzyB,EACnBA,CACT,CACA,OAAO,IACT,CAEA,mBAAAq8B,GACE,MAAMn6B,EAAM1wC,KAAK8vC,QAAQuB,gBAAgB,aAAcrxC,KAAKipE,UAAWjpE,KAAKkpE,WAAY,CACtFl4B,YAAY,IAOd,OALAN,EAAIo6B,OAAO,IAAIC,WAAWr6B,EAAIj2B,MAAQi2B,EAAIh2B,OAAS,GAAI,EAAG,EAAGg2B,EAAIj2B,MAAOi2B,EAAIh2B,QAC5Eg2B,EAAIs6B,eAAiB,KACnBt6B,EAAIo6B,OAAO,IAAIC,WAAWr6B,EAAIj2B,MAAQi2B,EAAIh2B,OAAS,GAAI,EAAG,EAAGg2B,EAAIj2B,MAAOi2B,EAAIh2B,QAC5E1a,KAAKupE,uBAAuB74B,IAEvBA,CACT,CAEA,yBAAA05B,CACEC,EACAvvB,EACA92C,EACAE,EACAuD,EACA2L,EACA63D,EACAC,GAEA,IAAIC,EAA0B,KAC1Bd,IAAerqE,KAAKqpE,WAAW9nE,QACjC4pE,EAAenrE,KAAK6qE,sBACpB7qE,KAAKqpE,WAAWloE,KAAKgqE,IAErBA,EAAenrE,KAAKqpE,WAAWgB,GAEjCc,EAAaC,kBAAkBtwB,EAAIwqB,OAAQthE,EAAGE,EAAG+mE,EAASC,EAASzjE,EAAG2L,EACxE,CAEA,mBAAAw3D,CACEP,EACAM,EACA3mE,EACAE,GAEA,IAAIinE,EAA0B,KAO9B,GANId,IAAerqE,KAAKqpE,WAAW9nE,QACjC4pE,EAAenrE,KAAK6qE,sBACpB7qE,KAAKqpE,WAAWloE,KAAKgqE,IAErBA,EAAenrE,KAAKqpE,WAAWgB,GAE7BM,aAAkBU,YACpBF,EAAaC,kBAAkBT,EAAQ3mE,EAAGE,EAAG,EAAG,EAAGymE,EAAOlwD,MAAOkwD,EAAOjwD,YACnE,CACL,MAAM4wD,EAAe,IAAIP,WAAWJ,EAAO9B,KAAK/6B,QAChDq9B,EAAaL,OAAOQ,EAActnE,EAAGE,EAAGymE,EAAOlwD,MAAOkwD,EAAOjwD,OAC/D,CACF,EC9NK,MAAM6wD,WAAqBxC,GAQhC,WAAAhpE,CAAYiuB,EAAwBw7C,EAAkBC,EAAmB+B,GACvE5nE,MAAMoqB,EAAQw7C,EAAUC,EAAW+B,GAAQ,GAC3CxrE,KAAK4pE,2BAA6B6B,UAC3BzrE,KAAK+pE,WACR/pE,KAAK6a,QAGX,CAOA6wD,YAAAA,CAAaC,EAAcjG,GACzB,IAAKiG,IAASjG,EACZ,OAAO,KAET,IAAIkG,EAAY5rE,KAAK8pE,aAAa9pE,KAAK6rE,MAAMF,EAAMjG,IAMnD,OALKkG,IACHA,EAAY5rE,KAAK8rE,YAAYH,EAAMjG,GACnCkG,EAAUnxD,MAAQjY,KAAKooD,MAAMghB,EAAUnxD,OAASirD,EAAKgC,UAAYhC,EAAKiC,kBACtEiE,EAAUlxD,OAASgrD,EAAKgC,WAEnBkE,CACT,CAQAG,kBAAAA,CAAmB3pB,EAAa4pB,EAAoBtG,GAClD,IAAIj+D,EAAI,EACR,IAAK,MAAMwkE,KAAM7pB,EACf36C,GAAKukE,EAAahsE,KAAKksE,aAAaD,EAAIvG,GAE1C,OAAOj+D,CACT,CAUA0kE,iBAAAA,CAAkB/pB,EAAa3nC,EAAeuxD,EAAoB3+C,EAAeq4C,GAC/E,IAAI0G,EAAM,EACN9qE,EAAI+rB,EACR,KAAO/rB,EAAI8gD,EAAI7gD,SACb6qE,GAAOJ,EAAahsE,KAAKksE,aAAa9pB,EAAI9gD,GAAIokE,KAC1C0G,EAAM3xD,IAFWnZ,KAMvB,OAAOA,EAAI+rB,CACb,CAOA6+C,YAAAA,CAAaP,EAAcjG,GACzB,IAAKA,EACH,OAAO,EAETL,GAAWK,KAAOA,EAAK4B,eACvB,MAAMe,EAAShD,GAAWjlE,QAAQkoE,YAAYqD,GAC9C,IAAIlkE,EAAI4gE,EAAO5tD,MACf,OAAU,IAANhT,EACK,GAEoC,iBAAlC4gE,EAAOgE,yBAChB5kE,EAAIjF,KAAKksC,MAAMlsC,KAAKC,IAAIgF,EAAG4gE,EAAOgE,wBAA0B,KAE9D5kE,EAAIjF,KAAKooD,MAAMnjD,GAAKi+D,EAAKgC,UAAYhC,EAAKiC,kBACnClgE,EACT,CAEA,eAAA6kE,CACEX,EACAjG,GAEA,IAAKA,EACH,OAAO,KAETL,GAAWK,KAAOA,EAAK4B,eACvB,MAAMe,EAAShD,GAAWjlE,QAAQkoE,YAAYqD,GAC9C,IAAIlkE,EAAI4gE,EAAO5tD,MACf,GAAU,IAANhT,EACF,OAAO,KAEoC,iBAAlC4gE,EAAOgE,yBAChB5kE,EAAIjF,KAAKksC,MAAMlsC,KAAKC,IAAIgF,EAAG4gE,EAAOgE,wBAA0B,KAE9D,MAAMj5D,EAAIsyD,EAAKiC,gBAIf,OAHAtC,GAAWjlE,QAAQ8lE,UAAY,OAC/Bb,GAAWjlE,QAAQooE,UAAU,EAAG,EAAG/gE,EAAI,EAAG2L,GAC1CiyD,GAAWjlE,QAAQqoE,SAASkD,EAAM,GAAIjG,EAAK8B,WACpCnC,GAAWjlE,QAAQwoE,aAAa,EAAG,EAAGnhE,EAAG2L,EAClD,CAEA,KAAAy4D,CAAcF,EAAcjG,GAC1B,MAAO,GAAGA,EAAK6B,UAAU7B,EAAK9iD,QAAQ+oD,GACxC,CAEA,WAAAG,CAAoBH,EAAcjG,GAChC,MAAMiF,EAAS3qE,KAAKssE,gBAAgBX,EAAMjG,GAC1C,OAAO1lE,KAAK0qE,WAAW1qE,KAAK6rE,MAAMF,EAAMjG,GAAOiF,EACjD,ECtHK,MAAM4B,GAEXxiD,mBARsB,KAUtBA,oBAA4C,KAE5CA,iBAA0B,EAE1BA,wBAAoD,KAEpDA,wBAAgD,KAEhDA,mBAAyC,KAEzCA,qBAA0C,KAE1CA,wBAAkD,KAElDA,kBAA4B,EAE5BA,kBAAqC,IAAI/hB,EAEzC+hB,YAA4B,KAE5BA,mBAAwD,KAExDA,kBAA8C,IAAIxiB,EAElD,0BAAeilE,CAAoBx+C,EAAwBjkB,GACzD,MAAM0iE,EAAWz+C,EAAO0+C,cAClBn5D,EAAmBvL,EAAUoK,MAAM,EAAGq6D,EAAShyD,MAAO,EAAGgyD,EAAS/xD,OAAQ,EAAG,KAC7EiyD,EAAa3kE,EAAUkN,YAAY,IAAInO,EAAQ,EAAG0lE,EAAS/xD,OAAQ,IAAInD,WAC3E,IAAIxQ,EAAQ,GAAG,EAAI,IAErBiB,EAAUM,SAASiL,EAAkBo5D,EAAY5iE,EACnD,CAMA,cAAO6iE,CAAQ5+C,EAAwBhrB,GACrChD,KAAK0lE,KAAOY,GAAKY,UAAUlkE,EAAMgrB,EAAO6+C,aAAevG,GAAKY,UAAU,aAAcl5C,EAAO6+C,WAC7F,CASA,eAAOC,CAAS9+C,EAAwBooB,EAAc22B,EAAe/oE,EAAWE,GAC9E,GAAIkyC,EAAK70C,OAAS,EAAG,CACnBysB,EAAOg/C,mBACPhtE,KAAKitE,gBAAgBj/C,GACrBhuB,KAAKwsE,oBAAoBx+C,EAAQhuB,KAAKktE,YACtC,MAAMC,EvBiYL,SAAoBnxB,GACzBA,EAAQA,EAAM3C,OAAO+zB,cAErB,IAAInpE,EAAe,KACnB,GAAiB,OAFjB+3C,EAAQrlD,EAAWqlD,IAAUA,GAEnB,GAAY,CACpB,MAAMqxB,GAAUrxB,EAAMz6C,OAAS,GAAK,EAC9B+rE,EAAO,CAAC,GAAI,EAAG,SAAUD,EAAS,GACxCppE,EAAI,CACFiJ,EAAIg7D,SAASlsB,EAAMxC,UAAU,EAAG,EAAI6zB,GAAS,IAAMC,EAAQ,IAC3DpwD,EAAIgrD,SAASlsB,EAAMxC,UAAU,EAAI6zB,EAAQ,EAAI,EAAIA,GAAS,IAAMC,EAAQ,IACxEhrE,EAAG4lE,SAAUlsB,EAAMxC,UAAU,EAAI,EAAI6zB,EAAQ,EAAI,EAAIA,GAAS,IAAMC,EAAQ,IAC5EjrE,EAAG,OAEA,CACL,IAAI4H,GACCA,EAAI+xC,EAAM1C,MAAM,4EACnBr1C,EAAI,CACFiJ,EAAG/J,OAAO8G,EAAE,IAAM,IAClBiT,EAAG/Z,OAAO8G,EAAE,IAAM,IAClB3H,EAAGa,OAAO8G,EAAE,IAAM,IAClB5H,EAAG,IAGJ4H,EAAI+xC,EAAM1C,MACT,oGAGFr1C,EAAI,CACFiJ,EAAG/J,OAAO8G,EAAE,IAAM,IAClBiT,EAAG/Z,OAAO8G,EAAE,IAAM,IAClB3H,EAAGa,OAAO8G,EAAE,IAAM,IAClB5H,EAAGc,OAAO8G,EAAE,KAGlB,CACA,IAAKhG,GAAKd,OAAOD,MAAMe,EAAEiJ,IAAM/J,OAAOD,MAAMe,EAAEiZ,IAAM/Z,OAAOD,MAAMe,EAAE3B,IAAMa,OAAOD,MAAMe,EAAE5B,GACtF,MAAM,IAAIzC,MAAM,gCAAgCo8C,MAOlD,OAJA/3C,EAAEiJ,EAAI1K,KAAK4nD,IAAI5nD,KAAKqD,IAAI,EAAG5B,EAAEiJ,GAAI,KACjCjJ,EAAEiZ,EAAI1a,KAAK4nD,IAAI5nD,KAAKqD,IAAI,EAAG5B,EAAEiZ,GAAI,KACjCjZ,EAAE3B,EAAIE,KAAK4nD,IAAI5nD,KAAKqD,IAAI,EAAG5B,EAAE3B,GAAI,KACjC2B,EAAE5B,EAAIG,KAAKqD,IAAI,EAAG5B,EAAE5B,GACb4B,CACT,CuB7ayBspE,CAAWR,GAC9B/sE,KAAKmtE,WAAWnpE,EAAImpE,EAAWjgE,EAC/BlN,KAAKmtE,WAAWjpE,EAAIipE,EAAWjwD,EAC/Bld,KAAKmtE,WAAWlmE,EAAIkmE,EAAW7qE,EAC/BtC,KAAKmtE,WAAW1lE,EAAI0lE,EAAW9qE,EAC/BrC,KAAKwtE,cAAcC,SAAS,OAAwB,WAAhBz/C,EAAO9tB,MAAqB8tB,EAAO0/C,iBAAmB,EAAI,GAC9F1tE,KAAKwtE,cAAcC,SAAS,UAAWz/C,EAAO0/C,iBAAmB,EAAI,GACrE1tE,KAAKwtE,cAAcC,SAAS,aAAcztE,KAAKktE,YAC/CltE,KAAKwtE,cAAcC,SAAS,YAAaztE,KAAKmtE,YAC9Cn/C,EAAO2/C,WAAW3tE,KAAK4tE,aACvB5/C,EAAO6/C,gBAAgB7tE,KAAK8tE,kBAC5B9/C,EAAO+/C,gBAAgB/tE,KAAKguE,kBAC5BhgD,EAAOigD,aAAa,EAAGjuE,KAAKwtE,eAC5B,IAAIU,EAAQ,EACZ,MAAMC,EAAQ/3B,EAAK70C,OACnB,KAAO2sE,EAAQC,GAAO,CACpB,MAAM/hC,EAAQ5pC,KAAKqD,IAAIsoE,EAAQD,EAAOluE,KAAKouE,YAAcpuE,KAAKquE,YAC1DjiC,EAAQ,IACVpoC,EAAIhE,KAAKsuE,mBAAmBtgD,EAAQooB,EAAM83B,EAAO9hC,EAAOpoC,EAAGE,GAC3DgqE,GAAS9hC,EACTpsC,KAAKquE,YAAcjiC,GAEjBpsC,KAAKouE,cAAgBpuE,KAAKquE,aAC5BruE,KAAKquE,WAAa,EAClBrgD,EAAOugD,QAEX,CACAvgD,EAAOwgD,iBACT,CACF,CAEA,yBAAeF,CACbtgD,EACAooB,EACA/oB,EACA+e,EACApoC,EACAE,GAEA,IAAIgqE,EAAQ,EACR7D,GAAc,EACd/oE,EAAI,EACR,KAAOA,EAAI8qC,EAAO9qC,IAAK,CACrB,MAAMmtE,EACJzuE,KAAK0uE,aAAahD,aAAat1B,EAAK90C,EAAI+rB,GAAQrtB,KAAK0lE,OACrD1lE,KAAK0uE,aAAahD,aAAa,IAAK1rE,KAAK0lE,MACvC2E,GAAc,GAAKoE,EAAMpE,aAAeA,IAC1CrqE,KAAK2uE,iBAAiBC,cACQ,IAA3B5uE,KAAKquE,WAAaH,GAAc,EACjCluE,KAAK6uE,YACuB,IAA3B7uE,KAAKquE,WAAaH,GACL,IAAb5sE,EAAI4sE,IAEPluE,KAAKwtE,cAAcsB,WAAW,MAAO9uE,KAAK0uE,aAAa7E,gBAAgBQ,IACvEr8C,EAAO+gD,KAAK,gBAA6C,GAA3B/uE,KAAKquE,WAAaH,GAA0B,GAAb5sE,EAAI4sE,IACjEA,EAAQ5sE,GAEV+oE,EAAaoE,EAAMpE,WACnB,MAAM2E,EAA+B,IAAvBhvE,KAAKquE,WAAU/sE,GAC7BtB,KAAK6uE,YAAYG,EAAO,GAAKhrE,EAC7BhE,KAAK6uE,YAAYG,EAAO,GAAK9qE,EAC7BlE,KAAK6uE,YAAYG,EAAO,GAAKP,EAAMnE,KACnCtqE,KAAK6uE,YAAYG,EAAO,GAAKP,EAAMlE,KACnCvqE,KAAK6uE,YAAYG,EAAO,GAAKhrE,EAAIyqE,EAAMh0D,MACvCza,KAAK6uE,YAAYG,EAAO,GAAK9qE,EAC7BlE,KAAK6uE,YAAYG,EAAO,GAAKP,EAAMjE,KACnCxqE,KAAK6uE,YAAYG,EAAO,GAAKP,EAAMlE,KACnCvqE,KAAK6uE,YAAYG,EAAO,GAAKhrE,EAAIyqE,EAAMh0D,MACvCza,KAAK6uE,YAAYG,EAAO,GAAK9qE,EAAIuqE,EAAM/zD,OACvC1a,KAAK6uE,YAAYG,EAAO,IAAMP,EAAMjE,KACpCxqE,KAAK6uE,YAAYG,EAAO,IAAMP,EAAMhE,KACpCzqE,KAAK6uE,YAAYG,EAAO,IAAMhrE,EAC9BhE,KAAK6uE,YAAYG,EAAO,IAAM9qE,EAAIuqE,EAAM/zD,OACxC1a,KAAK6uE,YAAYG,EAAO,IAAMP,EAAMnE,KACpCtqE,KAAK6uE,YAAYG,EAAO,IAAMP,EAAMhE,KACpCzmE,GAAKyqE,EAAMh0D,KACb,CASA,OARAza,KAAK2uE,iBAAiBC,cACQ,IAA3B5uE,KAAKquE,WAAaH,GAAc,EACjCluE,KAAK6uE,YACuB,IAA3B7uE,KAAKquE,WAAaH,GACL,IAAb5sE,EAAI4sE,IAEPluE,KAAKwtE,cAAcsB,WAAW,MAAO9uE,KAAK0uE,aAAa7E,gBAAgBQ,IACvEr8C,EAAO+gD,KAAK,gBAA6C,GAA3B/uE,KAAKquE,WAAaH,GAA0B,GAAb5sE,EAAI4sE,IAC1DlqE,CACT,CAEA,sBAAeipE,CAAgBj/C,GAC7B,IAAKhuB,KAAKivE,SAAU,CAClBjvE,KAAKivE,UAAW,EAChBjvE,KAAK0lE,KAAO1lE,KAAK0lE,MAAQY,GAAKY,UAAU,aAAcl5C,EAAO6+C,YAC7D7sE,KAAK0uE,aAAe,IAAInD,GAAav9C,EAAQ,KAAM,KAAM,GACzDhuB,KAAK6uE,YAAc,IAAI9sE,aAAgC,GAAnB/B,KAAKouE,aACzCpuE,KAAK2uE,iBAAmB3gD,EAAOkhD,8BAC7B,CAAC,iBAAkB,cACnBlvE,KAAK6uE,YACL,CACEM,SAAS,IAGb,MAAMC,EAAU,IAAIC,YAA+B,EAAnBrvE,KAAKouE,aACrC,IAAK,IAAI9sE,EAAI,EAAGA,EAAItB,KAAKouE,YAAa9sE,IAAK,CACzC,MAAM0tE,EAAW,EAAJ1tE,EACb8tE,EAAY,EAAJ9tE,EAAQ,GAAK0tE,EAAO,EAC5BI,EAAY,EAAJ9tE,EAAQ,GAAK0tE,EAAO,EAC5BI,EAAY,EAAJ9tE,EAAQ,GAAK0tE,EAAO,EAC5BI,EAAY,EAAJ9tE,EAAQ,GAAK0tE,EAAO,EAC5BI,EAAY,EAAJ9tE,EAAQ,GAAK0tE,EAAO,EAC5BI,EAAY,EAAJ9tE,EAAQ,GAAK0tE,EAAO,CAC9B,CACA,MAAMM,EAAkBthD,EAAOuhD,kBAAkBH,GACjDpvE,KAAK8tE,iBAAmB9/C,EAAOwhD,mBAAmB,CAChDhiC,cAAe,CAAC,CAAEM,OAAQ9tC,KAAK2uE,mBAC/BlhC,YAAa6hC,IAEftvE,KAAKquE,WAAa,EAClBruE,KAAK4tE,YAAc5/C,EAAOiqC,mBAAmB,CAC3CiE,MAAAA,CAAOzlB,GACLz2C,KAAKqgE,QAAQrqD,IAAMygC,EAAGwZ,OAAOlkB,OAAO,YACpC/rC,KAAKqgE,QAAQoP,GAAKh5B,EAAGwZ,OAAOlkB,OAAO,aACnC/rC,KAAK88D,SAAS2S,GAAKh5B,EAAGwZ,OACtBjwD,KAAK0vE,KAAOj5B,EAAGoa,IAAI,GAAG/U,QAAQ,GAC9B97C,KAAKktE,WAAaz2B,EAAGmd,OAAO9X,QAAQ,GACpCrF,EAAGiiB,KAAK,WACN14D,KAAKogE,UAAUv1B,SAAW4L,EAAGvxC,IAAIlF,KAAKktE,WAAYz2B,EAAGuZ,KAAKhwD,KAAKqgE,QAAQrqD,KAAU,GAAA,IACjFhW,KAAK2jE,IAAIltB,EAAG0V,SAASnsD,KAAK0vE,KAAM,GAAI,WAClC1vE,KAAKogE,UAAUv1B,SAAS3mC,EAAIuyC,EAAG6V,IAAItsD,KAAKogE,UAAUv1B,SAAS3mC,EAC7D,GACAlE,KAAK88D,SAAS2S,GAAKzvE,KAAKqgE,QAAQoP,EAClC,EACF,EACAlT,QAAAA,CAAS9lB,GACPz2C,KAAK88D,SAASiQ,MAAQt2B,EAAGuZ,OACzBhwD,KAAK2vE,UAAYl5B,EAAGuZ,OAAOlU,QAAQ,GACnC97C,KAAK0wC,IAAM+F,EAAGsd,QAAQjY,QAAQ,GAC9B97C,KAAK4vE,QAAUn5B,EAAGoa,MAAM/U,QAAQ,GAChCrF,EAAGiiB,KAAK,WACN14D,KAAK6vE,MAAQp5B,EAAGvxC,IAAIuxC,EAAGmZ,cAAc5vD,KAAK0wC,IAAK1wC,KAAKqgE,QAAQoP,IAAIptE,EAAGrC,KAAK2vE,UAAUttE,GAClFrC,KAAK2jE,IAAIltB,EAAG0V,SAASnsD,KAAK4vE,QAAS,GAAI,WACrC5vE,KAAK88D,SAASiQ,MAAQt2B,EAAGuZ,KACvBvZ,EAAGvxC,IAAIuxC,EAAG2T,IAAIpqD,KAAK2vE,UAAUG,IAAKr5B,EAAG4Z,KAAK,EAAI,MAAOrwD,KAAK6vE,OAC1D7vE,KAAK6vE,MAET,GAAG5K,MAAM,WACPjlE,KAAK88D,SAASiQ,MAAQt2B,EAAGuZ,KAAKvZ,EAAGvxC,IAAIlF,KAAK2vE,UAAUG,IAAK9vE,KAAK6vE,OAAQ7vE,KAAK6vE,MAC7E,EACF,EACF,IAEF7vE,KAAK4tE,YAAY5qE,KAAO,YACxBhD,KAAKwtE,cAAgBx/C,EAAO+hD,gBAAgB/vE,KAAK4tE,YAAYrV,iBAAiB,IAC9Ev4D,KAAKguE,iBAAmBhgD,EAAOgiD,uBAC/BhwE,KAAKguE,iBACFiC,mBACAC,QAAO,GACPC,gBAAgB,MAAO,iBACvBC,kBAAkB,OAAQ,OAC7BpwE,KAAKguE,iBAAiBqC,gBAAgBC,YAAW,GAAOC,aAAY,GACpEvwE,KAAKguE,iBAAiBwC,qBAAqBC,YAAY,OACzD,CACF,EC9IK,MAAeC,WAAmB7wE,EAC7B2lE,QACAmL,mBACAC,oBACAC,eACAC,YACAC,mBACAC,gBACAC,cACAC,WACAniC,UACAoiC,UACAC,aACAC,YACAC,aACAC,SACAC,mBACAC,gBACAC,SACAC,gBACAC,qBACAC,OACOC,YACjB,WAAA/xE,CAAYgyE,EAAwBC,GAClCpuE,QACA5D,KAAKuxE,SAAWS,EAChBhyE,KAAK6wE,eAAiB,CACpBoB,SAAU,GACVC,SAAU,GACVC,QAAS,GACTC,SAAU,GACVC,aAAc,GACdC,mBAAoB,GACpBC,WAAY,IAEdvyE,KAAKwlE,QAAUuM,EACf/xE,KAAKwlE,QAAQgN,aAAa,WAAY,KACtCxyE,KAAK2wE,mBAAqBoB,EAAIU,YAC9BzyE,KAAK4wE,oBAAsBmB,EAAIW,aAC/B1yE,KAAK8wE,YAAc,EACnB9wE,KAAK+wE,mBAAqB,GAC1B/wE,KAAKgxE,gBAAkB,EACvBhxE,KAAKixE,cAAgB,EACrBjxE,KAAKsxE,aAAe,KACpBtxE,KAAKkxE,WAAa,CAChByB,aAAc,EACdC,eAAgB,EAChBC,eAAgB,EAChBC,eAAgB,EAChBC,aAAc,EACdC,eAAgB,EAChBC,IAAK,EACLC,UAAW,EACXC,aAAc,EACdC,cAAe,GACfC,kBAAmB,IAErBrzE,KAAKyxE,gBAAkB,IAAIhc,GAAez1D,MAC1CA,KAAK+uC,UAAY,IAAID,GACrB9uC,KAAKmxE,UAAY,KACjBnxE,KAAKoxE,aAAe,KACpBpxE,KAAKqxE,YAAc,CAAEiC,KAAM,EAAGC,MAAO,GACrCvzE,KAAK8xE,YAAc,GACnB9xE,KAAKwxE,mBAAqB,EAC1BxxE,KAAK0xE,SAAW,IAAI9tB,IACpB5jD,KAAK2xE,gBAAkB6B,OAAO,eAC9BxzE,KAAK0xE,SAAS5iE,IAAI9O,KAAK2xE,gBAAiB,IAAIhiC,GAAK3vC,KAAMA,KAAK2xE,kBAC5D3xE,KAAK4xE,sBAAuB,EAC5B5xE,KAAK4xE,sBAAuB,EAC5B5xE,KAAK6xE,QAAS,EACd7xE,KAAKyzE,wBACP,CA8IA,WAAIzB,GACF,OAAOhyE,KAAKuxE,QACd,CACA,oBAAImC,GACF,OAAO1zE,KAAK8wE,WACd,CACA,aAAI6C,GACF,OAAO3zE,KAAKkxE,UACd,CACA,eAAI0C,GACF,OAA6B,OAAtB5zE,KAAKoxE,YACd,CACA,UAAI9L,GACF,OAAOtlE,KAAKwlE,OACd,CACA,QAAItlE,GACF,OAAOF,KAAKuxE,SAASsC,UACvB,CACA,SAAIC,GACF,OAAO9zE,KAAK6xE,MACd,CACA,SAAIiC,CAAMhxE,GACR9C,KAAK6xE,SAAW/uE,CAClB,CACA,QAAIixE,GACF,OAAO/zE,KAAK0xE,SAAS3+B,IAAI/yC,KAAK2xE,gBAChC,CACA,mBAAIqC,GACF,OAAOh0E,KAAKsxE,YACd,CACA,kBAAI2C,GACF,OAAOj0E,KAAKyxE,eACd,CACAyC,UAAAA,CAAWjT,GACT,OAAOjhE,KAAK0xE,SAASyC,IAAIlT,EAC3B,CACAmT,OAAAA,CAAQnT,GACN,IAAI8S,EAAO/zE,KAAK0xE,SAAS3+B,IAAIkuB,GAK7B,OAJK8S,IACHA,EAAO,IAAIpkC,GAAK3vC,KAAMihE,GACtBjhE,KAAK0xE,SAAS5iE,IAAImyD,EAAK8S,IAElBA,CACT,CACAnH,OAAAA,CAAQvF,GACNkF,GAASK,QAAQ5sE,KAAMqnE,EACzB,CACAyF,QAAAA,CAAS12B,EAAcpyC,EAAWE,EAAW6oE,GAC3CR,GAASO,SAAS9sE,KAAMo2C,EAAM22B,EAAO/oE,EAAGE,EAC1C,CAGAmwE,cAAAA,CAAeC,EAAwCn3D,EAAqB60B,GAC1E,IAAIuiC,EAAqB,KACrBC,GAAW,EACV3wE,MAAMC,QAAQwwE,IAGjBC,EAAQv0E,KAAK+zE,KAAKliC,0BAAyB,EAAO,EAAG,EAAGyiC,EAAWn3D,GAAO,EAAM60B,GAChFwiC,GAAW,GAHXD,EAAQD,GAAa,KAKvB,MAAMG,EAAYz0E,KAAK0tE,iBACnB+G,IAAcF,IACZv0E,KAAK4xE,sBACP5xE,KAAK+zE,KAAKljC,mBAAmB4jC,GAE/Bz0E,KAAK4xE,qBAAuB4C,EAC5Bx0E,KAAK00E,gBAAgBH,GAEzB,CACAI,aAAAA,CAAcC,EAAgBC,GAAS,GACjCD,IACEC,GACF70E,KAAK80E,gBAAgBF,GAEnB50E,KAAK+0E,gBACPH,EAAII,UAEJh1E,KAAK+wE,mBAAmB5vE,KAAKyzE,GAGnC,CACAK,aAAAA,CAAcL,GACRA,GAAOA,EAAIv4D,WAAarc,KAAK+0E,kBAC/BH,EAAIM,UACJN,EAAI5J,iBAAiB4J,GAEzB,CACAO,sBAAAA,CAAuBjF,GACjBA,IAAWlwE,KAAKmxE,UAClBnxE,KAAKmxE,UAAYnxE,KAAKo1E,iBACZlF,IACVlwE,KAAKmxE,WAAW3hC,MAChBxvC,KAAKmxE,UAAY,KAErB,CACAkE,UAAAA,GACE,GAAgC,IAA5Br1E,KAAKwxE,mBAA0B,CACjC,IAAK,MAAMoD,KAAO50E,KAAK+wE,mBACrB6D,EAAII,UAENh1E,KAAK+wE,mBAAqB,EAC5B,CAKA,OAJA/wE,KAAKwxE,qBACLxxE,KAAKgxE,gBAAkBhxE,KAAK+uC,UAAUO,MACtCtvC,KAAKs1E,kBACLt1E,KAAK0xE,SAASlrB,QAASutB,GAASA,EAAKtjC,eAC9BzwC,KAAKu1E,cACd,CACAC,QAAAA,GACMx1E,KAAKwxE,mBAAqB,IAC5BxxE,KAAKwxE,qBAC2B,IAA5BxxE,KAAKwxE,qBACPxxE,KAAKixE,cAAgBjxE,KAAK+uC,UAAUO,MACpCtvC,KAAKkxE,WAAWyB,eAChB3yE,KAAKy1E,cAGX,CACAvpC,qBAAAA,CACEC,EACAsW,EACAizB,GAEA,OAAOxpC,GAAsBC,EAAUsW,EAAUizB,EACnD,CACAxG,6BAAAA,CACEyG,EACA9M,EACA9nE,GAEA,GAAIA,GAAWA,EAAQotC,OAA2B,WAAlBptC,EAAQotC,MAEtC,OADA5tC,QAAQC,MAAM,qFACP,KAET,IAAIoiB,EAAO,EACX,IAAK,MAAM7B,KAAU40D,EACnB/yD,GAAQopB,GAAoBjrB,GAE9B,MAAMyrB,EAAmBM,GAAsB+7B,EAAKl6B,WAAa/rB,EAAS,KAAM+yD,GAC1EC,EAAMxhC,OAAOyhC,OACjB,CACE1nC,MAAO,SACPghC,SAAS,EACT2G,SAAS,EACT/vB,SAAS,GAEXhlD,GAAW,CAAA,GASb,OAPI60E,EAAI7vB,UACN6vB,EAAIzG,SAAU,EACdyG,EAAIE,SAAU,GAEZF,EAAIzG,UACNyG,EAAIE,SAAU,GAET91E,KAAK+1E,uBAAuBvpC,EAAkBopC,EAAK/M,EAC5D,CACAmN,kBAAAA,CACEC,EACApN,EACA9nE,GAEA,GAAIA,GAAWA,EAAQotC,OAA2B,WAAlBptC,EAAQotC,MAEtC,OADA5tC,QAAQC,MAAM,0EACP,KAET,MAAM4rC,EAAQJ,GAAoBiqC,GAC5BzpC,EAAmBM,GAAsB+7B,EAAKl6B,WAAavC,EAAU,EAAG6pC,GACxEL,EAAMxhC,OAAOyhC,OACjB,CACE1nC,MAAO,SACPghC,SAAS,EACT2G,SAAS,EACT/vB,SAAS,GAEXhlD,GAAW,CAAA,GASb,OAPI60E,EAAI7vB,UACN6vB,EAAIzG,SAAU,EACdyG,EAAIE,SAAU,GAEZF,EAAIzG,UACNyG,EAAIE,SAAU,GAET91E,KAAK+1E,uBAAuBvpC,EAAkBopC,EAAK/M,EAC5D,CACAkG,IAAAA,CAAK/kD,EAA8Bs1B,EAAelT,GAChDpsC,KAAKkxE,WAAWgC,YAChBlzE,KAAKk2E,MAAMlsD,EAAes1B,EAAOlT,EACnC,CACA+pC,aAAAA,CAAcnsD,EAA8Bs1B,EAAelT,EAAegqC,GACxEp2E,KAAKkxE,WAAWgC,YAChBlzE,KAAKq2E,eAAersD,EAAes1B,EAAOlT,EAAOgqC,EACnD,CACAE,mBAAAA,CAAoBC,GAClBv2E,KAAKkxE,WAAWgC,WAAalzE,KAAKw2E,qBAAqBD,EACzD,CACA5a,OAAAA,CAAQ8a,EAAiBC,EAAiBC,GACxC32E,KAAKkxE,WAAWiC,eAChBnzE,KAAK42E,SAASH,EAAiBC,EAAiBC,EAClD,CACAE,YAAAA,CAAavxE,GACPA,GACFtF,KAAKkxE,WAAWkC,cAAcjyE,KAAKmE,EAEvC,CACA,uBAAMwxE,CAAkBxxE,GACtB,OAAO,IAAIyxE,QAASC,IACd1xE,EACFtF,KAAKkxE,WAAWkC,cAAcjyE,KAAK,KACjC,MAAMkhD,EAAI/8C,IACN+8C,aAAa00B,QACf10B,EAAE40B,KAAK,IAAMD,KAEbA,MAIJA,KAGN,CACAE,QAAAA,GAC4B,OAAtBl3E,KAAKoxE,eACmB,IAAtBpxE,KAAKoxE,aACP+F,qBAAqBn3E,KAAKoxE,cAE1BpxE,KAAKo3E,gBAAgBp3E,KAAKoxE,cAE5BpxE,KAAKoxE,aAAe,KAExB,CACAiG,OAAAA,CAAQ/hC,GACN,GAA0B,OAAtBt1C,KAAKoxE,aAEP,YADA7wE,QAAQC,MAAM,sCAGhB,IAAK80C,EAEH,YADA/0C,QAAQC,MAAM,kCAGhB,MAAMwhE,EAAOhiE,KACbgiE,EAAKsP,aAAeh8B,EACnB,SAASqpB,IACJqD,EAAK6P,OACP7P,EAAKoP,aAAekG,sBAAsB3Y,GAE1CqD,EAAKoP,aAAepP,EAAKuV,UAAU,KACP,OAAtBvV,EAAKoP,cACPzS,MAIFqD,EAAKqT,eACPrT,EAAKsP,aAAatP,GAClBA,EAAKwT,WAET,CAdC,EAeH,CACAxI,gBAAAA,GACEhtE,KAAK8xE,YAAY3wE,KAAK,CACpBq2E,oBAAqBx3E,KAAKy3E,yBAC1BC,YAAa13E,KAAK0tE,iBAClBjB,SAAUzsE,KAAK0sE,cACfiL,QAAS33E,KAAK43E,aACdC,QAAS73E,KAAK83E,aACdC,eAAgB/3E,KAAKg4E,kBACrBC,aAAcj4E,KAAKk4E,kBACnB3F,WAAY,CAACvyE,KAAKm4E,aAAa,GAAIn4E,KAAKm4E,aAAa,GAAIn4E,KAAKm4E,aAAa,GAAIn4E,KAAKm4E,aAAa,KAErG,CACA3J,eAAAA,GACE,GAAgC,IAA5BxuE,KAAK8xE,YAAYvwE,OACnBhB,QAAQC,MAAM,gDACT,CACL,MAAMgS,EAAMxS,KAAK8xE,YAAY1gC,MAC7BpxC,KAAKq0E,eAAe7hE,EAAIklE,aACxB13E,KAAKo4E,YAAY5lE,EAAIi6D,UACrBzsE,KAAKq4E,WAAW7lE,EAAImlE,SACpB33E,KAAK2tE,WAAWn7D,EAAIqlE,SACpB73E,KAAK+tE,gBAAgBv7D,EAAIulE,gBACzB/3E,KAAK6tE,gBAAgBr7D,EAAIylE,cACzBj4E,KAAKiuE,aAAa,KAAMz7D,EAAI+/D,WAAW,IACvCvyE,KAAKiuE,aAAa,KAAMz7D,EAAI+/D,WAAW,IACvCvyE,KAAKiuE,aAAa,KAAMz7D,EAAI+/D,WAAW,IACvCvyE,KAAKiuE,aAAa,KAAMz7D,EAAI+/D,WAAW,IACvCvyE,KAAKs4E,0BAA0B9lE,EAAIglE,oBACrC,CACF,CACAe,aAAAA,GACE,OAAOv4E,KAAK6wE,cACd,CACA2H,gBAAAA,CAAiB/lC,GACf,IAAK,MAAMtB,IAAQ,CACjBnxC,KAAK6wE,eAAeoB,SACpBjyE,KAAK6wE,eAAeqB,SACpBlyE,KAAK6wE,eAAesB,QACpBnyE,KAAK6wE,eAAewB,aACpBryE,KAAK6wE,eAAeuB,SACpBpyE,KAAK6wE,eAAeyB,oBAEpB,IAAK,MAAMsC,KAAOzjC,EAChB,GAAIyjC,EAAIniC,MAAQA,EACd,OAAOmiC,EAIb,OAAO,IACT,CACA6D,cAAAA,CAAe31E,GACb,OAAO9C,KAAK0tE,iBAAmB5qE,EAAMN,KAAKooD,MAAM9nD,EAAM9C,KAAK6sE,WAC7D,CACA6L,cAAAA,CAAe51E,GACb,OAAO9C,KAAK0tE,iBAAmB5qE,EAAMN,KAAKooD,MAAM9nD,EAAM9C,KAAK6sE,WAC7D,CACA5U,kBAAAA,CAAmBl3D,GACjB,OAAOf,KAAKyxE,gBAAgBxZ,mBAAmBl3D,EACjD,CACAy3D,mBAAAA,CAAoBz3D,GAClB,OAAOf,KAAKyxE,gBAAgBjZ,oBAAoBz3D,EAClD,CACA43E,YAAAA,CAAa/D,GACX,MAAMzjC,EAAOnxC,KAAK44E,iBAAiBhE,GAC/BzjC,GAAQA,EAAK6C,QAAQ4gC,GAAO,IAC9BzjC,EAAKhwC,KAAKyzE,GACV50E,KAAKW,cAAc,kBAAmBi0E,GAE1C,CACAE,eAAAA,CAAgBF,GACd,MAAMzjC,EAAOnxC,KAAK44E,iBAAiBhE,GACnC,GAAIzjC,EAAM,CACR,MAAMyM,EAAQzM,EAAK6C,QAAQ4gC,GACvBh3B,GAAS,IACXzM,EAAK3vC,OAAOo8C,EAAO,GACnB59C,KAAKW,cAAc,oBAAqBi0E,GAE5C,CACF,CACAiE,qBAAAA,CAAsBC,GACpB94E,KAAK8wE,aAAegI,CACtB,CAIQC,SAAAA,GAEJ/4E,KAAK2wE,qBAAuB3wE,KAAKwlE,QAAQiN,aACzCzyE,KAAK4wE,sBAAwB5wE,KAAKwlE,QAAQkN,eAE1C1yE,KAAK2wE,mBAAqB3wE,KAAKwlE,QAAQiN,YACvCzyE,KAAK4wE,oBAAsB5wE,KAAKwlE,QAAQkN,aACxC1yE,KAAKW,cAAc,SAAUX,KAAK2wE,mBAAoB3wE,KAAK4wE,qBAE/D,CACQ6C,sBAAAA,GACN,MAAMnO,EAA4BtlE,KAAKwlE,QACjCxD,EAAOhiE,KACTmvC,OAAO6pC,eACT,IAAI7pC,OAAO6pC,eAAe,KACxBhX,EAAK+W,cACJE,QAAQ3T,EAAQ,KAEfn2B,OAAO+pC,kBACT,IAAIA,iBAAiB,SAAUC,GACzBA,EAAU53E,OAAS,GACrBygE,EAAK+W,WAENE,GAAAA,QAAQ3T,EAAQ,CAAEv4B,YAAY,EAAMqsC,gBAAiB,CAAC,WAE3DjqC,OAAOkqC,iBAAiB,SAAU,KAChCr5E,KAAK+4E,cAGX,CACQzD,eAAAA,GACNt1E,KAAKkxE,WAAWgC,UAAY,EAC5BlzE,KAAKkxE,WAAWiC,aAAe,EAC/B,MAAM7jC,EAAMtvC,KAAKgxE,gBACjB,GAAuC,IAAnChxE,KAAKkxE,WAAW0B,eAClB5yE,KAAKkxE,WAAW0B,eAAiBtjC,EACjCtvC,KAAKkxE,WAAW2B,eAAiB,EACjC7yE,KAAKkxE,WAAW4B,eAAiB,EACjC9yE,KAAKkxE,WAAW6B,aAAe,EAC/B/yE,KAAKkxE,WAAW8B,eAAiB,EACjChzE,KAAKkxE,WAAW+B,IAAM,EACtBjzE,KAAKqxE,YAAYiC,KAAOhkC,EACxBtvC,KAAKqxE,YAAYkC,MAAQvzE,KAAKkxE,WAAWyB,aACrC3yE,KAAKmxE,WACPnxE,KAAKmxE,UAAU5hC,YAEZ,CACLvvC,KAAKkxE,WAAW6B,aAAezjC,EAAMtvC,KAAKkxE,WAAW0B,eACrD5yE,KAAKkxE,WAAW8B,gBAAkBhzE,KAAKkxE,WAAW6B,aAClD,IAAIuG,EAAU,EACVC,EAAU,EACa,IAAvBv5E,KAAKixE,gBACPqI,EAAUhqC,EAAMtvC,KAAKixE,cACrBsI,EAAUv5E,KAAKixE,cAAgBjxE,KAAKkxE,WAAW0B,gBAEjD5yE,KAAKkxE,WAAW0B,eAAiBtjC,EAC7BA,GAAOtvC,KAAKqxE,YAAYiC,KAAO,MACjCtzE,KAAKkxE,WAAW+B,IAC6C,KAAzDjzE,KAAKkxE,WAAWyB,aAAe3yE,KAAKqxE,YAAYkC,QAAkBjkC,EAAMtvC,KAAKqxE,YAAYiC,MAC7FtzE,KAAKqxE,YAAYiC,KAAOhkC,EACxBtvC,KAAKqxE,YAAYkC,MAAQvzE,KAAKkxE,WAAWyB,aACzC3yE,KAAKkxE,WAAW4B,eAAiBwG,EACjCt5E,KAAKkxE,WAAW2B,eAAiB0G,EAErC,CACA,MAAMC,EAAMx5E,KAAKkxE,WAAWkC,cAC5BpzE,KAAKkxE,WAAWkC,cAAgBpzE,KAAKkxE,WAAWmC,kBAChDrzE,KAAKkxE,WAAWmC,kBAAoBmG,EACpC,IAAK,MAAMl0E,KAAKtF,KAAKkxE,WAAWmC,kBAC9B/tE,IAEFtF,KAAKkxE,WAAWmC,kBAAkB9xE,OAAS,CAC7C,CACQq3E,gBAAAA,CAAiBhE,GACvB,IAAIzjC,EAAoB,KAgBxB,OAfIyjC,EAAI6E,YACNtoC,EAAOnxC,KAAK6wE,eAAeoB,SAClB2C,EAAI8E,YACbvoC,EAAOnxC,KAAK6wE,eAAeqB,SAClB0C,EAAI+E,WACbxoC,EAAOnxC,KAAK6wE,eAAesB,QAClByC,EAAIgF,gBACbzoC,EAAOnxC,KAAK6wE,eAAewB,aAClBuC,EAAIiF,YACb1oC,EAAOnxC,KAAK6wE,eAAeuB,SAClBwC,EAAIkF,iBACb3oC,EAAOnxC,KAAK6wE,eAAeyB,mBAClBsC,EAAImF,gBACb5oC,EAAOnxC,KAAK6wE,eAAe0B,YAEtBphC,CACT,CACU6oC,aAAAA,GACR,IAAK,MAAM7oC,IAAQ,CACjBnxC,KAAK6wE,eAAesB,QACpBnyE,KAAK6wE,eAAeoB,SACpBjyE,KAAK6wE,eAAeqB,SACpBlyE,KAAK6wE,eAAeuB,SACpBpyE,KAAK6wE,eAAewB,aACpBryE,KAAK6wE,eAAeyB,mBACpBtyE,KAAK6wE,eAAe0B,YAEpB,IAAK,MAAMqC,KAAOzjC,EAChBnxC,KAAK20E,cAAcC,GAAK,GAG5B,GAAI50E,KAAK+0E,gBAAiB,CACxB,IAAK,MAAMH,KAAO50E,KAAK+wE,mBACrB6D,EAAII,UAENh1E,KAAK+wE,mBAAqB,EAC5B,CACF,CACUkJ,SAAAA,GACR,IAAK,MAAM9oC,IAAQ,CACjBnxC,KAAK6wE,eAAesB,QACpBnyE,KAAK6wE,eAAeoB,SACpBjyE,KAAK6wE,eAAeqB,SACpBlyE,KAAK6wE,eAAeuB,SACpBpyE,KAAK6wE,eAAewB,aACpBryE,KAAK6wE,eAAeyB,mBACpBtyE,KAAK6wE,eAAe0B,YAGpB,IAAK,MAAMqC,KAAOzjC,EAAKxvC,QACrBizE,EAAIsF,QAIV,CACUC,mBAAAA,CAAoBp5E,GAC5B,MAAMq5E,GAAuC,IAAxBr5E,GAASiwC,WAAuBpF,GAAsByuC,aAAe,EACpFC,EAAev5E,GAAS8sB,SAAW+d,GAAsB2uC,YAAc,EACvEC,EAAcz5E,GAASouE,QAAUvjC,GAAsB6uC,QAAU,EAIvE,OAHIL,GAAgBr5E,GAAS25E,iBAC3B35E,EAAQ25E,eAAeC,UAAY,QAE9BP,EAAeE,EAAeE,CACvC,CACUI,kBAAAA,CAAmB75E,EAAgC85E,GAE3D,IAAIC,EACJ,OAFc/5E,GAASotC,OAAS0sC,GAG9B,IAAK,UACHC,EAAYlvC,GAAsBmvC,WAClCh6E,EAAQ+0E,SAAU,EAClB/0E,EAAQouE,QAAUpuE,EAAQouE,UAAW,EACrC,MACF,IAAK,SACH2L,EAAYlvC,GAAsBwC,UAClC,MACF,IAAK,QACH0sC,EAAYlvC,GAAsBovC,SAClC,MACF,IAAK,OACHF,EAAYlvC,GAAsBqvC,QAClCl6E,EAAQ+0E,SAAU,EAClB,MACF,IAAK,QACHgF,EAAYlvC,GAAsBsvC,SAClCn6E,EAAQ+0E,SAAU,EAClB,MACF,IAAK,aACHgF,EAAYlvC,GAAsBuvC,cAClCp6E,EAAQ+0E,SAAU,EAClB,MACF,IAAK,eACHgF,EAAYlvC,GAAsBwvC,gBAClCr6E,EAAQ+0E,SAAU,EAClB,MACF,QACEgF,EAAY,EAGhB,MAAMO,EAAct6E,GAAUglD,QAAoBna,GAAsB0vC,WAAa,EAC/Ed,EAAcz5E,GAAUouE,QAAoBvjC,GAAsB6uC,QAAU,EAElF,OAAOK,EAAYO,EAAcb,GADG,IAAhBA,IAAsBz5E,GAAS+0E,SAAW,GAAQlqC,GAAsB2vC,QAAU,EAExG,ECjzBK,MAAMC,GAEXC,OAEAC,QAEAhV,MAEAiV,YAEAC,kBAMA,WAAA77E,CAAYgsB,EAA6B+hB,GAEvC,GADA9tC,KAAK0mE,MAAS36C,EAAOoB,SAAW,IAAO,GACnCntB,KAAK0mE,OAAS,EAChB,MAAM,IAAI9mE,MAAM,sDAAsDI,KAAK0mE,SAG7E1mE,KAAK27E,YAAc,CAAC,EACpB37E,KAAK47E,kBAAoB,CAAC,EAC1B57E,KAAKy7E,OAAS3tC,aAAkBnqC,YAAcmqC,EAAS,KACvD9tC,KAAK07E,QAAU5tC,aAAkBnqC,YAAc,KAAOmqC,EACtD9tC,KAAKq6C,KAAKtuB,EAAQ,EAAG,GACvB,CAEA,cAAI4iB,GACF,OAAO3uC,KAAK0mE,KACd,CAEA,UAAI54B,GACF,OAAO9tC,KAAKy7E,MACd,CAEA,YAAIlgC,GACF,OAAOv7C,KAAK27E,WACd,CAMA7sE,GAAAA,CAAI9L,EAAc4xC,GAChB,QAAcnzC,IAAVmzC,EAAqB,CACvB,MAAMinC,EAAO77E,KAAK27E,YAAY34E,GAC9B,GAAI64E,EACF,GAAI77E,KAAKy7E,OACP,GAAqB,iBAAV7mC,EACTinC,EAAK,GAAKjnC,OACL,GAAKA,GAAeknC,GACzBD,EAAK/sE,IAAI8lC,EAAeknC,QACnB,IAAsC,iBAA1BlnC,GAAerzC,OAOhC,MAAM,IAAI3B,MAAM,yBANhBi8E,EAAK/sE,IACF8lC,EAAqBrzC,OAASs6E,EAAKt6E,OAC/BqzC,EAAqBmnC,SAAS,EAAGF,EAAKt6E,QACtCqzC,EAIT,KACK,CACL,MAAMhyB,EAAO5iB,KAAK47E,kBAAkB54E,GAAM,GAC1C,GAAqB,iBAAV4xC,EACTinC,EAAK,GAAKjnC,EACV50C,KAAK07E,QAAQ9M,cAAc5uE,KAAK47E,kBAAkB54E,GAAM,GAAI64E,OACvD,MAAIjnC,EAAM,mBAAwBhyB,GAASgyB,EAAM,YAStD,MAAM,IAAIh1C,MAAM,yBATgE,CAChF,MAAMo8E,EAAMpnC,EACZ50C,KAAK07E,QAAQ9M,cACX5uE,KAAK47E,kBAAkB54E,GAAM,GAC7Bg5E,EACA,EACAp5D,EAAQo5D,EAAIC,kBAAsB,GAItC,CACF,KACK,CAEL,GADc7nC,OAAO8nC,eAAetnC,KACtBR,OAAO8nC,eAAe,CAAK,GAGvC,MAAM,IAAIt8E,MAAM,yBAFhBI,KAAKm8E,UAAUn5E,EAAM4xC,EAIzB,CACF,CACF,CAEA,SAAAunC,CAAkBn5E,EAAc4xC,GAC9B,IAAK,MAAMtI,KAAKsI,EACd50C,KAAK8O,IAAI,GAAG9L,KAAQspC,IAAKsI,EAAMtI,GAEnC,CAEA,IAAA+N,CAAatuB,EAA6BkB,EAAgByvB,GACxD,IAAK,MAAMiiB,KAAS5yC,EAAOqB,QACzB,GAAIuxC,EAAMrxC,UACRL,EAASjtB,KAAKq6C,KAAKskB,EAAMrxC,UAAWL,EAAQ,GAAGyvB,IAASiiB,EAAM37D,aACzD,CACL,MAAMA,EAAO,GAAG05C,IAASiiB,EAAM37D,OAC/B,GAAIhD,KAAK47E,kBAAkB54E,GACzB,MAAM,IAAIpD,MAAM,4CAA4CoD,KAE9D,GAAI27D,EAAM1xC,OAASA,GAAU0xC,EAAMxxC,SAAW,EAC5C,MAAM,IAAIvtB,MAAM,mCAElBI,KAAK47E,kBAAkB54E,GAAQ,CAAC27D,EAAM1xC,OAAQ0xC,EAAMxxC,UACpD,IAAIivD,EAAkC,KACtC,OAAQzd,EAAMz+D,MACZ,KAAKgjB,EAAgBe,IACnBm4D,EAAWr6E,aACX,MACF,KAAKmhB,EAAgB2B,IACrB,KAAK3B,EAAgBmB,KACnB+3D,EAAWC,YACX,MACF,KAAKn5D,EAAgBuB,IACnB23D,EAAWE,WACX,MACF,KAAKp5D,EAAgBQ,IACrB,KAAKR,EAAgBS,SACrB,KAAKT,EAAgBK,IACnB64D,EAAW/M,YACX,MACF,KAAKnsD,EAAgBM,IACrB,KAAKN,EAAgBO,SACnB24D,EAAWG,WACX,MACF,KAAKr5D,EAAgBC,GACrB,KAAKD,EAAgBE,QACnBg5D,EAAWrR,WACX,MACF,KAAK7nD,EAAgBG,GACrB,KAAKH,EAAgBI,QACnB84D,EAAWI,UAGf,IAAKJ,EACH,MAAM,IAAIx8E,MAAM,mDAAmDoD,KAErE,GAAI27D,EAAMxxC,SAAWivD,EAASH,kBAC5B,MAAM,IAAIr8E,MAAM,mDAAmDoD,KAEjEhD,KAAKy7E,OACPz7E,KAAK27E,YAAY34E,GAAQ,IAAIo5E,EAC3Bp8E,KAAKy7E,OACL9c,EAAM1xC,OACN0xC,EAAMxxC,SAAWivD,EAASH,mBAG5Bj8E,KAAK27E,YAAY34E,GAAQ,IAAIo5E,EAAS,GAExCnvD,EAAS0xC,EAAM1xC,OAAS0xC,EAAMxxC,QAChC,CAEF,OAAOF,CACT,ECnJF,IAAIwvD,GAAY,EAET,MAAeC,WAAwBvgE,EAClC2zB,QACA6sC,QACAC,KACAC,KACAtW,MACAuW,YACAC,gBACV,WAAAh9E,CAAYiuB,GlBshDP,IAAwB4mD,EkBrhD3BhxE,QACA5D,KAAK8vC,QAAU9hB,EACfhuB,KAAK28E,QAAU,KACf38E,KAAK48E,OAASH,GACdz8E,KAAK68E,KAAO,EACZ78E,KAAKumE,OlBghDsBqO,EkBhhDC50E,MlBihDtBg9E,cACC,aACEpI,EAAIqI,mBACN,kBACErI,EAAIsI,cACN,aACEtI,EAAIuI,gBACN,eACEvI,EAAIwI,iBACN,gBACExI,EAAI+E,WACN,SACE/E,EAAIgF,gBACN,cACEhF,EAAIiF,YACN,UACEjF,EAAI8E,YACN,UACE9E,EAAIkF,iBACN,MAEA,UkBriDP95E,KAAK88E,YAAc,EACnB98E,KAAK+8E,gBAAkB,KACvB/8E,KAAK8vC,QAAQ6oC,aAAa34E,KAC5B,CACA,UAAIguB,GACF,OAAOhuB,KAAK8vC,OACd,CACA,UAAIutC,GACF,OAAOr9E,KAAK28E,OACd,CACA,OAAIlqC,GACF,OAAOzyC,KAAK48E,IACd,CACA,OAAIU,GACF,OAAOt9E,KAAK68E,IACd,CACA,kBAAI7R,GACF,OAAOhrE,KAAK+8E,eACd,CACA,kBAAI/R,CAAe5pE,GACjBpB,KAAK+8E,gBAAkB37E,CACzB,CACA,QAAI4B,GACF,OAAOhD,KAAKumE,KACd,CACA,QAAIvjE,CAAKF,GACP,GAAIA,IAAQ9C,KAAKumE,MAAO,CACtB,MAAMnE,EAAWpiE,KAAKumE,MACtBvmE,KAAKumE,MAAQzjE,EACb9C,KAAK8vC,QAAQnvC,cAAc,mBAAoBX,KAAMoiE,EACvD,CACF,CACA,cAAImb,GACF,OAAOv9E,KAAK88E,WACd,CACA,cAAIS,CAAWz6E,GACb9C,KAAK88E,YAAch6E,CACrB,CACAg3E,cAAAA,GACE,OAAO,CACT,CACAF,aAAAA,GACE,OAAO,CACT,CACAF,SAAAA,GACE,OAAO,CACT,CACAD,SAAAA,GACE,OAAO,CACT,CACAuD,WAAAA,GACE,OAAO,CACT,CACAC,gBAAAA,GACE,OAAO,CACT,CACAC,WAAAA,GACE,OAAO,CACT,CACAC,aAAAA,GACE,OAAO,CACT,CACAC,cAAAA,GACE,OAAO,CACT,CACAvD,SAAAA,GACE,OAAO,CACT,CACAF,QAAAA,GACE,OAAO,CACT,CACAI,WAAAA,GACE,OAAO,CACT,CACAG,MAAAA,GACMl6E,KAAKqc,WACPrc,KAAK8vC,QAAQmlC,cAAcj1E,MAC3BA,KAAK68E,OAET,CACA7H,OAAAA,GACE,MAAM,IAAIp1E,MAAM,oCAClB,CACAs1E,OAAAA,GACE,MAAM,IAAIt1E,MAAM,oCAClB,CACU2c,SAAAA,GACR3Y,MAAM2Y,YACNvc,KAAK8vC,QAAQ6kC,cAAc30E,MAAM,EACnC,EChHK,MAAMw9E,WAAsBd,GACjC3yD,oBAA8B,EACb3H,MACAq7D,IACAC,IACAC,IACAC,OACA/R,MACTgS,OACSC,kBACAznB,kBACT0nB,UACAC,UACAC,UACAC,gBACR,WAAAn+E,CAAYiuB,EAAsBoqC,GAMhC,GALAx0D,MAAMoqB,GACNhuB,KAAKoiB,MAAQg2C,EAAOl4D,KACpBF,KAAK49E,OAASxlB,EAAOD,OAAS,WAAWn4D,KAAKyyC,MAC9CzyC,KAAK89E,kBAAoB,IAAI1lB,EAAOA,OAAOG,kBAC3Cv4D,KAAK69E,OAAS,GACM,WAAhBzlB,EAAOl4D,KAAmB,CAC5B,MAAMi+E,EAAe/lB,EAAOA,OAC5Bp4D,KAAKy9E,IAAMU,EAAa9lB,GACxBr4D,KAAK09E,IAAMS,EAAa7lB,GACxBt4D,KAAKq2D,kBAAoB8nB,EAAatqC,iBAAmBsqC,EAAatqC,iBAAiB5wC,KAAK,KAAO,OAC9F,CACL,MAAMm7E,EAAgBhmB,EAAOA,OAC7Bp4D,KAAK29E,IAAMS,EAAcz/B,MAC3B,CACA3+C,KAAKq+E,QACLr+E,KAAK6rE,MAAQ5yB,SAASukC,GAAcc,aACtC,CACA,QAAIp+E,GACF,OAAOF,KAAKoiB,KACd,CACA,SAAI+1C,GACF,OAAOn4D,KAAK49E,MACd,CACAW,eAAAA,GACE,OAAOv+E,KAAK69E,MACd,CACAW,eAAAA,CAAgBC,GACd,OAAQA,GACN,IAAK,SACH,OAAOz+E,KAAKy9E,IACd,IAAK,WACH,OAAOz9E,KAAK09E,IACd,IAAK,UACH,OAAO19E,KAAK29E,IAElB,CACAe,cAAAA,CAAe17E,GACb,IAAK,IAAIy+C,EAAQ,EAAGA,EAAQzhD,KAAK89E,kBAAkBv8E,OAAQkgD,IAAS,CAClE,MAAM11B,EAAS/rB,KAAK89E,kBAAkBr8B,GAChCk9B,EAAW5yD,EAAO0xC,UAAUz6D,IAASA,EAC3C,IAAK,IAAI0+C,EAAU,EAAGA,EAAU31B,EAAOqB,QAAQ7rB,OAAQmgD,IAAW,CAChE,MAAMk9B,EAAe7yD,EAAOqB,QAAQs0B,GACpC,GAAIk9B,EAAa57E,OAAS27E,EACxB,MAAO,CACLl9B,MAAOA,EACPC,QAASA,EACTxhD,KAAM0+E,EAAa1+E,KAGzB,CACF,CACA,OAAO,IACT,CACA,oBAAIq4D,GACF,OAAOv4D,KAAK89E,iBACd,CACA,oBAAIjqC,GACF,OAAO7zC,KAAKq2D,iBACd,CACA,QAAIplB,GACF,OAAOjxC,KAAK6rE,KACd,CACAgT,iBAAAA,GACE,OAAO7+E,KAAKk+E,eACd,CACAY,eAAAA,GAME,MAAO,CACLC,SAAU/+E,KAAKg+E,UACfgB,SAAUh/E,KAAKi+E,UACfgB,SAAUj/E,KAAK+9E,UACfmB,eAAgBl/E,KAAKk+E,gBAEzB,CACA,YAAIc,GACF,OAAOh/E,KAAKi+E,SACd,CACAjJ,OAAAA,GACEh1E,KAAKg+E,UAAY,KACjBh+E,KAAKi+E,UAAY,KACjBj+E,KAAKk+E,gBAAkB,KACvBl+E,KAAK28E,QAAU,IACjB,CACAzH,OAAAA,GACOl1E,KAAK28E,SACR38E,KAAKq+E,OAET,CACAxE,SAAAA,GACE,OAAO,CACT,CACAsF,mBAAAA,CAAoBrjC,GAClB,MAAM57C,EAAOF,KAAK0+E,eAAe5iC,IAAU57C,KAC3C,OAAOA,EAAOF,KAAKguB,OAAO+nD,uBAAuB71E,EAAM,CAAEiuC,MAAO,YAAe,IACjF,CACQkwC,KAAAA,GACa,WAAfr+E,KAAKoiB,OACPpiB,KAAKg+E,UAAYh+E,KAAKo/E,mBAAmBp/E,KAAKy9E,KAC9Cz9E,KAAKi+E,UAAYj+E,KAAKo/E,mBAAmBp/E,KAAK09E,MAE9C19E,KAAK+9E,UAAY/9E,KAAKo/E,mBAAmBp/E,KAAK29E,KAEhD39E,KAAKk+E,gBAAkBl+E,KAAKq/E,qBAAqBr/E,KAAK89E,mBACtD99E,KAAK28E,QAAU,CAAC,CAClB,CACQ0C,oBAAAA,CAAqB9mB,GAC3B,MAAMiG,EAAgC,GAItC,OAHAjG,EAAiB/R,QAAS1jD,IACxB07D,EAAQr9D,KAAKnB,KAAK8vC,QAAQwvC,qBAAqBx8E,GAAK,MAE/C9C,KAAK8vC,QAAQ9hB,OAAOqxD,qBAAqB,CAC9C9mB,iBAAkBiG,GAEtB,CACQ4gB,kBAAAA,CAAmBG,GACzB,IAAIC,EAAKx/E,KAAK8vC,QAAQ9hB,OAAOoxD,mBAAmB,CAAEjnB,MAAOn4D,KAAK49E,OAAQ2B,SACtE,GAAIC,EAAI,CACN,MAAMlqC,EACJkqC,EAAYC,iBAAoBD,EAAWE,mBAC7C,IAAKpqC,EACH,OAAOkqC,EAETlqC,EAAK1zC,KAAK49E,GAAIvI,KAAMwI,IAClB,IAAIzjB,GAAM,EACV,GAAIyjB,GAAiBE,UAAUp+E,OAAS,EAAG,CACzC,IAAIq+E,EAAM,GACV,IAAK,MAAMjgF,KAAW8/E,EAAgBE,SACf,UAAjBhgF,EAAQO,OACV87D,GAAM,GAER4jB,GAAO,QAAQjgF,EAAQkgF,WAAWlgF,EAAQmgF,aAAaP,EAAK59E,MAC1DhC,EAAQstB,OACRttB,EAAQstB,OAASttB,EAAQ4B,YAE3Bq+E,GAAO,GAAGjgF,EAAQA,YACG,UAAjBA,EAAQO,MACV87D,GAAM,EACNz7D,QAAQC,MAAMo/E,IACY,YAAjBjgF,EAAQO,KACjBK,QAAQi6C,KAAKolC,GAEbr/E,QAAQiuC,KAAKoxC,GAEf5/E,KAAK69E,QAAU+B,CAEnB,CACI5jB,IACFwjB,EAAK,OAGX,CACA,OAAOA,CACT,CACAO,GAAAA,GACE//E,KAAK8vC,QAAQ69B,WAAW3tE,KAC1B,EClJK,MAAMggF,GACMlwC,QACTmwC,YACSC,aACTC,oBACR,WAAApgF,CAAYiuB,EAAsBrB,EAAc,OAC9C3sB,KAAK8vC,QAAU9hB,EACfhuB,KAAKigF,YAAc,GACnBjgF,KAAKkgF,aAAevzD,EACpB3sB,KAAKmgF,oBAAsB,EAC7B,CACAC,YAAAA,CACEC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAM99D,EAAQ69D,EAAa,GAAM,EAC3BE,EAAe3gF,KAAK4gF,kBAAkBh+D,IAAQ89D,GACpD,GAAIL,EAAK,CACP,MAAMQ,EAAcF,EAAaE,YACjC,IAAI9V,WAAW8V,EAAaF,EAAa1zD,OAAQrK,GAAM9T,IAAI,IAAIi8D,WAAWsV,EAAKE,EAAWE,GAC5F,CACA,MAAMK,EAAS,CACbH,aAAc,IAAKA,GACnBF,WAAY79D,EACZw9D,aAAcE,EACdS,aAAcP,GAIhB,OAFAG,EAAa1zD,QAAUrK,EACvB+9D,EAAa1zD,OAAU0zD,EAAa1zD,OAAS,GAAM,EAC5C6zD,CACT,CACAE,YAAAA,GACE,IAAK,IAAI1/E,EAAItB,KAAKigF,YAAY1+E,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACrD,MAAMwsC,EAAS9tC,KAAKigF,YAAY3+E,GAC5BwsC,EAAOlyB,OACTkyB,EAAOA,OAAOmzC,QACdjhF,KAAKmgF,oBAAoBh/E,KAAK2sC,GAC9B9tC,KAAKigF,YAAYz+E,OAAOF,EAAG,GAC3BwsC,EAAO+yC,YAAc,KAEzB,CACA,OAAO7gF,KAAKmgF,oBAAoB5+E,MAClC,CACA2/E,UAAAA,GACE,IAAK,MAAMpzC,KAAU9tC,KAAKmgF,oBACxBryC,EAAOA,OAAOqzC,SAASC,WAAWC,OAAOpK,KAAK,KAC5CnpC,EAAO7gB,OAAS,EAChB6gB,EAAOlyB,MAAO,EACdkyB,EAAO+yC,YAAc/yC,EAAOA,OAAOwzC,iBACnCthF,KAAKigF,YAAY9+E,KAAK2sC,KAG1B9tC,KAAKmgF,oBAAsB,EAC7B,CACArvC,KAAAA,GACE,IAAK,IAAIxvC,EAAItB,KAAKigF,YAAY1+E,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACrD,MAAMwsC,EAAS9tC,KAAKigF,YAAY3+E,GAC5BwsC,EAAO+yC,cACT/yC,EAAOA,OAAOmzC,QACdnzC,EAAOA,OAAOknC,UAElB,CACAh1E,KAAKigF,YAAc,GACnB,IAAK,MAAMnyC,KAAU9tC,KAAKmgF,oBACxBryC,EAAOA,OAAOknC,UAEhBh1E,KAAKmgF,oBAAsB,EAC7B,CACAS,iBAAAA,CAAkBh+D,EAAc89D,GAC9B,IAAK,MAAM5yC,KAAU9tC,KAAKigF,YACxB,GAAIS,GAAgB5yC,EAAOlrB,KAAOkrB,EAAO7gB,QAAUrK,EAEjD,OADAkrB,EAAOlyB,MAAO,EACPkyB,EAGX,MAAMyzC,EAAa/+E,KAAMC,IAAImgB,EAAM5iB,KAAKkgF,cAAgB,GAAM,EACxDsB,EAAMxhF,KAAK8vC,QAAQ9hB,OAAOyzD,aAAa,CAC3CtpB,MAAO,oBAAoBn4D,KAAKigF,YAAY1+E,UAAUggF,IACtD3+D,KAAM2+D,EACNpzC,MAAOuzC,eAAeC,UAAYD,eAAeE,SACjDC,kBAAkB,IASpB,OAPA7hF,KAAKigF,YAAY9+E,KAAK,CACpB2sC,OAAQ0zC,EACR5+D,KAAM2+D,EACNt0D,OAAQ,EACRrR,MAAM,EACNilE,YAAaW,EAAIF,mBAEZthF,KAAKigF,YAAYjgF,KAAKigF,YAAY1+E,OAAS,EACpD,ECjIK,MAAMugF,WAAqBpF,GACfhW,MACAqb,OACTC,UACApyC,SACSqyC,YACPC,gBACV,WAAAniF,CAAYiuB,EAAsBmgB,EAAe06B,GAO/C,GANAjlE,MAAMoqB,GACNhuB,KAAK28E,QAAU,KACf38E,KAAK4vC,SAAW,EAChB5vC,KAAK+hF,OAAS5zC,EACdnuC,KAAKgiF,UAAY,EACjBhiF,KAAK0mE,MAAwB,iBAATmC,EAAoBA,EAAOA,EAAKl6B,WAChD3uC,KAAK0mE,OAAS,EAChB,MAAM,IAAI9mE,MAAM,wCAElBI,KAAKiiF,YAAc,IAAIjC,GAAiBhyD,EAAQhuB,KAAM0mE,MAAQ,QAC9D1mE,KAAKkiF,gBAAkB,GACvBliF,KAAKmiF,KAAqB,iBAATtZ,EAAoB,KAAOA,EAC9C,CACA,QAAI53B,GACF,OAAOjxC,KAAK28E,QAAU38E,KAAK8vC,QAAQsyC,iBAAiBpiF,KAAK28E,SAAW,CACtE,CACA,cAAIhuC,GACF,OAAO3uC,KAAK0mE,KACd,CACA,SAAIv4B,GACF,OAAOnuC,KAAK+hF,MACd,CACA,YAAIM,GACF,OAAOriF,KAAKgiF,SACd,CACQM,oBAAAA,CAAqBC,GAC3B,IAAIlwE,EAAO,EACPC,EAAQtS,KAAKkiF,gBAAgB3gF,OAAS,EACtCihF,EAAcxiF,KAAKkiF,gBAAgB3gF,OACvC,KAAO8Q,GAAQC,GAAO,CACpB,MAAMmwE,EAAMjgF,KAAKksC,OAAOr8B,EAAOC,GAAS,GACzBtS,KAAKkiF,gBAAgBO,GACzB1B,aAAewB,EACxBlwE,EAAOowE,EAAM,GAEbD,EAAcC,EACdnwE,EAAQmwE,EAAM,EAElB,CACA,OAAOD,CACT,CACA5T,aAAAA,CAAc2T,EAAuB1Z,EAAkB0X,EAAoBmC,GAIzE,GAHAnC,EAAYp9E,OAAOo9E,IAAc,EACjCgC,EAAgBp/E,OAAOo/E,IAAkB,EAErChC,GADJmC,EAAYv/E,OAAOu/E,IAAc7Z,EAAKtnE,OAASg/E,GACnB1X,EAAKtnE,OAC/B,MAAM,IAAI3B,MAAM,sDAElB,GAAI2iF,EAAgBG,EAAY7Z,EAAKoT,kBAAoBj8E,KAAK2uC,WAC5D,MAAM,IAAI/uC,MAAM,oDAElB,MAAM6gF,EAAaiC,EAAY7Z,EAAKoT,kBACpC,GAAqB,EAAhBsG,GAA6B9B,EAAAA,EAChC,MAAM,IAAI7gF,MACR,0FAGJ,MAAMmhF,EAAelY,EAAK8Z,WAAapC,EAAY1X,EAAKoT,kBAClDuG,EAAcxiF,KAAKsiF,qBAAqBC,GAC9C,GAAIC,EAAcxiF,KAAKkiF,gBAAgB3gF,OAAQ,CAC7C,MAAMu/E,EAAS9gF,KAAKkiF,gBAAgBM,GAElC1B,EAAOC,aAAewB,EAAgB9B,GACtCK,EAAOC,aAAeD,EAAOL,WAAa8B,GAG1CviF,KAAK8vC,QAAQ8yC,aAAa5iF,KAE9B,CACA,IAAI6iF,GAAS,EACb,GAAoC,IAAhC7iF,KAAKkiF,gBAAgB3gF,OACvBvB,KAAK8iF,WAAWP,EAAe9B,EAAY,GAC3CoC,GAAS,MACJ,CACL,IAAIx1D,EAAQk1D,EACR/yC,EAAM+yC,EAAgB9B,EAC1B,KAAO+B,EAAcxiF,KAAKkiF,gBAAgB3gF,QAAQ,CAChD,MAAMu/E,EAAS9gF,KAAKkiF,gBAAgBM,GAC9BO,EAAcjC,EAAOC,aACrBiC,EAAYD,EAAcjC,EAAOL,WACvC,KAAIsC,EAAcvzC,GAAOwzC,EAAY31D,GAKnC,MAJAA,EAAQ7qB,KAAKqD,IAAIwnB,EAAO01D,GACxBvzC,EAAMhtC,KAAKC,IAAI+sC,EAAKwzC,GACpBhjF,KAAKkiF,gBAAgB1gF,OAAOghF,EAAa,EAI7C,CACAxiF,KAAK8iF,WAAWz1D,EAAOmiB,EAAMniB,EAAOm1D,EACtC,CACA,IAAIzX,WAAW/qE,KAAKkiF,gBAAgB,GAAGvB,aAAaE,YAAa0B,EAAe9B,GAAY3xE,IAC1F,IAAIi8D,WAAWlC,EAAK/6B,OAAQizC,EAAcN,IAExCoC,GACF7iF,KAAK8vC,QAAQ8yC,aAAa5iF,KAE9B,CACA,sBAAMijF,CACJC,EACAC,EACAC,GAEA,IAAIC,EAA8BrjF,KAGlC,GAFAmjF,EAAgBhgF,OAAOggF,IAAkB,EACzCC,EAAcjgF,OAAOigF,IAAgBpjF,KAAK2uC,WAAaw0C,EACnDA,EAAgB,GAAKA,EAAgBC,EAAcpjF,KAAK2uC,WAC1D,MAAM,IAAI/uC,MAAM,kCAElB,GAAIsjF,GAAaA,EAAUv0C,WAAay0C,EACtC,MAAM,IAAIxjF,MAAM,4CAElB,GAAMI,KAAK+hF,QAAUn2C,GAAsBqvC,QAAUrvC,GAAsBuvC,eASzEn7E,KAAKsjF,WATqF,CAC1F,KAAItjF,KAAKgiF,UAAYN,eAAeE,UAKlC,MAAM,IAAIhiF,MAAM,qFAJhByjF,EAAerjF,KAAK8vC,QAAQ2xC,aAAa2B,EAAa,CAAEj1C,MAAO,SAC/DnuC,KAAKsjF,OACLtjF,KAAK8vC,QAAQyzC,WAAWvjF,KAAMqjF,EAAcF,EAAe,EAAGC,GAOlE,MAAMt1C,EAASu1C,EAAahG,aACtBvvC,EAAOqzC,SAASC,WAAWoC,MACjC,MAAMC,EAAQ31C,EAAOwzC,iBASrB,OARA4B,EAAYA,GAAa,IAAInY,WAAWqY,IAC9Bt0E,IAAI,IAAIi8D,WAAW0Y,EAAON,EAAeC,IACnDt1C,EAAOmzC,QAEHoC,IAAiBrjF,MACnBqjF,EAAa/mE,UAGR4mE,CACT,CACAhO,OAAAA,GACOl1E,KAAK8vC,QAAQilC,iBAChB/0E,KAAKmiF,MAET,CACAnN,OAAAA,GACMh1E,KAAK28E,UACP38E,KAAK28E,QAAQ3H,UACbh1E,KAAK28E,QAAU,KACf38E,KAAKgiF,UAAY,EACjBhiF,KAAK4vC,SAAW,EAEpB,CACA+pC,QAAAA,GACE,OAAO,CACT,CACA+J,gBAAAA,CAAiBC,GACf,GAAI3jF,KAAKkiF,gBAAgB3gF,OAAS,EAAG,CACnC,MAAMqiF,EAAaD,GAAW3jF,KAAK8vC,QAAQ9hB,OAAO61D,uBAClD,IAAK,MAAM/C,KAAU9gF,KAAKkiF,gBACxB0B,EAAWE,mBACThD,EAAOH,aAAa7yC,OACpBgzC,EAAOH,aAAa1zD,OACpBjtB,KAAK28E,QACLmE,EAAOC,aACPD,EAAOL,YAGNkD,GACH3jF,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMC,OAAO,CAACJ,EAAWK,WAE/CjkF,KAAKkiF,gBAAgB3gF,OAAS,EAC9BvB,KAAKiiF,YAAYjB,cACnB,CACF,CACAkD,cAAAA,GACMlkF,KAAK+hF,OAASn2C,GAAsB6uC,QACtCz6E,KAAKiiF,YAAYf,aAEjBlhF,KAAKiiF,YAAYnxC,OAErB,CACQqxC,IAAAA,CAAKtZ,GACX,IAAI7oE,KAAK8vC,QAAQilC,kBAGjB/0E,KAAK4vC,SAAW,GACX5vC,KAAK8vC,QAAQilC,kBACX/0E,KAAK28E,SAAS,CACjB38E,KAAKgiF,UAAY,EACjB,IAAI7pB,EAAQ,GAyBZ,GAxBIn4D,KAAK+hF,OAASn2C,GAAsBwC,YACtCpuC,KAAKgiF,WAAaN,eAAeyC,OAASzC,eAAe0C,SAAW1C,eAAeE,SACnFzpB,GAAS,YAEPn4D,KAAK+hF,OAASn2C,GAAsBovC,WACtCh7E,KAAKgiF,WAAaN,eAAe2C,MAAQ3C,eAAe0C,SAAW1C,eAAeE,SAClFzpB,GAAS,WAEPn4D,KAAK+hF,OAASn2C,GAAsBmvC,aACtC/6E,KAAKgiF,WAAaN,eAAe5kC,QAAU4kC,eAAe0C,SAAW1C,eAAeE,SACpFzpB,GAAS,aAEPn4D,KAAK+hF,OAASn2C,GAAsB0vC,aACtCt7E,KAAKgiF,WAAaN,eAAe3kC,QAAU2kC,eAAe0C,SAAW1C,eAAeE,SACpFzpB,GAAS,aAEPn4D,KAAK+hF,QAAUn2C,GAAsBqvC,QAAUrvC,GAAsBuvC,iBACvEn7E,KAAKgiF,WAAaN,eAAe0C,SAAW1C,eAAe4C,SAC3DnsB,GAAS,aAEPn4D,KAAK+hF,QAAUn2C,GAAsBsvC,SAAWtvC,GAAsBwvC,mBACxEp7E,KAAKgiF,WAAaN,eAAeE,SAAWF,eAAeC,UAC3DxpB,GAAS,cAEP0Q,EAAM,CACR7oE,KAAK28E,QAAU38E,KAAK8vC,QAAQy0C,gBAAgB,CAC1CpsB,MAAOA,EACPv1C,KAAMimD,EAAMl6B,WAAa,IAAO,GAChCR,MAAOnuC,KAAKgiF,UACZH,kBAAkB,IAEpB,MAAM4B,EAAQzjF,KAAK28E,QAAQ2E,iBAC3B,IAAKzY,EAAK9oE,YAAsC0jF,GAAO30E,IAAI+5D,GAC3D7oE,KAAK28E,QAAQsE,aAEbjhF,KAAK28E,QAAU38E,KAAK8vC,QAAQy0C,gBAAgB,CAC1CpsB,MAAOA,EACPv1C,KAAM5iB,KAAM2uC,WAAa,IAAO,GAChCR,MAAOnuC,KAAKgiF,YAGhB,MAAM1wC,EAAUtxC,KAAK2uC,WACrB3uC,KAAK8vC,QAAQ+oC,sBAAsBvnC,EAAUtxC,KAAK4vC,UAClD5vC,KAAK4vC,SAAW0B,CAClB,CAEJ,CACQgyC,IAAAA,GACFtjF,KAAKkiF,iBACPliF,KAAK8vC,QAAQ00C,cAEjB,CACQ1B,UAAAA,CAAWP,EAAuBp1D,EAAkBq1D,GAC1D,MAAMiC,EAAezkF,KAAKiiF,YAAYrB,kBAAkBzzD,GAAU,GAClEntB,KAAKkiF,gBAAgB1gF,OAAOghF,EAAa,EAAG,CAC1C7B,aAAc,CACZ7yC,OAAQ22C,EAAa32C,OACrBlrB,KAAM6hE,EAAa7hE,KACnBqK,OAAQs1D,EACR3mE,KAAM6oE,EAAa7oE,KACnBilE,YAAa4D,EAAa5D,aAE5BJ,WAAYtzD,EACZ4zD,aAAcwB,EACdnC,aAAcpgF,KAAK28E,SAEvB,ECjQF,MAAM+H,GAAkBliE,GAAoBC,kBAAkBS,EAAgB8N,aACxE2zD,GAAkBniE,GAAoBC,kBAAkBS,EAAgBgO,aACxE0zD,GAAkBpiE,GAAoBC,kBAAkBS,EAAgB2M,aACxEg1D,GAAkBriE,GAAoBC,kBAAkBS,EAAgB6M,aACxE+0D,GAActiE,GAAoBC,kBAAkBS,EAAgBiO,SACpE4zD,GAAcviE,GAAoBC,kBAAkBS,EAAgBmO,SACpE2zD,GAAcxiE,GAAoBC,kBAAkBS,EAAgB8M,SACpEi1D,GAAcziE,GAAoBC,kBAAkBS,EAAgBgN,SACpEg1D,GAAmB1iE,GAAoBC,kBAAkBS,EAAgBoO,cACzE6zD,GAAmB3iE,GAAoBC,kBAAkBS,EAAgBsO,cACzE4zD,GAAmB5iE,GAAoBC,kBAAkBS,EAAgBiN,cACzEk1D,GAAmB7iE,GAAoBC,kBAAkBS,EAAgBmN,cACzEi1D,GAAc9iE,GAAoBC,kBAAkBS,EAAgBqM,SACpEg2D,GAAc/iE,GAAoBC,kBAAkBS,EAAgBuM,SACpE/D,GAAUlJ,GAAoBC,kBAAkBS,EAAgBe,KAChE4G,GAAcrI,GAAoBC,kBAAkBS,EAAgBgB,SACpE+G,GAAczI,GAAoBC,kBAAkBS,EAAgBiB,SACpEkH,GAAc7I,GAAoBC,kBAAkBS,EAAgBkB,SACpEqN,GAAUjP,GAAoBC,kBAAkBS,EAAgB2B,KAChEkG,GAAcvI,GAAoBC,kBAAkBS,EAAgB4B,SACpEqG,GAAc3I,GAAoBC,kBAAkBS,EAAgB6B,SACpEwG,GAAc/I,GAAoBC,kBAAkBS,EAAgB8B,SACpEyL,GAAUjO,GAAoBC,kBAAkBS,EAAgBuB,KAChEqG,GAActI,GAAoBC,kBAAkBS,EAAgBwB,SACpEwG,GAAc1I,GAAoBC,kBAAkBS,EAAgByB,SACpE2G,GAAc9I,GAAoBC,kBAAkBS,EAAgB0B,SAEpE4gE,GAAqD,CACzD,CAACd,GAAgBz7D,QAAS,WAC1B,CAAC07D,GAAgB17D,QAAS,WAC1B,CAAC27D,GAAgB37D,QAAS,WAC1B,CAAC47D,GAAgB57D,QAAS,WAC1B,CAAC67D,GAAY77D,QAAS,WACtB,CAAC87D,GAAY97D,QAAS,WACtB,CAAC+7D,GAAY/7D,QAAS,WACtB,CAACg8D,GAAYh8D,QAAS,WACtB,CAACi8D,GAAiBj8D,QAAS,YAC3B,CAACk8D,GAAiBl8D,QAAS,YAC3B,CAACm8D,GAAiBn8D,QAAS,YAC3B,CAACo8D,GAAiBp8D,QAAS,YAC3B,CAACq8D,GAAYr8D,QAAS,YACtB,CAACs8D,GAAYt8D,QAAS,YACtB,CAACyC,GAAQzC,QAAS,UAClB,CAAC4B,GAAY5B,QAAS,YACtB,CAACgC,GAAYhC,QAAS,YACtB,CAACoC,GAAYpC,QAAS,YACtB,CAACwI,GAAQxI,QAAS,SAClB,CAAC8B,GAAY9B,QAAS,WACtB,CAACkC,GAAYlC,QAAS,WACtB,CAACsC,GAAYtC,QAAS,WACtB,CAACwH,GAAQxH,QAAS,SAClB,CAAC6B,GAAY7B,QAAS,WACtB,CAACiC,GAAYjC,QAAS,WACtB,CAACqC,GAAYrC,QAAS,YAGjB,MAAMw8D,WAA+B3D,GAClC4D,WACAC,MACR,WAAA5lF,CAAYiuB,EAAsBqgB,EAA6BF,EAAewQ,GAC5E,IAAKtQ,GAAWhlB,eACd,MAAM,IAAIzpB,MAAM,0BAElB,GAAIuuC,EAAQvC,GAAsBovC,SAChC,MAAM,IAAIp7E,MAAM,oDAElB,GACEuuC,GACCvC,GAAsBqvC,QACrBrvC,GAAsBsvC,SACtBtvC,GAAsBuvC,cACtBvvC,GAAsBwvC,iBAExB,MAAM,IAAIx7E,MAAM,6DAElB,GAAIuuC,EAAQvC,GAAsBwC,YACO,IAAnCC,EAAUnsB,cAAc3gB,SAAiB8sC,EAAUnsB,cAAc,GAAGhiB,KAAK4hB,eAC3E,MAAM,IAAIliB,MAAM,uEAGhBuuC,EAAQvC,GAAsBmvC,YAAc5sC,EAAQvC,GAAsB0vC,cAC5EntC,GAASvC,GAAsB6uC,SAEjC,MAAM1uD,EAASsiB,EAAUhiB,eAAe,EAAGgiB,EAAUtiB,QACrD,GAAI4yB,GAAU5yB,EAAOoB,WAAawxB,EAAOhQ,WACvC,MAAM,IAAI/uC,MACR,yDAAyD++C,EAAOhQ,yBAAyB5iB,EAAOoB,YAGpGvpB,MAAMoqB,EAAQmgB,EAAOwQ,GAAU5yB,EAAOoB,UACtCntB,KAAK2lF,MAAQ,IAAInK,GAAqBzvD,EAAQ/rB,MAC9CA,KAAK0lF,WAAar3C,CACpB,CACAv/B,GAAAA,CAAI9L,EAAc4xC,GAChB50C,KAAK2lF,MAAM72E,IAAI9L,EAAM4xC,EACvB,CACA,aAAIvG,GACF,OAAOruC,KAAK0lF,UACd,CACA,aAAIr3C,CAAUziB,GACZ,GAAIA,IAAOA,EAAG9B,iBAAiB9pB,KAAK0lF,YAAa,CAC/C,MAAM35D,EAASH,EAAGS,eAAe,EAAGT,EAAGG,QACvC,GAAIA,EAAOoB,SAAWntB,KAAK2uC,WACzB,MAAM,IAAI/uC,MAAM,+DAA+DmsB,EAAOoB,YAExFntB,KAAK2lF,MAAQ,IAAInK,GAAqBzvD,EAAQ/rB,MAC9CA,KAAK0lF,WAAa95D,CACpB,CACF,CACA,yBAAOg6D,CAAmB1lF,GACxB,OAAOslF,GAAkBtlF,EAAK+oB,OAChC,ECpGK,MAAM48D,WAAwBnJ,GAClBnsD,QACTu1D,YACAC,SACAC,WACAC,SACAC,UACAC,gBACAC,OACAC,eACAC,gBACAC,WAOR,WAAAxmF,CAAYiuB,EAAsBjC,GAChCnoB,MAAMoqB,GACNhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAKuwB,QAAUxE,EACf/rB,KAAK8lF,YAAc,KACnB9lF,KAAK+lF,SAAW,KAChB/lF,KAAKgmF,WAAa,KAClBhmF,KAAKsmF,gBAAkB,KACvBtmF,KAAKomF,OAAS,EACdpmF,KAAKumF,WAAa,CAAC,EACnBvmF,KAAKimF,SAAW,GAChBjmF,KAAKkmF,UAAY,GACjBlmF,KAAKmmF,gBAAkB,GACvBnmF,KAAKqmF,eAAiB,KACtB,IAAK,MAAM1nB,KAAS3+D,KAAKuwB,QAAQnD,QAC3BuxC,EAAM7wB,QAAU6wB,EAAM7wB,OAAOixB,mBAC1B/+D,KAAKsmF,kBACRtmF,KAAKsmF,gBAAkB,IAEzBtmF,KAAKsmF,gBAAgB3nB,EAAM7wB,OAAO2wB,oBAAsB,EAG9D,CACA,aAAI+nB,GAIF,OAHKxmF,KAAKgmF,aACRhmF,KAAKgmF,WAAahmF,KAAKymF,WAElBzmF,KAAKgmF,UACd,CACA,oBAAIU,GAIF,OAHK1mF,KAAKgmF,aACRhmF,KAAKgmF,WAAahmF,KAAKymF,WAElBzmF,KAAK8lF,WACd,CACA,WAAI14D,GAIF,OAHKptB,KAAKgmF,aACRhmF,KAAKgmF,WAAahmF,KAAKymF,WAElBzmF,KAAK+lF,QACd,CACAY,QAAAA,GACE,MAAO,GAAG3mF,KAAK48E,QAAQ58E,KAAKomF,QAC9B,CACA,cAAIQ,GACF,OAAO5mF,KAAKimF,QACd,CACA,eAAIY,GACF,OAAO7mF,KAAKkmF,SACd,CACAY,UAAAA,GACE9mF,KAAKgmF,WAAa,KAClBhmF,KAAKomF,QACP,CACAW,SAAAA,GACE,OAAO/mF,KAAKuwB,OACd,CACAy2D,iBAAAA,GACE,OAAOhnF,KAAKsmF,eACd,CACAW,SAAAA,CAAUjkF,EAAckkF,GAAW,GACjC,OAAOlnF,KAAKmnF,WACVnkF,EACA4oC,GAAsBmvC,WAAanvC,GAAsB0vC,WACzD4L,EAEJ,CACAE,SAAAA,CAAUpkF,EAAc8qC,EAAuB7gB,EAAiBo6D,EAAqBC,GACnF,MAAM3I,EAAW3+E,KAAKuwB,QAAQktC,UAAUz6D,IAASA,EACjD,IAAK,MAAM27D,KAAS3+D,KAAKuwB,QAAQnD,QAC/B,GAAIuxC,EAAM37D,OAAS27E,EAAU,CAC3B,GAAKhgB,EAAM7wB,OAEJ,CACLu5C,EAAaA,GAAc,EAC3BC,EAAWA,IAAax5C,EAAStrC,KAAKC,IAAI,EAAGqrC,EAAOa,WAAa04C,GAAAA,GACjE,MAAM74C,EAAOxuC,KAAKumF,WAAW5nB,EAAM37D,MAC7BukF,EACkB,YAAtB5oB,EAAM7wB,OAAO5tC,KACT0rC,GAAsBmvC,WACtBnvC,GAAsB0vC,WACvBxtC,GAAYA,EAAOK,MAAQo5C,EAIrBz5C,IAAWU,IAAO,IAAM64C,IAAe74C,IAAO,IAAM84C,IAAa94C,IAAO,KACjFxuC,KAAKumF,WAAW5nB,EAAM37D,MAAQ,CAAC8qC,EAAwBu5C,EAAYC,GACnEtnF,KAAK8mF,cALLvmF,QAAQC,MACN,wCAAwCwC,oBAAuB27D,EAAM7wB,OAAO5tC,SAM5Ey+D,EAAM7wB,OAAOixB,mBACf/+D,KAAKsmF,gBAAgB3nB,EAAM7wB,OAAO2wB,oBAAsBxxC,GAAU,EAEtE,MApBE1sB,QAAQC,MAAM,iCAAiCwC,oBAqBjD,MACF,CAEFzC,QAAQC,MAAM,iDAAiDwC,KACjE,CACAyqE,QAAAA,CAASzqE,EAAc4xC,GACrB,MAAM4yC,EAAaxnF,KAAKuwB,QAAQktC,UAAUz6D,GAC1C,GAAIwkF,EACFxnF,KAAKytE,SAAS+Z,EAAY,CAAExkF,CAACA,GAAO4xC,QAC/B,CACL,MAAM9G,EAAS9tC,KAAKmnF,WAClBnkF,EACA4oC,GAAsBmvC,WAAanvC,GAAsB0vC,YACzD,GAEF,GAAIxtC,EAAQ,CACV,KAAMA,aAAkB23C,IACtB,MAAM,IAAI7lF,MAAM,iCAAiCoD,+BAEnD,GAAK4xC,GAAeqnC,kBAClBnuC,EAAO8gC,cAAc,EAAGh6B,QAExB,IAAK,MAAMtI,KAAKsI,EACd9G,EAAOh/B,IAAIw9B,EAAGsI,EAAMtI,SAIxB/rC,QAAQC,MAAM,+CAA+CwC,KAEjE,CACF,CACAykF,UAAAA,CAAWzkF,EAAc2/E,EAAoB9Z,EAAkB6e,EAAiBhF,GAC9E,MAAM8E,EAAaxnF,KAAKuwB,QAAQktC,UAAUz6D,GAC1C,GAAIwkF,EACFxnF,KAAKynF,WAAWD,EAAY7E,EAAY9Z,EAAM6e,EAAQhF,OACjD,CACL,MAAM50C,EAAS9tC,KAAKmnF,WAClBnkF,EACA4oC,GAAsBmvC,WAAanvC,GAAsB0vC,YACzD,GAEExtC,EACFA,EAAO8gC,cAAc+T,EAAY9Z,EAAM6e,EAAQhF,GAE/CniF,QAAQC,MAAM,mCAAmCwC,KAErD,CACF,CACA2kF,UAAAA,CAAW3kF,GAET,GADchD,KAAK4nF,mBAAmB5kF,GAC3B,CACT,MAAM4I,EAAI5L,KAAKumF,WAAWvjF,GAC1B,OAAO4I,EAAIA,EAAE,GAAK,KAElB,MAAM,IAAIhM,MAAM,uBAAuBoD,qBAE3C,CACA6kF,cAAAA,CACE7kF,EACA4xC,EACAga,EACA74C,EACA+xE,EACAj4B,GAEA,IAAKjb,EACH,MAAM,IAAIh1C,MAAM,2EAA2Eg1C,KACtF,CACL,MAAM+pB,EAAQ3+D,KAAK4nF,mBAAmB5kF,GACtC,IAAI27D,EA2CF,MAAM,IAAI/+D,MAAM,+DAA+DoD,MA3CtE,CACT,GAAI27D,EAAMS,gBACR,MAAM,IAAIx/D,MAAM,6EACX,GAAIg1C,EAAMwoC,iBACf,MAAM,IAAIx9E,MAAM,iEAElB,MAAMgM,EAAI5L,KAAKumF,WAAWvjF,GACpB64E,EAAOjnC,EAA6BmzC,QAAQn5B,EAAO74C,EAAM+xE,GAK/D,GAJKl8E,GAAKA,EAAE,KAAOiwE,IACjB77E,KAAKumF,WAAWvjF,GAAQ,CAAC4xC,EAA4BinC,GACrD77E,KAAK8mF,cAEHnoB,EAAMztB,SAAS+pB,gBAAiB,CAClC,MAAM+sB,EAAehoF,KAAKioF,mBAAmBtpB,EAAMztB,QAAQ+pB,iBAC3D,IAAK+sB,IAAiBA,EAAan4B,QACjC,MAAM,IAAIjwD,MACR,qEAAqE++D,EAAMztB,QAAQ+pB,mBAGvF,MAAM9xD,GACH0mD,GAAWA,EAAQq4B,QAAUtzC,EAAMkb,mBAAkB,GAASD,EAE7D1mD,EAAEk0E,SAAWr9E,KAAKumF,WAAW5nB,EAAMztB,QAAQ+pB,mBAC7Cj7D,KAAKumF,WAAW5nB,EAAMztB,QAAQ+pB,iBAAmB9xD,EAAEk0E,OACnDr9E,KAAK8mF,aAET,CACA,GAAInoB,EAAMztB,SAASouB,0BAA2B,CAC5C,MAAM0oB,EAAehoF,KAAKioF,mBAAmBtpB,EAAMztB,QAAQouB,2BAC3D,IAAK0oB,IAAiBA,EAAan4B,QACjC,MAAM,IAAIjwD,MACR,qEAAqE++D,EAAMztB,QAAQouB,6BAGvF,MAAMn2D,EACH0mD,GAAYA,EAAQq4B,QAA0Cr4B,EAAhCjb,EAAMkb,mBAAkB,GAErD3mD,EAAEk0E,SAAWr9E,KAAKumF,WAAW5nB,EAAMztB,QAAQouB,6BAC7Ct/D,KAAKumF,WAAW5nB,EAAMztB,QAAQouB,2BAA6Bn2D,EAAEk0E,OAC7Dr9E,KAAK8mF,aAET,EAIJ,CACF,CACAhY,UAAAA,CAAW9rE,EAAc4xC,EAAmCib,GAC1D,IAAKjb,EACH,MAAM,IAAIh1C,MAAM,uEAAuEg1C,KAClF,CACL,MAAM+pB,EAAQ3+D,KAAK4nF,mBAAmB5kF,GACtC,IAAI27D,EA2EF,MAAM,IAAI/+D,MAAM,kEAAkEoD,MA3EzE,CACT,MAAM4I,EAAI5L,KAAKumF,WAAWvjF,GAC1B,GAAI27D,EAAMS,gBAAiB,CACzB,IAAKxqB,EAAMwoC,iBACT,MAAM,IAAIx9E,MACR,0EAA0EoD,MAG9E,IAAK4I,GAAKA,IAAMgpC,EAAO,CACjBhpC,GACDA,EAAyBu8E,yBAAyBnoF,MAEjD40C,GACDA,EAA6BwzC,sBAAsBpoF,MAEtDA,KAAKumF,WAAWvjF,GAAQ4xC,EACxB50C,KAAK8mF,aACL9mF,KAAKqmF,eAAiB,GACtB,IAAK,MAAM1nB,KAAS3+D,KAAKuwB,QAAQnD,QAC/B,GAAIuxC,EAAMS,gBAAiB,CACzB,MAAM1uB,EAAM1wC,KAAKumF,WAAW5nB,EAAM37D,MAC9B0tC,GAAO1wC,KAAKqmF,eAAeryC,QAAQtD,GAAO,GAC5C1wC,KAAKqmF,eAAellF,KAAKuvC,EAE7B,CAEJ,MACK,CACL,GAAIkE,EAAMwoC,iBACR,MAAM,IAAIx9E,MACR,0EAA0EoD,MAG9E,MAAM64E,EAAOjnC,EAA6ByzC,iBAC1C,IAAK1pB,EAAMS,kBAAoByc,EAC7B,MAAM,IAAIj8E,MAAM,mEAEbgM,GAAKA,EAAE,KAAOgpC,IACjB50C,KAAKumF,WAAWvjF,GAAQ,CAAC4xC,EAA4BinC,GACrD77E,KAAK8mF,aAET,CACA,MAAM7rB,EAAkB0D,EAAMztB,SAAS+pB,iBAAmB0D,EAAMS,iBAAiBnE,gBACjF,GAAIA,EAAiB,CACnB,MAAM+sB,EAAehoF,KAAKioF,mBAAmBhtB,GAC7C,IAAK+sB,IAAiBA,EAAan4B,QACjC,MAAM,IAAIjwD,MACR,iEAAiEq7D,KAGrE,MAAM9xD,GACH0mD,GAAWA,EAAQq4B,QAAUtzC,EAAMkb,mBAAkB,GAASD,EAE7D1mD,EAAEk0E,SAAWr9E,KAAKumF,WAAWtrB,KAC/Bj7D,KAAKumF,WAAWtrB,GAAmB9xD,EAAEk0E,OACrCr9E,KAAK8mF,aAET,CACA,MAAMxnB,EAA4BX,EAAMztB,SAASouB,0BACjD,GAAIA,EAA2B,CAC7B,MAAM0oB,EAAehoF,KAAKioF,mBAAmB3oB,GAC7C,IAAK0oB,IAAiBA,EAAan4B,QACjC,MAAM,IAAIjwD,MACR,iEAAiE0/D,KAGrE,MAAMn2D,EACH0mD,GAAYA,EAAQq4B,QAA0Cr4B,EAAhCjb,EAAMkb,mBAAkB,GAErD3mD,EAAEk0E,SAAWr9E,KAAKumF,WAAWjnB,KAC/Bt/D,KAAKumF,WAAWjnB,GAA6Bn2D,EAAEk0E,OAC/Cr9E,KAAK8mF,aAET,EAIJ,CACF,CACAwB,UAAAA,CAAWtlF,EAAc4xC,GACvB,MAAMib,EAAWjb,GAAgCyoC,OAC5CxtB,EAEM7vD,KAAKumF,WAAWvjF,KAAU6sD,IAC9B7vD,KAAKioF,mBAAmBjlF,IAG3BhD,KAAKumF,WAAWvjF,GAAQ6sD,EACxB7vD,KAAK8mF,cAHLvmF,QAAQC,MAAM,kEAAkEwC,OAHlFzC,QAAQC,MAAM,uEAAuEo0C,IASzF,CACAogC,OAAAA,GACEh1E,KAAK8mF,aACL9mF,KAAKumF,WAAa,CAAC,EACnBvmF,KAAKimF,SAAW,GAChBjmF,KAAKkmF,UAAY,GACjBlmF,KAAKqmF,eAAiB,KACtBrmF,KAAK28E,QAAU,KACf,IAAK,MAAM7uC,KAAU9tC,KAAKmmF,gBACxBr4C,EAAOxxB,UAETtc,KAAKmmF,gBAAkB,EACzB,CACAjR,OAAAA,GACEl1E,KAAK8mF,aACL9mF,KAAK28E,QAAU,CAAC,CAClB,CACA5C,WAAAA,GACE,OAAO,CACT,CAEAwO,mBAAAA,GACEvoF,KAAKqmF,gBAAgB7/B,QAAS56C,IACxBA,EAAE48E,oBACJxoF,KAAK8mF,cAGX,CAEQc,kBAAAA,CAAmB5kF,GACzB,IAAK,MAAM27D,KAAS3+D,KAAKuwB,QAAQnD,QAC/B,IAAKuxC,EAAMztB,SAAWytB,EAAMO,gBAAkBP,EAAMS,kBAAoBT,EAAM37D,OAASA,EACrF,OAAO27D,EAGX,OAAO,IACT,CAEQspB,kBAAAA,CAAmBjlF,GACzB,IAAK,MAAM27D,KAAS3+D,KAAKuwB,QAAQnD,QAC/B,GAAIuxC,EAAM9O,SAAW8O,EAAM37D,OAASA,EAClC,OAAO27D,EAGX,OAAO,IACT,CAEA,UAAAwoB,CAAmBnkF,EAAcmrC,EAAe+4C,GAAW,GACzD,MAAM14C,EAAOxuC,KAAKyoF,eAAezlF,EAAMmrC,EAAO+4C,GAC9C,OAAO14C,IAAO,IAAM,IACtB,CAEA,cAAAi6C,CAAuBzlF,EAAcmrC,EAAe+4C,GAAW,GAC7D,MAAMvI,EAAW3+E,KAAKuwB,QAAQktC,UAAUz6D,IAASA,EACjD,IAAK,MAAM27D,KAAS3+D,KAAKuwB,QAAQnD,QAC/B,GAAIuxC,EAAM7wB,QAAU6wB,EAAM37D,OAAS27E,EAAU,CAC3C,MAAM4I,EACkB,YAAtB5oB,EAAM7wB,OAAO5tC,KACT0rC,GAAsBmvC,WACtBnvC,GAAsB0vC,WAC5B,KAAMntC,EAAQo5C,GACZ,OAAO,KAET,IAAIz5C,EAAS9tC,KAAKumF,WAAW5nB,EAAM37D,MAKnC,IAJKkkF,GAAYp5C,IAAS,IAAIzxB,WAC5ByxB,EAAO,GAAK,KACZ9tC,KAAK8mF,gBAEDh5C,GAAWA,EAAO,IAAQo5C,GAAU,CACxC,MAAMnmF,EAAiC,CACrCotC,MAAOo5C,IAAgB37C,GAAsBmvC,WAAa,UAAY,KACtEh1B,QAASwhC,IAAgB37C,GAAsB0vC,WAC/CnM,SAAS,GAELuZ,EAAY1oF,KAAK8vC,QAAQimC,uBAC7BpX,EAAMz+D,KACNa,GAEF+sC,EAAS,CAAC46C,EAAW,EAAGA,EAAU/5C,YAClC3uC,KAAKumF,WAAW5nB,EAAM37D,MAAQ8qC,EAC9B9tC,KAAKmmF,gBAAgBhlF,KAAKunF,EAC5B,CACA,OAAO56C,CACT,CAEF,OAAO,IACT,CAEA,OAAA24C,GACE,IAAID,EAAY,KAChBxmF,KAAK8lF,YAAc,KACnB9lF,KAAK+lF,SAAW,KAChB/lF,KAAKkmF,UAAY,GACjBlmF,KAAKimF,SAAW,GAChB,MAAM74D,EAAU,GAChB,IAAIu7D,GAAa,EACjB,IAAK,MAAMhqB,KAAS3+D,KAAKuwB,QAAQnD,QAAS,CACxC,MAAMw7D,EAAK,CAAElnC,QAASid,EAAMjd,SAC5B,GAAIid,EAAM7wB,OAAQ,CAChB,MAAMA,EAAS9tC,KAAKyoF,eAClB9pB,EAAM37D,KACgB,YAAtB27D,EAAM7wB,OAAO5tC,KACT0rC,GAAsBmvC,WACtBnvC,GAAsB0vC,YAC1B,GAEF,IAAKxtC,EACH,MAAM,IAAIluC,MACR,mBAAmB++D,EAAM37D,mEAGzBhD,KAAKimF,SAASjyC,QAAQlG,EAAO,IAAM,GACrC9tC,KAAKimF,SAAS9kF,KAAK2sC,EAAO,IAE5B86C,EAAGC,SAAW,CACZ/6C,OAAQA,EAAO,GAAGuvC,OAClBpwD,OAAQ6gB,EAAO,GACflrB,KAAMkrB,EAAO,IAEf66C,EAAaA,KAAgB76C,EAAO,GAAGuvC,MACzC,MAAO,GAAI1e,EAAMztB,SAAWytB,EAAMO,eAAgB,CAChD,MAAMtzD,EAAI5L,KAAKumF,WAAW5nB,EAAM37D,MAC3B4I,GAIC5L,KAAKkmF,UAAUlyC,QAAQpoC,EAAE,IAAM,GACjC5L,KAAKkmF,UAAU/kF,KAAKyK,EAAE,IAExBg9E,EAAGC,SAAWj9E,EAAE,GAChB+8E,EAAaA,KAAgB/8E,EAAE,KAP/BrL,QAAQC,MAAM,kCAAkCm+D,EAAM37D,QACtD2lF,GAAa,EAQV,MAAA,GAAIhqB,EAAMS,gBAAiB,CAChC,MAAMxzD,EAAI5L,KAAKumF,WAAW5nB,EAAM37D,MAChC4lF,EAAGC,SAAWj9E,EAAEyxE,OAChBsL,EAAaA,KAAgB/8E,EAAEyxE,MAC1B,MAAA,GAAI1e,EAAM9O,QAAS,CACxB,MAAMA,EAAU7vD,KAAKumF,WAAW5nB,EAAM37D,MACtC4lF,EAAGC,SAAWh5B,EACd84B,EAAaA,KAAgB94B,CAC/B,CACAziC,EAAQjsB,KAAKynF,EACf,CACA,IAAKD,EACH,OAAO,KAET,MAAOryC,EAAMvqB,GAAU/rB,KAAK8vC,QAAQwvC,qBAAqBt/E,KAAKuwB,SACxDu4D,EAAqC,CACzC/8D,OAAQA,EACRqB,WAWF,OATIrB,EAAOosC,QACT2wB,EAAW3wB,MAAQ,GAAGpsC,EAAOosC,mBAE/BquB,EAAYxmF,KAAK8vC,QAAQi5C,mBAAmBD,GACvCtC,GACHjmF,QAAQC,MAAM,2BAEhBR,KAAK8lF,YAAcxvC,EACnBt2C,KAAK+lF,SAAW34D,EACTo5D,CACT,EC7eWwC,MAAAA,GAAiE,CAC5EC,OAAQ,SACR,kBAAmB,gBACnBn+B,MAAO,iBAGIo+B,GAA6D,CACxEC,QAAS,UACTC,OAAQ,SACRC,UAAM5nF,GAGK6nF,GAA0D,CACrEC,OAAQ,SACRC,GAAI,aACJZ,GAAI,gBACJa,GAAI,OACJC,GAAI,UACJC,GAAI,QACJC,GAAI,YACJC,MAAO,SAGIC,GAAuD,CAClEC,KAAM,OACNC,QAAS,UACTjkF,KAAM,OACNyJ,OAAQ,SACR4zC,KAAM,kBACN6mC,KAAM,kBACN,YAAa,iBACb,YAAa,kBAGFC,GAAgE,CAC3E,gBAAiB,gBACjB,iBAAkB,iBAClB,eAAgB,KAChB,YAAa,YACb,aAAc,aACd,aAAc,cAQHC,GAA6C,CACxDC,KAAM,OACNC,MAAO,QACPhB,KAAM,QAGKiB,GAA6D,CACxE1lF,IAAK,MACL2lF,SAAU,WACV,mBAAoB,mBACpB1kF,IAAK,MACLpD,IAAK,OAGM+nF,GAAkD,CAC7D,cAAe,WACf,cAAe,WACf,YAAa,MACb,YAAa,YACb,kBAAmB,qBACnB,kBAAmB,qBACnB,gBAAiB,gBACjB,gBAAiB,sBACjB,YAAa,MACb,YAAa,YACb,gBAAiB,gBACjB,gBAAiB,sBACjB,qBAAsB,sBACtBxkF,IAAK,MACLD,KAAM,QAGK0kF,GAA6C,CACxDC,QAAS,IACTC,UAAW,IACXC,UAAW,IACXC,UAAW,IACXC,OAAQ,IACRC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,OAAQ,IACRC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,UAAW,IACXC,UAAW,IACXC,SAAU,IACVC,SAAU,IACVC,UAAW,IACXC,UAAW,IACXC,QAAS,IACTC,QAAS,IACTC,SAAU,IACVC,SAAU,IACVC,QAAS,IACTC,QAAS,IACTC,SAAU,IACVC,SAAU,KAGCruE,GAA4D,CACvEC,QAAa,KACbqB,WAAgB,aAChBC,WAAgB,aAChBC,WAAgB,aAChBe,KAAU,iBACVC,KAAU,iBACVC,KAAU,iBACV,YAAe,sBACf,YAAe,sBACf,YAAe,sBACfC,IAAS,cACT,aAAgB,cAChBC,IAAS,eACT,aAAgB,eAChBC,KAAU,kBACV,cAAiB,iBACjBC,IAAS,iBACT,WAAc,sBACd,WAAc,iBACd,gBAAmB,sBACnB,WAAc,iBACd,gBAAmB,sBACnB,WAAc,iBACd,gBAAmB,sBACnB,WAAc,iBACd,gBAAmB,sBACnB,WAAc,iBACd,gBAAmB,sBACnB,WAAc,iBACd,gBAAmB,sBACnB,WAAc,iBACd,gBAAmB,sBACnB,WAAc,iBACd,gBAAmB,sBACnB,YAAe,kBACf,iBAAoB,uBACpB,YAAe,kBACf,iBAAoB,uBACpB,YAAe,kBACf,iBAAoB,uBACpB,aAAgB,mBAChB,kBAAqB,wBACrB,aAAgB,mBAChB,kBAAqB,wBACrB,aAAgB,mBAChB,kBAAqB,wBACrB3C,QAAa,UACbC,QAAa,UACbC,KAAU,WACVC,KAAU,WACVC,KAAU,SACVC,IAAS,SACTC,MAAW,UACXC,KAAU,UACVC,MAAW,UACXC,KAAU,UACVC,SAAc,WACdC,SAAc,WACdC,MAAW,YACXC,MAAW,YACXC,MAAW,UACXC,KAAU,UACVC,OAAY,WACZC,MAAW,WACXC,OAAY,WACZC,MAAW,WACX,kBAAqB,kBACrB,kBAAqB,kBACrBI,QAAa,cACbC,QAAa,cACbC,QAAa,YACbC,OAAY,YACZC,SAAc,aACdC,QAAa,aACbC,SAAc,aACdC,QAAa,aACbC,UAAe,gBACfC,IAAS,eACTC,IAAS,cACTC,KAAU,eACVE,OAAY,wBACZD,MAAW,wBAGb,SAASisE,GAAgBj4C,EAAgBk4C,GACvC,MAAMx8B,EAAyB,CAAC,EAC1BnpD,EAAMytC,EAAK9yC,OACjB,IAAK,IAAID,EAAI,EAAGA,EAAIsF,EAAKtF,IACvByuD,EAAI1b,EAAK/yC,IAAMirF,EAAOjrF,GAExB,OAAOyuD,CACT,CAEO,MAAMy8B,GAAsBF,GACjCl4C,OAAOm4C,OAAOvuE,IACdo2B,OAAOC,KAAKr2B,KAGDyuE,GAA6CH,GACxDl4C,OAAOm4C,OAAO9B,IACdr2C,OAAOC,KAAKo2C,KCxNP,MAAMiC,GACX3iE,sBACE,CAAG,EACLA,sBAAsD,KACtDA,0BAA6C,IAAIxiB,EAAQ,EAAG,EAAG,EAAG,GAElE,oBAAOolF,CACLC,EACAC,EACAC,EACAC,GAEK/sF,KAAKgtF,gBACRhtF,KAAKitF,cAAcL,GAErB,MAAM37C,EAAO27C,EAAWM,qBAAqBC,UACvCtV,EAAU73E,KAAKotF,gBAAgBR,EAAWvuC,YAAapN,GACvDo8C,IAAgBR,EAChBS,IAAgBR,MAAAA,GAChBS,IAAkBR,MAAAA,GACxBlV,EAAQ2O,UAAU/Y,SAAS,aAAcqf,GAAc,GACvDjV,EAAQ2O,UAAU/Y,SAAS,aAAcof,GAAc7sF,KAAKwtF,oBAC5DxtF,KAAKgtF,eAAe3c,gBAAgBE,YAAY+c,GAChDttF,KAAKgtF,eAAeS,gBAAgBC,aAAaL,EAAaA,EAAaA,EAAaA,GACxFrtF,KAAKgtF,eACFW,kBACAzd,OAAOqd,GACPK,aAAaL,EAAgBR,EAAe,GAC/CH,EACGvuC,YACAwvC,aAAa9e,KACZ8I,EAAQA,QACR,KACA73E,KAAKgtF,eACL,CAACnV,EAAQ2O,WACT,KACA,iBACA,EACA,EACA,EAEN,CACA,sBAAe4G,CACbp/D,EACAijB,GAEA,IAAI68C,EAAc9tF,KAAK+tF,eAAe98C,GACtC,IAAK68C,EAAa,CAChB,MAAMx7C,EAAmBrB,EAAK+8C,MAAM,IAC9BnW,EAAU7pD,EAAOiqC,mBAAmB,CACxCE,MAAO,aAAalnB,IACpBirB,MAAAA,CAAOzlB,GACLz2C,KAAK8sF,WAAar2C,EAAGp5B,QAAQy+B,QAAQ,GACrC97C,KAAKqvD,OAAS,CAAC5Y,EAAGwZ,MAAS,EAAA,GAAIxZ,EAAGwZ,KAAK,EAAG,GAAIxZ,EAAGwZ,MAAM,MAAQxZ,EAAGwZ,KAAK,GAAI,IAC3ExZ,EAAGiiB,KAAK,WACN14D,KAAKogE,UAAUv1B,SAAW4L,EAAGuZ,KAAKhwD,KAAKqvD,OAAO3I,GAAG1mD,KAAKogE,UAAU7nB,aAAcv4C,KAAK8sF,WAAY,EACjG,EACF,EACAvwB,QAAAA,CAAS9lB,GAEP,GADAz2C,KAAK6sF,WAAap2C,EAAGuZ,OAAOlU,QAAQ,GACJ,IAA5BxJ,EAAiB/wC,OACnBvB,KAAK88D,SAASmxB,SAAWx3C,EAAGuZ,OAC5BvZ,EAAGiiB,KAAK,WACN14D,KAAK88D,SAASmxB,SAAWjuF,KAAK6sF,UAChC,OACK,CACL,IAAK,IAAIvrF,EAAI,EAAGA,EAAIgxC,EAAiB/wC,OAAQD,IAC3CtB,KAAK88D,SAAS,WAAWx7D,KACC,MAAxBgxC,EAAiBhxC,GACbm1C,EAAGuZ,OACqB,MAAxB1d,EAAiBhxC,GACfm1C,EAAGwc,QACHxc,EAAGyc,QAEbzc,EAAGiiB,KAAK,WACN,IAAK,IAAIp3D,EAAI,EAAGA,EAAIgxC,EAAiB/wC,OAAQD,IAC3CtB,KAAK88D,SAAS,WAAWx7D,KACC,MAAxBgxC,EAAiBhxC,GACbtB,KAAK6sF,WACmB,MAAxBv6C,EAAiBhxC,GACfm1C,EAAGwc,MAAMjzD,KAAK6sF,YACdp2C,EAAGyc,MAAMlzD,KAAK6sF,WAE1B,EACF,CACF,IAGFiB,EAAc,CACZjW,UACA2O,UAHgBx4D,EAAO+hD,gBAAgB8H,EAAQtf,iBAAiB,KAKlEv4D,KAAK+tF,eAAe98C,GAAQ68C,CAC9B,CACA,OAAOA,CACT,CACA,oBAAeb,CAAcL,GAC3B5sF,KAAKgtF,eAAiBJ,EAAWvuC,YAAY2xB,uBAC7ChwE,KAAKgtF,eAAe3c,gBAAgBC,YAAW,GAC/CtwE,KAAKgtF,eAAexc,qBAAqBC,YAAY,QACrDzwE,KAAKgtF,eACFW,kBACAzd,QAAO,GACPge,WAAW,UAAW,UAAW,WACjCC,UAAU,UAAW,UAAW,WAChCC,oBAAoB,UACpBC,mBAAmB,SACxB,EAGK,MAAMC,GACXvkE,wBAA2C,KAC3CA,gCAAiD,KACjDA,iCAAyD,KACzD,yCAAOwkE,CAAmCvgE,GAIxC,OAHKhuB,KAAKwuF,0BACRxuF,KAAKyuF,qBAAqBzgE,GAErBhuB,KAAKwuF,yBAAyBj2B,iBAAiB,EACxD,CACA,qBAAOm2B,CAAe1gE,EAAsB0iB,EAAwBkzC,GAClE,IAAKlzC,EAAIi+C,eACP,OAEG3uF,KAAKwuF,0BACRxuF,KAAKyuF,qBAAqBzgE,GAE5B,MAAM21D,EAAUC,GAAc51D,EAAOA,OAAO61D,uBACtC+K,EAAYl+C,EAAIm+C,cAChBp9C,EAAYf,EAAIysC,gBAAkB,EAAIzsC,EAAIusC,mBAAqBvsC,EAAIvzB,MAAQ,EACjFuzB,EAAIo+C,gBAAe,GACnB,IAAK,IAAI/4E,EAAO,EAAGA,EAAO07B,EAAW17B,IACnC,IAAK,IAAI64C,EAAQ,EAAGA,EAAQggC,EAAWhgC,IACrC5uD,KAAK+uF,iBAAiB/gE,EAAQ21D,EAASjzC,EAAKA,EAAI2sC,OAAQ3sC,EAAIs+C,UAAWpgC,EAAOA,EAAO74C,GAGpF6tE,GACH51D,EAAOA,OAAO+1D,MAAMC,OAAO,CAACL,EAAQM,UAExC,CACA,mCAAOgL,CAA6BjhE,EAAsBukD,GACxD,IAAK,MAAMiU,KAAajU,EACtB,GAAIiU,EACF,IAAK,MAAM91C,KAAO81C,EAAUK,aACrBn2C,EAAIr0B,UAAYq0B,EAAIw+C,iBACvBZ,GAAsBI,eAAe1gE,EAAQ0iB,EAKvD,CACA,uBAAeq+C,CACb/gE,EACAmhE,EACAC,EACAC,EACAtuE,EACAuuE,EACAC,EACAx5E,GAEA,MAAMy5E,EAAoBxvF,KAAKyvF,0BAA0BN,EAAgBE,EAAQtuE,EAAQuuE,EAAUv5E,GACnGy5E,EAAkBvhB,aAAa,EAAGmhB,EAAOM,6BAA6BH,EAAUx5E,GAAMywE,WACtF,MAAMmJ,EAAW3hE,EAAO4hE,cAAcC,oBACpC7vF,KAAKwuF,yBACL,KACAxuF,KAAK8vF,0BACL,iBACA9vF,KAAK+vF,kBAEHJ,IACFH,EAAkBQ,YAAYL,GAC9BH,EAAkBzgB,KAAK,EAAG,EAAG,IAE/BygB,EAAkBhgD,KACpB,CACA,gCAAeigD,CACb9L,EACAzyC,EACAnwB,EACA6tC,EACA74C,GAEA,MAAMk6E,EAAoC,CACxC39C,iBAAkB,CAChB,CACEupC,KAAM3qC,EAAQg/C,WAAW,CACvBvtE,UAAW,KACXwtE,aAAcvhC,GAAS,EACvBigC,cAAe,EACfuB,eAAgBr6E,GAAQ,EACxBs6E,gBAAiB,IAEnBC,OAAQ,QACRC,WAAY,CAAC,EAAG,EAAG,EAAG,GACtBC,QAAS,WAIfxwF,KAAK+vF,iBAAmB,CACtBU,YAAa,KACbC,aAAc,CAAC3vE,GACf4vE,YAAa,KACb3+C,YAAa,EACbf,KAAM,KACNk8C,UAAW,MAEbntF,KAAK+vF,iBAAiB9+C,KAAO,GAAGjxC,KAAK+vF,iBAAiBW,aAAaztF,KAAK,QACtEjD,KAAK+vF,iBAAiBY,eACpB3wF,KAAK+vF,iBAAiB/9C,cAC1B,MAAMw9C,EAAoB7L,EAAQiN,gBAAgBX,GAElD,OADAT,EAAkBqB,kBAAkB,oBAC7BrB,CACT,CACA,2BAAef,CAAqBzgE,GAClChuB,KAAKwuF,yBAA2BxgE,EAAOiqC,mBAAmB,CACxDE,MAAO,mBACP+D,MAAAA,CAAOzlB,GACLz2C,KAAK88D,SAASg0B,MAAQr6C,EAAGwZ,OACzBjwD,KAAKqvD,OAAS,CAAC5Y,EAAGwZ,MAAS,EAAA,GAAIxZ,EAAGwZ,KAAK,EAAG,GAAIxZ,EAAGwZ,MAAM,MAAQxZ,EAAGwZ,KAAK,GAAI,IAC3EjwD,KAAKyvE,GAAK,CAACh5B,EAAGwZ,KAAK,EAAG,GAAIxZ,EAAGwZ,KAAK,EAAG,GAAIxZ,EAAGwZ,KAAK,EAAG,GAAIxZ,EAAGwZ,KAAK,EAAG,IACnExZ,EAAGiiB,KAAK,WACN14D,KAAKogE,UAAUv1B,SAAW4L,EAAGuZ,KAAKhwD,KAAKqvD,OAAO3I,GAAG1mD,KAAKogE,UAAU7nB,aAAc,EAAG,GACjFv4C,KAAK88D,SAASg0B,MAAQ9wF,KAAKyvE,GAAG/oB,GAAG1mD,KAAKogE,UAAU7nB,YAClD,EACF,EACAgkB,QAAAA,CAAS9lB,GACPz2C,KAAK88D,SAASiQ,MAAQt2B,EAAGuZ,OACzBhwD,KAAK0wC,IAAM+F,EAAGsd,QAAQjY,QAAQ,GAC9BrF,EAAGiiB,KAAK,WACN14D,KAAK88D,SAASiQ,MAAQt2B,EAAGka,mBAAmB3wD,KAAK0wC,IAAK1wC,KAAKqgE,QAAQywB,MAAO,EAC5E,EACF,IAEF9wF,KAAK8vF,0BAA4B9hE,EAAOgiD,uBACxChwE,KAAK8vF,0BAA0Bzf,gBAAgBC,YAAW,GAAOC,aAAY,GAC7EvwE,KAAK8vF,0BAA0Btf,qBAAqBC,YAAY,OAClE,ECtNK,MAAesgB,WAEZrU,GACEsU,QACAnlB,MACAj8B,SACAqhD,OACAC,aACAC,aACAC,OACA72E,OACAC,QACA62E,OACAC,QACAC,YACAC,IACAC,WACAC,eACAC,gBACA1P,YACA2P,eACA1P,gBACV,WAAAniF,CAAYiuB,EAAsBvY,GAChC7R,MAAMoqB,GACNhuB,KAAKgxF,QAAUv7E,EACfzV,KAAKoxF,OAAS,EACdpxF,KAAKua,OAAS,EACdva,KAAKwa,QAAU,EACfxa,KAAKqxF,OAAS,EACdrxF,KAAKuxF,aAAc,EACnBvxF,KAAKwxF,KAAM,EACXxxF,KAAKsxF,QAAU,UACftxF,KAAKyxF,WAAa,KAClBzxF,KAAK0xF,eAAiB,EACtB1xF,KAAK2xF,gBAAkB,KACvB3xF,KAAK4vC,SAAW,EAChB5vC,KAAKmxF,cAAe,EACpBnxF,KAAK4xF,eAAiB,GACtB5xF,KAAKixF,OAAS,GACdjxF,KAAKkxF,aAAe,KACpBlxF,KAAKiiF,YAAc,IAAIjC,GAAiBhyD,GACxChuB,KAAKkiF,gBAAkB,EACzB,CACA,QAAIjxC,GACF,OAAOjxC,KAAK28E,QAAU38E,KAAK8vC,QAAQsyC,iBAAiBpiF,KAAK28E,SAAW,CACtE,CACA,UAAIlnE,GACF,OAAOzV,KAAKgxF,OACd,CACA,SAAIv2E,GACF,OAAOza,KAAKua,MACd,CACA,UAAIG,GACF,OAAO1a,KAAKwa,OACd,CACA,SAAI2C,GACF,OAAOnd,KAAKqxF,MACd,CACA,WAAI//C,GACF,OAAOtxC,KAAK4vC,QACd,CACA,UAAI7uB,GACF,OAAO/gB,KAAKsxF,OACd,CACA,iBAAIzC,GACF,OAAO7uF,KAAK0xF,cACd,CACA,aAAI1C,GACF,OAAOhvF,KAAKyxF,UACd,CACA,kBAAI/W,GACF,OAAO16E,KAAK2xF,eACd,CACA,kBAAIjX,CAAe35E,GACjB,MAAMq3D,EAASp4D,KAAM6xF,iBAAuCC,qBAAqB9xF,KAAKsxF,SACtFtxF,KAAK2xF,gBAAkB5wF,EACnBqzC,OAAOyhC,OAAO,CAAC,EAAG71E,KAAK+xF,mBAAmB35B,IAAUr3D,EAAQmnF,SAAUnnF,GACtE,IACN,CAoBA04E,SAAAA,GACE,OAAO,CACT,CACAuY,YAAAA,GACE,QAAKhyF,KAAK6xF,iBAAiBC,qBAAqB9xF,KAAKsxF,UAAUW,UAIjE,CAEAC,mBAAAA,GACMlyF,KAAKkiF,gBAAgB3gF,OAAS,IAChCvB,KAAKkiF,gBAAkB,GACvBliF,KAAK0jF,iBAAiB,MACtB1jF,KAAKkkF,iBAET,CACAgL,aAAAA,GACE,OAAOlvF,KAAKmxF,YACd,CACArC,cAAAA,CAAexsF,GACbtC,KAAKmxF,aAAe7uF,CACtB,CACA0yE,OAAAA,GACE,GAAIh1E,KAAK28E,QAAS,CACX38E,KAAKo9E,kBACPp9E,KAAK28E,QAAuB3H,UAE/Bh1E,KAAK28E,QAAU,KACf38E,KAAK8vC,QAAQ+oC,uBAAuB74E,KAAK4vC,UACzC5vC,KAAK4vC,SAAW,EAChB5vC,KAAKiiF,YAAYnxC,QACjB9wC,KAAKixF,OAAS,GACd,IAAK,MAAMl7E,KAAQ/V,KAAK4xF,eACtB,IAAK,MAAMhjC,KAAS74C,EAClB64C,GAAOtyC,UAGXtc,KAAK4xF,eAAiB,EACxB,CACF,CACA1c,OAAAA,GACOl1E,KAAK28E,SAAY38E,KAAK8vC,QAAQilC,iBACjC/0E,KAAKq6C,MAET,CACAw3C,cAAAA,GACE,OAAO7xF,KAAK8vC,QAAQqiD,gBAAgBC,WACtC,CACAC,YAAAA,GACE,O5BqmDgCtxE,E4BrmDL/gB,KAAKsxF,W5BnCf,IAyoDTtzE,EAAiB+C,IADtB,IAA6BA,C4BpmDlC,CACAuxE,aAAAA,GACE,O5B2jDiCvxE,E4B3jDL/gB,KAAKsxF,W5BzCf,GAqmDVtzE,EAAiB+C,IADtB,IAA8BA,C4B1jDnC,CACAwxE,eAAAA,GACE,OAAOrxE,EAAuBlhB,KAAKsxF,QACrC,CACAkB,cAAAA,GACE,OAAOrxE,EAAsBnhB,KAAKsxF,QACpC,CACAmB,kBAAAA,GACE,O5BglDsC1xE,E4BhlDL/gB,KAAKsxF,W5BzDP,UA0oDvBtzE,EAAiB+C,IADtB,IAAmCA,C4B/kDxC,CACAugD,OAAAA,GACE,OAAOtgD,EAAgBhhB,KAAKsxF,QAC9B,CACA3C,YAAAA,GACE,OAAO3uF,KAAKuxF,WACd,CACAxJ,OAAAA,CAAQn5B,EAAgB74C,EAAe+xE,GAarC,OAZAl5B,EAAQzrD,OAAOyrD,IAAU,EACzB74C,EAAO5S,OAAO4S,IAAS,EACvB+xE,EAAW3kF,OAAO2kF,IAAa,EAC1B9nF,KAAKixF,OAAOl7E,KACf/V,KAAKixF,OAAOl7E,GAAQ,IAEjB/V,KAAKixF,OAAOl7E,GAAM64C,KACrB5uD,KAAKixF,OAAOl7E,GAAM64C,GAAS,IAExB5uD,KAAKixF,OAAOl7E,GAAM64C,GAAOk5B,KAC5B9nF,KAAKixF,OAAOl7E,GAAM64C,GAAOk5B,GAAY9nF,KAAKkwF,WAAWthC,EAAO74C,EAAM+xE,IAE7D9nF,KAAKixF,OAAOl7E,GAAM64C,GAAOk5B,EAClC,CACAO,cAAAA,GAcE,OAbKroF,KAAKkxF,eAAgBlxF,KAAK28E,SAAY38E,KAAKo9E,mBAC9Cp9E,KAAKkxF,aAAelxF,KAAK8vC,QAAQ4iD,qBAAqB1yF,KAAK28E,QAAuB,CAChFh6D,UAAW3iB,KAAKm9E,gBACZ,OACAn9E,KAAKk9E,cACH,KACAl9E,KAAKi9E,mBACH,WACA,KACRoT,gBAAiBrwF,KAAKm9E,gBAAkB,EAAIn9E,KAAKi9E,mBAAqBj9E,KAAKqxF,OAAS,EACpFp+E,OAAQ+N,EAAgBhhB,KAAK+gB,QAAU,aAAe,SAGnD/gB,KAAKkxF,YACd,CACAyB,qBAAAA,CACE3uF,EACAE,EACAuD,EACA2L,EACAw/E,EACAhkC,EACA9gB,GAEA,GAAI9tC,KAAKo9E,iBACP,MAAM,IAAIx9E,MAAM,4EAElBI,KAAKsjF,OACLyN,GAAkB8B,0BAChB7yF,KAAK8vC,QAAQ9hB,OACbhuB,KAAKq9E,OACLr9E,KAAK+gB,OACL/c,EACAE,EACAuD,EACA2L,EACAw/E,EACAhkC,EACA9gB,EAEJ,CACAglD,eAAAA,GACE9yF,KAAKmxF,cAAe,EACpBnxF,KAAK8vC,QAAQijD,cAAc/yF,KAC7B,CACA0jF,gBAAAA,CAAiBC,GACf,IAAK3jF,KAAKo9E,kBAAoBp9E,KAAKkiF,gBAAgB3gF,OAAS,GAAKvB,KAAK28E,QAAS,CAC7E,MAAMiH,EAAaD,GAAW3jF,KAAK8vC,QAAQ9hB,OAAO61D,uBAClD,IAAK,MAAM9oB,KAAK/6D,KAAKkiF,gBACnB,GAAKnnB,EAAoB4lB,aAAc,CACrC,MAAMG,EAAS/lB,EACf6oB,EAAWoP,oBACT,CACEllD,OAAQgzC,EAAOH,aAAa7yC,OAC5B7gB,OAAQ6zD,EAAOH,aAAa1zD,OAC5BgmE,YAAanS,EAAOoS,aACpBC,aAAcrS,EAAOsS,cAEvB,CACEliD,QAASlxC,KAAK28E,QACd0W,OAAQ,CACNrvF,EAAG88E,EAAOwS,cACVpvF,EAAG48E,EAAOyS,cACVtsF,EAAG65E,EAAO0S,eAEZC,SAAU3S,EAAO2S,UAEnB,CACEh5E,MAAOqmE,EAAO4S,YACdh5E,OAAQomE,EAAOsS,aACfO,mBAAoB7S,EAAO8S,aAGjC,MAAO,GAAK74B,EAAkB84B,MAAO,CACnC,MAAM/S,EAAS/lB,EAET+4B,EAAsC,CAC1C5iD,QAASlxC,KAAK28E,QACd0W,OAAQ,CACNrvF,EAAG88E,EAAOiT,QACV7vF,EAAG48E,EAAOkT,QACV/sF,EAAG65E,EAAOmT,SAEZR,SAAU3S,EAAO2S,SACjBS,oBAAoB,GAEtBl0F,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMoQ,2BACxB,CACEx1C,OAAQmiC,EAAO+S,MACfR,OAAQ,CACNrvF,EAAG88E,EAAOsT,KACVlwF,EAAG48E,EAAOuT,OAGdP,EACA,CACEr5E,MAAOqmE,EAAOrmE,MACdC,OAAQomE,EAAOpmE,OACfi5E,mBAAoB7S,EAAO3jE,OAGjC,CAEFnd,KAAKkiF,gBAAgB3gF,OAAS,EACzBoiF,GACH3jF,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMC,OAAO,CAACJ,EAAWK,WAE/CjkF,KAAKiiF,YAAYjB,cACnB,CACF,CACAkD,cAAAA,GACMlkF,KAAKoxF,OAASxlD,GAAsB6uC,QACtCz6E,KAAKiiF,YAAYf,aAEjBlhF,KAAKiiF,YAAYnxC,OAErB,CACAgf,iBAAAA,CAAkBwkC,GAChB,MAAMl8B,EAASp4D,KAAM6xF,iBAAuCC,qBAAqB9xF,KAAKsxF,SACtF,OAAOtxF,KAAK8vC,QAAQykD,cACjBv0F,KAAK2xF,kBAAoB3xF,KAAK2xF,gBAAgBzJ,UAAaoM,EAExDt0F,KAAK2xF,gBADL3xF,KAAK+xF,mBAAmB35B,EAAQk8B,GAGxC,CAGA,IAAAhR,GACEtjF,KAAK8vC,QAAQy+B,QAaf,kBAAAimB,CAA6BzzE,EAAuBtG,EAAeC,EAAgB22E,GACjF,GAAIrwE,EAAgBD,IAAW/gB,KAAKk9E,eAAiBl9E,KAAKo9E,iBACxD,OAAO,EAET,GAAIp9E,KAAKoxF,OAASxlD,GAAsByuC,aACtC,OAAO,EAET,MAAMjiB,EAASp4D,KAAM6xF,iBAAuCC,qBAAqB/wE,GACjF,OAAKq3C,GAAWA,EAAOq8B,WAGhBjyF,KAAKksC,MAAMlsC,KAAK+nD,KAAK/nD,KAAKC,IAAIgY,EAAOC,KAAY,EAF/C,CAGX,CAEUg6E,aAAAA,CACR3zE,EACAtG,EACAC,EACAyC,EACAw3E,GAEA,IAAI30F,KAAKo9E,iBAAT,CAGA,GAAqB,IAAjBuX,EACFA,EAAe30F,KAAKw0F,mBAAmBzzE,EAAQtG,EAAOC,EAAQyC,QACzD,GAAqB,IAAjBw3E,EAAoB,CAC7B,IAAI/xE,EAAOpgB,KAAKC,IAAIgY,EAAOC,GACvB1a,KAAKk9E,gBACPt6D,EAAOpgB,KAAKC,IAAImgB,EAAMzF,IAExB,MAAMy3E,EAAoBpyF,KAAKksC,MAAMlsC,KAAK+nD,KAAK3nC,IAAS,IAEnDzf,OAAOwoB,UAAUgpE,IAAiBA,EAAe,GAAKA,EAAeC,KACxED,EAAeC,EAEnB,CACA,GACE50F,KAAK28E,UACJ38E,KAAKsxF,UAAYvwE,GAAU/gB,KAAKua,SAAWE,GAASza,KAAKwa,UAAYE,GAAU1a,KAAKqxF,OACrFrxF,KAAK0xF,iBAAmBiD,GACxB,CACA,MAAM/f,EAAM50E,KAAK28E,QACjB38E,KAAK8vC,QAAQ+mC,aAAa,KACvBjC,EAAmBI,YAEtBh1E,KAAK28E,QAAU,IACjB,CACA,IAAK38E,KAAK28E,UACR38E,KAAKsxF,QAAUvwE,EACf/gB,KAAKua,OAASE,EACdza,KAAKwa,QAAUE,EACf1a,KAAKqxF,OAASl0E,EACdnd,KAAK0xF,eAAiBiD,GACjB30F,KAAK8vC,QAAQilC,iBAAiB,CACjC/0E,KAAKyxF,WAAazzE,GAAiBhe,KAAKsxF,SACxC,MAAMl5B,EAASp4D,KAAM6xF,iBAAuCC,qBAAqB9xF,KAAKsxF,SACtFtxF,KAAKuxF,YAAcn5B,EAAOq8B,cAAgBz0F,KAAKoxF,OAASxlD,GAAsB2uC,aAC9Ev6E,KAAK28E,QAAU38E,KAAK8vC,QAAQ+kD,iBAAiB,CAC3CjyE,KAAM,CACJnI,MAAOza,KAAKua,OACZG,OAAQ1a,KAAKwa,QACbm5E,mBAAoB3zF,KAAKm9E,gBAAkB,EAAIn9E,KAAKqxF,QAEtDtwE,OAAQ/gB,KAAKyxF,WACb5C,cAAe7uF,KAAK0xF,eACpB1/C,YAAa,EACbrvB,UAAW3iB,KAAKk9E,cAAgB,KAAO,KACvC/uC,MACE2mD,gBAAgBC,gBAChBD,gBAAgB1Q,SAChB0Q,gBAAgBlT,UACf5hF,KAAKuxF,cAAgBvxF,KAAKk9E,cAAgB4X,gBAAgBE,sBAC1Dh1F,KAAKoxF,OAASxlD,GAAsB2uC,YAAcua,gBAAgBG,qBAEvE,MAAM3jD,EAAWtxC,KAAK6xF,iBAAuCqD,gBAC3Dl1F,KAAKsxF,QACLtxF,KAAKua,OAASva,KAAKwa,SAAWxa,KAAKm9E,gBAAkB,EAAIn9E,KAAKqxF,SAEhErxF,KAAK8vC,QAAQ+oC,sBAAsBvnC,EAAUtxC,KAAK4vC,UAClD5vC,KAAK4vC,SAAW0B,CAClB,CA1DF,CA4DF,CACA,iCAAO6jD,CACL16E,EACAC,EACAqG,GAEA,MAAMrD,E5B+2CH,SAAoCqD,GACzC,OAvsDuB,OAusDf/C,EAAiB+C,KAxsDD,EAysD1B,C4Bj3CuBq0E,CAA2Br0E,GACxCpD,E5Bw3CH,SAAqCoD,GAC1C,OA/sDwB,SA+sDhB/C,EAAiB+C,KAhtDA,EAitD3B,C4B13CwBs0E,CAA4Bt0E,GAC1CnD,EAAYwD,EAA0BL,GACtCu0E,EAAe9yF,KAAKioD,KAAKhwC,EAAQiD,GACjC63E,EAAe/yF,KAAKioD,KAAK/vC,EAASiD,GAClC63E,EAAYF,EAAe13E,EAC3Bs1E,EAAgBsC,EAAY,KAAQ,IAG1C,MAAO,CAAE5yE,KAFI2yE,EAAeC,EAEbC,YADKF,EAAerC,EACPwC,cAAexC,EAAcxmD,OAAQ8oD,EAAWG,QAASJ,EACvF,CAEA,gCAAO1C,CACL7kE,EACAkjB,EACAnwB,EACA/c,EACAE,EACAuD,EACA2L,EACAw/E,EACAhkC,EACA9gB,GAEA,KAAMA,EAAyBu0C,SAAWX,eAAe0C,UAIvD,YAHA7jF,QAAQC,MACN,2FAIJ,MAAMoiB,KAAEA,EAAI6yE,YAAEA,EAAW/oD,OAAEA,EAAMgpD,cAAEA,EAAaC,QAAEA,GAAY31F,KAAKm1F,2BACjE1tF,EACA2L,EACA2N,GAEF,GAAI+sB,EAAOa,WAAa/rB,EAItB,YAHAriB,QAAQC,MACN,kEAAkEstC,EAAOa,kCAAkC/rB,KAI/G,MAAMgzE,EAAY5nE,EAAOyzD,aAAa,CACpC7+D,KAAM6yE,EACNtnD,MAAOuzC,eAAe0C,SAAW1C,eAAeE,WAE5C+B,EAAU31D,EAAO61D,uBAsBvB,GArBAF,EAAQkS,oBACN,CACE3kD,QAASA,EACTuiD,SAAU7kC,GAAS,EACnBykC,OAAQ,CACNrvF,EAAGA,EACHE,EAAGA,EACH+C,EAAG2rF,GAAS,IAGhB,CACE9kD,OAAQ8nD,EACR3oE,OAAQ,EACRgmE,YAAayC,GAEf,CACEj7E,MAAOhT,EACPiT,OAAQtH,EACRugF,mBAAoB,IAGpB/wE,IAAS6yE,EACX,IAAK,IAAIn0F,EAAI,EAAGA,EAAIq0F,EAASr0F,IAC3BqiF,EAAQG,mBACN8R,EACAt0F,EAAIo0F,EACJ5nD,EAAOuvC,OACP/7E,EAAIorC,EACJA,QAIJi3C,EAAQG,mBAAmB8R,EAAW,EAAG9nD,EAAOuvC,OAAqB,EAAGz6D,GAE1EoL,EAAO+1D,MAAMC,OAAO,CAACL,EAAQM,WAC7B2R,EAAU5gB,SACZ,CAEA,SAAA8gB,CACEntB,EACAluD,EACAC,EACAyC,EACA42E,EACAC,EACAC,EACA8B,GAEA,GAAI/1F,KAAKo9E,iBAEP,YADA78E,QAAQC,MAAM,2DAGhB,MAAMqoE,EAAO,IAAIkC,WAAWpC,EAAO76B,OAAQ66B,EAAOga,WAAYha,EAAOh6B,YAC/DH,EAAOxuC,KAAM6xF,iBAAuCC,qBAAqB9xF,KAAKsxF,SAC9E5zE,EAAa8wB,EAAK9wB,YAAc,EAChCC,EAAc6wB,EAAK7wB,aAAe,EAClC23E,EAAe9yF,KAAKioD,KAAKhwC,EAAQiD,GACjC63E,EAAe/yF,KAAKioD,KAAK/vC,EAASiD,GAClC63E,EAAYF,EAAe9mD,EAAK5rB,KACtC,GAAI4yE,EAAYD,EAAep4E,EAAQ0rD,EAAKl6B,WAC1C,MAAM,IAAI/uC,MAAM,6CAA6CipE,EAAKl6B,cAEpE,GAAK3uC,KAAK8vC,QAAQkmD,mBAAmBh2F,MAsB9B,CACL,MAAMkzF,EAAesC,EAAa,SAC5B/U,EAAayS,EAAeqC,EAAep4E,EAC3C2jE,EAAS9gF,KAAKiiF,YAAY7B,aAAa,KAAM,KAAM,EAAG,EAAGK,GACzDI,EAAcC,EAAOH,aAAaE,YAClCR,EAAM,IAAItV,WAAWlC,GACrByX,EAAM,IAAIvV,WAAW8V,EAAaC,EAAOH,aAAa1zD,OAAQwzD,GACpE,GAAIA,IAAe5X,EAAKl6B,WACtB2xC,EAAIxxE,IAAI,IAAIi8D,WAAWlC,SAEvB,IAAK,IAAIj5D,EAAI,EAAGA,EAAIuN,EAAOvN,IAAK,CAC9B,MAAMqmF,EAAiBrmF,EAAI4lF,EAAYF,EACjCY,EAAiBtmF,EAAIsjF,EAAeqC,EAC1C,IAAK,IAAIj0F,EAAI,EAAGA,EAAIi0F,EAAcj0F,IAChCg/E,EAAIxxE,IACFuxE,EAAItE,SAASka,EAAiB30F,EAAIk0F,EAAWS,GAAkB30F,EAAI,GAAKk0F,GACxEU,EAAiB50F,EAAI4xF,EAG3B,CAEFlzF,KAAKkiF,gBAAgB/gF,KAAK,CACxBw/E,aAAcG,EAAOH,aACrB2S,cAAeS,EACfR,cAAeS,EACfR,cAAeS,EACfP,YAAah2E,EAAa43E,EAC1BlC,aAAcz1E,EAAc43E,EAC5B3B,YAAaz2E,EACb+1E,aAAcA,EACdO,SAAUsC,IAEZ/1F,KAAK8vC,QAAQijD,cAAc/yF,KAC7B,KAvDmD,CACjDA,KAAKkyF,sBAEL,MAAMiE,EAAuC,CAC3CjlD,QAASlxC,KAAK28E,QACd8W,SAAUsC,EACV1C,OAAQ,CACNrvF,EAAG+vF,EACH7vF,EAAG8vF,EACH/sF,EAAGgtF,IAGDmC,EAAuC,CAC3CnD,YAAauC,EACbrC,aAAcx1E,EAAc43E,GAExB3yE,EAAoB,CACxBnI,MAAOiD,EAAa43E,EACpB56E,OAAQiD,EAAc43E,EACtB5B,mBAAoBx2E,GAEtBnd,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMsS,aAAaF,EAAattB,EAAMutB,EAAYxzE,GAmC1E,CAEA,eAAA0zE,CACEztB,EACAurB,EACAC,EACA55E,EACAC,EACA67E,EACAC,EACAT,EACAnD,GAEA,GAAI5yF,KAAKo9E,iBACP78E,QAAQC,MAAM,sEAGhB,IACGR,KAAK8vC,QAAQkmD,mBAAmBh2F,OACjCA,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMoQ,2BAC1B,CACAn0F,KAAKkyF,sBACL,MAAM4B,EAAyC,CAC7C5iD,QAASlxC,KAAK28E,QACd0W,OAAQ,CACNrvF,EAAGuyF,EACHryF,EAAGsyF,EACHvvF,EAAG2rF,GAAS,GAEda,SAAUsC,GAAY,EACtB7B,oBAAoB,GAEtBl0F,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMoQ,2BAA2B,CAAEx1C,OAAQkqB,GAAQirB,EAAU,CAC/Er5E,MAAOA,EACPC,OAAQA,EACRi5E,mBAAoB,SAGtB3zF,KAAKkiF,gBAAgB/gF,KAAK,CACxB0yF,MAAOhrB,EACPkrB,QAASwC,EACTvC,QAASwC,EACTvC,QAASrB,GAAS,EAClBwB,KAAMA,GAAQ,EACdC,KAAMA,GAAQ,EACdoC,KAAM,EACNh8E,MAAOA,EACPC,OAAQA,EACRyC,MAAO,EACPs2E,SAAUsC,GAAY,IAExB/1F,KAAK8vC,QAAQijD,cAAc/yF,KAE/B,CACA0vF,4BAAAA,CAA6B9gC,EAAe74C,GAC1C,MAAM2gF,EAAa12F,KAAK4xF,eACxB,IAAI+E,EAAcD,EAAW3gF,GACxB4gF,IACHA,EAAc,GACdD,EAAW3gF,GAAQ4gF,GAErB,IAAIC,EAAaD,EAAY/nC,GAQ7B,OAPKgoC,IACHA,EAAa52F,KAAK8vC,QAAQigC,gBACxBue,GAAsBC,mCAAmCvuF,KAAK8vC,UAEhE8mD,EAAW/O,eAAe,MAAO7nF,KAAM4uD,EAAQ,EAAG74C,EAAM,GACxD4gF,EAAY/nC,GAASgoC,GAEhBA,CACT,CAEA,kBAAA7E,CAA6B35B,EAA0Ck8B,GACrE,MAAM18C,EAAa53C,KAAKshE,WAAagzB,EAC/BrC,EAAa75B,EAAO65B,YAAcr6C,EAIxC,MAAO,CACLi/C,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,UAPgB/E,EAAa,SAAW,UAQxCgF,UAPgB7+B,EAAO65B,WAAa,SAAW,UAQ/CtX,UAPgB36E,KAAK0xF,eAAiB,EAAKO,EAAa,SAAW,UAAa,OAQhF/J,QAAStwC,EAAa,KAAO,KAEjC,CAEAs/C,gBAAAA,CAAiB50F,GACftC,KAAKwxF,IAAMlvF,CACb,CAEA60F,oBAAAA,GACE,OAAOn3F,KAAKwxF,GACd,ECrrBK,MAAM4F,WAAwBrG,GACnC,WAAAhxF,CAAYiuB,GACVpqB,MAAMoqB,EAAQ,KAChB,CACAgvD,WAAAA,GACE,OAAO,CACT,CACA3iC,IAAAA,GACEr6C,KAAKq3F,UAAUr3F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAASxa,KAAK0xF,eAC/D,CACA5mB,MAAAA,CAAOjC,EAAkBoC,EAAiBC,EAAiBzwD,EAAeC,GACpE1a,KAAK8vC,QAAQilC,kBAGZ/0E,KAAK28E,SACR38E,KAAK00F,cAAc10F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAAS,EAAGxa,KAAK0xF,gBAEtE1xF,KAAK81F,UAAUjtB,EAAMpuD,EAAOC,EAAQ,EAAGuwD,EAASC,EAAS,EAAG,GACxDlrE,KAAK0xF,eAAiB,GACxB1xF,KAAK8yF,kBAET,CACA1nB,iBAAAA,CACEvC,EACA0tB,EACAC,EACApC,EACAC,EACA55E,EACAC,GAEA,IAAI1a,KAAK8vC,QAAQilC,gBAMjB,GAHK/0E,KAAK28E,SACR38E,KAAK00F,cAAc10F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAAS,EAAGxa,KAAK0xF,gBAElE7oB,aAAgByuB,mBAAqBt3F,KAAK8vC,QAAQkmD,mBAAmBh2F,MAAO,CAE9E,MAAM+xE,EAAMpM,SAASC,cAAc,UACnCmM,EAAIt3D,MAAQA,EACZs3D,EAAIr3D,OAASA,EACb,MAAMogC,EAAMi3B,EAAIjM,WAAW,MAC3BhrB,EAAIy8C,UAAU1uB,EAAMurB,EAAMC,EAAM55E,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,GAC5D,MAAM88E,EAAY18C,EAAI8tB,aAAa,EAAG,EAAGnuD,EAAOC,GAChD1a,KAAK8qE,OAAO0sB,EAAU3uB,KAAM0tB,EAAOC,EAAO/7E,EAAOC,GACjDq3D,EAAIt3D,MAAQ,EACZs3D,EAAIr3D,OAAS,OAEb1a,KAAKs2F,gBAAgBztB,EAAMurB,EAAMC,EAAM55E,EAAOC,EAAQ67E,EAAOC,EAAO,EAAG,EAE3E,CACA,gBAAMiB,CACJzzF,EACAE,EACAuD,EACA2L,EACAskF,EACAjE,EACA3lD,GAEA,GAAoB,IAAhB4pD,EACF,MAAM,IAAI93F,MAAM,2DAElB,GAAI6zF,GAAYzzF,KAAK6uF,eAAiB4E,EAAW,EAC/C,MAAM,IAAI7zF,MAAM,6CAA6C6zF,KAE/D,MAAM7wE,KAAEA,GAASmuE,GAAkBoE,2BAA2B1tF,EAAG2L,EAAGpT,KAAK+gB,QACzE,GAAI+sB,EAAOa,WAAa/rB,EACtB,MAAM,IAAIhjB,MACR,6DAA6DkuC,EAAOa,kCAAkC/rB,KAG1G,MAAMgzE,EAAY51F,KAAK8vC,QAAQ2xC,aAAa7+D,EAAM,CAAEurB,MAAO,eACrDnuC,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAG,EAAGqgF,EAAUmC,SACpDA,EAAU3S,iBACd,IAAIlY,WAAWj9B,EAAOA,OAAQA,EAAO60C,WAAY70C,EAAOa,YACxD,EACA/rB,GAEFgzE,EAAUt5E,SACZ,CACAq7E,kBAAAA,CACE3zF,EACAE,EACAuD,EACA2L,EACAskF,EACAjE,EACA3lD,GAEA,GAAoB,IAAhB4pD,EACF,MAAM,IAAI93F,MAAM,2DAElB,GAAI6zF,GAAYzzF,KAAK6uF,eAAiB4E,EAAW,EAC/C,MAAM,IAAI7zF,MAAM,6CAA6C6zF,KAE/DzzF,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAG,EAAGqgF,EAAU3lD,EACtD,CACA8pD,eAAAA,CAAgBlwC,EAA8BmwC,EAAeC,GAC3D93F,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACvC,MAAM/2E,EAAS82E,EAAO,kBAAoB,aAC1C73F,KAAK+3F,UAAUrwC,EAAS3mC,EAC1B,CACAi3E,WAAAA,CAAYj3E,EAAuBtG,EAAeC,EAAgBo9E,GAChE93F,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACvC93F,KAAKq3F,UAAUt2E,EAAQtG,EAAOC,EAAQ,EACxC,CACAw1E,UAAAA,CAAWthC,EAAgB74C,EAAe+xE,GACxC,OAAO9nF,KAAK28E,QACR38E,KAAK8vC,QAAQ4iD,qBAAqB1yF,KAAK28E,QAAS,CAC9Ch6D,UAAW,KACXwtE,aAAcvhC,GAAS,EACvBigC,cAAe/G,GAAY9nF,KAAK0xF,gBAAkB9iC,GAAAA,GAClDwhC,eAAgB,EAChBC,gBAAiB,IAEnB,IACN,CACA4H,oBAAAA,CAAqBpvB,EAAyBgvB,EAAeC,GACvDjvB,EAAKqvB,WAAarvB,EAAKsvB,SACzB53F,QAAQC,MAAM,uEAEdR,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACnC93F,KAAKoxF,OAASxlD,GAAsB2uC,YACtCh6E,QAAQC,MAAM,IAAIZ,MAAM,kDAExBI,KAAKo4F,WAAWvvB,EAAMgvB,GAG5B,CAEA,SAAAR,CAAkBt2E,EAAuBtG,EAAeC,EAAgBi6E,GACtE30F,KAAK00F,cAAc3zE,EAAQtG,EAAOC,EAAQ,EAAGi6E,GACzC30F,KAAK0xF,eAAiB,IAAM1xF,KAAK8vC,QAAQilC,iBAC3C/0E,KAAK8yF,iBAET,CAEA,UAAAsF,CAAmBC,EAA2BR,GAC5C,IAAI92E,EAAS82E,EAAO/2E,EAA0Bu3E,EAAOt3E,QAAUs3E,EAAOt3E,OAClEu3E,GAAU,EACC,eAAXv3E,GACFA,EAAS,aACTu3E,GAAU,GACgB,oBAAjBt4F,KAAKsxF,UACdvwE,EAAS,kBACTu3E,GAAU,GAEZ,MAAM79E,EAAQ49E,EAAO59E,MACfC,EAAS29E,EAAO39E,OAChBm0E,EAAgBwJ,EAAOE,UAC7B,IAAIF,EAAOG,cACJx4F,KAAK6xF,iBAAiB4G,iBAAoBz4F,KAAK6xF,iBAAiB6G,aAMvE,GADA14F,KAAK00F,cAAc3zE,EAAQtG,EAAOC,EAAQ,EAAGm0E,IACxC7uF,KAAK8vC,QAAQilC,gBAChB,IAAK,IAAIzzE,EAAI,EAAGA,EAAI+2F,EAAOM,SAAS,GAAGp3F,OAAQD,IAAK,CAClD,GAAIg3F,EAEF,IAAK,IAAIz8E,EAAI,EAAGA,EAAIw8E,EAAOM,SAAS,GAAGr3F,GAAGmZ,MAAQ49E,EAAOM,SAAS,GAAGr3F,GAAGoZ,OAAQmB,IAAK,CACnF,MAAMjQ,EAAIysF,EAAOM,SAAS,GAAGr3F,GAAGunE,KAAS,EAAJhtD,GACrCw8E,EAAOM,SAAS,GAAGr3F,GAAGunE,KAAS,EAAJhtD,GAASw8E,EAAOM,SAAS,GAAGr3F,GAAGunE,KAAS,EAAJhtD,EAAQ,GACvEw8E,EAAOM,SAAS,GAAGr3F,GAAGunE,KAAS,EAAJhtD,EAAQ,GAAKjQ,CAC1C,CAEF5L,KAAK81F,UACHuC,EAAOM,SAAS,GAAGr3F,GAAGunE,KACtBwvB,EAAOM,SAAS,GAAGr3F,GAAGmZ,MACtB49E,EAAOM,SAAS,GAAGr3F,GAAGoZ,OACtB,EACA,EACA,EACA,EACApZ,EAEJ,OAzBEf,QAAQC,MAAM,qCA2BpB,CAEA,SAAAu3F,CAAkBrwC,EAA8B3mC,GAC9C/gB,KAAK00F,cAAc3zE,EAAQ5d,OAAOukD,EAAQjtC,OAAQtX,OAAOukD,EAAQhtC,QAAS,EAAG,GACxE1a,KAAK8vC,QAAQilC,kBAChB/0E,KAAKorE,kBAAkB1jB,EAAS,EAAG,EAAG,EAAG,EAAG1nD,KAAKua,OAAQva,KAAKwa,SAC1Dxa,KAAK0xF,eAAiB,GACxB1xF,KAAK8yF,kBAGX,EC/LK,MAAM8F,WAA6B7H,GACxC,WAAAhxF,CAAYiuB,GACVpqB,MAAMoqB,EAAQ,UAChB,CACAivD,gBAAAA,GACE,OAAO,CACT,CACA5iC,IAAAA,GACEr6C,KAAKq3F,UAAUr3F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAASxa,KAAKqxF,OAAQrxF,KAAK0xF,eAC5E,CACA5mB,MAAAA,CACEjC,EACAoC,EACAC,EACA2tB,EACAp+E,EACAC,EACAyC,GAEInd,KAAK8vC,QAAQilC,kBAGZ/0E,KAAK28E,SACR38E,KAAK00F,cAAc10F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAASxa,KAAKqxF,OAAQrxF,KAAK0xF,gBAEhF1xF,KAAK81F,UAAUjtB,EAAMpuD,EAAOC,EAAQyC,EAAO8tD,EAASC,EAAS2tB,EAAS,GAClE74F,KAAK0xF,eAAiB,GACxB1xF,KAAK8yF,kBAET,CACA1nB,iBAAAA,CACEvC,EACA0tB,EACAC,EACAsC,EACA1E,EACAC,EACA55E,EACAC,GAEA,IAAI1a,KAAK8vC,QAAQilC,gBAMjB,GAHK/0E,KAAK28E,SACR38E,KAAK00F,cAAc10F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAASxa,KAAKqxF,OAAQrxF,KAAK0xF,gBAE5E7oB,aAAgByuB,mBAAqBt3F,KAAK8vC,QAAQkmD,mBAAmBh2F,MAAO,CAE9E,MAAM+xE,EAAMpM,SAASC,cAAc,UACnCmM,EAAIt3D,MAAQA,EACZs3D,EAAIr3D,OAASA,EACb,MAAMogC,EAAMi3B,EAAIjM,WAAW,MAC3BhrB,EAAIy8C,UAAU1uB,EAAMurB,EAAMC,EAAM55E,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,GAC5D,MAAM88E,EAAY18C,EAAI8tB,aAAa,EAAG,EAAGnuD,EAAOC,GAChD1a,KAAK8qE,OAAO0sB,EAAU3uB,KAAM0tB,EAAOC,EAAOsC,EAAOr+E,EAAOC,EAAQ,GAChEq3D,EAAIt3D,MAAQ,EACZs3D,EAAIr3D,OAAS,OAEb1a,KAAKs2F,gBAAgBztB,EAAMurB,EAAMC,EAAM55E,EAAOC,EAAQ67E,EAAOC,EAAO,EAAGsC,EAE3E,CACAd,WAAAA,CACEj3E,EACAtG,EACAC,EACAyC,EACA26E,GAEA93F,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACvC93F,KAAKq3F,UAAUt2E,EAAQtG,EAAOC,EAAQyC,EAAO,EAC/C,CACA86E,oBAAAA,CAAqBpvB,EAAyBivB,GACvCjvB,EAAKt7C,WAGRvtB,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACnC93F,KAAKoxF,OAASxlD,GAAsB2uC,YACtCh6E,QAAQC,MACN,+FAGFR,KAAKo4F,WAAWvvB,IARlBtoE,QAAQC,MAAM,0EAWlB,CACA0vF,UAAAA,CAAWthC,EAAgB74C,EAAe+xE,GACxC,OAAO9nF,KAAK28E,QACR38E,KAAK8vC,QAAQ4iD,qBAAqB1yF,KAAK28E,QAAS,CAC9Ch6D,UAAW,KACXwtE,aAAcvhC,GAAS,EACvBigC,cAAe/G,GAAY9nF,KAAK0xF,gBAAkB9iC,GAAAA,GAClDwhC,eAAgBr6E,GAAQ,EACxBs6E,gBAAiB,IAEnB,IACN,CACA,gBAAMoH,CACJzzF,EACAE,EACAuD,EACA2L,EACAw/E,EACAa,EACA3lD,GAEA,GAAI8kD,EAAQ,GAAKA,GAAS5yF,KAAKqxF,OAC7B,MAAM,IAAIzxF,MAAM,+CAA+CgzF,KAEjE,GAAIa,EAAW,GAAKA,GAAYzzF,KAAK6uF,cACnC,MAAM,IAAIjvF,MAAM,kDAAkD6zF,KAEpE,MAAM7wE,KAAEA,GAASmuE,GAAkBoE,2BAA2B1tF,EAAG2L,EAAGpT,KAAK+gB,QACzE,GAAI+sB,EAAOa,WAAa/rB,EACtB,MAAM,IAAIhjB,MACR,6DAA6DkuC,EAAOa,kCAAkC/rB,KAG1G,MAAMgzE,EAAY51F,KAAK8vC,QAAQ2xC,aAAa7+D,EAAM,CAAEurB,MAAO,eACrDnuC,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAGw/E,EAAOa,EAAUmC,SACxDA,EAAU3S,iBACd,IAAIlY,WAAWj9B,EAAOA,OAAQA,EAAO60C,WAAY70C,EAAOa,YACxD,EACA/rB,GAEFgzE,EAAUt5E,SACZ,CACAq7E,kBAAAA,CACE3zF,EACAE,EACAuD,EACA2L,EACAw/E,EACAa,EACA3lD,GAEA,GAAI8kD,EAAQ,GAAKA,GAAS5yF,KAAKqxF,OAC7B,MAAM,IAAIzxF,MAAM,uDAAuDgzF,KAEzE,GAAIa,EAAW,GAAKA,GAAYzzF,KAAK6uF,cACnC,MAAM,IAAIjvF,MAAM,0DAA0D6zF,KAE5EzzF,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAGw/E,EAAOa,EAAU3lD,EAC1D,CACQupD,SAAAA,CACNt2E,EACAtG,EACAC,EACAyC,EACAw3E,GAEA30F,KAAK00F,cAAc3zE,EAAQtG,EAAOC,EAAQyC,EAAOw3E,GAC7C30F,KAAK0xF,eAAiB,IAAM1xF,KAAK8vC,QAAQilC,iBAC3C/0E,KAAK8yF,iBAET,CACQsF,UAAAA,CAAWC,GACjB,MAAMt3E,EAASs3E,EAAOt3E,OAChBtG,EAAQ49E,EAAO59E,MACfC,EAAS29E,EAAO39E,OAChByC,EAAQk7E,EAAO9qE,UACfshE,EACiB,IAArBwJ,EAAOE,WAAqBv4F,KAAKoxF,OAASxlD,GAAsByuC,aAE5Dge,EAAOE,UADPv4F,KAAKw0F,mBAAmB6D,EAAOt3E,OAAQtG,EAAOC,EAAQyC,GAE5D,IAAIk7E,EAAOG,cACJx4F,KAAK6xF,iBAAiB4G,iBAAoBz4F,KAAK6xF,iBAAiB6G,aAMvE,GADA14F,KAAK00F,cAAc3zE,EAAQtG,EAAOC,EAAQ29E,EAAO9qE,UAAWshE,IACvD7uF,KAAK8vC,QAAQilC,gBAAiB,CACjC,IAAK,IAAI6d,EAAQ,EAAGA,EAAQyF,EAAO9qE,UAAWqlE,IAAS,CACrD,GAAIyF,EAAOM,SAAS/F,GAAOrxF,SAAW82F,EAAOE,UAE3C,YADAh4F,QAAQC,MAAM,4DAGhB,IAAK,IAAIc,EAAI,EAAGA,EAAI+2F,EAAOE,UAAWj3F,IACpCtB,KAAK81F,UACHuC,EAAOM,SAAS/F,GAAOtxF,GAAGunE,KAC1BwvB,EAAOM,SAAS/F,GAAOtxF,GAAGmZ,MAC1B49E,EAAOM,SAAS/F,GAAOtxF,GAAGoZ,OAC1B,EACA,EACA,EACAk4E,EACAtxF,EAGN,CACI+2F,EAAOE,YAAcv4F,KAAK6uF,eAC5B7uF,KAAK8yF,iBAET,OA3BIvyF,QAAQC,MAAM,kEA4BpB,ECxMK,MAAMu4F,WAAwBhI,GACnC,WAAAhxF,CAAYiuB,GACVpqB,MAAMoqB,EAAQ,KAChB,CACAkvD,WAAAA,GACE,OAAO,CACT,CACA7iC,IAAAA,GACEr6C,KAAKq3F,UAAUr3F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAASxa,KAAKqxF,OAAQrxF,KAAK0xF,eAC5E,CACA5mB,MAAAA,CACEjC,EACAoC,EACAC,EACA2tB,EACAp+E,EACAC,EACAyC,GAEInd,KAAK8vC,QAAQilC,kBAGZ/0E,KAAK28E,SACR38E,KAAK00F,cAAc10F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAASxa,KAAKqxF,OAAQrxF,KAAK0xF,gBAEhF1xF,KAAK81F,UAAUjtB,EAAMpuD,EAAOC,EAAQyC,EAAO8tD,EAASC,EAAS2tB,EAAS,GACxE,CACAb,WAAAA,CACEj3E,EACAtG,EACAC,EACAyC,EACA26E,GAEA93F,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACvC93F,KAAKq3F,UAAUt2E,EAAQtG,EAAOC,EAAQyC,EAAO,EAC/C,CACA+yE,UAAAA,CAAW8I,EAAiBjjF,EAAekjF,GACzC,OAAOj5F,KAAK28E,QACR38E,KAAK8vC,QAAQ4iD,qBAAqB1yF,KAAK28E,QAAS,CAC9Ch6D,UAAW,KACXwtE,aAAc,EACdtB,cAAe,EACfuB,eAAgBr6E,EAChBs6E,gBAAiB,IAEnB,IACN,CACA,gBAAMoH,CACJzzF,EACAE,EACAuD,EACA2L,EACAw/E,EACAa,EACA3lD,GAEA,GAAiB,IAAb2lD,EACF,MAAM,IAAI7zF,MAAM,wDAElB,MAAMgjB,KAAEA,GAASmuE,GAAkBoE,2BAA2B1tF,EAAG2L,EAAGpT,KAAK+gB,QACzE,GAAI+sB,EAAOa,WAAa/rB,EACtB,MAAM,IAAIhjB,MACR,6DAA6DkuC,EAAOa,kCAAkC/rB,KAG1G,MAAMgzE,EAAY51F,KAAK8vC,QAAQ2xC,aAAa7+D,EAAM,CAAEurB,MAAO,eACrDnuC,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAGw/E,EAAO,EAAGgD,SACjDA,EAAU3S,iBACd,IAAIlY,WAAWj9B,EAAOA,OAAQA,EAAO60C,WAAY70C,EAAOa,YACxD,EACA/rB,GAEFgzE,EAAUt5E,SACZ,CACAq7E,kBAAAA,CACE3zF,EACAE,EACAuD,EACA2L,EACAw/E,EACAa,EACA3lD,GAEA,GAAiB,IAAb2lD,EACF,MAAM,IAAI7zF,MAAM,gEAElBI,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAGw/E,EAAO,EAAG9kD,EACnD,CACAmqD,oBAAAA,CAAqBpvB,EAAyBivB,GACvCjvB,EAAKt7C,WAGRvtB,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACnC93F,KAAKoxF,OAASxlD,GAAsB2uC,YACtCh6E,QAAQC,MACN,+FAGFR,KAAKo4F,WAAWvvB,IARlBtoE,QAAQC,MAAM,0EAWlB,CACQ43F,UAAAA,CAAWC,GACjB,MAAMt3E,EAASs3E,EAAOt3E,OAChBtG,EAAQ49E,EAAO59E,MACfC,EAAS29E,EAAO39E,OAChByC,EAAQk7E,EAAOl7E,MACf0xE,EACiB,IAArBwJ,EAAOE,WAAqBv4F,KAAKoxF,OAASxlD,GAAsByuC,aAE5Dge,EAAOE,UADPv4F,KAAKw0F,mBAAmB6D,EAAOt3E,OAAQtG,EAAOC,EAAQyC,GAE5D,IAAIk7E,EAAOG,cACJx4F,KAAK6xF,iBAAiB4G,iBAAoBz4F,KAAK6xF,iBAAiB6G,aAMvE,GADA14F,KAAK00F,cAAc3zE,EAAQtG,EAAOC,EAAQyC,EAAO0xE,IAC5C7uF,KAAK8vC,QAAQilC,gBAAiB,CACjC,IAAK,IAAI6d,EAAQ,EAAGA,EAAQz1E,EAAOy1E,IAAS,CAC1C,GAAIyF,EAAOM,SAAS/F,GAAOrxF,SAAW82F,EAAOE,UAE3C,YADAh4F,QAAQC,MAAM,uDAGhB,IAAK,IAAIc,EAAI,EAAGA,EAAI+2F,EAAOE,UAAWj3F,IACpCtB,KAAK81F,UACHuC,EAAOM,SAAS/F,GAAOtxF,GAAGunE,KAC1BwvB,EAAOM,SAAS/F,GAAOtxF,GAAGmZ,MAC1B49E,EAAOM,SAAS/F,GAAOtxF,GAAGoZ,OAC1B,EACA,EACA,EACAk4E,EACAtxF,EAGN,CACI+2F,EAAOE,YAAcv4F,KAAK6uF,eAC5B7uF,KAAK8yF,iBAET,OA3BIvyF,QAAQC,MAAM,6DA4BpB,CACQ62F,SAAAA,CACNt2E,EACAtG,EACAC,EACAyC,EACAw3E,GAEA30F,KAAK00F,cAAc3zE,EAAQtG,EAAOC,EAAQyC,EAAOw3E,GAC7C30F,KAAK0xF,eAAiB,IAAM1xF,KAAK8vC,QAAQilC,iBAC3C/0E,KAAK8yF,iBAET,ECpJK,MAAMoG,WAA0BnI,GACrC,WAAAhxF,CAAYiuB,GACVpqB,MAAMoqB,EAAQ,OAChB,CACAqsB,IAAAA,GACEr6C,KAAKq3F,UAAUr3F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAK0xF,eACjD,CACA5mB,MAAAA,CACEjC,EACAoC,EACAC,EACAzwD,EACAC,EACA3E,GAEI/V,KAAK8vC,QAAQilC,kBAGZ/0E,KAAK28E,SACR38E,KAAK00F,cAAc10F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAAS,EAAGxa,KAAK0xF,gBAEtE1xF,KAAK81F,UAAUjtB,EAAMpuD,EAAOC,EAAQ,EAAGuwD,EAASC,EAASn1D,EAAM,GAC3D/V,KAAK0xF,eAAiB,GACxB1xF,KAAK8yF,kBAET,CACA1nB,iBAAAA,CACEvC,EACA0tB,EACAC,EACAzgF,EACAq+E,EACAC,EACA55E,EACAC,GAEA,IAAI1a,KAAK8vC,QAAQilC,gBAMjB,GAHK/0E,KAAK28E,SACR38E,KAAK00F,cAAc10F,KAAKsxF,QAAStxF,KAAKua,OAAQva,KAAKwa,QAAS,EAAGxa,KAAK0xF,gBAElE7oB,aAAgByuB,mBAAqBt3F,KAAK8vC,QAAQkmD,mBAAmBh2F,MAAO,CAE9E,MAAM+xE,EAAMpM,SAASC,cAAc,UACnCmM,EAAIt3D,MAAQA,EACZs3D,EAAIr3D,OAASA,EACb,MAAMogC,EAAMi3B,EAAIjM,WAAW,MAC3BhrB,EAAIy8C,UAAU1uB,EAAMurB,EAAMC,EAAM55E,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,GAC5D,MAAM88E,EAAY18C,EAAI8tB,aAAa,EAAG,EAAGnuD,EAAOC,GAChD1a,KAAK8qE,OAAO0sB,EAAU3uB,KAAM0tB,EAAOC,EAAO/7E,EAAOC,EAAQ3E,GACzDg8D,EAAIt3D,MAAQ,EACZs3D,EAAIr3D,OAAS,OAEb1a,KAAKs2F,gBAAgBztB,EAAMurB,EAAMC,EAAM55E,EAAOC,EAAQ67E,EAAOC,EAAO,EAAGzgF,EAE3E,CACAiiF,WAAAA,CAAYj3E,EAAuB6B,EAAck1E,GAC/C93F,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACnC93F,KAAKoxF,OAASxlD,GAAsB2uC,YACtCh6E,QAAQC,MAAM,IAAIZ,MAAM,4CAExBI,KAAKq3F,UAAUt2E,EAAQ6B,EAAM,EAEjC,CACAu6D,aAAAA,GACE,OAAO,CACT,CACA+S,UAAAA,CAAWthC,EAAgB74C,EAAe+xE,GACxC,OAAO9nF,KAAK28E,QACR38E,KAAK8vC,QAAQ4iD,qBAAqB1yF,KAAK28E,QAAS,CAC9C57D,OAAQ/gB,KAAKyxF,WACb9uE,UAAW,KACXwtE,aAAcvhC,GAAS,EACvBigC,cAAe/G,GAAY9nF,KAAK0xF,gBAAkB9iC,GAAAA,GAClDwhC,eAAgBr6E,GAAQ,EACxBs6E,gBAAiB,EACjBp9E,OAAQ,QAEV,IACN,CACA,gBAAMwkF,CACJzzF,EACAE,EACAuD,EACA2L,EACA2C,EACA09E,EACA3lD,GAEA,GAAI2lD,EAAW,GAAKA,GAAYzzF,KAAK6uF,cACnC,MAAM,IAAIjvF,MAAM,+CAA+C6zF,KAEjE,MAAM7wE,KAAEA,GAASmuE,GAAkBoE,2BAA2B1tF,EAAG2L,EAAGpT,KAAK+gB,QACzE,GAAI+sB,EAAOa,WAAa/rB,EACtB,MAAM,IAAIhjB,MACR,6DAA6DkuC,EAAOa,kCAAkC/rB,KAG1G,MAAMgzE,EAAY51F,KAAK8vC,QAAQ2xC,aAAa7+D,EAAM,CAAEurB,MAAO,eACrDnuC,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAG2C,EAAM09E,EAAUmC,SACvDA,EAAU3S,iBACd,IAAIlY,WAAWj9B,EAAOA,OAAQA,EAAO60C,WAAY70C,EAAOa,YACxD,EACA/rB,GAEFgzE,EAAUt5E,SACZ,CACAq7E,kBAAAA,CACE3zF,EACAE,EACAuD,EACA2L,EACA2C,EACA09E,EACA3lD,GAEA,GAAI2lD,EAAW,GAAKA,GAAYzzF,KAAK6uF,cACnC,MAAM,IAAIjvF,MAAM,uDAAuD6zF,KAEzEzzF,KAAK2yF,sBAAsB3uF,EAAGE,EAAGuD,EAAG2L,EAAG2C,EAAM09E,EAAU3lD,EACzD,CACAmqD,oBAAAA,CAAqBpvB,EAAyBgvB,EAAeC,GACtDjvB,EAAKqvB,WAGRl4F,KAAKoxF,OAASjuF,OAAO20F,IAAkB,EACnC93F,KAAKoxF,OAASxlD,GAAsB2uC,YACtCh6E,QAAQC,MAAM,iDAEdR,KAAKo4F,WAAWvvB,EAAMgvB,IANxBt3F,QAAQC,MAAM,8DASlB,CAEA,SAAA62F,CAAkBt2E,EAAuB6B,EAAcisE,GACrD7uF,KAAK00F,cAAc3zE,EAAQ6B,EAAMA,EAAM,EAAGisE,GACtC7uF,KAAK0xF,eAAiB,IAAM1xF,KAAK8vC,QAAQilC,iBAC3C/0E,KAAK8yF,iBAET,CAqCQsF,UAAAA,CAAWC,EAA2BR,GAC5C,MAAM92E,EAAS82E,EAAO/2E,EAA0Bu3E,EAAOt3E,QAAUs3E,EAAOt3E,OAClEtG,EAAQ49E,EAAO59E,MACfC,EAAS29E,EAAO39E,OAEhBm0E,EACiB,IAArBwJ,EAAOE,WAAqBv4F,KAAKoxF,OAASxlD,GAAsByuC,aAE5Dge,EAAOE,UADPv4F,KAAKw0F,mBAAmB6D,EAAOt3E,OAAQtG,EAAOC,EAAQ,GAE5D,IAAI29E,EAAOG,cACJx4F,KAAK6xF,iBAAiB4G,iBAAoBz4F,KAAK6xF,iBAAiB6G,YADvE,CAOA,GADA14F,KAAK00F,cAAc3zE,EAAQtG,EAAOC,EAAQ,EAAGm0E,IACxC7uF,KAAK8vC,QAAQilC,gBAChB,IAAK,IAAIh/D,EAAO,EAAGA,EAAO,EAAGA,IAAQ,CACnC,GAAIsiF,EAAOM,SAAS5iF,GAAMxU,SAAW82F,EAAOE,UAE1C,YADAh4F,QAAQC,MAAM,yDAGhB,IAAK,IAAIc,EAAI,EAAGA,EAAI+2F,EAAOE,UAAWj3F,IACpCtB,KAAK81F,UACHuC,EAAOM,SAAS5iF,GAAMzU,GAAGunE,KACzBwvB,EAAOM,SAAS5iF,GAAMzU,GAAGmZ,MACzB49E,EAAOM,SAAS5iF,GAAMzU,GAAGoZ,OACzB,EACA,EACA,EACA3E,EACAzU,EAGN,CAEE+2F,EAAOE,YAAcv4F,KAAK6uF,eAC5B7uF,KAAK8yF,iBAvBP,MAHIvyF,QAAQC,MAAM,+DA4BpB,EC9NK,MAAM24F,WACHpI,GAGSqI,QACAC,eACjB,WAAAt5F,CAAYiuB,EAAsB05B,GAChC9jD,MAAMoqB,EAAQ,MACdhuB,KAAKo5F,QAAU1xC,EACf1nD,KAAKua,OAAS,EACdva,KAAKwa,QAAU,EACfxa,KAAKq5F,eAAiB,GACtBr5F,KAAK43F,iBACP,CACAxa,cAAAA,GACE,OAAO,CACT,CACAgL,qBAAAA,CAAsB5B,GACpBxmF,KAAKq5F,eAAel4F,KAAKqlF,EAC3B,CACA2B,wBAAAA,CAAyB3B,GACvB,MAAM5oC,EAAQ59C,KAAKq5F,eAAerlD,QAAQwyC,GACtC5oC,GAAS,GACX59C,KAAKq5F,eAAe73F,OAAOo8C,EAAO,EAEtC,CACA,SAAInjC,GACF,OAAOza,KAAKua,MACd,CACA,UAAIG,GACF,OAAO1a,KAAKwa,OACd,CACA,UAAImkC,GACF,OAAO3+C,KAAKo5F,OACd,CACAlkB,OAAAA,GACOl1E,KAAK28E,SAAY38E,KAAK8vC,QAAQilC,iBACjC/0E,KAAKs5F,YAAYt5F,KAAKo5F,QAE1B,CACA5Q,gBAAAA,GACE,GAAIxoF,KAAKo5F,QAAQG,WAAa,EAAG,CAI/B,OAHmB,IAAIpqD,OAAgBqqD,WAAWx5F,KAAKo5F,SAC5CK,QACXz5F,KAAK28E,QAAU38E,KAAK8vC,QAAQ4pD,yBAAyB15F,KAAKo5F,UACnD,CACT,CACA,OAAO,CACT,CACAlJ,UAAAA,CAAW8I,EAAiBW,EAAgBV,GAC1C,OAAO,IACT,CACA5+C,IAAAA,GACEr6C,KAAK43F,iBACP,CACAH,UAAAA,CACEmC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAve,GAEA,MAAM,IAAI97E,MAAM,8CAClB,CACA+3F,kBAAAA,CACEiC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAve,GAEA,MAAM,IAAI97E,MAAM,sDAClB,CAEAg4F,eAAAA,GACE53F,KAAKs5F,YAAYt5F,KAAKo5F,QACxB,CAEQE,WAAAA,CAAY5xC,GAMlB,GALA1nD,KAAKsxF,QAAU,aACftxF,KAAKua,OAASmtC,EAAQwyC,WACtBl6F,KAAKwa,QAAUktC,EAAQyyC,YACvBn6F,KAAKqxF,OAAS,EACdrxF,KAAK0xF,eAAiB,GACjB1xF,KAAK8vC,QAAQilC,iBACZrtB,EAAQ6xC,WAAa,EAAG,CAC1Bv5F,KAAK28E,QAAU38E,KAAK8vC,QAAQ4pD,yBAAyBhyC,GACrD,MAAMsa,EAAOhiE,KACbA,KAAK8vC,QAAQ+mC,aAAa,SAAS2R,IACjC,IAAKxmB,EAAK3lD,SAAU,CAClB,GAAI2lD,EAAKo3B,QAAQG,WAAa,EAAG,CACZ,IAAKpqD,OAAeqqD,WAAWx3B,EAAKo3B,SAC5CK,QACXz3B,EAAK2a,QAAU3a,EAAKlyB,QAAQ4pD,yBAAyB13B,EAAKo3B,SAC1D,IAAK,MAAM5S,KAAaxkB,EAAKq3B,eAC3B7S,EAAUM,YAEd,CACA9kB,EAAKlyB,QAAQ+mC,aAAa2R,EAC5B,CACF,EACF,CAEF,QAASxoF,KAAK28E,OAChB,ECrFK,MAAMyd,GACXC,eACAC,iCACAC,oBACAC,+BACAC,qBACAC,oBACAC,4BACA,WAAA56F,CAAYiuB,GACVhuB,KAAKq6F,eAAiBrsE,EAAOA,OAAO4sE,OAAOC,oBAC3C76F,KAAKs6F,iCAAmCtsE,EAAOA,OAAO4sE,OAAON,iCAC7Dt6F,KAAKu6F,qBAAsB,EAC3Bv6F,KAAKw6F,gCAAiC,EACtCx6F,KAAKy6F,qBAAuBzsE,EAAOA,OAAO8sE,SAAS3mB,IAAI,qBACvDn0E,KAAK06F,qBAAsB,EAC3B16F,KAAK26F,4BAA8B3sE,EAAOA,OAAO8sE,SAAS3mB,IAAI,wBAChE,EAGK,MAAM4mB,GACXC,yBACAC,mBACAC,kBACAC,kBACAC,cACAC,iBACA,WAAAt7F,CAAYiuB,GACVhuB,KAAKg7F,0BAA2B,EAChCh7F,KAAKi7F,oBAAqB,EAC1Bj7F,KAAKk7F,mBAAoB,EACzBl7F,KAAKm7F,kBAAoBntE,EAAOA,OAAO8sE,SAAS3mB,IAAI,sBACpDn0E,KAAKo7F,cAAgB,EACrBp7F,KAAKq7F,iBAAmB,CAC1B,EAEK,MAAMC,GACXC,qBACAC,2BACAC,wBACAC,0BACAC,wBACAC,qBACAC,6BACAC,qBACAC,6BACA,WAAAh8F,CAAYiuB,GACVhuB,KAAKu7F,sBAAuB,EAC5Bv7F,KAAKw7F,4BAA6B,EAClCx7F,KAAKy7F,yBAA0B,EAC/Bz7F,KAAK07F,2BAA4B,EACjC17F,KAAK47F,qBAAuB5tE,EAAOA,OAAO4sE,OAAOoB,6BAA+B,MAChFh8F,KAAK67F,6BAA+B7tE,EAAOA,OAAO4sE,OAAOqB,iCAAmC,IAC5Fj8F,KAAK87F,qBAAuB9tE,EAAOA,OAAO4sE,OAAOsB,6BAA+B,UAChFl8F,KAAK+7F,6BAA+B/tE,EAAOA,OAAO4sE,OAAOuB,iCAAmC,GAC9F,EAEK,MAAMC,GACMC,oBACjBC,eACAC,mBACAC,eACAC,cACA/D,YACAD,gBACAiE,YACAC,YACAC,YACAC,oBACAC,iBACAC,mBACAC,oBACAC,0BACAC,wBACAC,8BACAC,4BACAC,wBACAC,4BACA7C,qBACA,WAAA16F,CAAYiuB,GAmDV,GAlDAhuB,KAAKo9F,6BAA8B,EACnCp9F,KAAK68F,qBAAsB,EAC3B78F,KAAK88F,kBAAmB,EACxB98F,KAAK+8F,oBAAqB,EAC1B/8F,KAAKg9F,qBAAsB,EAC3Bh9F,KAAKq9F,yBAA0B,EAC/Br9F,KAAKs9F,6BAA8B,EACnCt9F,KAAKy6F,sBAAuB,EAC5Bz6F,KAAK04F,YAAc1qE,EAAOA,OAAO8sE,SAAS3mB,IAAI,0BAC9Cn0E,KAAKy4F,gBAAkBz4F,KAAK04F,YAC5B14F,KAAK08F,YAAc18F,KAAK04F,YACxB14F,KAAK28F,YAAc38F,KAAK04F,YACxB14F,KAAK48F,YAAc5uE,EAAOA,OAAO8sE,SAAS3mB,IAAI,4BAC9Cn0E,KAAKk9F,yBAA0B,EAC/Bl9F,KAAKs8F,eAAiBtuE,EAAOA,OAAO4sE,OAAO2C,sBAC3Cv9F,KAAKu8F,mBAAqBvuE,EAAOA,OAAO4sE,OAAO2C,sBAC/Cv9F,KAAKw8F,gBAAiB,EACtBx8F,KAAKy8F,eAAgB,EACrBz8F,KAAKq8F,oBAAsB,CACzB/8E,WAAgB,CACdk+E,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAERrD,WAAgB,CACdi+E,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAERpD,WAAgB,CACdg+E,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,IAGN5iB,KAAK48F,YACP,IAAK,MAAMtwD,IAAK,CACd,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,QACA,QACA,SACC,CACD,MAAO7kC,EAAG2L,GAAKk5B,EAAE0hD,MAAM,KAAKnrF,IAAKC,GAAQK,OAAOL,IAChD9C,KAAKq8F,oBAAoB,QAAQ/vD,KAAO,CACtCkxD,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAYjW,EACZkW,YAAavK,GAEfpT,KAAKq8F,oBAAoB,QAAQ/vD,UAAY,CAC3CkxD,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ76E,KAAM,GACNiL,UAAU,EACVnQ,WAAYjW,EACZkW,YAAavK,EAEjB,CAEEpT,KAAK04F,cACP14F,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,EACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,IAGb3d,KAAK28F,cACP38F,KAAKq8F,oBAAoB,IAAS,CAChCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,EACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,cAAgB,CACvCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,EACNlF,WAAY,EACZC,YAAa,IAGjB3d,KAAKq8F,oBAAoB,IAAS,CAChCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,cAAgB,CACvCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,GAEX3d,KAAK08F,cACP18F,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,eAAiB,CACxCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,IAAS,CAChCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,YAAc,CACrCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,IAGb3d,KAAKy4F,kBACPz4F,KAAKq8F,oBAAoB,aAAe,CACtCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,EACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,aAAe,CACtCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,GAEf3d,KAAKq8F,oBAAoB,aAAe,CACtCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVjL,KAAM,GACNlF,WAAY,EACZC,YAAa,IAGjB3d,KAAKq8F,oBAAoB,QAAa,CACpCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,QAAa,CACpCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,qBACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,IAAS,CAChCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,SAAc,CACrCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,SAAc,CACrCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,qBACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,OAAY,CACnCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,OAAY,CACnCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,mBAAqB,CAC5CmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,mBAAqB,CAC5CmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,QAAa,CACpCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,QAAa,CACpCmB,cAAe,qBACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,IAER5iB,KAAKq8F,oBAAoB,QAAa,CACpCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,OAAY,CACnCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,SAAc,CACrCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,QAAa,CACpCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,SAAc,CACrCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,IAER5iB,KAAKq8F,oBAAoB,QAAa,CACpCmB,cAAe,OACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,IAER5iB,KAAKq8F,oBAAoB,UAAe,CACtCmB,cAAe,QACfvL,YAAY,EACZwC,WAAYzmE,EAAOA,OAAO8sE,SAAS3mB,IAAI,4BACvCspB,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,IAAS,CAChCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,IAAS,CAChCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,KAAU,CACjCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,OAAY,CACnCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKq8F,oBAAoB,MAAW,CAClCmB,cAAe,QACfvL,YAAY,EACZwC,YAAY,EACZgJ,YAAY,EACZ5vE,UAAU,EACVnQ,WAAY,EACZC,YAAa,EACbiF,KAAM,GAER5iB,KAAKi9F,0BACHj9F,KAAKq8F,oBAAoB,KAAQpK,YACjCjyF,KAAKq8F,oBAA4B,MAACpK,YAClCjyF,KAAKq8F,oBAA8B,QAACpK,WACtCjyF,KAAKm9F,8BACHn9F,KAAKq8F,oBAAoB,KAAQpK,YACjCjyF,KAAKq8F,oBAA4B,MAACpK,YAClCjyF,KAAKq8F,oBAA8B,QAACpK,UACxC,CACAiD,eAAAA,CAAgBn0E,EAAuB28E,GACrC,OAAO19F,KAAKq8F,oBAAoBt7E,GAAU/gB,KAAKq8F,oBAAoBt7E,GAAQ6B,KAAO86E,EAAY,CAChG,CACA5L,oBAAAA,CAAqB/wE,GACnB,OAAO/gB,KAAKq8F,oBAAoBt7E,EAClC,EC1rBK,MAAM48E,WAA2BjhB,GACtC3yD,oBAA8B,EAC9BA,uBAAqD,GACpC6zE,YACA/xB,MACTgyB,SAGR,WAAA99F,CAAYiuB,EAAsBjtB,GAChC6C,MAAMoqB,GACNhuB,KAAK49F,YAAc,IAAI3wD,GACvB,IAAK,MAAM6wD,KAAM/8F,EAAQysC,cACvBxtC,KAAK49F,YAAY3vD,gBAAgB6vD,EAAGhwD,OAAQgwD,EAAG5vD,UAE7CntC,EAAQ0sC,aACVztC,KAAK49F,YAAYnvD,eAAe1tC,EAAQ0sC,aAE1CztC,KAAK6rE,MAAQ5yB,SAAS0kD,GAAmBrf,cACzCt+E,KAAK69F,SAAW,CAAC,CACnB,CACA7oB,OAAAA,GACEh1E,KAAK28E,QAAU,IACjB,CACAzH,OAAAA,GACEl1E,KAAK28E,QAAU,CAAC,CAClB,CACA/uC,aAAAA,CAAcE,EAA0B60C,GACtC,IAAK,MAAMn0C,KAAQxuC,KAAK49F,YAAYpwD,cAC9BgB,GAAMV,SAAWA,IACnBU,EAAKK,WAAa8zC,EAGxB,CACA,QAAI1xC,GACF,OAAOjxC,KAAK6rE,KACd,CACA,iBAAIr+B,GACF,OAAOxtC,KAAK49F,YAAYpwD,aAC1B,CACA,eAAIC,GACF,OAAOztC,KAAK49F,YAAYnwD,WAC1B,CACAE,aAAAA,GACE,OAAO3tC,KAAK49F,YAAYjwD,eAC1B,CACAE,eAAAA,CAAgB1B,GACd,OAAOnsC,KAAK49F,YAAY/vD,gBAAgB1B,EAC1C,CACA4B,mBAAAA,CAAoB5B,GAClB,OAAOnsC,KAAK49F,YAAY7vD,oBAAoB5B,EAC9C,CACA6B,cAAAA,GACE,OAAOhuC,KAAK49F,YAAY5vD,gBAC1B,CACA+vD,UAAAA,CAAWhxD,GAIT,IAAKA,EACH,OAAO,KAET,IAAIhhB,EAAS/rB,KAAK69F,SAAS9wD,GAK3B,OAJKhhB,IACHA,EAAS/rB,KAAKg+F,SAASjxD,GACvB/sC,KAAK69F,SAAS9wD,GAAchhB,GAEvBA,CACT,CACQkyE,gBAAAA,CAAiBlyD,EAAgB2B,GACvC,IAAII,EAAS6vD,GAAmBO,gBAAgB,GAChD,GAAIpwD,EAAQ,CACAtrC,KAAKksC,MAAMZ,EAAQa,WAAa,EAAK,GACvCjB,IACNI,EAAS,KAEb,CAQA,OAPKA,IACHA,EAAS9tC,KAAK8vC,QAAQkmC,mBACpB9pC,GAAsBJ,GAAoBC,GAAS,MAAO,GAC1D,IAAIhqC,aAA2B,EAAd2rC,IAEnBiwD,GAAmBO,gBAAgB7mC,QAAQvpB,IAEtCA,CACT,CACQkwD,QAAAA,CAASG,GAIf,MAAM3/B,EAAoB,GACpB4/B,EAA0C,GAC1C5wD,EAAgBxtC,KAAK49F,YAAYpwD,cACjCT,EAAaoxD,EAAWnQ,MAAM,KAAKnrF,IAAKC,GAAQK,OAAOL,IAC7D,IAAK,IAAIu7F,EAAM,EAAGA,EAAMtxD,EAAWxrC,OAAQ88F,IAAO,CAChD,MAAMtyD,EAASgB,EAAWsxD,GAC1B,IAAIC,EAAa9wD,EAAczB,GAC3B+B,EAASwwD,GAAYxwD,OACpBA,IACHvtC,QAAQi6C,KAAK,sCAAsC1O,GAAoBC,OACvE+B,EAAS9tC,KAAKi+F,iBAAiBlyD,EAAQ/rC,KAAK49F,YAAYlwD,aACxD4wD,EAAa,CACXxwD,SACA7gB,OAAQ,EACR4hB,WAAY,EACZ3uC,KAAM,IAAIsiB,GAAoBU,EAAgBkB,SAC9CsoB,OAAQ,GACRwB,SAAU,WAGd,MAAM8gD,EAAYvJ,GAAuBG,mBAAmB0Y,EAAWp+F,MACvE,IAAK8uF,EACH,MAAM,IAAIpvF,MAAM,gCAElB,MAAMg+C,EAAQwgD,EAAoB/9C,UAAWv9C,GAAQA,EAAIgrC,SAAWA,GAC9DpB,EAAS4xD,EAAW5xD,OAC1B,IAAI3gB,EAAS6xB,GAAS,EAAI4gB,EAAQ5gB,GAAS,GAAGlR,KAAUvpC,OAA+B,aAAxBm7F,EAAWpwD,YAC1EniB,GAAU,IAAI0+D,GAAmBuE,MAAcsP,EAAWrxE,UAAUoxE,IAChEzgD,GAAS,EACX4gB,EAAQ5gB,GAAS7xB,GAEjByyC,EAAQr9D,KAAK4qB,GACbqyE,EAAoBj9F,KAAKm9F,GAE7B,CACA,MAAO,CACLC,WAAY//B,EAAQv7D,KAAK,KACzBkvE,QAASisB,EAEb,CACAI,IAAAA,GACEx+F,KAAK8vC,QAAQ+9B,gBAAgB7tE,KAC/B,CACA+uE,IAAAA,CAAK/kD,EAA8Bs1B,EAAelT,GAChDpsC,KAAKw+F,OACLx+F,KAAK8vC,QAAQi/B,KAAK/kD,EAAes1B,EAAOlT,EAC1C,CACA+pC,aAAAA,CAAcnsD,EAA8Bs1B,EAAelT,EAAegqC,GACxEp2E,KAAKw+F,OACLx+F,KAAK8vC,QAAQqmC,cAAcnsD,EAAes1B,EAAOlT,EAAOgqC,EAC1D,EClJK,MAAeqoB,GACpB10E,qBACU8hD,MACV,uBAAW6yB,GACT,OAAO1+F,KAAK2+F,aACd,CACA,WAAA5+F,GACEC,KAAK6rE,MAAQ,IACf,CACA,QAAI56B,GACF,OAAOjxC,KAAK4+F,SAAS5+F,KAAKD,YAC5B,CACA8+F,cAAAA,GACE7+F,KAAK6rE,MAAQ,IACf,CACU+yB,QAAAA,CAAS36C,GACjB,OAAIjkD,OAASikD,EAAKy6C,aACT,IAEY,OAAf1+F,KAAK6rE,QACP7rE,KAAK6rE,MAAQ7rE,KAAK8+F,eAEb9+F,KAAK6rE,MAEhB,EAIK,MAAMkzB,WAAyBN,GACpC10E,qBAAoD,IAAIg1E,GAChDC,SACAC,WACAC,UACAC,WACR,WAAAp/F,GACE6D,QACA5D,KAAKg/F,SAAWh/F,KAAKi/F,WAAaj/F,KAAKk/F,UAAYl/F,KAAKm/F,YAAa,CACvE,CACAp7F,KAAAA,GACE,OAAO,IAAIg7F,IAAmBrR,aAC5B1tF,KAAKg/F,SACLh/F,KAAKi/F,WACLj/F,KAAKk/F,UACLl/F,KAAKm/F,WAET,CACA,WAAIC,GACF,OAAOp/F,KAAKg/F,QACd,CACA,WAAII,CAAQt8F,GACN9C,KAAKg/F,aAAel8F,IACtB9C,KAAKg/F,WAAal8F,EAClB9C,KAAK6+F,iBAET,CACA,aAAIQ,GACF,OAAOr/F,KAAKi/F,UACd,CACA,aAAII,CAAUv8F,GACR9C,KAAKi/F,eAAiBn8F,IACxB9C,KAAKi/F,aAAen8F,EACpB9C,KAAK6+F,iBAET,CACA,YAAIS,GACF,OAAOt/F,KAAKk/F,SACd,CACA,YAAII,CAASx8F,GACP9C,KAAKk/F,cAAgBp8F,IACvB9C,KAAKk/F,YAAcp8F,EACnB9C,KAAK6+F,iBAET,CACA,aAAIU,GACF,OAAOv/F,KAAKm/F,UACd,CACA,aAAII,CAAUz8F,GACR9C,KAAKm/F,eAAiBr8F,IACxB9C,KAAKm/F,aAAer8F,EACpB9C,KAAK6+F,iBAET,CACAnR,YAAAA,CAAaxgF,EAAYgQ,EAAY5a,EAAYD,GAK/C,OAJArC,KAAKo/F,QAAUlyF,EACflN,KAAKq/F,UAAYniF,EACjBld,KAAKs/F,SAAWh9F,EAChBtC,KAAKu/F,UAAYl9F,EACVrC,IACT,CACU8+F,WAAAA,GACR,IAAIh8F,EAAM,EAaV,OAZI9C,KAAKo/F,UACPt8F,GAAO,GAEL9C,KAAKq/F,YACPv8F,GAAO,GAEL9C,KAAKs/F,WACPx8F,GAAO,GAEL9C,KAAKu/F,YACPz8F,GAAO,GAEFm2C,OAAOn2C,EAChB,EAGK,MAAM08F,WAA4Bf,GACvC10E,qBAAoD,IAAIy1E,GAChDC,SACAC,wBACAC,aACAC,aACAC,eACAC,eACAC,aACAC,eACR,WAAAjgG,GACE6D,QACA5D,KAAKy/F,UAAW,EAChBz/F,KAAK0/F,yBAA0B,EAC/B1/F,KAAK2/F,aAAe,MACpB3/F,KAAK4/F,aAAe,OACpB5/F,KAAK6/F,eAAiB,MACtB7/F,KAAK8/F,eAAiB,OACtB9/F,KAAK+/F,aAAe,MACpB//F,KAAKggG,eAAiB,KACxB,CACAj8F,KAAAA,GACE,MAAM5B,EAAQ,IAAIq9F,GAMlB,OALAr9F,EAAM+tE,OAAOlwE,KAAKy/F,UAClBt9F,EAAM89F,sBAAsBjgG,KAAK0/F,yBACjCv9F,EAAMguE,gBAAgBnwE,KAAK2/F,aAAc3/F,KAAK4/F,cAC9Cz9F,EAAMiuE,kBAAkBpwE,KAAK6/F,eAAgB7/F,KAAK8/F,gBAClD39F,EAAM+9F,iBAAiBlgG,KAAK+/F,aAAc//F,KAAKggG,gBACxC79F,CACT,CACA,WAAIg+F,GACF,OAAOngG,KAAKy/F,QACd,CACA,WAAIU,CAAQr9F,GACN9C,KAAKy/F,aAAe38F,IACtB9C,KAAKy/F,WAAa38F,EAClB9C,KAAK6+F,iBAET,CACA,0BAAIuB,GACF,OAAOpgG,KAAK0/F,uBACd,CACA,0BAAIU,CAAuBt9F,GACrB9C,KAAK0/F,4BAA8B58F,IACrC9C,KAAK0/F,0BAA4B58F,EACjC9C,KAAK6+F,iBAET,CACA,eAAIwB,GACF,OAAOrgG,KAAK2/F,YACd,CACA,eAAIU,CAAYv9F,GACV9C,KAAK2/F,eAAiB78F,IACxB9C,KAAK2/F,aAAe78F,EACpB9C,KAAK6+F,iBAET,CACA,iBAAIyB,GACF,OAAOtgG,KAAK6/F,cACd,CACA,iBAAIS,CAAcx9F,GACZ9C,KAAK6/F,iBAAmB/8F,IAC1B9C,KAAK6/F,eAAiB/8F,EACtB9C,KAAK6+F,iBAET,CACA,eAAI0B,GACF,OAAOvgG,KAAK4/F,YACd,CACA,eAAIW,CAAYz9F,GACV9C,KAAK4/F,eAAiB98F,IACxB9C,KAAK4/F,aAAe98F,EACpB9C,KAAK6+F,iBAET,CACA,iBAAI2B,GACF,OAAOxgG,KAAK8/F,cACd,CACA,iBAAIU,CAAc19F,GACZ9C,KAAK8/F,iBAAmBh9F,IAC1B9C,KAAK8/F,eAAiBh9F,EACtB9C,KAAK6+F,iBAET,CACA,eAAI4B,GACF,OAAOzgG,KAAK+/F,YACd,CACA,eAAIU,CAAY39F,GACV9C,KAAK+/F,eAAiBj9F,IACxB9C,KAAK+/F,aAAej9F,EACpB9C,KAAK6+F,iBAET,CACA,iBAAI6B,GACF,OAAO1gG,KAAKggG,cACd,CACA,iBAAIU,CAAc59F,GACZ9C,KAAKggG,iBAAmBl9F,IAC1B9C,KAAKggG,eAAiBl9F,EACtB9C,KAAK6+F,iBAET,CACA3uB,MAAAA,CAAO5tE,GAEL,OADAtC,KAAKmgG,QAAU79F,EACRtC,IACT,CACAigG,qBAAAA,CAAsB39F,GAEpB,OADAtC,KAAKogG,uBAAyB99F,EACvBtC,IACT,CACA2gG,YAAAA,CAAatgB,EAAgBugB,GAK3B,OAJA5gG,KAAKqgG,YAAchgB,EACnBrgF,KAAKugG,YAAcK,EACnB5gG,KAAKsgG,cAAgBjgB,EACrBrgF,KAAKwgG,cAAgBI,EACd5gG,IACT,CACAmwE,eAAAA,CAAgBkQ,EAAgBugB,GAG9B,OAFA5gG,KAAKqgG,YAAchgB,EACnBrgF,KAAKugG,YAAcK,EACZ5gG,IACT,CACAowE,iBAAAA,CAAkBiQ,EAAgBugB,GAGhC,OAFA5gG,KAAKsgG,cAAgBjgB,EACrBrgF,KAAKwgG,cAAgBI,EACd5gG,IACT,CACAkgG,gBAAAA,CAAiBpwB,EAAoBD,GAGnC,OAFA7vE,KAAKygG,YAAc3wB,EACnB9vE,KAAK0gG,cAAgB7wB,EACd7vE,IACT,CACU8+F,WAAAA,GACR,OAAO9+F,KAAKy/F,SACR,GAAGz/F,KAAK2/F,gBAAgB3/F,KAAK6/F,kBAAkB7/F,KAAK4/F,gBAAgB5/F,KAAK8/F,kBACvE9/F,KAAK+/F,gBACH//F,KAAKggG,kBAAkB78F,SAASnD,KAAK0/F,2BACzC,GAAGv8F,SAASnD,KAAK0/F,0BACvB,EAGK,MAAMmB,WAA8BpC,GACzC10E,qBAAoD,IAAI82E,GAChDC,UACAC,mBACR,WAAAhhG,GACE6D,QACA5D,KAAK8gG,UAAY,OACjB9gG,KAAK+gG,oBAAqB,CAC5B,CACAh9F,KAAAA,GACE,OAAO,IAAI88F,IAAwBpwB,YAAYzwE,KAAK8gG,WAAWE,iBAAiBhhG,KAAK+gG,mBACvF,CACA,YAAIE,GACF,OAAOjhG,KAAK8gG,SACd,CACA,YAAIG,CAASn+F,GACP9C,KAAK8gG,YAAch+F,IACrB9C,KAAK8gG,UAAYh+F,EACjB9C,KAAK6+F,iBAET,CACApuB,WAAAA,CAAYxiD,GAEV,OADAjuB,KAAKihG,SAAWhzE,EACTjuB,IACT,CACA,qBAAIkhG,GACF,OAAOlhG,KAAK+gG,kBACd,CACA,qBAAIG,CAAkBp+F,GACpB9C,KAAKghG,iBAAiBl+F,EACxB,CACAk+F,gBAAAA,CAAiB9wB,GAKf,OAJIlwE,KAAK+gG,uBAAyB7wB,IAChClwE,KAAK+gG,qBAAuB7wB,EAC5BlwE,KAAK6+F,kBAEA7+F,IACT,CACU8+F,WAAAA,GACR,MAAO,GAAG9+F,KAAK8gG,aAAa9gG,KAAK+gG,mBAAqB,EAAI,GAC5D,EAGK,MAAMI,WAAyB1C,GACpC10E,qBAAoD,IAAIo3E,GAChDC,aACAC,cACAC,aACAC,WACAC,qBACR,WAAAzhG,GACE6D,QACA5D,KAAKohG,cAAe,EACpBphG,KAAKqhG,eAAgB,EACrBrhG,KAAKshG,aAAe,KACpBthG,KAAKuhG,WAAa,EAClBvhG,KAAKwhG,qBAAuB,CAC9B,CACAz9F,KAAAA,GACE,MAAM5B,EAAQ,IAAIg/F,GAMlB,OALAh/F,EAAMmuE,WAAWtwE,KAAKohG,cACtBj/F,EAAMouE,YAAYvwE,KAAKqhG,eACvBl/F,EAAMs/F,eAAezhG,KAAKshG,cAC1Bn/F,EAAMu/F,aAAa1hG,KAAKuhG,YACxBp/F,EAAMw/F,uBAAuB3hG,KAAKwhG,sBAC3Br/F,CACT,CACA,eAAIy/F,GACF,OAAO5hG,KAAKohG,YACd,CACA,eAAIQ,CAAY9+F,GACV9C,KAAKohG,iBAAmBt+F,IAC1B9C,KAAKohG,aAAet+F,EACpB9C,KAAK6+F,iBAET,CACA,gBAAIgD,GACF,OAAO7hG,KAAKqhG,aACd,CACA,gBAAIQ,CAAa/+F,GACX9C,KAAKqhG,kBAAoBv+F,IAC3B9C,KAAKqhG,cAAgBv+F,EACrB9C,KAAK6+F,iBAET,CACA,eAAIiD,GACF,OAAO9hG,KAAKshG,YACd,CACA,eAAIQ,CAAYh/F,GACV9C,KAAKshG,eAAiBx+F,IACxB9C,KAAKshG,aAAex+F,EACpB9C,KAAK6+F,iBAET,CACA,aAAIkD,GACF,OAAO/hG,KAAKuhG,UACd,CACA,aAAIQ,CAAUntD,GACZ50C,KAAK0hG,aAAa9sD,EACpB,CACA8sD,YAAAA,CAAa9sD,GAKX,OAJI50C,KAAKuhG,aAAe3sD,IACtB50C,KAAKuhG,WAAa3sD,EAClB50C,KAAK6+F,kBAEA7+F,IACT,CACA,uBAAIgiG,GACF,OAAOhiG,KAAKwhG,oBACd,CACA,uBAAIQ,CAAoBptD,GACtB50C,KAAK2hG,uBAAuB/sD,EAC9B,CACA+sD,sBAAAA,CAAuB/sD,GAKrB,OAJI50C,KAAKwhG,uBAAyB5sD,IAChC50C,KAAKwhG,qBAAuB5sD,EAC5B50C,KAAK6+F,kBAEA7+F,IACT,CACAswE,UAAAA,CAAWhuE,GAET,OADAtC,KAAK4hG,YAAct/F,EACZtC,IACT,CACAuwE,WAAAA,CAAYjuE,GAEV,OADAtC,KAAK6hG,aAAev/F,EACbtC,IACT,CACAyhG,cAAAA,CAAensD,GAEb,OADAt1C,KAAK8hG,YAAcxsD,EACZt1C,IACT,CACU8+F,WAAAA,GACR,MAAO,GAAG37F,OAAOnD,KAAKohG,iBAAiBj+F,OAAOnD,KAAKqhG,kBAAkBrhG,KAAKshG,gBACxEthG,KAAKuhG,cACHvhG,KAAKwhG,sBACX,EAGK,MAAMS,WAA2BxD,GACtC10E,qBAAoD,IAAIk4E,GAChDxC,SACAyC,WACAC,QACAC,YACAC,SACAC,aACAC,QACAC,YACAC,MACAC,UACAC,KACAC,UACR,WAAA7iG,GACE6D,QACA5D,KAAKy/F,UAAW,EAChBz/F,KAAKmiG,QAAUniG,KAAK6iG,WAAa,OACjC7iG,KAAKqiG,SAAWriG,KAAK8iG,YAAc,OACnC9iG,KAAKuiG,QAAUviG,KAAK+iG,WAAa,OACjC/iG,KAAKyiG,MAAQziG,KAAKgjG,SAAW,SAC7BhjG,KAAK2iG,KAAO,EACZ3iG,KAAKkiG,WAAa,WAClBliG,KAAK4iG,UAAY,UACnB,CACA7+F,KAAAA,GACE,MAAM5B,EAAQ,IAAI8/F,GASlB,OARA9/F,EAAM+tE,OAAOlwE,KAAKy/F,UAClBt9F,EAAM8gG,aAAajjG,KAAKkiG,YACxB//F,EAAM+rF,WAAWluF,KAAKmiG,QAASniG,KAAKqiG,SAAUriG,KAAKuiG,SACnDpgG,EAAMgsF,UAAUnuF,KAAKoiG,YAAapiG,KAAKsiG,aAActiG,KAAKwiG,aAC1DrgG,EAAMisF,oBAAoBpuF,KAAKyiG,OAC/BtgG,EAAMksF,mBAAmBruF,KAAK0iG,WAC9BvgG,EAAMyrF,aAAa5tF,KAAK2iG,MACxBxgG,EAAM+gG,YAAYljG,KAAK4iG,WAChBzgG,CACT,CACA,WAAIg+F,GACF,OAAOngG,KAAKy/F,QACd,CACA,WAAIU,CAAQr9F,GACN9C,KAAKy/F,aAAe38F,IACtB9C,KAAKy/F,WAAa38F,EAClB9C,KAAK6+F,iBAET,CACA,aAAIsE,GACF,OAAOnjG,KAAKkiG,UACd,CACA,aAAIiB,CAAUrgG,GACR9C,KAAKkiG,aAAep/F,IACtB9C,KAAKkiG,WAAap/F,EAClB9C,KAAK6+F,iBAET,CACA,UAAIuE,GACF,OAAOpjG,KAAKmiG,OACd,CACA,UAAIiB,CAAOtgG,GACL9C,KAAKmiG,UAAYr/F,IACnB9C,KAAKmiG,QAAUr/F,EACf9C,KAAK6+F,iBAET,CACA,cAAIgE,GACF,OAAO7iG,KAAKoiG,WACd,CACA,cAAIS,CAAW//F,GACT9C,KAAKoiG,cAAgBt/F,IACvB9C,KAAKoiG,YAAct/F,EACnB9C,KAAK6+F,iBAET,CACA,WAAIwE,GACF,OAAOrjG,KAAKqiG,QACd,CACA,WAAIgB,CAAQvgG,GACN9C,KAAKqiG,WAAav/F,IACpB9C,KAAKqiG,SAAWv/F,EAChB9C,KAAK6+F,iBAET,CACA,eAAIiE,GACF,OAAO9iG,KAAKsiG,YACd,CACA,eAAIQ,CAAYhgG,GACV9C,KAAKsiG,eAAiBx/F,IACxB9C,KAAKsiG,aAAex/F,EACpB9C,KAAK6+F,iBAET,CACA,UAAIyE,GACF,OAAOtjG,KAAKuiG,OACd,CACA,UAAIe,CAAOxgG,GACL9C,KAAKuiG,UAAYz/F,IACnB9C,KAAKuiG,QAAUz/F,EACf9C,KAAK6+F,iBAET,CACA,cAAIkE,GACF,OAAO/iG,KAAKwiG,WACd,CACA,cAAIO,CAAWjgG,GACT9C,KAAKwiG,cAAgB1/F,IACvB9C,KAAKwiG,YAAc1/F,EACnB9C,KAAK6+F,iBAET,CACA,QAAIvpD,GACF,OAAOt1C,KAAKyiG,KACd,CACA,QAAIntD,CAAKxyC,GACH9C,KAAKyiG,QAAU3/F,IACjB9C,KAAKyiG,MAAQ3/F,EACb9C,KAAK6+F,iBAET,CACA,YAAImE,GACF,OAAOhjG,KAAK0iG,SACd,CACA,YAAIM,CAASlgG,GACP9C,KAAK0iG,YAAc5/F,IACrB9C,KAAK0iG,UAAY5/F,EACjB9C,KAAK6+F,iBAET,CACA,OAAIliD,GACF,OAAO38C,KAAK2iG,IACd,CACA,OAAIhmD,CAAI75C,GACF9C,KAAK2iG,OAAS7/F,IAChB9C,KAAK2iG,KAAO7/F,EACZ9C,KAAK6+F,iBAET,CACA,YAAI0E,GACF,OAAOvjG,KAAK4iG,SACd,CACA,YAAIW,CAASzgG,GACP9C,KAAK4iG,YAAc9/F,IACrB9C,KAAK4iG,UAAY9/F,EACjB9C,KAAK6+F,iBAET,CACA3uB,MAAAA,CAAO5tE,GAEL,OADAtC,KAAKmgG,QAAU79F,EACRtC,IACT,CACAijG,YAAAA,CAAazlC,GAEX,OADAx9D,KAAKmjG,UAAY3lC,EACVx9D,IACT,CACAkuF,UAAAA,CAAWsV,EAAiBC,EAAkBC,GAI5C,OAHA1jG,KAAKojG,OAASI,EACdxjG,KAAKqjG,QAAUI,EACfzjG,KAAKsjG,OAASI,EACP1jG,IACT,CACAmuF,SAAAA,CAAUqV,EAAiBC,EAAkBC,GAI3C,OAHA1jG,KAAK6iG,WAAaW,EAClBxjG,KAAK8iG,YAAcW,EACnBzjG,KAAK+iG,WAAaW,EACX1jG,IACT,CACAouF,mBAAAA,CAAoB94C,GAElB,OADAt1C,KAAKs1C,KAAOA,EACLt1C,IACT,CACAquF,kBAAAA,CAAmB/4C,GAEjB,OADAt1C,KAAKgjG,SAAW1tD,EACTt1C,IACT,CACA4tF,YAAAA,CAAajxC,GAEX,OADA38C,KAAK28C,IAAMA,EACJ38C,IACT,CACAkjG,WAAAA,CAAY1lC,GAEV,OADAx9D,KAAKujG,SAAW/lC,EACTx9D,IACT,CACU8+F,WAAAA,GACR,OAAO9+F,KAAKy/F,SACR,GAAGz/F,KAAK2jG,UAAS,MAAU3jG,KAAK2jG,UAAS,MAAS3jG,KAAKujG,SAAS5gG,SAC9D,OACG3C,KAAKmjG,UAAUxgG,SAAS,OAAO3C,KAAK28C,IAAIh6C,SAAS,MACtD,EACN,CACQghG,QAAAA,CAASvZ,GACf,OAAOA,EACH,GAAGpqF,KAAKoiG,eAAepiG,KAAKsiG,gBAAgBtiG,KAAKwiG,eAAexiG,KAAK0iG,YACrE,GAAG1iG,KAAKmiG,WAAWniG,KAAKqiG,YAAYriG,KAAKuiG,WAAWviG,KAAKyiG,OAC/D,EAGK,MAAMmB,GACM9zD,QACjB+zD,WACAC,cACAC,gBACAC,WACAC,aACA,WAAAlkG,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAK6jG,WAAa,KAClB7jG,KAAK8jG,cAAgB,KACrB9jG,KAAK+jG,gBAAkB,KACvB/jG,KAAKgkG,WAAa,KAClBhkG,KAAKikG,aAAe,IACtB,CACAlgG,KAAAA,GACE,MAAMmgG,EAAc,IAAIN,GAAqB5jG,KAAK8vC,SAMlD,OALAo0D,EAAYL,WAAc7jG,KAAK6jG,YAAY9/F,SAAgC,KAC3EmgG,EAAYJ,cAAiB9jG,KAAK8jG,eAAe//F,SAAmC,KACpFmgG,EAAYH,gBAAmB/jG,KAAK+jG,iBAAiBhgG,SAAqC,KAC1FmgG,EAAYF,WAAchkG,KAAKgkG,YAAYjgG,SAAgC,KAC3EmgG,EAAYD,aAAgBjkG,KAAKikG,cAAclgG,SAAkC,KAC1EmgG,CACT,CACAC,QAAAA,CAASC,GACPpkG,KAAK6jG,WAAaO,EAASP,WAC3B7jG,KAAK8jG,cAAgBM,EAASN,cAC9B9jG,KAAK+jG,gBAAkBK,EAASL,gBAChC/jG,KAAKgkG,WAAaI,EAASJ,WAC3BhkG,KAAKikG,aAAeG,EAASH,YAC/B,CACA,QAAIhzD,GACF,MAAO,GAAGjxC,KAAK6jG,YAAY5yD,MAAQ,MAAMjxC,KAAK8jG,eAAe7yD,MAAQ,MACnEjxC,KAAK+jG,iBAAiB9yD,MAAQ,MAC5BjxC,KAAKgkG,YAAY/yD,MAAQ,MAAMjxC,KAAKikG,cAAchzD,MAAQ,IAChE,CACAw8C,aAAAA,CAAc4W,GACZ,OAAQrkG,KAAK6jG,WAAcQ,GAA8BrkG,KAAK6jG,YAAc,IAAI9E,EAClF,CACAuF,iBAAAA,GACEtkG,KAAK6jG,WAAa,IACpB,CACA5zB,gBAAAA,CAAiBo0B,GACf,OAAQrkG,KAAK8jG,cACVO,GAAiCrkG,KAAK8jG,eAAiB,IAAItE,EAChE,CACA+E,oBAAAA,GACEvkG,KAAK8jG,cAAgB,IACvB,CACAtzB,kBAAAA,CAAmB6zB,GACjB,OAAQrkG,KAAK+jG,gBACVM,GAAmCrkG,KAAK+jG,iBAAmB,IAAIlD,EACpE,CACA2D,sBAAAA,GACExkG,KAAK+jG,gBAAkB,IACzB,CACA1zB,aAAAA,CAAcg0B,GACZ,OAAQrkG,KAAKgkG,WAAcK,GAA8BrkG,KAAKgkG,YAAc,IAAI7C,EAClF,CACAsD,iBAAAA,GACEzkG,KAAKgkG,WAAa,IACpB,CACArW,eAAAA,CAAgB0W,GACd,OAAQrkG,KAAKikG,aACVI,GAAgCrkG,KAAKikG,cAAgB,IAAIhC,EAC9D,CACAyC,mBAAAA,GACE1kG,KAAKikG,aAAe,IACtB,CACAU,KAAAA,CAAMC,GACJ5kG,KAAK8vC,QAAQi+B,gBAAgB/tE,KAC/B,EC3oBF,MAAM6kG,GAAUriF,GAAoBC,kBAAkBS,EAAgBQ,KAChEohF,GAAiB,CAAC,WAAY,uBAAwB,wBAAyB,yBAC/EC,GAAe,CACnB,eACA,cACA,uBACA,eACA,wBACA,yBAWK,MAAMC,GACMl1D,QACTm1D,iBACAC,kBACR,WAAAnlG,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAKilG,iBAAmB,CAAC,EACzBjlG,KAAKklG,kBAAoB,CAAC,CAC5B,CACAC,SAAAA,GACEnlG,KAAKilG,iBAAmB,CAAC,EACzBjlG,KAAKklG,kBAAoB,CAAC,CAC5B,CACAE,oBAAAA,CAAqBvtB,GACnB,MAAM5mC,EAAOjxC,KAAKqlG,uBAAuBxtB,GACzC,IAAI8X,EAAW3vF,KAAKklG,kBAAkBj0D,GACtC,QAAiBxvC,IAAbkuF,EAAwB,CAC1B,MAAM2V,EAAeztB,EAAQiH,kBACvBxoC,EAAqC,CACzCvqB,OAAQu5E,EAAapmB,eACrBvjB,QAAS,CACP4pC,OAAQD,EAAarmB,SACrBumB,WAAY,SAGhB7V,EAAW3vF,KAAK8vC,QAAQ21D,yBAAyBnvD,GACjDt2C,KAAKklG,kBAAkBj0D,GAAQ0+C,CACjC,CACA,OAAOA,CACT,CACAE,mBAAAA,CACEhY,EACA6tB,EACAtB,EACAp6E,EACA27E,GAEA,IAAKA,EAAgB10D,KACnB,OAAO,KAEJ4mC,EAAQhkC,mBAEX6xD,EAAa,MAEf,MAAMz0D,EAAOjxC,KAAK4lG,sBAChBD,EAAgB10D,KAChB4mC,EACA6tB,EACAtB,EACAp6E,GAEF,IAAI2lE,EAAW3vF,KAAKilG,iBAAiBh0D,GACrC,QAAiBxvC,IAAbkuF,EAAwB,CAC1B,MAAMkW,EAAgBH,EAClB1lG,KAAK8vC,QAAQg2D,kBAAkBJ,EAAW3H,WAAWlmB,EAAQhkC,kBAAkB0qD,YAC/E,KACE+G,EAAeztB,EAAQiH,kBACvB5iB,EAAyB,CAC7BqpC,OAAQD,EAAavmB,SACrBymB,WAAY,QAEVK,IACF3pC,EAAOiW,QAAU0zB,GAEnB,MAAME,EAAiB/lG,KAAKgmG,qBAAqBN,EAAYtB,EAAUp6E,GACjEi8E,EAAoBjmG,KAAKkmG,wBAAwBP,EAAgBhV,YAAayT,GAC9E+B,EAAoBR,EAAgBjV,aAAa7tF,IAAKC,GAC1D9C,KAAKomG,uBAAuBhC,EAAUthG,IAElCwzC,EAAoC,CACxC6hB,MAAOlnB,EACPllB,OAAQu5E,EAAapmB,eACrBhjB,SACAmqC,UAAWN,EACXO,aAAcL,EACdM,YAAavmG,KAAKwmG,uBAAuBb,EAAgB3zD,YAAaoyD,GACtE7nC,SAAU,CACRgpC,OAAQD,EAAatmB,SACrBwmB,WAAY,OACZiB,QAASN,IAGbxW,EAAW3vF,KAAK8vC,QAAQ42D,wBAAwBpwD,GAChDt2C,KAAKilG,iBAAiBh0D,GAAQ0+C,CAChC,CACA,OAAOA,CACT,CACQqW,oBAAAA,CACNN,EACAtB,EACAp6E,GAEA,MAAM28E,EAAWzc,GAAiBlgE,GAClC,IAAK28E,EACH,MAAM,IAAI/mG,MAAM,0DAA0DoqB,KAE5E,MAAM+5E,EACJK,GAAUL,iBAAoB6C,GAAyBlI,aACnDuC,EAAW9W,GAAY4Z,EAAgB9C,UAC7C,IAAKA,EACH,MAAM,IAAIrhG,MAAM,qDAAqDmkG,EAAgB9C,YAEvF,MACMoD,EAA2B,CAC/BsC,WACAE,UAHgB7mG,KAAK8vC,QAAQ2nC,yBAA2B,KAAO,MAI/DwpB,YAQF,OANIjhG,KAAK8vC,QAAQ9hB,OAAO8sE,SAAS3mB,IAAI,wBACnCkwB,EAAMyC,eAAiB/C,EAAgB7C,mBAExB,mBAAbyF,GAA8C,eAAbA,IACnCtC,EAAM0C,iBAAmBrB,GAAY13D,kBAAkBg5D,YAAcnC,GAAU,SAAW,UAErFR,CACT,CACQmC,sBAAAA,CAAuBx0D,EAAqBoyD,GAClD,MAAO,CACLh4D,MAAO4F,EACPouD,uBACEpuD,EAAc,IACboyD,GAAUN,eAAkB8C,GAAuBlI,cACjD0B,uBAET,CACQ8F,uBAAAA,CACNvV,EACAyT,GAEA,IAAKzT,EACH,OAEF,MAAMqT,EAAaI,GAAUJ,YAAe4C,GAAoBlI,aAC1DuF,EACJG,GAAUH,cAAiB2C,GAAsBlI,aAC7CuI,EAAanC,GAAe9wD,QAAQ28C,IAAgB,EACpDuW,EAAWnC,GAAa/wD,QAAQ28C,IAAgB,EAIhD0T,EAA8B,CAClCtjF,OAAQ4vE,EACRwW,oBALwBD,GAAWlD,EAAWnC,aAM9CuF,aAJAF,GAAYlD,EAAWpC,YAActY,GAAe0a,EAAWlC,aAAe,UAUhF,GAJ6B,IAAzBkC,EAAWjC,WAAsD,IAAnCiC,EAAWhC,sBAC3CqC,EAAMtC,UAAYiC,EAAWjC,UAC7BsC,EAAMrC,oBAAsBgC,EAAWhC,qBAErCiF,EAAY,CACd,MAAMI,EAAepD,EAAa9D,QAC9BngG,KAAKsnG,uBACHrD,EAAa3uD,KACb2uD,EAAab,OACba,EAAaZ,QACbY,EAAaX,aAEf7hG,EACE8lG,EAActD,EAAa9D,QAC7BngG,KAAKsnG,uBACHrD,EAAajB,SACbiB,EAAapB,WACboB,EAAanB,YACbmB,EAAalB,iBAEfthG,EACE+lG,EAAkBvD,EAAa9D,QAAU8D,EAAaV,cAAW9hG,EACjEgmG,EAAmBxD,EAAa9D,QAAU8D,EAAad,eAAY1hG,EACzE4iG,EAAMgD,aAAeA,EACrBhD,EAAMkD,YAAcA,EACpBlD,EAAMmD,gBAAkBA,EACxBnD,EAAMoD,iBAAmBA,CAC3B,CACA,OAAOpD,CACT,CACQiD,sBAAAA,CACNhyD,EACA8tD,EACAC,EACAC,GAEA,MAAO,CACLpb,QAASoB,GAAeh0C,GACxB8tD,OAAQtZ,GAAasZ,GACrBsE,YAAa5d,GAAauZ,GAC1BC,OAAQxZ,GAAawZ,GAEzB,CACQ8C,sBAAAA,CAAuBhC,EAAgCrjF,GAC7D,MAAM+iF,EACJM,GAAUN,eAAkB8C,GAAuBlI,aAC/CmF,EAAaO,GAAUP,YAAe+C,GAAoBlI,aAK1D2F,EAA6B,CACjCtjF,OAAQA,EACRoiF,WANQU,EAAWzE,QAAUuI,cAAcC,IAAM,IACzC/D,EAAWxE,UAAYsI,cAAcE,MAAQ,IAC7ChE,EAAWvE,SAAWqI,cAAcG,KAAO,IAC3CjE,EAAWtE,UAAYoI,cAAcI,MAAQ,IAQvD,OAHIjE,EAAc3D,UAChBkE,EAAM2D,MAAQhoG,KAAKioG,iBAAiBnE,IAE/BO,CACT,CACQ4D,gBAAAA,CAAiBnE,GACvB,MAAO,CACL/2B,MAAO/sE,KAAKkoG,qBACVpE,EAAcrD,YACdqD,EAAczD,YACdyD,EAAcvD,aAEhB1wB,MAAO7vE,KAAKkoG,qBACVpE,EAAcpD,cACdoD,EAAcxD,cACdwD,EAActD,eAGpB,CACQ0H,oBAAAA,CAAqBjpD,EAAmBkpD,EAAoBC,GAClE,MAAMC,EAAY/d,GAAiBrrC,GACnC,IAAKopD,EACH,MAAM,IAAIzoG,MAAM,oDAAoDq/C,KAEtE,MAAMqpD,EAAY9d,GAAa2d,GAC/B,IAAKG,EACH,MAAM,IAAI1oG,MAAM,4DAA4DuoG,KAE9E,MAAMI,EAAY/d,GAAa4d,GAC/B,IAAKG,EACH,MAAM,IAAI3oG,MAAM,0DAA0DwoG,KAE5E,MAAO,CACLC,YACAC,YACAC,YAEJ,CACQ3C,qBAAAA,CACN4C,EACA3wB,EACA6tB,EACAtB,EACAp6E,GAKA,MAAO,GAHa6tD,EAAQ5mC,QACTy0D,GAAY3H,WAAWlmB,EAAQhkC,kBAAkB0qD,YAAc,MAE3CiK,KAAUx+E,KAD/Bo6E,GAAUnzD,MAAQ,MAC2C9tC,OAC7EnD,KAAK8vC,QAAQ2nC,2BAEjB,CACQ4tB,sBAAAA,CAAuBxtB,GAC7B,OAAOA,EAAQ5mC,IACjB,EC7QK,MAAMw3D,WAA0B/rB,GACpBgsB,SACAnuF,OACAC,QACTmuF,UACS98B,MACT+8B,mBACAC,kBACR,WAAA9oG,CACEiuB,EACAskB,EACAC,EACAqjC,GAGA,GADAhyE,MAAMoqB,GACFskB,EAAiB/wC,OAAS,GAAK+wC,EAAiB+N,UAAWv9C,IAASA,IAAQ,EAC9E,MAAM,IAAIlD,MAAM,kDA0BlB,GAxBAI,KAAK28E,QAAU,KACf38E,KAAK0oG,SAAW,CACdp2D,iBACEA,GAAkB/wC,OAAS,EACvB+wC,EAAiBzvC,IAAK+xC,IAAW,CAC/B1D,QAAS0D,EACT7+B,KAAM,EACN68E,MAAO,EACPhkC,MAAO,EACPkkC,iBAAiB,KAEnB,KACNvgD,gBAAiBA,EACb,CACErB,QAASqB,EACTx8B,KAAM,EACN68E,MAAO,EACPhkC,MAAO,EACPkkC,iBAAiB,GAEnB,KACJ9gD,YAAa4jC,GAAK5jC,aAAe,EACjCC,mBAAoB2jC,GAAK3jC,qBAAsB,IAE5CjyC,KAAK0oG,SAASp2D,mBAAqBtyC,KAAK0oG,SAASn2D,gBACpD,MAAM,IAAI3yC,MAAM,8EAQlB,GANAI,KAAKua,OAASva,KAAK0oG,SAASp2D,iBACxBtyC,KAAK0oG,SAASp2D,iBAAiB,GAAGpB,QAAQz2B,MAC1Cza,KAAK0oG,SAASn2D,gBAAgBrB,QAAQz2B,MAC1Cza,KAAKwa,QAAUxa,KAAK0oG,SAASp2D,iBACzBtyC,KAAK0oG,SAASp2D,iBAAiB,GAAGpB,QAAQx2B,OAC1C1a,KAAK0oG,SAASn2D,gBAAgBrB,QAAQx2B,OAExC1a,KAAM0oG,SAASp2D,kBACbtyC,KAAK0oG,SAASp2D,iBAAiB+N,UAC5Bv9C,GAAQA,EAAIouC,QAAQz2B,QAAUza,KAAKua,QAAUzX,EAAIouC,QAAQx2B,SAAW1a,KAAKwa,UACvE,GACNxa,KAAK0oG,SAASn2D,kBACZvyC,KAAK0oG,SAASn2D,gBAAgBrB,QAAQz2B,QAAUza,KAAKua,QACpDva,KAAK0oG,SAASn2D,gBAAgBrB,QAAQx2B,SAAW1a,KAAKwa,SAE1D,MAAM,IAAI5a,MAAM,4EAElBI,KAAK2oG,UAAY,EACjB3oG,KAAK4oG,mBAAqB,KAC1B5oG,KAAK6oG,kBAAoB,KACzB,MAAMC,EACJ9oG,KAAK0oG,SAASp2D,kBAAkBzvC,IAAK6tC,GAAQA,EAAIQ,QAAQnwB,QAAQ9d,KAAK,MAAQ,GAC1E8lG,EAAsB/oG,KAAK0oG,SAASn2D,iBAAiBrB,QAAQnwB,QAAU,GAC7E/gB,KAAK6rE,MAAQ,GAAGi9B,KAAuBC,KAAuB/oG,KAAK0oG,SAAS12D,aAAe,IAC3FhyC,KAAKgpG,OACP,CACAC,UAAAA,GACE,OAAOjpG,KAAK0oG,QACd,CACA,YAAIQ,GACF,OAAOlpG,KAAK2oG,SACd,CACAQ,OAAAA,GACE,OAAOnpG,KAAK6rE,KACd,CACAu9B,QAAAA,GACE,MAAMC,EAAarpG,KAAK0oG,SAASp2D,mBAAmB,IAAMtyC,KAAK0oG,SAASn2D,gBACxE,OAAO82D,EAAa7mG,KAAKC,IAAI4mG,EAAWn4D,QAAQz2B,OAAS4uF,EAAWz6C,MAAO,GAAK,CAClF,CACA06C,SAAAA,GACE,MAAMD,EAAarpG,KAAK0oG,SAASp2D,mBAAmB,IAAMtyC,KAAK0oG,SAASn2D,gBACxE,OAAO82D,EAAa7mG,KAAKC,IAAI4mG,EAAWn4D,QAAQx2B,QAAU2uF,EAAWz6C,MAAO,GAAK,CACnF,CACAsmB,OAAAA,GAIE,GAHIl1E,KAAK0oG,UAAUn2D,iBAAiBrB,SAAS70B,UAC3Crc,KAAK0oG,SAASn2D,gBAAgBrB,QAAQgpC,SAEpCl6E,KAAK0oG,UAAUp2D,iBACjB,IAAK,MAAMhG,KAAKtsC,KAAK0oG,SAASp2D,iBACxBhG,GAAG4E,SAAS70B,UACdiwB,EAAE4E,QAAQgpC,SAIXl6E,KAAK8vC,QAAQilC,iBAChB/0E,KAAKgpG,OAET,CACAh0B,OAAAA,GAEE,GADAh1E,KAAK28E,QAAU,KACX38E,KAAK4oG,mBAAoB,CAC3B,IAAK,MAAMl4D,KAAO1wC,KAAK4oG,mBACrBl4D,EAAIskC,UAENh1E,KAAK4oG,mBAAqB,IAC5B,CACI5oG,KAAK6oG,oBACP7oG,KAAK6oG,kBAAkB7zB,UACvBh1E,KAAK6oG,kBAAoB,KAE7B,CACAU,iCAAAA,CAAkC3rD,EAAek1C,GAC/C,MAAMxmD,EAAItsC,KAAK0oG,SAASp2D,mBAAmBsL,GACvCtR,IACFA,EAAEwmD,kBAAoBA,EAE1B,CACA0W,iCAAAA,CAAkC5rD,GAChC,OAAO59C,KAAK0oG,SAASp2D,mBAAmBsL,IAAQk1C,eAClD,CACAjgD,0BAAAA,CAA2B+K,EAAe7nC,GACxC,MAAMu2B,EAAItsC,KAAK0oG,SAASp2D,mBAAmBsL,GACvCtR,GAAKA,EAAEv2B,OAASA,IAClBu2B,EAAEv2B,KAAOA,EACT/V,KAAK2oG,YAET,CACAc,0BAAAA,CAA2B7rD,GACzB,OAAO59C,KAAK0oG,SAASp2D,mBAAmBsL,GAAO7nC,IACjD,CACA68B,0BAAAA,CAA2BgL,EAAegR,GACxC,MAAMtiB,EAAItsC,KAAK0oG,SAASp2D,mBAAmBsL,GACvCtR,GAAKA,EAAEsiB,QAAUA,IACnBtiB,EAAEsiB,MAAQA,EACV5uD,KAAK2oG,YAET,CACAe,0BAAAA,CAA2B9rD,GACzB,OAAO59C,KAAK0oG,SAASp2D,mBAAmBsL,GAAOgR,KACjD,CACA9b,uBAAAA,CAAwB8K,EAAeg1C,GACrC,MAAMtmD,EAAItsC,KAAK0oG,SAASp2D,mBAAmBsL,GACvCtR,GAAKA,EAAEsmD,QAAUA,IACnBtmD,EAAEsmD,MAAQA,EACV5yF,KAAK2oG,YAET,CACAgB,uBAAAA,CAAwB/rD,GACtB,OAAO59C,KAAK0oG,SAASp2D,mBAAmBsL,GAAOg1C,KACjD,CACAgX,0BAAAA,CAA2B7zF,GACzB,MAAMu2B,EAAItsC,KAAK0oG,SAASn2D,gBACpBjG,GAAKA,EAAEv2B,OAASA,IAClBu2B,EAAEv2B,KAAOA,EACT/V,KAAK2oG,YAET,CACAkB,0BAAAA,GACE,OAAO7pG,KAAK0oG,SAASn2D,iBAAiBx8B,IACxC,CACA+zF,uBAAAA,CAAwBlX,GACtB,MAAMtmD,EAAItsC,KAAK0oG,SAASn2D,gBACpBjG,GAAKA,EAAEsmD,QAAUA,IACnBtmD,EAAEsmD,MAAQA,EACV5yF,KAAK2oG,YAET,CACAoB,uBAAAA,GACE,OAAO/pG,KAAK0oG,SAASn2D,iBAAiBqgD,KACxC,CACAt/C,kBAAAA,GACE,OAAOtzC,KAAK0oG,UAAUn2D,iBAAiBrB,SAAW,IACpD,CACAyB,mBAAAA,GACE,OAAO3yC,KAAK0oG,UAAUp2D,kBAAkBzvC,IAAKC,GAAQA,GAAKouC,SAAW,OAAS,EAChF,CACA84D,kBAAAA,CAA0CpsD,GACxC,OAAO59C,KAAM2yC,sBAAsBiL,IAA2B,IAChE,CACAqsD,sBAAAA,GACE,OAAOjqG,KAAK6oG,iBACd,CACAqB,sBAAAA,GACE,OAAOlqG,KAAK4oG,kBACd,CACAuB,eAAAA,GACE,OAAOnqG,KAAK0oG,UAAUp2D,kBAAkBzvC,IACrCC,GAASA,GAAKouC,SAA+B89C,WAAa,KAE/D,CACAob,cAAAA,GACE,OAAQpqG,KAAK0oG,SAASn2D,iBAAiBrB,SAA+B89C,WAAa,IACrF,CACAwP,IAAAA,GACE,MAAM,IAAI5+F,MAAM,iCAClB,CACAyqG,MAAAA,GACE,MAAM,IAAIzqG,MAAM,mCAClB,CACQopG,KAAAA,GACN,GAAIhpG,KAAK0oG,SAAS12D,YAAc,EAAG,CACjChyC,KAAK4oG,mBAAqB,GAC1B,IAAK,MAAM0B,KAAmBtqG,KAAK0oG,SAASp2D,iBAAkB,CAC5D,MAAMi4D,EAAcvqG,KAAMguB,OAAwB6mE,iBAAiB,CACjEjyE,KAAM,CACJnI,MAAOza,KAAKua,OACZG,OAAQ1a,KAAKwa,QACbm5E,mBAAoB,GAEtB5yE,OAAQupF,EAAiBp5D,QAA8B89C,UACvDH,cAAe,EACf78C,YAAahyC,KAAK0oG,SAAS12D,YAC3BrvB,UAAW,KACXwrB,MAAO2mD,gBAAgBlT,SAAWkT,gBAAgBE,oBAEpDh1F,KAAK4oG,mBAAmBznG,KAAKopG,EAC/B,CACA,GAAIvqG,KAAK0oG,SAASn2D,gBAAiB,CACjC,MAAMi4D,EAAmBxqG,KAAMguB,OAAwB6mE,iBAAiB,CACtEjyE,KAAM,CACJnI,MAAOza,KAAKua,OACZG,OAAQ1a,KAAKwa,QACbm5E,mBAAoB,GAEtB5yE,OAAS/gB,KAAK0oG,SAASn2D,gBAAgBrB,QAA8B89C,UACrEH,cAAe,EACf78C,YAAahyC,KAAK0oG,SAAS12D,YAC3BrvB,UAAW,KACXwrB,MAAO2mD,gBAAgBlT,SAAWkT,gBAAgBE,oBAEpDh1F,KAAK6oG,kBAAoB2B,CAC3B,CACF,CACAxqG,KAAK28E,QAAU,CAAC,CAClB,CACA/C,aAAAA,GACE,OAAO,CACT,CACA6wB,cAAAA,GACE,OAAOzqG,KAAK0oG,SAAS12D,WACvB,ECrQF,MAAM6yD,GAAUriF,GAAoBC,kBAAkBS,EAAgBQ,KAChE+N,GAAUjP,GAAoBC,kBAAkBS,EAAgB2B,KAE/D,MAAM6lF,WAA0B5oB,GAC5BklB,UACAzlG,OACT,WAAAxB,CACEiuB,EACA66C,EACA16B,GAEA,KAAM06B,aAAgBwG,aAAkBxG,aAAgBwT,aACtD,MAAM,IAAIz8E,MAAM,sBAElBgE,MAAMoqB,EAAQ4d,GAAsBovC,SAAW7sC,EAAO06B,GACtD7oE,KAAKgnG,UAAYn+B,aAAgBwG,YAAcw1B,GAAUpzE,GACzDzxB,KAAKuB,OAASsnE,EAAKtnE,MACrB,ECjBK,MAAMopG,GACM76D,QACT86D,sBACR,WAAA7qG,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAK4qG,sBAAwB,CAAC,CAChC,CACAtrB,oBAAAA,CAAqBhpC,GACnB,MAAMrF,EAAOqF,EAAOt2C,KAAK6qG,cAAcv0D,GAAQ,GAC/C,IAAIw0D,EAAM9qG,KAAK4qG,sBAAsB35D,GACrC,IAAK65D,EAAK,CAER,GADAA,EAAM9qG,KAAK+qG,sBAAsBz0D,IAC7Bw0D,EAGF,MAAM,IAAIlrG,MAAM,wCAAwCqxC,KAFxDjxC,KAAK4qG,sBAAsB35D,GAAQ65D,CAIvC,CACA,OAAOA,CACT,CACQD,aAAAA,CAAcv0D,GACpB,IAAIrF,EAAO,GACX,IAAK,MAAM0tB,KAASroB,EAAKlpB,QAAS,CAChC,IAAIjkB,EAAI,GAAGw1D,EAAMjd,WAAWid,EAAMC,cAC9BD,EAAM7wB,OACR3kC,GAAK,KAAKw1D,EAAM7wB,OAAO5tC,QAAQy+D,EAAM7wB,OAAOixB,oBAAoBJ,EAAM7wB,OAAOgxB,iBACpEH,EAAM9O,QACf1mD,GAAK,IAAIw1D,EAAM9O,QAAQ3vD,QACdy+D,EAAMztB,QACf/nC,GAAK,IAAIw1D,EAAMztB,QAAQuV,cAAckY,EAAMztB,QAAQ+tB,iBAAiB97D,SAChEw7D,EAAMztB,QAAQmuB,iBAETV,EAAMO,eACf/1D,GAAK,IAAIw1D,EAAMO,eAAeC,UAAUR,EAAMO,eAAen+C,UAAU49C,EAAMO,eAAeD,iBACnFN,EAAMS,kBACfj2D,GAAK,MAEP8nC,EAAO,GAAGA,KAAQ9nC,GACpB,CACA,OAAO8nC,CACT,CACQ85D,qBAAAA,CAAsBz0D,GAC5B,MAAMowC,EAAiD,CACrDt5D,QACEkpB,GAAMlpB,QAAQvqB,IAAK87D,IACjB,MAAMjd,EAAUid,EAAMjd,QAChBkd,GACHD,EAAMC,WAAav9C,EAAW+1B,OAAS4zD,eAAe7mB,OAAM,IAC5DxlB,EAAMC,WAAav9C,EAAWg2B,SAAW2zD,eAAeC,SAAW,IACnEtsC,EAAMC,WAAav9C,EAAWi2B,QAAU0zD,eAAeE,QAAO,GAC3Dp9D,EAAiC6wB,EAAM7wB,OACzC,CACE5tC,KAAMy+D,EAAM7wB,OAAO5tC,KACnB6+D,iBAAkBJ,EAAM7wB,OAAOixB,iBAE/BD,eAAgB37D,OAAOw7D,EAAM7wB,OAAOgxB,iBAAmB,QAEzDr9D,EACEouD,EAAmC8O,EAAM9O,QAC3C,CACE3vD,KAAMy+D,EAAM9O,QAAQ3vD,WAEtBuB,EACEyvC,EAAmCytB,EAAMztB,QAC3C,CACEuV,WAAYkY,EAAMztB,QAAQuV,WAC1BwY,cAAeN,EAAMztB,QAAQ+tB,oBAE/Bx9D,EACEy9D,EAAiDP,EAAMO,eACzD,CACEC,OAAQR,EAAMO,eAAeC,OAC7BF,cAAeN,EAAMO,eAAeD,cACpCl+C,OAAQ/C,GAAiB2gD,EAAMO,eAAen+C,cAEhDtf,EACE29D,EAAmDT,EAAMS,gBAAkB,CAAK39D,OAAAA,EAChFmK,EAA6B,CACjC81C,UACAkd,cAaF,OAXI9wB,EACFliC,EAAEkiC,OAASA,EACF+hB,EACTjkD,EAAEikD,QAAUA,EACH3e,EACTtlC,EAAEslC,QAAUA,EACHguB,EACTtzD,EAAEszD,eAAiBA,EACVE,IACTxzD,EAAEwzD,gBAAkBA,GAEfxzD,KACH,IAKV,OAHI0qC,GAAM6hB,QACRuuB,EAAiBvuB,MAAQ7hB,EAAK6hB,OAEzB,CAACuuB,EAAkB1mF,KAAK8vC,QAAQ9hB,OAAO+8E,sBAAsBrkB,GACtE,ECtGK,MAAMykB,GACHtN,SACR,WAAA99F,GACEC,KAAK69F,SAAW,CAAC,CACnB,CACAiI,iBAAAA,CAAkB70D,GAChB,IAAIutB,EAAmCx+D,KAAK69F,SAAS5sD,GAqBrD,OApBKutB,IACHA,EAAU,GACVvtB,EAAK+8C,MAAM,KAAKxnC,QAASxlD,IACvB,MAAMoqG,EAAQpqG,EAAEgtF,MAAM,KAChBjiE,EAAS,CACbs/E,YAAaloG,OAAOioG,EAAM,IAC1Bl9D,SAAW/qC,OAAOioG,EAAM,IAAM,WAAa,SAC3Cr+D,WAAY,IAEd,IAAK,IAAIzrC,EAAI,EAAGA,EAAI8pG,EAAM7pG,OAAQD,GAAK,EACrCyqB,EAAOghB,WAAW5rC,KAAK,CACrB4f,OAAQ0rE,GAAmB2e,EAAM9pG,IACjC2rB,OAAQ9pB,OAAOioG,EAAM9pG,EAAI,IACzBgqG,eAAgBnoG,OAAOioG,EAAM9pG,EAAI,MAGrCk9D,EAAQr9D,KAAK4qB,KAEf/rB,KAAK69F,SAAS5sD,GAAQutB,GAEjBA,CACT,ECzBK,MAAM+sC,WAA6B7uB,GACvBgsB,SACjB,WAAA3oG,CAAYiuB,EAAsBjtB,GAChC6C,MAAMoqB,GACNhuB,KAAK0oG,SAAWt0D,OAAOyhC,OACrB,CACEghB,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,UAAW,UACXC,UAAW,UACXtc,UAAW,OACX6wB,OAAQ,EACRC,OAAQ,GACRvjB,QAAS,KACTwjB,cAAe,GAEjB3qG,GAAW,CAAA,GAEbf,KAAKq+E,OACP,CACA,QAAIptC,GACF,OAAOjxC,KAAK28E,QAAU38E,KAAK8vC,QAAQsyC,iBAAiBpiF,KAAK28E,SAAW,CACtE,CACA,gBAAIgvB,GACF,OAAO3rG,KAAK0oG,SAAS7R,QACvB,CACA,gBAAI+U,GACF,OAAO5rG,KAAK0oG,SAAS5R,QACvB,CACA,gBAAI+U,GACF,OAAO7rG,KAAK0oG,SAAS3R,QACvB,CACA,aAAIC,GACF,OAAOh3F,KAAK0oG,SAAS1R,SACvB,CACA,aAAIC,GACF,OAAOj3F,KAAK0oG,SAASzR,SACvB,CACA,aAAItc,GACF,OAAO36E,KAAK0oG,SAAS/tB,SACvB,CACA,UAAI6wB,GACF,OAAOxrG,KAAK0oG,SAAS8C,MACvB,CACA,UAAIC,GACF,OAAOzrG,KAAK0oG,SAAS+C,MACvB,CACA,WAAIvjB,GACF,OAAOloF,KAAK0oG,SAASxgB,OACvB,CACA,iBAAIwjB,GACF,OAAO1rG,KAAK0oG,SAASgD,aACvB,CACA12B,OAAAA,GACEh1E,KAAK28E,QAAU,IACjB,CACAzH,OAAAA,GACOl1E,KAAK8vC,QAAQilC,iBAChB/0E,KAAKq+E,OAET,CACQA,KAAAA,GAaN,OAZAr+E,KAAK28E,QAAU38E,KAAK8vC,QAAQg8D,iBAAiB,CAC3CH,aAAc3iB,GAAmBhpF,KAAK0oG,SAAS7R,UAC/C+U,aAAc5iB,GAAmBhpF,KAAK0oG,SAAS5R,UAC/C+U,aAAc7iB,GAAmBhpF,KAAK0oG,SAAS3R,UAC/CC,UAAW9N,GAAiBlpF,KAAK0oG,SAAS1R,WAC1CC,UAAW/N,GAAiBlpF,KAAK0oG,SAASzR,WAC1C8U,aAAc7iB,GAAiBlpF,KAAK0oG,SAAS/tB,WAC7CqxB,YAAahsG,KAAK0oG,SAAS8C,OAC3BS,YAAajsG,KAAK0oG,SAAS+C,OAC3BvjB,QAASoB,GAAetpF,KAAK0oG,SAASxgB,eAAYzmF,EAClDiqG,cAAe1rG,KAAK0oG,SAASgD,kBAEtB1rG,KAAK28E,OAChB,CACAjD,SAAAA,GACE,OAAO,CACT,ECjFK,MAAMwyB,GACMp8D,QACTq8D,UACR,WAAApsG,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAKmsG,UAAY,CAAC,CACpB,CACAC,YAAAA,CAAarrG,GACX,MAAMkwC,EAAOjxC,KAAKixC,KAAKlwC,GACvB,IAAI8uD,EAAU7vD,KAAKmsG,UAAUl7D,GAK7B,OAJK4e,IACHA,EAAU7vD,KAAKu0F,cAAcxzF,GAC7Bf,KAAKmsG,UAAUl7D,GAAQ4e,GAElBA,CACT,CACQ5e,IAAAA,CAAKlwC,GAWX,MAAO,GAVUA,EAAQ81F,SAAW59C,OAAOl4C,EAAQ81F,UAAY,MAC9C91F,EAAQ+1F,SAAW79C,OAAOl4C,EAAQ+1F,UAAY,MAC9C/1F,EAAQg2F,SAAW99C,OAAOl4C,EAAQg2F,UAAY,MAC7Ch2F,EAAQi2F,UAAY/9C,OAAOl4C,EAAQi2F,WAAa,MAChDj2F,EAAQk2F,UAAYh+C,OAAOl4C,EAAQk2F,WAAa,MAChDl2F,EAAQ45E,UAAY1hC,OAAOl4C,EAAQ45E,WAAa,MACnD55E,EAAQyqG,OAASvyD,OAAOl4C,EAAQyqG,QAAU,MAC1CzqG,EAAQ0qG,OAASxyD,OAAOl4C,EAAQ0qG,QAAU,MACzC1qG,EAAQmnF,QAAUjvC,OAAOl4C,EAAQmnF,SAAW,MACtCnnF,EAAQ2qG,cAAgBzyD,OAAOl4C,EAAQ2qG,eAAiB,IAEhF,CACQnX,aAAAA,CAAcxzF,GACpB,OAAO,IAAIwqG,GAAqBvrG,KAAK8vC,QAAS/uC,EAChD,ECbF,MAGM8jG,GAAUriF,GAAoBC,kBAAkBS,EAAgBQ,KAE/D,MAAM2oF,GACMv8D,QACTw8D,sBACAC,mBACAC,YACAC,iBACAC,gBACA3c,iBACR,WAAAhwF,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAKssG,sBAAwBtsG,KAAK8vC,QAAQ9hB,OAAO61D,uBACjD7jF,KAAKusG,mBAAqB,KAC1BvsG,KAAKwsG,YAAc,KACnBxsG,KAAKysG,iBAAmB,KACxBzsG,KAAK0sG,gBAAkB,KACvB1sG,KAAK+vF,iBAAmB/vF,KAAK2sG,sBAAsB,KACrD,CACA,UAAIC,GACF,QAAS5sG,KAAKusG,kBAChB,CACQI,qBAAAA,CAAsB/7D,GAC5B,MAAMpC,EAAyBoC,EAS3B,CACE6/C,YAAa7/C,EACb8/C,aAAc9/C,EAAG+B,sBAAsB9vC,IAAKC,GAAQA,EAA2BksF,WAC/E2B,YAAc//C,EAAG0C,sBAA4C07C,UAC7Dh9C,YAAapB,EAAGq4D,aAAaj3D,YAC7Bf,KAAM,KACNk8C,UAAWv8C,EACR+B,sBACA9vC,IAAKC,IACJ,MAAMmpC,EAAMugD,GAAoB1pF,EAA2BksF,WAC3D,OAAO9tE,EAAuB+qB,GAAQ9qB,EAAsB8qB,GAAO,IAAM,IAAO,MAEjFhpC,KAAK,KApBV,CACEwtF,YAAa,KACbC,aAAc,CAAC1wF,KAAK8vC,QAAQ+8D,kBAC5Blc,YAAa3wF,KAAK8vC,QAAQg9D,sBAC1B96D,YAAahyC,KAAK8vC,QAAQkC,YAC1Bf,KAAM,KACNk8C,UAAW,KAiBjB,OADA3+C,EAAKyC,KAAO,GAAGzC,EAAKkiD,aAAaztF,KAAK,QAAQurC,EAAKmiD,eAAeniD,EAAKwD,cAChExD,CACT,CACA6lC,cAAAA,CAAezjC,GACT5wC,KAAK+vF,iBAAiBU,cAAgB7/C,IACxC5wC,KAAKwvC,MACLxvC,KAAK+vF,iBAAmB/vF,KAAK2sG,sBAAsB/7D,GACnD5wC,KAAKo4E,YAAY,MACjBp4E,KAAKq4E,WAAW,MAEpB,CACA3K,cAAAA,GACE,OAAO1tE,KAAK+vF,iBAAiBU,WAC/B,CACArY,WAAAA,CAAY20B,IACLA,IAAQlpG,MAAMC,QAAQipG,IAAOA,EAAGC,QACnChtG,KAAKysG,iBAAmB,CACtBzoG,EAAG,EACHE,EAAG,EACHuW,MAAOza,KAAK8vC,QAAQ4oC,eAAe14E,KAAK8vC,QAAQm9D,oBAChDvyF,OAAQ1a,KAAK8vC,QAAQ4oC,eAAe14E,KAAK8vC,QAAQo9D,qBACjDF,SAAS,GAGPnpG,MAAMC,QAAQipG,GAChB/sG,KAAKysG,iBAAmB,CACtBzoG,EAAG+oG,EAAG,GACN7oG,EAAG6oG,EAAG,GACNtyF,MAAOsyF,EAAG,GACVryF,OAAQqyF,EAAG,GACXC,SAAS,GAGXhtG,KAAKysG,iBAAmBr4D,OAAOyhC,OAAO,CAAEm3B,SAAS,GAASD,GAG9D,MAAMI,EAAKntG,KAAK8vC,QAAQ2oC,eAAez4E,KAAKysG,iBAAiBzoG,GACvDopG,EAAKptG,KAAK8vC,QAAQ2oC,eAAez4E,KAAKysG,iBAAiBvoG,GACvDmpG,EAAKrtG,KAAK8vC,QAAQ2oC,eAAez4E,KAAKysG,iBAAiBhyF,OACvD6yF,EAAKttG,KAAK8vC,QAAQ2oC,eAAez4E,KAAKysG,iBAAiB/xF,QAQzD1a,KAAKusG,oBACPvsG,KAAKusG,mBAAmBn0B,YAAY+0B,EAAIntG,KAAK8vC,QAAQo9D,oBAAsBE,EAAKE,EAAID,EAAIC,EAAI,EAAG,EAEnG,CACA5gC,WAAAA,GACE,OAAOt4B,OAAOyhC,OAAO,GAAI71E,KAAKysG,iBAChC,CACAp0B,UAAAA,CAAWV,GACT,MAAM41B,EAAkBvtG,KAAK8vC,QAAQ4oC,eAAe14E,KAAK8vC,QAAQm9D,oBAC3DO,EAAmBxtG,KAAK8vC,QAAQ4oC,eAAe14E,KAAK8vC,QAAQo9D,qBAC9Dv1B,UAA+C9zE,MAAMC,QAAQ6zE,IAAYA,EAAQq1B,QACnFhtG,KAAK0sG,gBAAkB,CACrB1oG,EAAG,EACHE,EAAG,EACHuW,MAAO8yF,EACP7yF,OAAQ8yF,EACRR,SAAS,GAGPnpG,MAAMC,QAAQ6zE,GAChB33E,KAAK0sG,gBAAkB,CACrB1oG,EAAG2zE,EAAQ,GACXzzE,EAAGyzE,EAAQ,GACXl9D,MAAOk9D,EAAQ,GACfj9D,OAAQi9D,EAAQ,GAChBq1B,SAAS,GAGXhtG,KAAK0sG,gBAAkBt4D,OAAOyhC,OAAO,CAAEm3B,SAAS,GAASr1B,GAG7D,IAAIw1B,EAAKntG,KAAK8vC,QAAQ2oC,eAAez4E,KAAK0sG,gBAAgB1oG,GACtDopG,EAAKptG,KAAK8vC,QAAQ2oC,eAAez4E,KAAK0sG,gBAAgBxoG,GACtDmpG,EAAKrtG,KAAK8vC,QAAQ2oC,eAAez4E,KAAK0sG,gBAAgBjyF,OACtD6yF,EAAKttG,KAAK8vC,QAAQ2oC,eAAez4E,KAAK0sG,gBAAgBhyF,QAEtDyyF,EAAK,IACPE,GAAMF,EACNA,EAAK,GAEHC,EAAK,IACPE,GAAMF,EACNA,EAAK,GAEPC,EAAK7qG,KAAKqD,IAAI7F,KAAK8vC,QAAQ2oC,eAAe80B,GAAmBJ,EAAIE,GACjEC,EAAK9qG,KAAKqD,IAAI7F,KAAK8vC,QAAQ2oC,eAAe+0B,GAAoBJ,EAAIE,IAC9DD,EAAK,GAAKC,EAAK,KACjBH,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,GAEHttG,KAAKusG,oBACPvsG,KAAKusG,mBAAmBkB,eAAeN,EAAIntG,KAAK8vC,QAAQo9D,oBAAsBE,EAAKE,EAAID,EAAIC,EAE/F,CACA11B,UAAAA,GACE,OAAOxjC,OAAOyhC,OAAO,GAAI71E,KAAK0sG,gBAChC,CACAp2B,mBAAAA,CAAoBC,GACbv2E,KAAK4sG,QACR5sG,KAAKuvC,QAEPvvC,KAAKusG,mBAAmBmB,eAAe,CAACn3B,GAC1C,CACAxH,IAAAA,CACE8I,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,GAEA,MAAMw3B,EAAa5tG,KAAK6tG,aAAah2B,EAAStF,GA3KxB,EA4KlBq7B,IA7KyB,EAgLzBA,GACF5tG,KAAKwvC,MAEFxvC,KAAK4sG,QACR5sG,KAAKuvC,QAEPvvC,KAAK8tG,aACH9tG,KAAKusG,mBACL10B,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,GAEJ,CACAv7D,KAAAA,CAAMkyD,EAAgB5vD,EAAeC,GAC9Bpd,KAAK0sG,iBAIH1sG,KAAKusG,oBACRvsG,KAAKuvC,QAEPvvC,KAAKusG,mBAAmB1b,kBAAkB,SAC1CnE,GAAgBC,cAAc3sF,KAAM+sE,EAAO5vD,EAAOC,GAClDpd,KAAKusG,mBAAmB1b,kBAAkB,eAR1C7wF,KAAKwvC,MACLxvC,KAAKuvC,MAAMw9B,EAAO5vD,EAAOC,GAS7B,CACAihC,SAAAA,GACE,OAAOr+C,KAAK8vC,OACd,CACAo9C,kBAAAA,GACE,OAAOltF,KAAK+vF,gBACd,CACAxgD,KAAAA,CAAMw9B,EAAoB5vD,EAAgBC,GACxC,GAAIpd,KAAK4sG,OAEP,YADArsG,QAAQC,MAAM,oEAGhBR,KAAKssG,sBAAwBtsG,KAAK8vC,QAAQ9hB,OAAO61D,uBACjD,MAAM4M,EAAczwF,KAAK+vF,iBAAiBU,YAC1C,GAAKA,EAgBE,CACL,MAAMsd,EAAyBtd,EAAYn9C,qBAC3C,IAAI06D,EACJ,GAAID,EAAwB,CAC1BA,EAAuB7W,kBAAiB,GACxC,MAAMmS,EAAa5Y,EAAYwY,aAAa12D,gBACtCqgD,EACJmb,EAAuB9wB,oBAAsB8wB,EAAuB7wB,cAChEmsB,EAAWzW,MACXmb,EAAuB5wB,gBACrBksB,EAAWtzF,KACX,EACRi4F,EAAmBD,EAAuBhmB,QAAQ,EAAG6K,GAAS,EAAG,EACnE,CACA5yF,KAAKwsG,YAAc/b,EAAYyY,SAE/B,MAAMjZ,EAAoC,CACxC93B,MAAO,oBAAoBn4D,KAAK+vF,iBAAiB9+C,OACjDqB,iBACEm+C,EAAYwY,aAAa32D,kBAAkBzvC,IAAI,CAACwmG,EAAYzrD,KAC1D,MAAMlN,EAAM24D,EAAWn4D,QACvB,GAAIR,EAAK,CACPA,EAAIwmD,kBAAiB,GACrB,MAAMtE,EACJliD,EAAIusC,oBAAsBvsC,EAAIwsC,cAC1BmsB,EAAWzW,MACXliD,EAAIysC,gBACFksB,EAAWtzF,KACX,EACR,GAA6C,IAAzC06E,EAAYwY,aAAaj3D,YAC3B,MAAO,CACL6pC,KAAMnrC,EAAIq3C,QAAQshB,EAAWz6C,OAAS,EAAGgkC,GAAS,EAAG,GACrDtC,OAAQvjB,EAAQ,QAAU,OAC1BwjB,WAAYxjB,EACZyjB,QAAS,SAEN,CACL,MAAM+Z,EAAc9Z,EAAYyZ,yBAAyBtsD,GAQzD,MAAO,CACLi+B,KARe77E,KAAK8vC,QAAQ4iD,qBAAqB6X,EAAa,CAC9D5nF,UAAW,KACXwtE,aAAckZ,EAAWz6C,OAAS,EAClCigC,cAAe,EACfuB,eAAgB,EAChBC,gBAAiB,IAIjB4d,cAAev9D,EAAIq3C,QAAQshB,EAAWz6C,OAAS,EAAGgkC,GAAS,EAAG,GAC9DtC,OAAQvjB,EAAQ,QAAU,OAC1BwjB,WAAYxjB,EACZyjB,QAAS,QAEb,EAEA,OAAO,QAEL,GACR0d,uBAAwBH,EACqB,IAAzCtd,EAAYwY,aAAaj3D,YACvB,CACE6pC,KAAMmyB,EACNG,YAA8B,iBAAVhxF,EAAqB,QAAU,OACnDixF,gBAAiBjxF,EACjBkxF,aAAc,QACdC,cAAertF,EAAkB8sF,EAAuBhtF,QACjC,iBAAZ3D,EACL,QACA,YACF3b,EACJ8sG,kBAAmBnxF,EACnBoxF,eAAgBvtF,EAAkB8sF,EAAuBhtF,QAAU,aAAUtf,GAE/E,CACEo6E,KAAM4U,EAAYwZ,yBAAyB/Z,aAC3Cie,YAA8B,iBAAVhxF,EAAqB,QAAU,OACnDixF,gBAAiBjxF,EACjBkxF,aAAc,QACdC,cAAertF,EAAkB8sF,EAAuBhtF,QACjC,iBAAZ3D,EACL,QACA,YACF3b,EACJ8sG,kBAAmBnxF,EACnBoxF,eAAgBvtF,EAAkB8sF,EAAuBhtF,QAAU,aAAUtf,QAEjFA,GAENzB,KAAKusG,mBAAqBvsG,KAAKssG,sBAAsB1b,gBAAgBX,EACvE,KAxGkB,CAChB,MAAMwe,EAAezuG,KAAK8vC,QAAQ4+D,sBAC5BC,EAAsB3uG,KAAK8vC,QAAQ4+D,sBAAsBp8D,iBAAiB,GAC5EtyC,KAAK+vF,iBAAiB/9C,YAAc,EACtC28D,EAAoBV,cAAgBjuG,KAAK8vC,QAAQ1vC,QAAQwuG,oBAAoB1e,aAE7Eye,EAAoB9yB,KAAO77E,KAAK8vC,QAAQ1vC,QAAQwuG,oBAAoB1e,aAEtEye,EAAoBre,OAASvjB,EAAQ,QAAU,OAC/C4hC,EAAoBpe,WAAaxjB,EACjC,MAAM8hC,EAAsB7uG,KAAK8vC,QAAQ4+D,sBAAsBR,uBAC/DW,EAAoBV,YAA+B,iBAAVhxF,EAAqB,QAAU,OACxE0xF,EAAoBT,gBAAkBjxF,EACtC0xF,EAAoBP,cAAmC,iBAAZlxF,EAAuB,QAAU,OAC5EyxF,EAAoBN,kBAAoBnxF,EACxCpd,KAAKusG,mBAAqBvsG,KAAKssG,sBAAsB1b,gBAAgB6d,GA0FvEzuG,KAAKo4E,YAAYp4E,KAAKysG,kBACtBzsG,KAAKq4E,WAAWr4E,KAAK0sG,gBACvB,CACAl9D,GAAAA,GACE,GAAKxvC,KAAK4sG,SAIN5sG,KAAKusG,qBACPvsG,KAAKusG,mBAAmB/8D,MACxBxvC,KAAKusG,mBAAqB,MAGxBvsG,KAAKssG,wBACPtsG,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMC,OAAO,CAAChkF,KAAKssG,sBAAsBroB,WAC7DjkF,KAAKssG,sBAAwB,MAG3BtsG,KAAK+vF,iBAAiBU,aAAa,CACrC,MAAM1vF,EAAUf,KAAK+vF,iBAAiBU,YAAYwY,aAClD,GAAIloG,EAAQuxC,iBACV,IAAK,MAAM+2D,KAActoG,EAAQuxC,iBAC9B+2D,EAAWn4D,QAA8BgmD,kBAAiB,GACvDmS,EAAWvW,iBAAmBuW,EAAWn4D,QAAQ29C,cAAgB,GACnEwa,EAAWn4D,QAAQ4hD,kBAIxB/xF,EAAQwxC,iBAAiBrB,SAA+BgmD,kBAAiB,EAC5E,CACF,CACA4X,OAAAA,CACEC,EACAl3B,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,GAEAp2E,KAAK8tG,aACH9tG,KAAKusG,mBACL10B,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,EACA24B,EAEJ,CACQjB,YAAAA,CACNte,EACA3X,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,EACA24B,GAEA,GACE/uG,KAAKgvG,uBACHxf,EACA3X,EACAtF,EACAo7B,EACAoB,GAEF,CACA,MAAMpf,EAAW3vF,KAAK8vC,QAAQ8/C,cAAcC,oBAC1ChY,EACA6tB,EACAtB,EACAp6E,EACAhqB,KAAK+vF,kBAEP,GAAIJ,EAAU,CACZH,EAAkBQ,YAAYL,GAC9Bof,GAAqB/e,YAAYL,GACjC,MAAMsU,EAAeG,GAAUH,aAI/B,GAHIA,GACFzU,EAAkByf,oBAAoBhL,EAAatnD,KAEjD+oD,EAAY,CACd,MAAMl4D,EAAgBk4D,EAAW3H,WAAWlmB,EAAQhkC,mBAAmBs+B,QACvE3kC,GAAegZ,QAAQ,CAAC1jD,EAAK86C,KAC3B4xC,EAAkBvhD,gBAAgB2P,EAAO96C,EAAIgrC,OAAOuvC,OAAqBv6E,EAAI+rC,YAC7EkgE,GAAqB9gE,gBAAgB2P,EAAO96C,EAAIgrC,OAAOuvC,OAAqBv6E,EAAI+rC,cAElF,MAAMpB,EAAci4D,EAAW13D,iBAC3BP,GACF+hD,EAAkB/gD,eAChBhB,EAAY4vC,OACZ5vC,EAAYu5D,YAAcnC,GAAU,SAAW,UAEjDkK,GAAqBtgE,eACnBhB,EAAY4vC,OACZ5vC,EAAYu5D,YAAcnC,GAAU,SAAW,UAEjDrV,EAAkB0f,YAAY9iE,EAAOgqC,EAAc92B,GACnDyvD,GAAqBG,YAAY9iE,EAAOgqC,EAAc92B,KAEtDkwC,EAAkBzgB,KAAK3iC,EAAOgqC,EAAc92B,GAC5CyvD,GAAqBhgC,KAAK3iC,EAAOgqC,EAAc92B,SAGjDkwC,EAAkBzgB,KAAK3iC,EAAOgqC,EAAc92B,GAC5CyvD,GAAqBhgC,KAAK3iC,EAAOgqC,EAAc92B,EAEnD,CACF,CACF,CACQuuD,YAAAA,CAAah2B,EAAwBtF,GAC3C,IAAIq7B,EAAa,EACjB,GAAIr7B,EACF,IAAK,IAAIjxE,EAAI,EAAGA,EAAIu2E,EAAQtf,iBAAiBh3D,OAAQD,IAAK,CACxD,MAAMklF,EAAYjU,EAAWjxE,GAC7B,IAAIklF,EAmBF,OADAjmF,QAAQC,MAAM,uBAAuBc,iCAAiCu2E,EAAQ70E,SAtd9D,EAqchB,GAAIwjF,EAAUA,UAAW,CACvB,IAAK,MAAM2oB,KAAO3oB,EAAUI,WACtBuoB,EAAI9yF,WACNuxF,GAxcU,GA2cd,IAAK,MAAMl9D,KAAO81C,EAAUK,YACtBn2C,EAAIr0B,WACNuxF,GA7cU,GA+cRl9D,EAAIymD,yBACN52F,QAAQC,MAAM,0DACdotG,GAjdU,EAodhB,CAKJ,CAQF,OALE5tG,KAAK+vF,iBAAiBU,aACtBzwF,KAAK+vF,iBAAiBU,YAAYyY,WAAalpG,KAAKwsG,cAEpDoB,GAhe2B,GAketBA,CACT,CACQoB,sBAAAA,CACNxf,EACA3X,EACAtF,EACAo7B,EACAoB,GAEA,GAAIx8B,EACF,IAAK,IAAIjxE,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAAIA,EAAIu2E,EAAQtf,iBAAiBh3D,OAAQ,CACvC,MAAMilF,EAAYjU,EAAWjxE,GAAGklF,UAChC,IAAKA,EACH,OAAO,EAET,MAAM4oB,EAAkB78B,EAAWjxE,GAAG0lF,qBAAuB2mB,IAAmBrsG,GAC5E8tG,GACF5f,EAAkBvhB,aAAa3sE,EAAGklF,EAAW4oB,GAC7CL,GAAqB9gC,aAAa3sE,EAAGklF,EAAW4oB,KAEhD5f,EAAkBvhB,aAAa3sE,EAAGklF,GAClCuoB,GAAqB9gC,aAAa3sE,EAAGklF,SAGvCgJ,EAAkBvhB,aAAa3sE,EAAGtB,KAAK8vC,QAAQu/D,gBAC/CN,GAAqB9gC,aAAa3sE,EAAGtB,KAAK8vC,QAAQu/D,gBAIxD,OAAO,CACT,EChhBK,MAAMC,GACMx/D,QACTy/D,uBACAC,oBACR,WAAAzvG,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAKuvG,uBAAyBvvG,KAAK8vC,QAAQ9hB,OAAO61D,uBAClD7jF,KAAKwvG,oBAAsB,IAC7B,CACA,UAAI5C,GACF,QAAS5sG,KAAKwvG,mBAChB,CACA7zC,OAAAA,CACEkc,EACAtF,EACAo7B,EACAl3B,EACAC,EACAC,GAGA,GAvBsB,EAsBH32E,KAAKyvG,gBAAgB53B,EAAStF,GAE/C,OAEGvyE,KAAK4sG,QACR5sG,KAAKuvC,QAEPvvC,KAAK0vG,wBAAwB1vG,KAAKwvG,oBAAqB33B,EAAStF,EAAYo7B,GAC5E,MAAMhe,EAAW3vF,KAAK8vC,QAAQ8/C,cAAcwV,qBAAqBvtB,GAC7D8X,IACF3vF,KAAKwvG,oBAAoBxf,YAAYL,GACrC3vF,KAAKwvG,oBAAoBG,mBAAmBl5B,EAAiBC,EAAiBC,GAElF,CACQ+4B,uBAAAA,CACNE,EACA/3B,EACAtF,EACAo7B,GAEA,GAAIp7B,EACF,IAAK,IAAIjxE,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAAIA,EAAIu2E,EAAQtf,iBAAiBh3D,OAAQ,CACvC,MAAMilF,EAAYjU,EAAWjxE,GAAGklF,UAChC,IAAKA,EACH,OAAO,EAET,MAAM4oB,EAAkBzB,IAAmBrsG,GACvC8tG,EACFQ,EAAmB3hC,aAAa3sE,EAAGklF,EAAW4oB,GAE9CQ,EAAmB3hC,aAAa3sE,EAAGklF,QAGrCopB,EAAmB3hC,aAAa3sE,EAAGtB,KAAK8vC,QAAQu/D,gBAItD,OAAO,CACT,CACA9/D,KAAAA,GACMvvC,KAAK4sG,OACPrsG,QAAQC,MAAM,wFAGhBR,KAAKuvG,uBAAyBvvG,KAAK8vC,QAAQ9hB,OAAO61D,uBAClD7jF,KAAKwvG,oBAAsBxvG,KAAKuvG,uBAAuBM,mBACzD,CACArgE,GAAAA,GACMxvC,KAAK4sG,SACP5sG,KAAKwvG,oBAAoBhgE,MACzBxvC,KAAKwvG,oBAAsB,KAC3BxvG,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMC,OAAO,CAAChkF,KAAKuvG,uBAAuBtrB,WAC9DjkF,KAAKuvG,uBAAyB,KAElC,CACQE,eAAAA,CAAgB53B,EAAwBtF,GAC9C,IAAIq7B,EAAa,EACjB,GAAIr7B,EACF,IAAK,IAAIjxE,EAAI,EAAGA,EAAIu2E,EAAQtf,iBAAiBh3D,OAAQD,IAAK,CACxD,MAAMklF,EAAYjU,EAAWjxE,GAC7B,IAAIklF,EAeF,OADAjmF,QAAQC,MAAM,uBAAuBc,iCAAiCu2E,EAAQ70E,SAjG9D,EAoFhB,GAAIwjF,EAAUA,UAAW,CACvB,IAAK,MAAM2oB,KAAO3oB,EAAUI,WACtBuoB,EAAI9yF,WACNuxF,GAvFU,GA0Fd,IAAK,MAAMl9D,KAAO81C,EAAUK,YACtBn2C,EAAIr0B,WACNuxF,GA5FU,EA+FhB,CAKJ,CAEF,OAAOA,CACT,EC5FK,MAAMkC,GACDC,YACAC,aACFC,eACAC,gBACSpgE,QACTqgE,iBACR,WAAApwG,CAAYiuB,GACVhuB,KAAK8vC,QAAU9hB,EACfhuB,KAAKiwG,eAAiB,IAAIrsD,IAC1B5jD,KAAKkwG,gBAAkB,IAAItsD,IAC3B5jD,KAAK+vG,YAAc,IAAI1D,GAAiBr+E,GACxChuB,KAAKgwG,aAAe,IAAIV,GAAkBthF,GAC1ChuB,KAAKmwG,iBAAmB,CAC1B,CACAC,iBAAAA,CAAkBtiE,GAChB,QAAS9tC,KAAKiwG,eAAe97B,IAAIrmC,EACnC,CACAkoD,kBAAAA,CAAmBtlD,GACjB,QAAS1wC,KAAKkwG,gBAAgB/7B,IAAIzjC,EACpC,CACA8zC,YAAAA,GACE,GAAIxkF,KAAKiwG,eAAertF,KAAO,GAAK5iB,KAAKkwG,gBAAgBttF,KAAO,EAAG,CACjE5iB,KAAKmwG,iBAAmB,EACxB,MAAME,EAAgBrwG,KAAKiwG,eAC3BjwG,KAAKiwG,eAAiB,IAAIrsD,IAC1B,MAAM0sD,EAAiBtwG,KAAKkwG,gBAC5BlwG,KAAKkwG,gBAAkB,IAAItsD,IAC3B,MAAM2sD,EAAuBvwG,KAAK8vC,QAAQ9hB,OAAO61D,uBACjDwsB,EAAc7pD,QAAQ,CAACgqD,EAAG1iE,IAAWA,EAAO41C,iBAAiB6sB,IAC7DD,EAAe9pD,QAAQ,CAACgqD,EAAG9/D,KACzBA,EAAIgzC,iBAAiB6sB,IAChB7/D,EAAIr0B,UAAYq0B,EAAIw+C,iBACvBZ,GAAsBI,eAAe1uF,KAAK8vC,QAASY,EAAK6/D,KAG5DvwG,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMC,OAAO,CAACusB,EAAqBtsB,WACvDosB,EAAc7pD,QAAQ,CAACgqD,EAAG1iE,IAAWA,EAAOo2C,kBAC5CosB,EAAe9pD,QAAQ,CAACgqD,EAAG9/D,IAAQA,EAAIwzC,iBACzC,CACF,CACA,eAAIusB,GACF,OAAOzwG,KAAK+vG,YAAYnD,OAAS5sG,KAAK+vG,YAAc/vG,KAAKgwG,aAAapD,OAAS5sG,KAAKgwG,aAAe,IACrG,CACA36B,UAAAA,GAAmB,CACnBG,QAAAA,GACEx1E,KAAKuuE,OACP,CACAA,KAAAA,GACEvuE,KAAKwkF,eACDxkF,KAAK+vG,YAAYnD,QACnB5sG,KAAK+vG,YAAYvgE,MAEfxvC,KAAKgwG,aAAapD,QACpB5sG,KAAKgwG,aAAaxgE,KAEtB,CACA6kC,cAAAA,CAAezjC,GACT5wC,KAAK+vG,YAAYnD,QACnB5sG,KAAKwkF,eAEPxkF,KAAK+vG,YAAY17B,eAAezjC,EAClC,CACA88B,cAAAA,GACE,OAAO1tE,KAAK+vG,YAAYriC,gBAC1B,CACAgjC,kBAAAA,GACE,OAAO1wG,KAAK+vG,YAAY7iB,oBAC1B,CACA5W,mBAAAA,CAAoBC,GACdv2E,KAAKgwG,aAAapD,SACpB5sG,KAAKwkF,eACLxkF,KAAKgwG,aAAaxgE,OAEpBxvC,KAAK+vG,YAAYz5B,oBAAoBC,EACvC,CACAqM,YAAAA,CAAa90C,GACP9tC,KAAKiwG,eAAe97B,IAAIrmC,GACtB9tC,KAAKmwG,iBAAmBnwG,KAAKiwG,eAAel9D,IAAIjF,IAClD9tC,KAAKuuE,QAGPvuE,KAAKiwG,eAAenhG,IAAIg/B,EAAQ9tC,KAAKmwG,iBAEzC,CACApd,aAAAA,CAAcriD,GACR1wC,KAAKkwG,gBAAgB/7B,IAAIzjC,GACvB1wC,KAAKmwG,iBAAmBnwG,KAAKkwG,gBAAgBn9D,IAAIrC,IACnD1wC,KAAKuuE,QAGPvuE,KAAKkwG,gBAAgBphG,IAAI4hC,EAAK1wC,KAAKmwG,iBAEvC,CACA5sB,UAAAA,CACEotB,EACAztB,EACA3C,EACAC,EACAowB,GAEA5wG,KAAKuuE,QACL,MAAMsiC,EAAqB7wG,KAAK8vC,QAAQ9hB,OAAO61D,uBAC/CgtB,EAAmB/sB,mBAAmB6sB,EAAUtzB,OAAQkD,EAAW2C,EAAU7F,OAAQmD,EAAWowB,GAChG5wG,KAAK8vC,QAAQ9hB,OAAO+1D,MAAMC,OAAO,CAAC6sB,EAAmB5sB,UACvD,CACAtoB,OAAAA,CACEkc,EACAtF,EACAo7B,EACAl3B,EACAC,EACAC,GAEA32E,KAAKmwG,mBACDnwG,KAAK+vG,YAAYnD,SACnB5sG,KAAKwkF,eACLxkF,KAAK+vG,YAAYvgE,OAEnBxvC,KAAKgwG,aAAar0C,QAChBkc,EACAtF,EACAo7B,EACAl3B,EACAC,EACAC,EAEJ,CACA5H,IAAAA,CACE8I,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,GAEIp2E,KAAKgwG,aAAapD,SACpB5sG,KAAKwkF,eACLxkF,KAAKgwG,aAAaxgE,OAEpBxvC,KAAKmwG,mBACLnwG,KAAK+vG,YAAYhhC,KACf8I,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,EAEJ,CACA04B,OAAAA,CACEC,EACAl3B,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,GAEAp2E,KAAKmwG,mBACDnwG,KAAKgwG,aAAapD,SACpB5sG,KAAKwkF,eACLxkF,KAAKgwG,aAAaxgE,OAEpBxvC,KAAK+vG,YAAYjB,QACfC,EACAl3B,EACA6tB,EACAtB,EACA7xB,EACAo7B,EACA3jF,EACAs1B,EACAlT,EACAgqC,EAEJ,CACAgC,WAAAA,CAAY20B,GACV/sG,KAAK+vG,YAAY33B,YAAY20B,EAC/B,CACArgC,WAAAA,GACE,OAAO1sE,KAAK+vG,YAAYrjC,aAC1B,CACA2L,UAAAA,CAAWV,GACT33E,KAAK+vG,YAAY13B,WAAWV,EAC9B,CACAC,UAAAA,GACE,OAAO53E,KAAK+vG,YAAYn4B,YAC1B,CACA/8D,KAAAA,CAAMkyD,EAAgB5vD,EAAeC,GACnCpd,KAAK+vG,YAAYl1F,MAAMkyD,EAAO5vD,EAAOC,EACvC,CACA6mE,MAAAA,GACE,OAAOjkF,KAAK8vC,QAAQ9hB,OAAO+1D,MAAM+sB,qBACnC,ECrIK,MAAMC,WAAqBrgC,GACxBjL,SACSurC,KACTlhE,QACAmhE,SACAC,YACAC,qBACAC,WACAC,kBACAC,aACAC,yBACAC,6BACAC,qBACAC,yBACAC,eACAC,gBACAC,mBACSC,cACTC,gBACAC,mBACAC,iBACAC,mBACAC,yBACAC,cACAC,sBACSC,iBACTC,uBACSC,aACTC,gBACAC,qBACAC,aACR,WAAA5yG,CAAYiyE,EAAwBD,EAAwBhxE,GAC1D6C,MAAMmuE,EAAKC,GACXhyE,KAAKgxG,KAAOxuG,KAAKC,IAAI,EAAGD,KAAKksC,MAAM3tC,GAAS6xG,KAAOzjE,OAAO0jE,mBAC1D7yG,KAAK8vC,QAAU,KACf9vC,KAAKixG,SAAW,KAChBjxG,KAAKylE,SAAW,KAChBzlE,KAAKmxG,sBAAuB,EAC5BnxG,KAAKuxG,yBAA2B,KAChCvxG,KAAKwxG,6BAA+B,KACpCxxG,KAAKyxG,qBAAuB,KAC5BzxG,KAAK0xG,yBAA2B,KAChC1xG,KAAK2xG,eAAiB,KACtB3xG,KAAK4xG,gBAAkB,KACvB5xG,KAAK6xG,mBAAqB,KAC1B7xG,KAAK+xG,gBAAkB,KACvB/xG,KAAKgyG,mBAAqB,KAC1BhyG,KAAKiyG,iBAAmB,KACxBjyG,KAAKkyG,mBAAqB,GAC1BlyG,KAAKmyG,yBAA2B,GAChCnyG,KAAKuyG,uBAAyB,KAC9BvyG,KAAKwyG,aAAezxG,GAAS+xG,KAAO,EAAI,EACxC9yG,KAAKkxG,YAAc,KACnBlxG,KAAKsyG,iBAAmB,IAAIpiE,QAC5BlwC,KAAKqyG,sBAAwB,EAC7BryG,KAAKyyG,gBAAkB,KACvBzyG,KAAK0yG,qBAAuB,KAC5B1yG,KAAK8xG,cAAgB,IAAI5F,GAAalsG,MACtCA,KAAK2yG,aAAe,CAAC,CACvB,CACA,WAAIvyG,GACF,OAAOJ,KAAKylE,QACd,CACAstC,yBAAAA,GACE,OAAO/yG,KAAK0tE,kBAAkB+8B,kBAAoBzqG,KAAKwyG,YACzD,CACA,UAAIxkF,GACF,OAAOhuB,KAAK8vC,OACd,CACA,WAAIkjE,GACF,OAAOhzG,KAAKixG,QACd,CACA,gBAAIpjB,GACF,OAAO7tF,KAAKoyG,aACd,CACA,sBAAInF,GACF,OAAOjtG,KAAKizG,uBACd,CACA,uBAAI/F,GACF,OAAOltG,KAAKkzG,wBACd,CACA,eAAIzgC,GACF,OAAOzyE,KAAKslE,OAAOmN,WACrB,CACA,gBAAIC,GACF,OAAO1yE,KAAKslE,OAAOoN,YACrB,CACA,iBAAIkd,GACF,OAAO5vF,KAAK2xG,cACd,CACA,oBAAI9E,GACF,OAAO7sG,KAAKqxG,iBACd,CACA,yBAAIvE,GACF,OAAO9sG,KAAKsxG,YACd,CACA,uBAAI6B,GACF,OAAOnzG,KAAKyxG,oBACd,CACA,2BAAI2B,GACF,OAAOpzG,KAAK0xG,wBACd,CACA,+BAAI2B,GACF,OAAOrzG,KAAKwxG,4BACd,CACA,yBAAI9C,GACF,OAAO1uG,KAAKuyG,sBACd,CACA,eAAIvgE,GACF,OAAOhyC,KAAKwyG,YACd,CACA,eAAI/B,GACF,OAAOzwG,KAAKoyG,cAAc3B,WAC5B,CACA,kBAAIpB,GACF,OAAOrvG,KAAKyyG,eACd,CACA5lC,QAAAA,GACE,OAAO7sE,KAAKgxG,IACd,CACAsC,cAAAA,GACE,OAAOtzG,KAAK2yG,YACd,CACA59B,aAAAA,GACE,OAAO,CACT,CACAod,aAAAA,GACE,OAAOnyF,KAAKkxG,WACd,CACA+B,qBAAAA,GACE,OAAOjzG,KAAK0tE,kBAAkB07B,YAAcppG,KAAKslE,OAAO7qD,KAC1D,CACAy4F,sBAAAA,GACE,OAAOlzG,KAAK0tE,kBAAkB47B,aAAetpG,KAAKslE,OAAO5qD,MAC3D,CACA64F,kBAAAA,GACE,OAAOvzG,KAAKslE,OAAO7qD,KACrB,CACA+4F,mBAAAA,GACE,OAAOxzG,KAAKslE,OAAO5qD,MACrB,CACA,iBAAM+4F,GACJ,IAAKC,UAAUC,IACb,MAAM,IAAI/zG,MAAM,iCAGlB,GADAI,KAAKixG,eAAiByC,UAAUC,IAAIC,kBAC/B5zG,KAAKixG,SACR,MAAM,IAAIrxG,MAAM,mCAElBI,KAAK2yG,aAAe3yG,KAAKixG,SAAS,yBACxBjxG,KAAKixG,SAAS,qBACpB,CAAC,EACLjxG,KAAK8vC,cAAgB9vC,KAAKixG,SAAS4C,cAAc,CAC/CC,iBAAkB,IAAI9zG,KAAKixG,SAASnW,UACpCiZ,eAAgB,IAAK/zG,KAAKixG,SAASrW,UAErCr6F,QAAQiuC,KAAK,2BACb,IAAK,MAAMuH,KAAW/1C,KAAK8vC,QAAQgrD,SACjCv6F,QAAQiuC,KAAK,MAAMuH,KAWrB,GATA/1C,KAAKguB,OAAOgmF,KAAK/8B,KAAMzoC,IACrBjuC,QAAQC,MAAM,2BAA2BguC,EAAK7uC,WAC9CK,KAAKoxG,YAAa,IAEpBpxG,KAAKyyG,gBAAkBzyG,KAAKguB,OAAO+hD,gBAAgB,CACjDhkD,OAAQ/rB,KAAKguB,OAAO+8E,sBAAsB,CAAE39E,QAAS,KACrDA,QAAS,KAEXptB,KAAKylE,SAAWzlE,KAAMslE,OAAOQ,WAAW,WAA6C,MAChF9lE,KAAKylE,SAER,MADAzlE,KAAKoxG,YAAa,EACZ,IAAIxxG,MAAM,+BAElBI,KAAKslE,OAAO7qD,MAAQza,KAAKslE,OAAOmN,YAChCzyE,KAAKslE,OAAO5qD,OAAS1a,KAAKslE,OAAOoN,aACjC1yE,KAAKkxG,YAAc,CACjB9e,YAAa,IAAIgK,GAAkBp8F,MACnCi0G,gBAAiB,IAAI7Z,GAAsBp6F,MAC3Ck0G,SAAU,IAAInZ,GAAe/6F,MAC7Bm0G,WAAY,IAAI7Y,GAAiBt7F,OAEnCA,KAAKo0G,YAELp0G,KAAK2xG,eAAiB,IAAI3M,GAAchlG,MACxCA,KAAK4xG,gBAAkB,IAAIjH,GAAe3qG,MAC1CA,KAAK6xG,mBAAqB,IAAI1G,GAC9BnrG,KAAKoyG,cAAgB,IAAItC,GAAsB9vG,MAC/CA,KAAKoxG,YAAa,EAClBpxG,KAAKo4E,YAAY,MACjBp4E,KAAKq4E,WAAW,MAEhBr4E,KAAKC,GAAG,SAAU,KAChB,MAAMwa,EAAQjY,KAAKC,IAAI,EAAGD,KAAKooD,MAAM5qD,KAAKslE,OAAOmN,YAAczyE,KAAKgxG,OAC9Dt2F,EAASlY,KAAKC,IAAI,EAAGD,KAAKooD,MAAM5qD,KAAKslE,OAAOoN,aAAe1yE,KAAKgxG,OAClEv2F,IAAUza,KAAKslE,OAAO7qD,OAASC,IAAW1a,KAAKslE,OAAO5qD,SACxD1a,KAAKslE,OAAO7qD,MAAQA,EACpBza,KAAKslE,OAAO5qD,OAASA,EACrB1a,KAAKq0G,iCACLr0G,KAAKo4E,YAAY,MACjBp4E,KAAKq4E,WAAW,SAGpBr4E,KAAKW,cAAc,SAAUX,KAAKslE,OAAOmN,YAAazyE,KAAKslE,OAAOoN,aACpE,CACA6E,SAAAA,CAAU+8B,GAER,OADAt0G,KAAKoyG,cAAcnuB,SAAShN,KAAKq9B,GAC1B,CACT,CACAl9B,eAAAA,CAAgBm9B,GAEhB,CACAC,gBAAAA,CAAiB3nB,EAAqBC,EAAoBC,GACxD/sF,KAAKoyG,cAAcv3F,MAAMgyE,EAAYC,EAAYC,EACnD,CAEA3X,cAAAA,GAEE,OAAO,IACT,CACApF,oBAAAA,GACE,OAAO,IAAI4zB,GAAqB5jG,KAClC,CACAy0G,mBAAAA,GACE,OAAO,IAAIjV,EACb,CACAkV,gBAAAA,GACE,OAAO,IAAI3V,EACb,CACA4V,qBAAAA,GACE,OAAO,IAAI9T,EACb,CACA+T,gBAAAA,GACE,OAAO,IAAIzT,EACb,CACA0T,kBAAAA,GACE,OAAO,IAAI5S,EACb,CACA1N,aAAAA,CAAcxzF,GACZ,OAAOf,KAAKosG,aAAarrG,EAC3B,CACA+zG,2BAAAA,CACEjsC,EACAgvB,EACA92F,GAEA,IAAK8nE,EAEH,OADAtoE,QAAQC,MAAM,6DACP,KAET,GAAIqoE,EAAKqvB,UAAW,CAClB,MAAMxnD,EAAM,IAAIwoD,GAAkBl5F,MAGlC,OAFA0wC,EAAIunD,qBAAqBpvB,EAAMgvB,EAAM73F,KAAKm6E,oBAAoBp5E,IAC9D2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,CACF,CAAA,GAAIm4B,EAAKsvB,SAAU,CACxB,MAAMznD,EAAM,IAAIqoD,GAAgB/4F,MAGhC,OAFA0wC,EAAIunD,qBAAqBpvB,EAAM7oE,KAAKm6E,oBAAoBp5E,IACxD2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,CACF,CAAA,GAAIm4B,EAAK/kE,QAAS,CACvB,MAAM4sC,EAAM,IAAIkoD,GAAqB54F,MAGrC,OAFA0wC,EAAIunD,qBAAqBpvB,EAAM7oE,KAAKm6E,oBAAoBp5E,IACxD2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,EACF,CACL,MAAMA,EAAM,IAAI0mD,GAAgBp3F,MAGhC,OAFA0wC,EAAIunD,qBAAqBpvB,EAAMgvB,EAAM73F,KAAKm6E,oBAAoBp5E,IAC9D2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,CACT,CACF,CACAW,eAAAA,CACEtwB,EACAtG,EACAC,EACA3Z,GAEA,MAAM2vC,EAAM3vC,GAAUmwC,SAA+B,IAAIkmD,GAAgBp3F,MACzE,OAAK0wC,EAAIssC,eAITtsC,EAAIsnD,YAAYj3E,EAAQtG,EAAOC,EAAQ1a,KAAKm6E,oBAAoBp5E,IAChE2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,IALLnwC,QAAQC,MAAM,gEACP,KAKX,CACAu0G,wBAAAA,CACErtD,EACAmwC,EACA92F,GAEA,MAAM2vC,EAAM3vC,GAAUmwC,SAA+B,IAAIkmD,GAAgBp3F,MACzE,OAAK0wC,EAAIssC,eAITtsC,EAAIknD,gBAAgBlwC,EAASmwC,EAAM73F,KAAKm6E,oBAAoBp5E,IAC5D2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,IALLnwC,QAAQC,MAAM,yEACP,KAKX,CACAkxC,oBAAAA,CACE3wB,EACAtG,EACAC,EACAyC,EACApc,GAEA,MAAM2vC,EAAM3vC,GAAUmwC,SAAoC,IAAI0nD,GAAqB54F,MACnF,OAAK0wC,EAAIusC,oBAITvsC,EAAIsnD,YAAYj3E,EAAQtG,EAAOC,EAAQyC,EAAOnd,KAAKm6E,oBAAoBp5E,IACvE2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,IALLnwC,QAAQC,MAAM,2EACP,KAKX,CACAw0G,8BAAAA,CACEpyG,EACAi1F,EACA92F,GAEA,IAAK6B,GAAgC,IAApBA,EAASrB,OAExB,OADAhB,QAAQC,MAAM,mEACP,KAET,IAAIia,EAAQ,EACRC,EAAS,EACb,IAAK,MAAMgtC,KAAW9kD,EACpB,GAAc,IAAV6X,GAA0B,IAAXC,EACjBD,EAAQitC,EAAQjtC,MAChBC,EAASgtC,EAAQhtC,YACZ,GAAID,IAAUitC,EAAQjtC,OAASC,IAAWgtC,EAAQhtC,OAEvD,OADAna,QAAQC,MAAM,mFACP,KAGX,GAAIO,GAASmwC,UAAYnwC,EAAQmwC,QAAQ+rC,mBAEvC,OADA18E,QAAQC,MAAM,qFACP,KAET,IAAIkwC,EAAsB3vC,GAASmwC,QACnC,GAAIR,EAAK,CACP,GAAIA,EAAIvzB,QAAUva,EAASrB,OAIzB,OAHAhB,QAAQC,MACN,8GAEK,KAET,GAAIkwC,EAAIj2B,QAAUA,GAASi2B,EAAIh2B,SAAWA,EAIxC,OAHAna,QAAQC,MACN,uGAEK,SAEJ,CACLkwC,EAAM1wC,KAAK0xC,qBACTmmD,EAAO,kBAAoB,aAC3Bp9E,EACAC,EACA9X,EAASrB,OACTR,GAEF,IAAK,IAAIO,EAAI,EAAGA,EAAIsB,EAASrB,OAAQD,IACnCovC,EAAI06B,kBAAkBxoE,EAAStB,GAAI,EAAG,EAAGA,EAAG,EAAG,EAAGmZ,EAAOC,EAE7D,CAEA,OADAg2B,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,CACT,CACAukE,eAAAA,CACEl0F,EACAtG,EACAC,EACAyC,EACApc,GAEA,MAAM2vC,EAAM3vC,GAAUmwC,SAA+B,IAAI6nD,GAAgB/4F,MACzE,OAAK0wC,EAAIwsC,eAITxsC,EAAIsnD,YAAYj3E,EAAQtG,EAAOC,EAAQyC,EAAOnd,KAAKm6E,oBAAoBp5E,IACvE2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,IALLnwC,QAAQC,MAAM,gEACP,KAKX,CACAoxC,iBAAAA,CAAkB7wB,EAAuB6B,EAAc7hB,GACrD,MAAM2vC,EAAM3vC,GAAUmwC,SAAiC,IAAIgoD,GAAkBl5F,MAC7E,OAAK0wC,EAAIysC,iBAITzsC,EAAIsnD,YAAYj3E,EAAQ6B,EAAM5iB,KAAKm6E,oBAAoBp5E,IACvD2vC,EAAIgqC,eAAiB35E,GAAS25E,gBAAkB,KACzChqC,IALLnwC,QAAQC,MAAM,oEACP,KAKX,CACA00G,kBAAAA,CAAmBC,EAAsBz6B,GACvC,MAAMhqC,EAAM,IAAIyoD,GAAmBn5F,KAAMm1G,GAEzC,OADAzkE,EAAIgqC,eAAiBA,GAAkB,KAChChqC,CACT,CACA0kE,0BAAAA,CAA2B/0B,EAAkBziC,EAAe0iC,EAAgB1xB,GAC1E,IAAKyxB,GAAKzG,kBAAoB0G,GAAKtD,cAEjC,YADAz8E,QAAQC,MAAM,iDAGhB,MAAM4uF,EAAS/O,EAAI1tC,wBAAwBiL,GACtCwxC,GAAWA,EAAOpS,cAIvBh9E,KAAKq1G,cAAcjmB,EAAQ/O,EAAIqpB,2BAA2B9rD,GAAQ0iC,EAAK1xB,GAHrEruD,QAAQC,MAAM,qEAIlB,CACA60G,aAAAA,CAAch1B,EAAgBkP,EAAkBjP,EAAgBgP,GAC9D,IAAKjP,GAAKrD,gBAAkBsD,GAAKtD,cAE/B,YADAz8E,QAAQC,MAAM,oCAGhB,IAAK2C,OAAOwoB,UAAU4jE,IAAaA,EAAW,GAAKA,GAAYlP,EAAIwO,cAEjE,YADAtuF,QAAQC,MAAM,gDAGhB,IAAK2C,OAAOwoB,UAAU2jE,IAAaA,EAAW,GAAKA,GAAYhP,EAAIuO,cAEjE,YADAtuF,QAAQC,MAAM,qDAGhB,MAAM80G,EAAW9yG,KAAKC,IAAI49E,EAAI5lE,OAAS80E,EAAU,GAC3CgmB,EAAY/yG,KAAKC,IAAI49E,EAAI3lE,QAAU60E,EAAU,GAC7CimB,EAAWhzG,KAAKC,IAAI69E,EAAI7lE,OAAS60E,EAAU,GAC3CmmB,EAAYjzG,KAAKC,IAAI69E,EAAI5lE,QAAU40E,EAAU,GACnD,GAAIgmB,IAAaE,GAAYD,IAAcE,EAEzC,YADAl1G,QAAQC,MAAM,8DAGhB,GAAI6/E,EAAIt/D,SAAWu/D,EAAIv/D,OAErB,YADAxgB,QAAQC,MAAM,iFAGhBR,KAAKuuE,QACL,MAAM6gB,EAAS/O,EACTgP,EAAS/O,EACT6O,EAAiBnvF,KAAK8vC,QAAQ+zC,uBACpCsL,EAAeumB,qBACb,CACExkE,QAASk+C,EAAO/R,OAChBoW,SAAUlE,EACV8D,OAAQ,CAAErvF,EAAG,EAAGE,EAAG,EAAG+C,EAAG,IAE3B,CACEiqC,QAASm+C,EAAOhS,OAChBoW,SAAUnE,EACV+D,OAAQ,CAAErvF,EAAG,EAAGE,EAAG,EAAG+C,EAAG,IAE3B,CACEwT,MAAO66F,EACP56F,OAAQ66F,EACR5hB,mBAAoB,IAGxB3zF,KAAK8vC,QAAQi0C,MAAMC,OAAO,CAACmL,EAAelL,UAC5C,CACA/rB,gBAAAA,CAAiBE,GACf,OAAO,IAAIolB,GAAcx9E,KAAMo4D,EACjC,CACA2X,eAAAA,CAAgBhkD,GACd,OAAO,IAAI85D,GAAgB7lF,KAAM+rB,EACnC,CACA01D,YAAAA,CAAa2B,EAAqBriF,GAChC,OAAO,IAAI+gF,GAAa9hF,KAAMA,KAAK46E,mBAAmB75E,GAAUqiF,EAClE,CACAG,UAAAA,CACEF,EACAsyB,EACAp1B,EACAC,EACAowB,GAEA5wG,KAAKoyG,cAAc7uB,WACjBF,EACAsyB,EACAp1B,EACAC,EACAowB,EAEJ,CACArhC,iBAAAA,CACE1G,EACA9nE,GAEA,OAAO,IAAI2pG,GAAkB1qG,KAAM6oE,EAAM7oE,KAAK46E,mBAAmB75E,EAAS,SAC5E,CACAg1E,sBAAAA,CACE6/B,EACA70G,EACA8nE,GAEA,OAAO,IAAI4c,GAAuBzlF,KAAM41G,EAAe51G,KAAK46E,mBAAmB75E,GAAU8nE,EAC3F,CACA2G,kBAAAA,CAAmBzuE,GACjB,OAAO,IAAI48F,GAAmB39F,KAAMe,EACtC,CACA2xC,iBAAAA,CACEJ,EACAujE,EACA90G,GAEA,OAAO,IAAI0nG,GAAkBzoG,KAAMsyC,EAAkBujE,EAAkB90G,EACzE,CACAktE,YAAAA,CAAarwB,EAAe4oC,EAAsBsvB,GAChD91G,KAAKkyG,mBAAmBt0D,GAAS4oC,EACjCxmF,KAAKmyG,yBAAyBv0D,GAASk4D,GAAkBtvB,GAAWQ,qBAAuB,IAC7F,CACA7O,YAAAA,CAAav6B,GACX,MAAO,CAAC59C,KAAKkyG,mBAAmBt0D,GAAQ59C,KAAKmyG,yBAAyBv0D,GACxE,CAEAw6B,WAAAA,CAAY20B,GACV/sG,KAAKoyG,cAAch6B,YAAY20B,EACjC,CACArgC,WAAAA,GACE,OAAO1sE,KAAKoyG,cAAc1lC,aAC5B,CACA2L,UAAAA,CAAWV,GACT33E,KAAKoyG,cAAc/5B,WAAWV,EAChC,CACAC,UAAAA,GACE,OAAO53E,KAAKoyG,cAAcx6B,YAC5B,CACAjK,UAAAA,CAAWkK,GACT73E,KAAK+xG,gBAAkBl6B,CACzB,CACAC,UAAAA,GACE,OAAO93E,KAAK+xG,eACd,CACAlkC,eAAAA,CAAgB63B,GACd1lG,KAAKgyG,mBAAqBtM,CAC5B,CACAxtB,eAAAA,GACE,OAAOl4E,KAAKgyG,kBACd,CACAjkC,eAAAA,CAAgBq2B,GACdpkG,KAAKiyG,iBAAmB7N,CAC1B,CACApsB,eAAAA,GACE,OAAOh4E,KAAKiyG,gBACd,CACAvkC,cAAAA,GACE,OAAO1tE,KAAKoyG,cAAc1kC,kBAAoB,IAChD,CACA4K,yBAAAA,CAA0Bp1B,GACxBljD,KAAKmxG,uBAAyBjuD,CAChC,CACAu0B,sBAAAA,GACE,OAAOz3E,KAAKmxG,oBACd,CAEAf,iBAAAA,CAAkBtiE,GAChB,OAAO9tC,KAAKoyG,cAAchC,kBAAkBtiE,EAC9C,CAEAkoD,kBAAAA,CAAmBtlD,GACjB,OAAO1wC,KAAKoyG,cAAcpc,mBAAmBtlD,EAC/C,CAEAggE,kBAAAA,GAME,OAAO1wG,KAAKoyG,cAAc1B,oBAC5B,CAEAtuB,gBAAAA,CAAiBxN,GACf,OAAO50E,KAAKsyG,iBAAiBv/D,IAAI6hC,EACnC,CAEAigB,gBAAAA,CAAiBv+C,GACf,MAAM5F,EAAM1wC,KAAK8vC,QAAQimE,cAAcz/D,GAIvC,OAHI5F,GACF1wC,KAAKsyG,iBAAiBxjG,IAAI4hC,IAAO1wC,KAAKqyG,uBAEjC3hE,CACT,CAEAgpD,wBAAAA,CAAyByb,GACvB,MAAMzkE,EAAM1wC,KAAK8vC,QAAQkmE,sBAAsB,CAAEr3D,OAAQw2D,IAIzD,OAHIzkE,GACF1wC,KAAKsyG,iBAAiBxjG,IAAI4hC,IAAO1wC,KAAKqyG,uBAEjC3hE,CACT,CAEAo7D,gBAAAA,CAAiBx1D,GACf,MAAMuZ,EAAU7vD,KAAK8vC,QAAQykD,cAAcj+C,GAI3C,OAHIuZ,GACF7vD,KAAKsyG,iBAAiBxjG,IAAI+gD,IAAW7vD,KAAKqyG,uBAErCxiD,CACT,CAEAk5B,kBAAAA,CAAmBzyC,GACjB,MAAMkwC,EAAYxmF,KAAK8vC,QAAQigC,gBAAgBz5B,GAI/C,OAHIkwC,GACFxmF,KAAKsyG,iBAAiBxjG,IAAI03E,IAAaxmF,KAAKqyG,uBAEvC7rB,CACT,CAEAjC,eAAAA,CAAgBjuC,GACd,MAAMxI,EAAS9tC,KAAK8vC,QAAQ2xC,aAAanrC,GAIzC,OAHIxI,GACF9tC,KAAKsyG,iBAAiBxjG,IAAIg/B,IAAU9tC,KAAKqyG,uBAEpCvkE,CACT,CAEA4kD,oBAAAA,CAAqBxhD,EAAqBoF,GACxC,MAAMulC,EAAO3qC,GAASg/C,WAAW55C,GAIjC,OAHIulC,GACF77E,KAAKsyG,iBAAiBxjG,IAAI+sE,IAAQ77E,KAAKqyG,uBAElCx2B,CACT,CAEA6qB,uBAAAA,CAAwBpwD,GACtB,MAAMq5C,EAAW3vF,KAAK8vC,QAAQmmE,qBAAqB3/D,GAInD,OAHIq5C,GACF3vF,KAAKsyG,iBAAiBxjG,IAAI6gF,IAAY3vF,KAAKqyG,uBAEtC1iB,CACT,CAEA8V,wBAAAA,CAAyBnvD,GACvB,MAAMq5C,EAAW3vF,KAAK8vC,QAAQomE,sBAAsB5/D,GAIpD,OAHIq5C,GACF3vF,KAAKsyG,iBAAiBxjG,IAAI6gF,IAAY3vF,KAAKqyG,uBAEtC1iB,CACT,CAEAmW,iBAAAA,CAAkB70D,GAChB,OAAOjxC,KAAK6xG,mBAAmB/L,kBAAkB70D,EACnD,CAEAm7D,YAAAA,CAAarrG,GACX,OAAOf,KAAK8xG,cAAc1F,aAAarrG,EACzC,CAEAu+E,oBAAAA,CAAqBhpC,GACnB,OAAOt2C,KAAK4xG,gBAAgBtyB,qBAAqBhpC,EACnD,CACAi4B,KAAAA,GACEvuE,KAAKoyG,cAAc7jC,OACrB,CACA,gBAAMkpB,CACJ75C,EACA55C,EACAE,EACAuD,EACA2L,EACA06B,GAEA,MAAM8C,EAAK5wC,KAAK0tE,iBACV48B,EAAkB15D,EACnBA,EAAG+B,sBAAsBiL,IAAQy/B,OAClCr9E,KAAKI,QAAQwuG,oBACXuH,EAAYvlE,EACdA,EAAG+B,sBAAsBiL,IAAQ78B,OACjCyrE,GAAoBxsF,KAAKqxG,mBAC7B,GAAI/G,GAAmB6L,EAAW,CAChC,MACM50B,EAAa95E,EAAI2L,EADLgO,EAA0B+0F,GAEtCC,EAAgBp2G,KAAKyhF,aAAaF,EAAY,CAClDpzC,MAAO,SAETnuC,KAAK23F,mBAAmB,EAAG3zF,EAAGE,EAAGuD,EAAG2L,EAAGgjG,GACvC,MAAMvtC,EAAO,IAAIkC,WAAWj9B,EAAOA,OAAQA,EAAO60C,WAAY70C,EAAOa,kBAC/DynE,EAAcnzB,iBAAiBpa,GACrCutC,EAAc95F,eAEd/b,QAAQC,MAAM,qFAElB,CACAm3F,kBAAAA,CAAmB/5C,EAAe55C,EAAWE,EAAWuD,EAAW2L,EAAW06B,GAC5E,MAAM8C,EAAK5wC,KAAK0tE,iBACV48B,EAAkB15D,EACnBA,EAAG+B,sBAAsBiL,IAAQy/B,OAClCr9E,KAAKI,QAAQwuG,oBACXuH,EAAYvlE,EACdA,EAAG+B,sBAAsBiL,IAAQ78B,OACjCyrE,GAAoBxsF,KAAKqxG,mBACzB/G,GAAmB6L,GACrBn2G,KAAKuuE,QACLwiB,GAAkB8B,0BAChB7yF,KAAK8vC,QACLw6D,EACA6L,EACAnyG,EACAE,EACAuD,EACA2L,EACA,EACA,EACA06B,IAGFvtC,QAAQC,MACN,6FAGN,CACA61G,YAAAA,GAEA,CACAC,cAAAA,GAEA,CACAC,YAAAA,GACE,GAAIv2G,KAAK0yG,qBACP,MAAM,IAAI9yG,MAAM,2EAElB,MAAM6wF,EAAczwF,KAAK0wG,qBACnBp6D,EAAyC,CAC7Co6C,aAAcD,EAAYC,aAC1B8lB,mBAAoB/lB,EAAYE,YAChC3+C,YAAay+C,EAAYz+C,aAE3BhyC,KAAK0yG,qBAAuB,CAC1B+D,GAAI,EACJ9yB,QAAS3jF,KAAK8vC,QAAQ4mE,0BAA0BpgE,GAChDigC,aAAc,KAElB,CACAogC,UAAAA,GACE,IAAK32G,KAAK0yG,qBACR,MAAM,IAAI9yG,MAAM,qEAElBI,KAAK0yG,qBAAqBn8B,aAAev2E,KAAK0yG,qBAAqB/uB,QAAQM,SAC3E,MAAMl0B,EAAM/vD,KAAK0yG,qBAEjB,OADA1yG,KAAK0yG,qBAAuB,KACrB3iD,CACT,CACUymB,oBAAAA,CAAqBD,GAI7B,OAHAv2E,KAAKoyG,cAAc97B,oBAChBC,EAAoCA,cAE/BA,EAAoCkgC,EAC9C,CACA7zB,YAAAA,CAAa90C,GACX9tC,KAAKoyG,cAAcxvB,aAAa90C,EAClC,CACAilD,aAAAA,CAAcriD,GACZ1wC,KAAKoyG,cAAcrf,cAAcriD,EACnC,CACA8zC,YAAAA,GACExkF,KAAKoyG,cAAc5tB,cACrB,CAEU9P,eAAAA,CAAgBkiC,GACxB52G,KAAKoyG,cAAc/9B,eAAeuiC,EACpC,CAEA,YAAArhC,GACE,QAAIv1E,KAAKoxG,aACPpxG,KAAKoyG,cAAc/8B,cACZ,EAIX,CAEA,UAAAI,GACEz1E,KAAKoyG,cAAc58B,UACrB,CAEA,KAAAU,CAAgBlsD,EAA8Bs1B,EAAelT,GAC3DpsC,KAAKoyG,cAAcrjC,KACjB/uE,KAAK+xG,gBACL/xG,KAAKgyG,mBACLhyG,KAAKiyG,iBACLjyG,KAAKkyG,mBACLlyG,KAAKmyG,yBACLnoF,EACAs1B,EACAlT,EACA,GAEEpsC,KAAK0yG,uBACP1yG,KAAK0yG,qBAAqB+D,KAC1Bz2G,KAAKoyG,cAActD,QACjB9uG,KAAK0yG,qBAAqB/uB,QAC1B3jF,KAAK+xG,gBACL/xG,KAAKgyG,mBACLhyG,KAAKiyG,iBACLjyG,KAAKkyG,mBACLlyG,KAAKmyG,yBACLnoF,EACAs1B,EACAlT,EACA,GAGN,CAEA,cAAAiqC,CACErsD,EACAs1B,EACAlT,EACAgqC,GAEAp2E,KAAKoyG,cAAcrjC,KACjB/uE,KAAK+xG,gBACL/xG,KAAKgyG,mBACLhyG,KAAKiyG,iBACLjyG,KAAKkyG,mBACLlyG,KAAKmyG,yBACLnoF,EACAs1B,EACAlT,EACAgqC,GAEEp2E,KAAK0yG,uBACP1yG,KAAK0yG,qBAAqB+D,KAC1Bz2G,KAAKoyG,cAActD,QACjB9uG,KAAK0yG,qBAAqB/uB,QAC1B3jF,KAAK+xG,gBACL/xG,KAAKgyG,mBACLhyG,KAAKiyG,iBACLjyG,KAAKkyG,mBACLlyG,KAAKmyG,yBACLnoF,EACAs1B,EACAlT,EACAgqC,GAGN,CAEA,QAAAQ,CAAmBH,EAAiBC,EAAiBC,GACnD32E,KAAKoyG,cAAcz2C,QACjB37D,KAAK+xG,gBACL/xG,KAAKkyG,mBACLlyG,KAAKmyG,yBACL17B,EACAC,EACAC,EAEJ,CACQy9B,SAAAA,GACNp0G,KAAKqxG,kBAAoBqC,UAAUC,IAAIkD,2BACvC72G,KAAKsxG,aAAetxG,KAAKkxG,YAAY+C,gBAAgBtZ,4BACjD,wBACA,uBACJ36F,KAAKylE,SAAS2uC,UAAU,CACtBpmF,OAAQhuB,KAAK8vC,QACb/uB,OAAQ/gB,KAAKqxG,kBACbljE,MAAO2mD,gBAAgBE,kBAAoBF,gBAAgBlT,SAC3Dk1B,UAAW,SACXC,WAAY,SAEd/2G,KAAKq0G,gCACP,CACQA,8BAAAA,GACN,MAAM55F,EAAQjY,KAAKC,IAAI,EAAGzC,KAAKslE,OAAO7qD,OAChCC,EAASlY,KAAKC,IAAI,EAAGzC,KAAKslE,OAAO5qD,QACvC1a,KAAKuxG,0BAA0Bv8B,UAC/Bh1E,KAAKuxG,yBAA2B,KAChCvxG,KAAKwxG,6BAA+B,KACpCxxG,KAAKyxG,sBAAsBz8B,UAC3Bh1E,KAAKyxG,qBAAuB,KAC5BzxG,KAAK0xG,yBAA2B,KAC5B1xG,KAAKwyG,aAAe,IACtBxyG,KAAKuxG,yBAA2BvxG,KAAK60F,iBAAiB,CACpDjyE,KAAM,CACJnI,QACAC,SACAi5E,mBAAoB,GAEtB5yE,OAAQ/gB,KAAKqxG,kBACb1uF,UAAW,KACXksE,cAAe,EACf78C,YAAahyC,KAAKwyG,aAClBrkE,MAAO2mD,gBAAgBE,oBAEzBh1F,KAAKwxG,6BAA+BxxG,KAAKuxG,yBAAyBrhB,cAEpElwF,KAAKyxG,qBAAuBzxG,KAAK60F,iBAAiB,CAChDjyE,KAAM,CACJnI,QACAC,SACAi5E,mBAAoB,GAEtB5yE,OAAQ/gB,KAAKsxG,aACb3uF,UAAW,KACXksE,cAAe,EACf78C,YAAahyC,KAAKwyG,aAClBrkE,MAAO2mD,gBAAgBE,oBAEzBh1F,KAAK0xG,yBAA2B1xG,KAAKyxG,qBAAqBvhB,aAC1DlwF,KAAKuyG,uBAAyB,CAC5Bp6C,MAAO,kBAAkBn4D,KAAKwyG,eAC9BlgE,iBAAkB,CAChB,CACEupC,KAAM77E,KAAKwyG,aAAe,EAAIxyG,KAAKwxG,6BAA+B,KAClEvD,mBAAexsG,EACf6uF,OAAQ,QACRC,WAAY,CAAC,EAAG,EAAG,EAAG,GACtBC,QAAS,UAGb0d,uBAAwB,CACtBryB,KAAM77E,KAAK0xG,yBACXvD,YAAa,QACbC,gBAAiB,EACjBC,aAAc,QACdC,cAAe,QACfC,kBAAmB,EACnBC,eAAgB,SAGtB,ECr+BWwI,MAAAA,GAA+B,CAC1CnjC,SAAAA,IACS,SAETojC,UAAAA,MACW9nE,OAAO+nE,KAAOxD,UAAUC,eAAexkE,OAAO+nE,IAEzD,kBAAMC,CAAaplC,EAAKhxE,GACtB,IACE,MAAMq2G,ErDiOL,SAA0EtuF,GAC/E,OAAO,WAEL,OAAO,cAAgBA,EAErBhpB,WACA,WAAAC,IAAea,GACbgD,SAAShD,GACTZ,KAAKF,WAAa,IACpB,CAIAG,EAAAA,CAAsBC,EAASC,EAA+BC,GACxDD,EACFH,KAAKF,WAAaE,KAAKK,0BAA0BL,KAAKF,WAAYI,EAAMC,EAAU,CAChFC,QAASA,GAAW,KACpBE,MAAM,IAGRC,QAAQC,MAAM,2BAElB,CAIAF,IAAAA,CAAwBJ,EAASC,EAA+BC,GAC1DD,EACFH,KAAKF,WAAaE,KAAKK,0BAA0BL,KAAKF,WAAYI,EAAMC,EAAU,CAChFC,QAASA,GAAW,KACpBE,MAAM,IAGRC,QAAQC,MAAM,2BAElB,CAIAC,GAAAA,CAAuBP,EAASC,EAA+BC,GAC7DJ,KAAKU,6BAA6BV,KAAKF,WAAYI,EAAMC,EAAUC,GAAW,KAChF,CAIAO,aAAAA,CAAiCT,KAAYU,GAC3CZ,KAAKa,sBAAsBX,KAASU,EACtC,CAcAP,yBAAAA,CACES,EACAZ,EACAC,EACAY,GAEA,GAAoB,iBAATb,EACT,OAEGY,IACHA,EAAc,CAAC,GAEjB,MAAME,EAAyBb,EACzBc,EAA0B,IAAKF,GACrC,IAAIG,EAAWJ,EAAYZ,GAK3B,OAJKgB,IACHJ,EAAYZ,GAAQgB,EAAW,IAEjCA,EAASC,KAAK,CAAEC,QAASJ,EAAGD,QAASE,EAAGI,SAAS,IAC1CP,CACT,CAaAJ,4BAAAA,CACEI,EACAZ,EACAC,EACAC,GAEA,GAAoB,iBAATF,IAAsBY,EAC/B,OAEF,MAAME,EAAyBb,EACzBe,EAAWJ,EAAYZ,GAC7B,GAAIgB,EAAU,CACZ,IAAK,IAAII,EAAI,EAAGA,EAAIJ,EAASK,OAAQD,IAAK,CACxC,MAAMF,EAAUF,EAASI,GACzB,GAAIF,EAAQA,UAAYJ,GAAKI,EAAQL,QAAQX,UAAYA,EAAS,CAChEc,EAASM,OAAOF,EAAG,GACnB,KACF,CACF,CACwB,IAApBJ,EAASK,SACXT,EAAYZ,QAAQuB,EAExB,CACF,CAWAZ,qBAAAA,CAAyCX,KAAkBU,GACzD,IAAKZ,KAAKF,WACR,OAEF,MAAMoB,EAAWlB,KAAKF,WAAWI,GACjC,GAAIgB,GAAYA,EAASK,OAAS,EAAG,CACnC,MAAMG,EAAeR,EAASS,QAC9B,IAAK,MAAMP,KAAWM,EACpBN,EAAQA,QAAQQ,KAAKR,EAAQL,SAASX,SAAWJ,QAASY,GACtDQ,EAAQL,QAAQT,OAClBc,EAAQC,SAAU,GAGtB,IAAK,IAAIC,EAAIJ,EAASK,OAAS,EAAGD,GAAK,EAAGA,IACpCJ,EAASI,GAAGD,SACdH,EAASM,OAAOF,EAAG,EAGzB,CACF,EAEJ,CACF,CqDvXsB+1G,CAAetG,GAAfsG,GACVrpF,EAAS,IAAIopF,EAAQp3G,KAAM+xE,EAAKhxE,GAItC,aAHMitB,EAAOylF,cACbzlF,EAAOoqD,cACPpqD,EAAOqqD,aACArqD,CACT,CAAE,MAAOguC,GAEP,OADAz7D,QAAQC,MAAMw7D,GACP,IACT,CACF,ICxBD,iBACC,IAAKg7C,GAAcC,YAEjB,YADAK,MAAM,2CAIR,MAAMhyC,EAASK,SAAS4xC,cAAc,WAChCvpF,QAAegpF,GAAcG,aAAa7xC,GAC1CkyC,EAAgBxpF,EAAOiqC,mBAAmB,CAC9CE,MAAO,eACP+D,MAAAA,CAAOzlB,GACLz2C,KAAKqgE,QAAQrqD,IAAMygC,EAAGwZ,OAAOlkB,OAAO,YACpC/rC,KAAKqgE,QAAQo3C,QAAUhhE,EAAGwZ,OAAOlkB,OAAO,aACxC/rC,KAAKqgE,QAAQq3C,QAAUjhE,EAAGwZ,OAAOlkB,OAAO,aACxC0K,EAAGiiB,KACgB,WACf14D,KAAK+I,MAAQ0tC,EAAG6V,IAAI7V,EAAGjtC,MAAMxJ,KAAKqgE,QAAQq3C,QAAQ1zG,EAAGhE,KAAKqgE,QAAQq3C,QAAQxzG,IAC1ElE,KAAKmN,EAAIspC,EAAGppC,IAAIrN,KAAK+I,OACrB/I,KAAKmJ,EAAIstC,EAAGrtC,IAAIpJ,KAAK+I,OACrB/I,KAAKgE,EAAIyyC,EAAG/xC,IAAI+xC,EAAGvxC,IAAIlF,KAAKqgE,QAAQrqD,IAAIhS,EAAGhE,KAAKmN,GAAIspC,EAAGvxC,IAAIlF,KAAKqgE,QAAQrqD,IAAI9R,EAAGlE,KAAKmJ,IACpFnJ,KAAKkE,EAAIuyC,EAAG7xC,IAAI6xC,EAAGvxC,IAAIlF,KAAKqgE,QAAQrqD,IAAIhS,EAAGhE,KAAKmJ,GAAIstC,EAAGvxC,IAAIlF,KAAKqgE,QAAQrqD,IAAI9R,EAAGlE,KAAKmN,IACpFnN,KAAKogE,UAAUv1B,SAAW4L,EAAGuZ,KAAKvZ,EAAG7xC,IAAI5E,KAAKqgE,QAAQo3C,QAAShhE,EAAGwZ,KAAKjwD,KAAKgE,EAAGhE,KAAKkE,IAAK,EAAG,EAC9F,EAEJ,EACAq4D,QAAAA,CAAS9lB,GACPz2C,KAAK88D,SAASiQ,MAAQt2B,EAAGuZ,OACzBvZ,EAAGiiB,KAAK,WACN14D,KAAK88D,SAASiQ,MAAQt2B,EAAGuZ,KAAK,EAChC,EACF,IAEI2nD,EAAsB3pF,EAAOwqC,oBAAoB,CACrDL,MAAO,eACPzV,cAAe,CAAC,GAAI,EAAG,GACvBiZ,OAAAA,CAAQllB,GACN,MAAMmhE,EAAiBnhE,EAAG2iB,aAAa,CAAC3iB,EAAGwZ,KAAK,OAAQxZ,EAAGwZ,KAAK,QAAS,YACnE4nD,EAAephE,EAAG2iB,aACtB,CACE3iB,EAAGp5B,MAAM,UACTo5B,EAAGp5B,MAAM,iBACTo5B,EAAGp5B,MAAM,iBACTo5B,EAAGp5B,MAAM,iBACTo5B,EAAGp5B,MAAM,cACTo5B,EAAGp5B,MAAM,cACTo5B,EAAGp5B,MAAM,eAEX,aAEFrd,KAAKo4D,OAASy/C,IAAelyD,cAAc,GAC3C3lD,KAAK83G,WAAaF,EAAe,KAAK1xD,cAAc,GACpDlmD,KAAK+3G,WAAaH,EAAe,KAAK1xD,cAAc,GACpDzP,EAAGiiB,KACgB,WACf14D,KAAK49C,MAAQ59C,KAAKogE,UAAUznB,mBAAmB30C,EAC/ChE,KAAKg4G,KAAOh4G,KAAK83G,WAAWpxD,GAAG1mD,KAAK49C,OAAO5nC,IAC3ChW,KAAKi4G,KAAOj4G,KAAK83G,WAAWpxD,GAAG1mD,KAAK49C,OAAOs6D,IAC3Cl4G,KAAKm4G,MAAQ1hE,EAAGwZ,KAAK,GACrBjwD,KAAKo4G,KAAO3hE,EAAGwZ,KAAK,GACpBjwD,KAAKq4G,OAAS5hE,EAAGwZ,KAAK,GACtBjwD,KAAKs4G,WAAa7hE,EAAGkc,KAAK,GAC1B3yD,KAAKu4G,UAAY9hE,EAAGkc,KAAK,GACzB3yD,KAAKgW,IAAMygC,EAAGwZ,OACdjwD,KAAKk4G,IAAMzhE,EAAGwZ,OACdjwD,KAAKikE,KACHxtB,EAAGkc,KAAK,KACR,EACAlc,EAAGuW,YAAYhtD,KAAK83G,YACH,WACf93G,KAAK2jE,IACHltB,EAAGwV,MAAMjsD,KAAKsB,EAAGtB,KAAK49C,OACL,WACf59C,KAAKgkE,WACP,GAEFhkE,KAAKgW,IAAMhW,KAAK83G,WAAWpxD,GAAG1mD,KAAKsB,GAAG0U,IAAI9O,GAC1ClH,KAAKk4G,IAAMl4G,KAAK83G,WAAWpxD,GAAG1mD,KAAKsB,GAAG42G,IAAIhxG,GAC1ClH,KAAK2jE,IACHltB,EAAGkV,SAASlV,EAAGpwC,SAASrG,KAAKgW,IAAKhW,KAAKg4G,MAAOh4G,KAAKo4D,OAAOogD,eACzC,WACfx4G,KAAKm4G,MAAQ1hE,EAAG7xC,IAAI5E,KAAKm4G,MAAOn4G,KAAKgW,KACrChW,KAAKs4G,WAAa7hE,EAAG7xC,IAAI5E,KAAKs4G,WAAY,EAC5C,GAEFt4G,KAAK2jE,IACHltB,EAAGkV,SAASlV,EAAGpwC,SAASrG,KAAKgW,IAAKhW,KAAKg4G,MAAOh4G,KAAKo4D,OAAOqgD,eACzC,WACfz4G,KAAKq4G,OAAS5hE,EAAG/xC,IAAI1E,KAAKq4G,OAAQ5hE,EAAG/xC,IAAI1E,KAAKgW,IAAKhW,KAAKg4G,MAC1D,GAEFh4G,KAAK2jE,IACHltB,EAAGkV,SAASlV,EAAGpwC,SAASrG,KAAKgW,IAAKhW,KAAKg4G,MAAOh4G,KAAKo4D,OAAOsgD,eACzC,WACf14G,KAAKo4G,KAAO3hE,EAAG7xC,IAAI5E,KAAKo4G,KAAMp4G,KAAKk4G,KACnCl4G,KAAKu4G,UAAY9hE,EAAG7xC,IAAI5E,KAAKu4G,UAAW,EAC1C,EAEJ,GAEFv4G,KAAK2jE,IACHltB,EAAGoV,YAAY7rD,KAAKs4G,WAAY,GACf,WACft4G,KAAK24G,KAAOliE,EAAGp5B,MAAMrd,KAAKs4G,YAC1Bt4G,KAAKm4G,MAAQ1hE,EAAG/xC,IAAI+xC,EAAGrxC,IAAIpF,KAAKm4G,MAAO1hE,EAAGwZ,KAAKjwD,KAAK24G,OAAQ34G,KAAKg4G,KACnE,GAEFh4G,KAAK2jE,IACHltB,EAAGoV,YAAY7rD,KAAKu4G,UAAW,GACd,WACfv4G,KAAK24G,KAAOliE,EAAGp5B,MAAMrd,KAAKu4G,WAC1Bv4G,KAAKo4G,KAAO3hE,EAAGrxC,IAAIpF,KAAKo4G,KAAM3hE,EAAGwZ,KAAKjwD,KAAK24G,MAC7C,GAEF34G,KAAKi4G,KAAOxhE,EAAG7xC,IAAI5E,KAAKi4G,KAAMxhE,EAAGvxC,IAAIlF,KAAKm4G,MAAOn4G,KAAKo4D,OAAOwgD,aAC7D54G,KAAKi4G,KAAOxhE,EAAG7xC,IAAI5E,KAAKi4G,KAAMxhE,EAAGvxC,IAAIlF,KAAKq4G,OAAQr4G,KAAKo4D,OAAOygD,aAC9D74G,KAAKi4G,KAAOxhE,EAAG7xC,IAAI5E,KAAKi4G,KAAMxhE,EAAGvxC,IAAIlF,KAAKo4G,KAAMp4G,KAAKo4D,OAAO0gD,aAC5D94G,KAAKi4G,KAAOxhE,EAAGvxC,IAAIuxC,EAAGhxC,UAAUzF,KAAKi4G,MAAOxhE,EAAGqU,MAAMrU,EAAGl1C,OAAOvB,KAAKi4G,MAAO,EAAG,KAC9Ej4G,KAAKg4G,KAAOvhE,EAAG7xC,IAAI5E,KAAKg4G,KAAMvhE,EAAGvxC,IAAIlF,KAAKi4G,KAAMj4G,KAAKo4D,OAAO2gD,SAC5D/4G,KAAK2jE,IACHltB,EAAGkV,SAAS3rD,KAAKg4G,KAAKh0G,GAAI,GACT,WACfhE,KAAKg4G,KAAKh0G,EAAI,CAChB,GAEFhE,KAAK2jE,IACHltB,EAAGoV,YAAY7rD,KAAKg4G,KAAKh0G,EAAG,GACX,WACfhE,KAAKg4G,KAAKh0G,GAAK,CACjB,GAEFhE,KAAK2jE,IACHltB,EAAGkV,SAAS3rD,KAAKg4G,KAAK9zG,GAAI,GACT,WACflE,KAAKg4G,KAAK9zG,EAAI,CAChB,GAEFlE,KAAK2jE,IACHltB,EAAGoV,YAAY7rD,KAAKg4G,KAAK9zG,EAAG,GACX,WACflE,KAAKg4G,KAAK9zG,GAAK,CACjB,GAEFlE,KAAK+3G,WAAWrxD,GAAG1mD,KAAK49C,OAAO5nC,IAAMhW,KAAKg4G,KAC1Ch4G,KAAK+3G,WAAWrxD,GAAG1mD,KAAK49C,OAAOs6D,IAAMl4G,KAAKi4G,IAC5C,EAEJ,IAEIe,EAAqBhrF,EAAOgoD,mBAChC,iBACA,IAAIj0E,aAAa,EAAE,KAAO,IAAM,KAAO,IAAM,EAAK,OAE9Ck3G,EAAY,CAChBF,OAAQ,IACRP,cAAe,GACfC,cAAe,KACfC,cAAe,KACfE,WAAY,IACZC,WAAY,IACZC,WAAY,MAERnzD,EAAgBgyD,EAAoBx4B,oBAAoB,UACxD+5B,EAAe,KACfC,EAAsB,IAAIp3G,aAAam3G,KAC7C,IAAK,IAAI53G,EAAI,EAAGA,EAAI43G,IAAgB53G,EAClC63G,EAAoB,EAAI73G,EAAI,GAAK,GAAKkB,KAAKe,SAAW,IACtD41G,EAAoB,EAAI73G,EAAI,GAAK,GAAKkB,KAAKe,SAAW,IACtD41G,EAAoB,EAAI73G,EAAI,GAAK,GAAKkB,KAAKe,SAAW,IAAO,GAC7D41G,EAAoB,EAAI73G,EAAI,GAAK,GAAKkB,KAAKe,SAAW,IAAO,GAE/D,MAAM61G,EAAkB,GAClBC,EAAqB,GACrBC,EAAa,GACnB,IAAK,IAAIh4G,EAAI,EAAGA,EAAI,EAAGA,IACrB83G,EAAgBj4G,KACd6sB,EAAOkhD,8BAA8B,CAAC,aAAc,cAAeiqC,EAAqB,CACtFpzD,SAAS,KAIf,IAAK,IAAIzkD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMklF,EAAYx4D,EAAO+hD,gBAAgB4nC,EAAoBp/C,iBAAiB,IAC9EiuB,EAAUY,UAAU,SAAUzhC,GAC9B6gC,EAAUY,UAAU,aAAcgyB,EAAgB93G,IAClDklF,EAAUY,UAAU,aAAcgyB,GAAiB93G,EAAI,GAAK,IAC5D+3G,EAAmBl4G,KAAKqlF,GAExB,MAAM6f,EAAYr4E,EAAOwhD,mBAAmB,CAC1ChiC,cAAe,CACb,CACEM,OAAQkrE,EACR9qE,SAAU,UAEZ,CACEJ,OAAQsrE,EAAgB93G,GACxB4sC,SAAU,eAIhBorE,EAAWn4G,KAAKklG,EAClB,EAEA,WACE,IAAK,MAAM/5D,KAAK2sE,EACdtzD,EAAc72C,IAAIw9B,EAAG2sE,EAAU3sE,GAEnC,CACAitE,GACA,IAAI3tG,EAAI,EACRoiB,EAAOqpD,QAASrpD,IACdA,EAAO2/C,WAAWgqC,GAClB3pF,EAAOigD,aAAa,EAAGorC,EAAmBztG,EAAI,IAC9CoiB,EAAO2tC,QAAQn5D,KAAKioD,KAAKyuD,SAAoB,EAAG,GAEhDlrF,EAAOwmF,iBAAiB,IAAIjtG,EAAQ,EAAG,EAAG,EAAG,GAAI,EAAG,GACpDymB,EAAO2/C,WAAW6pC,GAClB8B,GAAY1tG,EAAI,GAAK,GAAGuqE,cAAc,gBAAiB,EAAG,EAAG+iC,GAC7DttG,IAEAoiB,EAAO8+C,SAAS,WAAW9+C,EAAO9tB,OAAQ,GAAI,GAAI,WAClD8tB,EAAO8+C,SAAS,QAAQ9+C,EAAO2lD,UAAUV,IAAIlwE,QAAQ,KAAM,GAAI,GAAI,YAEvE,CA9NC"}